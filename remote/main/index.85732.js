System.register("chunks:///_virtual/AchievementItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./AchievementSubItem.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var e,n,i,r,o,a,c,s,l,u,h,f,m,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.ScrollView,s=t.Prefab,l=t.instantiate,u=t.Component},function(t){h=t.QuestData},function(t){f=t.AchievementSubItem},function(t){m=t.EventListener},function(t){p=t.GameEvent}],execute:function(){var v,d,b,w,E,I,A;o._RF.push({},"c88dcG9GfZFlZiHC7G21V3E","AchievementItem",void 0);var L=a.ccclass,P=a.property;t("AchievementItem",(v=L("AchievementItem"),d=P(c),b=P(s),v((I=e((E=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"rewardList",I,r(e)),i(e,"rewardItem",A,r(e)),e}n(e,t);var o=e.prototype;return o.init=function(){this.setContent()},o.setContent=function(){var t=this,e=h.instance.achievements;0==this.rewardList.content.children.length?e.forEach((function(e,n){var i=l(t.rewardItem);i.getComponent(f).init(e),i.parent=t.rewardList.content})):this.rewardList.content.children.forEach((function(t,n){t.getComponent(f).init(e[n])}))},o.onEnable=function(){m.on(p.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)},o.onDisable=function(){m.off(p.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)},e}(u)).prototype,"rewardList",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(E.prototype,"rewardItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=E))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/AchievementSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardItem.ts","./QuestData.ts","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./LanguageManager.ts","./PlayerData.ts"],(function(e){var t,n,r,a,i,o,s,u,l,c,p,g,d,m,f,b,h,w,v,y,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,s=e.Label,u=e.ProgressBar,l=e.Node,c=e.Sprite,p=e.Color,g=e.UITransform,d=e.Vec3,m=e.Component},function(e){f=e.RewardItem},function(e){b=e.QuestData},function(e){h=e.HttpService},function(e){w=e.Api},function(e){v=e.OpenPopupManager},function(e){y=e.LanguageManager},function(e){I=e.PlayerData}],execute:function(){var A,P,S,z,L,M,R,B,D,V,E,T,_,C,H;i._RF.push({},"449322MGnZLoolVuyU5BdnB","AchievementSubItem",void 0);var N=o.ccclass,F=o.property;e("AchievementSubItem",(A=N("AchievementSubItem"),P=F(f),S=F(s),z=F(u),L=F(s),M=F(l),R=F(c),A((V=t((D=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"rewardItem",V,a(t)),r(t,"desc",E,a(t)),r(t,"progress",T,a(t)),r(t,"progressValue",_,a(t)),r(t,"buttons",C,a(t)),r(t,"itemBg",H,a(t)),t.data=void 0,t}n(t,e);var i=t.prototype;return i.init=function(e){this.data=e,this.rewardItem.init(e.rewards[0]),this.desc.string=y.instance.getLang(e.desc,[e.target]),this.progress.progress=e.num>=e.target?1:e.num/e.target,this.progressValue.string=e.num+"/"+e.target,this.buttons.children[0].active=e.num<e.target,this.buttons.children[1].active=e.num>=e.target,this.itemBg.color=e.num<e.target?new p(216,231,242,255):new p(255,252,83,255)},i.claimReward=function(){var e=this;h.instance.post(w.EVENT_ACHIEVEMENT_CLAIM,{groupId:this.data.groupId}).then((function(t){0==t.code?(I.instance.getPlayerInfo(!1),v.instance.showRewardPopup(e.data.rewards,null,(function(n){if(n){var r=e.node.getComponent(g).convertToWorldSpaceAR(new d(0,0,0));v.instance.showRewardAnimPopup(r,t.data.rewards)}})),b.instance.getEventInfo()):v.instance.showToast(t.msg)}))},t}(m)).prototype,"rewardItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(D.prototype,"desc",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(D.prototype,"progress",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(D.prototype,"progressValue",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(D.prototype,"buttons",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(D.prototype,"itemBg",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=D))||B));i._RF.pop()}}}));

System.register("chunks:///_virtual/ActivityPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./ScrollViewHelper.ts","./RankData2.ts","./RankGroupItem.ts"],(function(n){var t,o,e,i,c,r,p,u,a,l,s,f,h;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){c=n.cclegacy,r=n._decorator,p=n.ScrollView,u=n.Component},function(n){a=n.Constants},function(n){l=n.OpenPopupManager},function(n){s=n.ScrollViewHelper},function(n){f=n.RankData},function(n){h=n.RankGroupItem}],execute:function(){var v,P,y,w,R;c._RF.push({},"f35ca9MBdpGvKljuRhb5R9A","ActivityPopup",void 0);var g=r.ccclass,d=r.property;n("ActivityPopup",(v=g("ActivityPopup"),P=d(s),v((R=t((w=function(n){function t(){for(var t,o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return t=n.call.apply(n,[this].concat(c))||this,e(t,"scrollViewHelper",R,i(t)),t}o(t,n);var c=t.prototype;return c.show=function(){this.setScrollviewContent()},c.setScrollviewContent=function(){var n=f.instance.getProvinceRankData();this.scrollViewHelper.resetData(n,(function(n,t,o){t.getComponent(h).init(o)}),!0,null),this.scrollViewHelper.getComponent(p).scrollToTop()},c.onCloseBtn=function(){l.instance.hide(a.PopupUI.ActivityPopup)},c.onRankTouch=function(){l.instance.show(a.PopupUI.RankPopup)},c.onPositionTouch=function(){},c.onRuleTouch=function(){l.instance.show(a.PopupUI.AcitvityRulePopup)},c.onWeaponTouch=function(){l.instance.show(a.PopupUI.LimitTodayPopup)},t}(u)).prototype,"scrollViewHelper",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=w))||y));c._RF.pop()}}}));

System.register("chunks:///_virtual/AdManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./PlayerData.ts"],(function(n){var t,e,o,i,s,r,a;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,o=n._decorator},function(n){i=n.HttpService},function(n){s=n.Api},function(n){r=n.OpenPopupManager},function(n){a=n.PlayerData}],execute:function(){var c,u;e._RF.push({},"36136ZXzb9G6J7LMyXnX9NK","AdManager",void 0);var l=o.ccclass;o.property,n("AdManager",l("AdManager")(((u=function(){function n(){this.adController=null,this._sign=null}var e=n.prototype;return e.init=function(n){this.adController=window.Adsgram.init({blockId:n})},e.showGameAd=function(n,t,e){if(a.instance.userObj.isDebug)return this.reportAd(n,t),void e(0,this._sign,"");this.adController.show().then((function(n){console.log("showGameAd result",n),setTimeout((function(){e(0,this._sign,n)}),500)})).catch((function(n){console.log(n,"error");var t=n.description?n.description:n.toString();r.instance.showToast(t),e(1,"")}))},e.showAd=function(n,t,e){var o=this;i.instance.post(s.AD_REPORT,{type:n,subId:t}).then((function(n){if(0==n.code){var t=n.data.sign;if(a.instance.userObj.isDebug)return void e(t);o.adController.show().then((function(n){console.log("showAd result",n),setTimeout((function(){e(t,n)}),500)})).catch((function(n){console.log(n,"error");var t=n.description?n.description:n.toString();r.instance.showToast(t)}))}else r.instance.showToast(n.msg)}))},e.reportAd=function(n,t,e){var o=this;i.instance.post(s.AD_REPORT,{type:n,subId:t}).then((function(n){0==n.code&&(o._sign=n.data.sign)}))},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=null,c=u))||c),n("AdType",function(n){return n.BATTLE="battle",n.SHOP_BOX="boxShop",n.ENERGY="energy",n.SHOP_DIAMOND="diamondShop",n.SHOP_DAILY="dailyShop",n.SHOP_DAILY_REFRESH="dailyShopRefresh",n.LUCK_SPIN="luckSpin",n}({})),n("AdBattleType",function(n){return n[n.REVIVE=0]="REVIVE",n[n.REFRESH_GRID=1]="REFRESH_GRID",n[n.REFRESH_WEAPON=2]="REFRESH_WEAPON",n[n.COIN=3]="COIN",n[n.REFRESH_SKILL=4]="REFRESH_SKILL",n[n.GETALL_SKILL=5]="GETALL_SKILL",n[n.DOUBLE_SPEED=6]="DOUBLE_SPEED",n[n.ADVANCE_WEAPON=7]="ADVANCE_WEAPON",n[n.ADVANCE_GRID=8]="ADVANCE_GRID",n}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/AdTipsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./ResourcesUtil.ts","./GridData.ts","./LanguageManager.ts","./SpriteEx.ts","./PlayerData.ts","./AdManager.ts","./GameData.ts"],(function(t){var e,i,n,a,r,o,c,s,p,l,u,d,g,h,f,m,v,b,y,w,I,L,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,c=t.Label,s=t.Sprite,p=t.Node,l=t.UITransform,u=t.Layout,d=t.instantiate,g=t.UIOpacity,h=t.Component},function(t){f=t.Constants},function(t){m=t.OpenPopupManager},function(t){v=t.ResourcesUtil},function(t){b=t.GridData},function(t){y=t.LanguageManager},function(t){w=t.SpriteEx},function(t){I=t.PlayerData},function(t){L=t.AdBattleType},function(t){A=t.GameData}],execute:function(){var C,P,_,z,B,S,T,k,D,G,N,F,R,M,O,U,W;r._RF.push({},"7b6cfGTHlND17wc9mK9ZRk4","AdTipsPopup",void 0);var x=o.ccclass,E=o.property;t("AdTipsPopup",(C=x("AdTipsPopup"),P=E(c),_=E(c),z=E(s),B=E(s),S=E(p),T=E(s),k=E(w),C((N=e((G=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"title",N,a(e)),n(e,"desc",F,a(e)),n(e,"icon",R,a(e)),n(e,"gridIcon",M,a(e)),n(e,"gridList",O,a(e)),n(e,"coinIcon",U,a(e)),n(e,"watchIcon",W,a(e)),e._callBack=void 0,e._type=0,e}i(e,t);var r=e.prototype;return r.show=function(t,e,i){var n=this;if(this._type=t,this._callBack=i,this.icon.node.active=!1,this.coinIcon.node.active=!1,this.gridList.active=!1,I.instance.chapterObj.ticket>0?this.watchIcon.index=1:this.watchIcon.index=0,1==t){var a=f.weaponIconPath+e.res+"/spriteFrame";v.geSpriteFrame(a).then((function(t){n.icon.spriteFrame=t;var i=e.gridType.split("_"),a=Number(i[1]),r=Number(i[0]),o=b.instance.getGridSizeByRowCol(a,r),c=Math.min(2*b.instance.gridWidth/o.x,2*b.instance.gridWidth/o.y,1);n.icon.node.getComponent(l).setContentSize(o),n.icon.node.setScale(c,c),n.icon.node.active=!0})),this.desc.string=y.instance.getLang("game.watchAdGetWeapon")}else if(0==t){this.desc.string=y.instance.getLang("game.watchAdGetSlot"),this.gridList.removeAllChildren();var r=f.weaponIconPath+e.res+"/spriteFrame";v.getSpriteFrame(r).then((function(t){n.gridIcon.spriteFrame=t;var i=e.gridType.split("_"),a=b.instance.getGridSizeByRowCol(Number(i[1]),Number(i[0])),r=1;Number(i[0])>=3?r=.5:Number(i[0])>=2&&(r=.75);var o=e.points;n.gridList.getComponent(u).spacingX=b.instance.space*r,n.gridList.getComponent(u).spacingY=b.instance.space*r,n.gridList.getComponent(l).width=a.width*r,n.gridList.getComponent(l).height=a.height*r,n.gridList.getComponent(u).updateLayout(!0);var c=b.instance.getGridSize();c.width=r*c.width,c.height=r*c.height;for(var s=0;s<o.length;s++)for(var p=o[s],h=0;h<p.length;h++){var f=p[h],m=d(n.gridIcon.node);m.active=!0,m.parent=n.gridList,m.getComponent(l).setContentSize(c),m.getComponent(g).opacity=f?255:0}n.gridList.active=!0}))}else this.desc.string=y.instance.getLang("game.watchAdGetSilver"),this.coinIcon.node.active=!0,this.icon.node.active=!1},r.onCloseBtn=function(){this.gridList.removeAllChildren(),this.coinIcon.node.active=!1,this.icon.node.active=!1,this.gridList.active=!1,m.instance.hide(f.PopupUI.AdTipsPopup),this._callBack&&this._callBack(!1)},r.onWatchBtn=function(t){var e=this,i=L.COIN;if(0==this._type?i=L.ADVANCE_GRID:1==this._type&&(i=L.ADVANCE_WEAPON),I.instance.chapterObj.ticket>0){if(A.instance.spendTicket(i)){m.instance.hide(f.PopupUI.AdTipsPopup);var n=t.target.getWorldPosition();this._callBack&&this._callBack(!0,n)}}else A.instance.watchAd(i,(function(){m.instance.hide(f.PopupUI.AdTipsPopup);var i=t.target.getWorldPosition();e._callBack&&e._callBack(!0,i)}))},e}(h)).prototype,"title",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(G.prototype,"desc",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(G.prototype,"icon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(G.prototype,"gridIcon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(G.prototype,"gridList",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(G.prototype,"coinIcon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(G.prototype,"watchIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=G))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/AniBg.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,i,r,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.UITransform,r=t.tween,s=t.v3,c=t.Component}],execute:function(){var p;n._RF.push({},"82da1pt/NBJ85BeRNpJiBJe","AniBg",void 0);var u=o.ccclass;o.property,t("AniBg",u("AniBg")(p=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){this.node.getComponent(i).setContentSize(2e3,2e3),r(this.node).set({position:s(0,0,0)}).to(10,{position:s(403,202)}).union().repeatForever().start()},n}(c))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,i,a,c,r,s,l,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Node,a=t.BlockInputEvents,c=t.UITransform,r=t.UIOpacity,s=t.tween,l=t.v3,p=t.Component}],execute:function(){var d;n._RF.push({},"a05e5ex0PBBGKnHqFKc4eio","AnimationUI",void 0);var u=o.ccclass;o.property,t("AnimationUI",u("AnimationUI")(d=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this)._during=.1,e._blocker=null,e}e(n,t);var o=n.prototype;return o.onLoad=function(){var t=this.node.getChildByName("blocker");if(t)this._blocker=t;else{var e=new i("blocker");e.addComponent(a),e.addComponent(c),e.parent=this.node,e.getComponent(c).setContentSize(this.node.getComponent(c).contentSize),this._blocker=e}},o.close=function(t){var e=this;this._blocker.active=!0;var n=this.node.getChildByName("Bg"),o=this.node.getChildByName("Content");n.getComponent(r)||n.addComponent(r),s(n.getComponent(r)).to(this._during,{opacity:0},{easing:"backIn"}).start(),s(o).to(this._during,{scale:l(.5,.5,.5)}).call((function(){e._blocker.active=!1,t&&t()})).start()},o.open=function(t){var e=this;this._blocker.active=!0;var n=this.node.getChildByName("Bg"),o=this.node.getChildByName("Content");n.getComponent(r)?(n.getComponent(r).opacity=0,s(n.getComponent(r)).to(this._during,{opacity:255},{easing:"backOut"}).start()):(n.addComponent(r),n.getComponent(r).opacity=0,s(n.getComponent(r)).to(this._during,{opacity:255},{easing:"backOut"}).start()),o.setScale(.5,.5,.5),s(o).to(this._during,{scale:l(1,1,1)}).call((function(){e._blocker.active=!1,t&&t()})).start()},n}(p))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/Api.ts",["cc"],(function(e){var _,t;return{setters:[function(e){_=e.cclegacy,t=e._decorator}],execute:function(){var E,T;_._RF.push({},"0907bgJANRBBpK3vHm+NHxo","Api",void 0);var a=t.ccclass;t.property,e("Api",a("Api")(((T=function(){}).HOST="https://api.imweb3.social/",T.USER_INFO="/user/info",T.USER_PLAYER_INFO="/user/player/info",T.ASSET_BALANCE="/asset/balance",T.AUTH_LOGIN="/auth/login",T.EVENT_INFO="/event/info",T.EVENT_QUEST_FINISH="/event/quest/finish",T.EVENT_QUEST_CLAIM="/event/quest/claim",T.EVENT_SIGN_CLAIM="/event/sign/claim",T.EVENT_ACHIEVEMENT_CLAIM="event/achievement/claim",T.SHOP_INFO="/shop/info",T.SHOP_DAILY_BUY="/shop/buy",T.SHOP_BOX_BUY="/shop/box/buy",T.SHOP_GOLD_BUY="/shop/gold/buy",T.SHOP_DIAMOND_PREBUY="/shop/diamond/prebuy",T.SHOP_DIAMOND_BUY="/shop/diamond/buy",T.SHOP_DAILY_REFRESH="/shop/daily/refresh",T.SHOP_ENERGY_BUY="chapter/energy/buy",T.PYAMENT_BILL_INFO="payment/bill/info",T.CHAPTER_INFO="chapter/info",T.CHAPTER_CLAIM="chapter/claim",T.CHAPTER_BATTLE_START="chapter/battle/start",T.CHAPTER_BATTLE_REPORT="chapter/battle/report",T.CHAPTER_BATTLE_SETTLE="chapter/battle/settle",T.CHAPTER_BATTLE_REBORN="chapter/battle/reborn",T.CHAPTER_BATTLE_RAID="chapter/battle/raid",T.CHAPTER_BATTLE_REVIVE="chapter/battle/revive",T.WEAPON_INFO="weapon/info",T.WEAPON_LEVELUP="weapon/levelup",T.WEAPON_EQUIP="weapon/equip",T.CHAPTER_BATTLE_TICKET="chapter/battle/ticket",T.CHAPTER_BATTLE_AD="chapter/battle/ad",T.HERO_INFO="hero/info",T.HERO_UNLOCK="hero/unlock",T.HERO_LEVELUP="hero/levelup",T.HERO_AWAKE="hero/awake",T.HERO_SET="hero/set",T.TOPUP_MONTHLY_PASS_INFO="topup/pass/info",T.TOPUP_MONTHLY_PASS_PREBUY="topup/pass/prebuy",T.TOPUP_MONTHLY_PASS_CLAIM="topup/pass/claim",T.TOPUP_FUND_INFO="topup/fund/info",T.TOPUP_FUND_PREBUY="topup/fund/prebuy",T.TOPUP_FUND_CLAIM="topup/fund/claim",T.TOPUP_FIRST_INFO="topup/first/info",T.TOPUP_FIRST_PREBUY="topup/first/prebuy",T.TOPUP_FIRST_CLAIM="topup/first/claim",T.ITEM_LIST="item/list",T.FRENS_INFO="frens/info",T.FRENS_LIST="frens/list",T.FRENS_INVITEES="/frens/invitees",T.AD_REPORT="ad/report",T.WALLET_WITHDRAW="/asset/withdraw",T.USER_AVATARS="user/avatars",T.USER_EDIT_AVATAR="user/edit/avatar",T.USER_EDIT_NAME="user/edit/name",T.USER_PROFILE="user/profile",T.LUCKSPIN_INFO="luckSpin/info",T.LUCKSPIN_DRAW="luckSpin/draw",T.MAIL_LIST="mail/list",T.MAIL_READ="mail/read",E=T))||E);_._RF.pop()}}}));

System.register("chunks:///_virtual/AreaItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,i,n,a,o,l,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,p=e.Component}],execute:function(){var c,u,s,b,g,f,h,y,m,v,d;a._RF.push({},"284adkGFBVB7KEuWshJZiCb","AreaItem",void 0);var k=o.ccclass,z=o.property;e("AreaItem",(c=k("AreaItem"),u=z(l),s=z(l),b=z(l),g=z(l),c((y=r((h=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,i(r,"rank",y,n(r)),i(r,"province",m,n(r)),i(r,"rate",v,n(r)),i(r,"people",d,n(r)),r}return t(r,e),r.prototype.init=function(e){this.rank.string=e.rank.toString(),this.province.string=e.province,this.rate.string=e.rate,this.people.string=e.people.toString()},r}(p)).prototype,"rank",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=r(h.prototype,"province",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=r(h.prototype,"rate",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=r(h.prototype,"people",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/AssetModel.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"47294LhiOBOI6RucZJfjiFz","AssetModel",void 0);t("AssetModel",(function(){this.ticket=0,this.gold=0,this.diamond=0,this.address=""}));s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesUtil.ts","./CfgMgr.ts","./SoundModel.ts","./Configuration.ts","./Constants.ts"],(function(t){var e,i,s,u,n,o,c,r,a,h,l,m,d,p,f,_;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,i=t.createClass,s=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){n=t.cclegacy,o=t.Node,c=t.director,r=t.Button,t.Toggle,a=t.AudioSource,h=t.assetManager,l=t.AudioClip},function(t){m=t.ResourcesUtil},function(t){d=t.CfgMgr},function(t){p=t.SoundCfg},function(t){f=t.Configuration},function(t){_=t.Constants}],execute:function(){n._RF.push({},"05fc0Ua1slE04pfKYS6Neg/","AudioManager",void 0),t("AudioManager",function(){function t(){this.dictWeaponSoundIndex={},this.mainVolume=1,this._musicVolume=1,this._soundVolume=1,this._musicSwitch=1,this._soundSwitch=1,this._mapSound=new Map,this._mapMusic=new Map,this._persistRootNode=null,this._musicSource=null,this._curSounds=[]}var n=t.prototype;return n.init=function(){if(!this._persistRootNode){this._persistRootNode=new o("audio"),c.getScene().addChild(this._persistRootNode),c.addPersistRootNode(this._persistRootNode),this.SetButtonSound(),this._musicSwitch=this.getAudioSetting(!0)?1:0,this._soundSwitch=this.getAudioSetting(!1)?1:0;var t=f.instance.getConfigData("musicVolume");this.musicVolume=t&&Number(t)<=1&&Number(t)>=0?Number(t):1;var e=f.instance.getConfigData("soundVolume");this.soundVolume=e&&Number(e)<=1&&Number(e)>=0?Number(e):1}},n.SetButtonSound=function(){r.prototype.touchBeganClone||(r.prototype.touchBeganClone=r.prototype._onTouchEnded,r.prototype._onTouchEnded=function(e){this.interactable&&this.enabledInHierarchy&&t.instance.playSound(3),this.touchBeganClone(e)})},n._setCurMusicVolume=function(){for(var t,i=e(this._mapMusic.values());!(t=i()).done;){t.value.volume=this.musicVolume}},n._setCurSoundVolume=function(){for(var t,i=this,s=e(this._mapSound.values());!(t=s()).done;){t.value.forEach((function(t){t.volume=i.soundVolume}))}},n.getAudioSetting=function(t){var e;return!(e=t?f.instance.getConfigData("music"):f.instance.getConfigData("sound"))||"true"===e},n._getAudioSource=function(t){var e,i=this;return this._mapSound.forEach((function(s,u){if(t.name!=u);else if(s.length>0){var n=s.pop();e=n,i._mapSound.set(u,s)}})),e||(e=this._persistRootNode.addComponent(a)),e.clip=t,e.currentTime=0,e},n.playMusic=function(){var t=s(u().mark((function t(e,i,s){var n,o,c,r,h,d;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this._geAudioNameById(e)){t.next=3;break}return t.abrupt("return");case 3:if(o=n.Mp3,c=_.AUDIO_FILE_PATH.MUSIC+o,(r=this._musicSource)&&r.stop(),!r||r.clip.name!=o){t.next=10;break}t.next=23;break;case 10:if(!this._mapMusic.get(o)){t.next=15;break}r&&!this._mapMusic.get(r.clip.name)&&this._mapMusic.set(r.clip.name,r),r=this._mapMusic.get(o),t.next=23;break;case 15:if(h=this._getExistMusicSource(o)){t.next=22;break}return t.next=19,m.loadResNew(c,l);case 19:d=t.sent,(h=this._getExistMusicSource(o))||((h=this._persistRootNode.addComponent(a)).clip=d,this._mapMusic.set(o,h));case 22:r=h;case 23:r.currentTime=0,r.volume=n.Volume*this.musicVolume,r.loop=i,r.playOnAwake=!1,this._musicSource=r,this._musicSwitch&&r.play(),s&&s();case 30:case"end":return t.stop()}}),t,this)})));return function(e,i,s){return t.apply(this,arguments)}}(),n._getExistMusicSource=function(t){for(var e=this._persistRootNode.components.length-1;e>=0;e--){var i=this._persistRootNode.components[e];if(i instanceof a&&i.clip.name==t)return i}return null},n._geAudioNameById=function(t){return d.getDataById(new p,t)},n.playSound=function(){var t=s(u().mark((function t(e,i,s){var n,o,c,r,a,h=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i&&(i=!1),n=this._geAudioNameById(e)){t.next=4;break}return t.abrupt("return");case 4:return o=n.Mp3,c=_.AUDIO_FILE_PATH.SOUND+o,t.next=8,m.loadResNew(c,l);case 8:r=t.sent,(a=this._getAudioSource(r)).volume=n.Volume*this.soundVolume,a.loop=i,a.playOnAwake=!1,this._curSounds.push(a),this._soundSwitch&&(a.play(),setTimeout((function(){if(h._curSounds.indexOf(a)>=0&&h._curSounds.splice(h._curSounds.indexOf(a),1),h._mapSound.get(o)){var t=h._mapSound.get(o);t.push(a),h._mapSound.set(o,t)}else h._mapSound.set(o,[a]);null==s||s()}),1e3*a.duration));case 15:case"end":return t.stop()}}),t,this)})));return function(e,i,s){return t.apply(this,arguments)}}(),n.isSoundPlaying=function(t){return this._curSounds.some((function(e){var i;return(null==(i=e.clip)?void 0:i.name)==t}))},n.isMusicExist=function(t){return null!=this._mapMusic.get(t)},n.isMusicPlaying=function(t){return this._musicSource&&this._musicSource.clip.name==t&&this._musicSource.playing},n.preLoadMusics=function(){var t=s(u().mark((function t(e){var i,s,n,o,c,r,h;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<e.length)){t.next=15;break}if(s=e[i],n=this._geAudioNameById(s)){t.next=6;break}return t.abrupt("continue",12);case 6:return o=n.Mp3,c=_.AUDIO_FILE_PATH.MUSIC+o,t.next=10,m.loadResNew(c,l);case 10:(r=t.sent)&&((h=this._persistRootNode.addComponent(a)).clip=r,this._mapMusic.set(o,h));case 12:i++,t.next=1;break;case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.switchMusic=function(t){t?this.resumeMusic():this.stopMusic(),f.instance.setConfigData("music",""+t)},n.switchSound=function(t){t?this.resumeSound():this.pauseSound(),f.instance.setConfigData("sound",""+t)},n.stopAllAudio=function(){this.stopMusic(),this.pauseSound()},n.stopMusic=function(){this._musicSwitch=0,this._musicSource&&this._musicSource.pause()},n.stopAllMusic=function(){for(var t,i=e(this._mapMusic.values());!(t=i()).done;){var s=t.value;s&&s.playing&&s.stop()}},n.destroyMusic=function(){this._musicSource.clip&&(this._mapMusic.has(this._musicSource.clip.name)&&this._mapMusic.delete(this._musicSource.clip.name),this._musicSource&&(this._musicSource.destroy(),this._musicSource=null))},n.pauseSound=function(){this._soundSwitch=0,this._curSounds.forEach((function(t){t.playing&&t.pause()}))},n.stopAllSound=function(){for(var t,i=e(this._mapSound.values());!(t=i()).done;){var s=t.value;s&&s.length&&s.forEach((function(t){t&&t.playing&&t.stop()}))}for(var u=0;u<this._curSounds.length;u++){var n=this._curSounds[u];n&&n.playing&&n.stop()}},n.stopSoundArr=function(t){for(var i,s=e(this._mapSound.values());!(i=s()).done;){var u=i.value;u&&u.length&&u.forEach((function(e){e&&e.playing&&-1!=t.indexOf(e.clip.name)&&e.stop()}))}for(var n=0;n<this._curSounds.length;n++){var o=this._curSounds[n];o&&o.playing&&-1!=t.indexOf(o.clip.name)&&o.stop()}},n.stopMusicArr=function(t){for(var i,s=e(this._mapMusic.values());!(i=s()).done;){var u=i.value;u&&u.playing&&-1!=t.indexOf(u.clip.name)&&u.stop()}},n.resumeAll=function(){this.resumeMusic(),this.resumeSound()},n.resumeMusic=function(){this._musicSwitch=1,this._musicSource&&(this._musicSource.volume=this.musicVolume,this._musicSource.play())},n.resumeSound=function(){var t=this;this._soundSwitch=1,this._curSounds.forEach((function(e){e.state==a.AudioState.PAUSED&&(e.volume=t.soundVolume,e.play())}))},n.removeMusic=function(t){for(var e=0;e<t.length;e++){var i=t[e],s=this._mapMusic.get(i);this._mapMusic.delete(i),s&&(h.releaseAsset(s.clip),s.destroy(),this._mapMusic[i]=null)}},n.removeSound=function(t){for(var e=0;e<t.length;e++){var i=t[e],s=this._mapSound.get(i);s&&s.length&&(this._mapSound.delete(i),s.forEach((function(t){h.releaseAsset(t.clip),t.destroy()})))}},n.setMusic=function(t){this.musicVolume=t;for(var i,s=e(this._mapMusic.values());!(i=s()).done;){var u=i.value;u&&(u.volume=this.musicVolume*this.mainVolume)}},n.setMusicWithoutSave=function(t){for(var i,s=e(this._mapMusic.values());!(i=s()).done;){var u=i.value;u&&(u.volume=t*this.mainVolume)}},n.setSound=function(t){var i=this;this.soundVolume=t;for(var s,u=e(this._mapSound.values());!(s=u()).done;){var n=s.value;n&&n.length&&n.forEach((function(t){t.volume=i.soundVolume*i.mainVolume}))}for(var o=0;o<this._curSounds.length;o++){this._curSounds[o].volume=this.soundVolume*this.mainVolume}},i(t,[{key:"musicSource",get:function(){return this._musicSource}},{key:"musicVolume",get:function(){return this._musicVolume*this._musicSwitch},set:function(t){this._musicVolume=t,f.instance.setConfigData("musicVolume",t.toFixed(2)),this._setCurMusicVolume()}},{key:"soundVolume",get:function(){return this._soundVolume*this._soundSwitch},set:function(t){this._soundVolume=t,f.instance.setConfigData("soundVolume",t.toFixed(2)),this._setCurSoundVolume()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/AvatarItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts","./UserData.ts"],(function(e){var t,a,r,i,n,o,c,s,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,c=e.Node,s=e.Component},function(e){l=e.SpriteEx},function(e){u=e.UserData}],execute:function(){var p,v,f,d,h,y,b,m,k;n._RF.push({},"7fe20m1EetKZpzqBReCkzHr","AvatarItem",void 0);var g=o.ccclass,z=o.property;e("AvatarItem",(p=g("AvatarItem"),v=z(c),f=z(l),d=z(c),p((b=t((y=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(t,"checkedNode",b,i(t)),r(t,"avatar",m,i(t)),r(t,"useMask",k,i(t)),t}a(t,e);var n=t.prototype;return n.init=function(e,t){this.avatar.index=e,this.useMask.active=t.Id==u.instance.userInfo.avatar},n.checkAvatar=function(e){this.checkedNode.active=e},t}(s)).prototype,"checkedNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(y.prototype,"avatar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(y.prototype,"useMask",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/AvatarNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts"],(function(e){var t,r,n,i,o,a,l,c,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Sprite,c=e.Color,s=e.Component},function(e){p=e.SpriteEx}],execute:function(){var u,f,v,w,b,d,h;o._RF.push({},"0e1dbkCJ69LKJ1sScXmRfw3","AvatarNode",void 0);var y=a.ccclass,g=a.property;e("AvatarNode",(u=y("AvatarNode"),f=g(l),v=g(p),u((d=t((b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"bg",d,i(t)),n(t,"avatar",h,i(t)),t.colors=[new c(20,126,238,255),new c(81,204,255,255),new c(249,157,64,255),new c(88,188,254,255),new c(242,194,56,255),new c(173,116,208,255),new c(112,173,50,255),new c(224,74,84,255)],t}return r(t,e),t.prototype.init=function(e){this.bg.color=this.colors[e],this.avatar.index=e},t}(s)).prototype,"bg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=t(b.prototype,"avatar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=b))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/AvatarPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AvatarItem.ts","./OpenPopupManager.ts","./Constants.ts","./UserData.ts","./AvatarsModel.ts","./HttpService.ts","./Api.ts","./CfgMgr.ts","./EventListener.ts","./GameEvent.ts","./SpriteEx.ts"],(function(t){var e,a,n,i,r,o,c,s,u,l,p,f,v,h,b,d,m,A,g,I,y,P,C,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,c=t.Label,s=t.Node,u=t.Prefab,l=t.Button,p=t.instantiate,f=t.Component},function(t){v=t.AvatarItem},function(t){h=t.OpenPopupManager,b=t.LayerType},function(t){d=t.Constants},function(t){m=t.UserData},function(t){A=t.AvatarsObj},function(t){g=t.HttpService},function(t){I=t.Api},function(t){y=t.CfgMgr},function(t){P=t.EventListener},function(t){C=t.GameEvent},function(t){T=t.SpriteEx}],execute:function(){var w,E,N,z,D,_,k,S,U,L,M,B,R,x,H,O,F,V,j,G,q,Y,J;r._RF.push({},"e7bb10+DfFHbIStR1PYq0Ik","AvatarPopup",void 0);var K=o.ccclass,Q=o.property;t("AvatarPopup",(w=K("AvatarPopup"),E=Q(T),N=Q(c),z=Q(c),D=Q(c),_=Q(s),k=Q(s),S=Q(s),U=Q(s),L=Q(u),M=Q(l),w((x=e((R=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"avatar",x,i(e)),n(e,"username",H,i(e)),n(e,"position",O,i(e)),n(e,"tip",F,i(e)),n(e,"avatarNode",V,i(e)),n(e,"frameNode",j,i(e)),n(e,"avatarContent",G,i(e)),n(e,"frameContent",q,i(e)),n(e,"avatarItem",Y,i(e)),n(e,"useBtn",J,i(e)),e.checkedAvatarId=0,e}a(e,t);var r=e.prototype;return r.show=function(){m.instance.init(),this.updateName(),this.avatar.index=m.instance.userInfo.avatar},r.init=function(){var t=this;0==this.avatarContent.children.length?m.instance.avatarIds.forEach((function(e,a){var n=y.getDataById(new A,e),i=p(t.avatarItem);i.getComponent(v).init(a,n),i.on("click",(function(a){t.selectAvatar(a),t.checkedAvatarId=e,t.tip.string=n.desc,t.useBtn.interactable=e!=m.instance.userInfo.avatar})),i.parent=t.avatarContent})):this.avatarContent.children.forEach((function(t,e){var a=y.getDataById(new A,m.instance.avatarIds[e]);t.getComponent(v).init(e,a)}))},r.updateName=function(){this.username.string=m.instance.userInfo.name},r.onTabTouch=function(t,e){this.avatarNode.active="avatar"==e,this.frameContent.active="frame"==e},r.onCloseTouch=function(){h.instance.hide(d.PopupUI.AvatarPopup)},r.selectAvatar=function(t){this.avatarContent.children.forEach((function(t,e){t.getComponent(v).checkAvatar(!1)})),t.target.getComponent(v).checkAvatar(!0)},r.setPosition=function(){h.instance.show(d.PopupUI.SetPositionPopup,null,b.TOP,!1)},r.onUseTouch=function(){var t=this;g.instance.post(I.USER_EDIT_AVATAR,{avatar:this.checkedAvatarId}).then((function(e){0==e.code?(m.instance.userInfo.avatar=t.checkedAvatarId,t.avatar.index=t.checkedAvatarId,t.init()):h.instance.showToast(e.msg)}))},r.editUsername=function(){h.instance.show(d.PopupUI.EditNamePopup)},r.onEnable=function(){P.on(C.INIT_AVATAR_LIST,this.init,this),P.on(C.UPDATE_NAME,this.updateName,this)},r.onDisable=function(){P.off(C.INIT_AVATAR_LIST,this.init,this),P.off(C.UPDATE_NAME,this.updateName,this)},e}(f)).prototype,"avatar",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(R.prototype,"username",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(R.prototype,"position",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(R.prototype,"tip",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(R.prototype,"avatarNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(R.prototype,"frameNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(R.prototype,"avatarContent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(R.prototype,"frameContent",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(R.prototype,"avatarItem",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(R.prototype,"useBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=R))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/AvatarsModel.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"11e77Rf2cBG05+N2CT9/S8E","AvatarsModel",void 0);t("AvatarsObj",(function(){this.ClassName="Avatars",this.Id=void 0,this.type=void 0,this.desc=void 0}));s._RF.pop()}}}));

System.register("chunks:///_virtual/axios.js",["./cjs-loader.mjs"],(function(e,t){var r;return{setters:[function(e){r=e.default}],execute:function(){e("default",void 0);var n=e("__cjsMetaURL",t.meta.url);r.define(n,(function(t,r,n,o,i){var a,s;a=this,s=function(){function e(e){var r,n;function o(r,n){try{var a=e[r](n),s=a.value,u=s instanceof t;Promise.resolve(u?s.v:s).then((function(t){if(u){var n="return"===r?"return":"next";if(!s.k||t.done)return o(n,t);t=e[n](t).value}i(a.done?"return":"normal",t)}),(function(e){o("throw",e)}))}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?o(r.key,r.arg):n=null}this._invoke=function(e,t){return new Promise((function(i,a){var s={key:e,arg:t,resolve:i,reject:a,next:null};n?n=n.next=s:(r=n=s,o(e,t))}))},"function"!=typeof e.return&&(this.return=void 0)}function t(e,t){this.v=e,this.k=t}function r(e){var r={},n=!1;function o(r,o){return n=!0,o=new Promise((function(t){t(e[r](o))})),{done:!1,value:new t(o,1)}}return r["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},r.next=function(e){return n?(n=!1,e):o("next",e)},"function"==typeof e.throw&&(r.throw=function(e){if(n)throw n=!1,e;return o("throw",e)}),"function"==typeof e.return&&(r.return=function(e){return n?(n=!1,e):o("return",e)}),r}function n(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new o(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function o(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(o=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new o(e)}function i(e){return new t(e,0)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(){u=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:T(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};f(w,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(L([])));O&&O!==r&&n.call(O,a)&&(w=O);var S=g.prototype=m.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function r(o,i,a,s){var u=h(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function T(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=j(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=h(t,r,n);if("normal"===c.type){if(o=n.done?y:"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=f(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,f(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(R.prototype),f(R.prototype,s,(function(){return this})),t.AsyncIterator=R,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new R(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),f(S,c,"Generator"),f(S,a,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function c(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,s,"next",e)}function s(e){l(i,n,o,a,s,"throw",e)}a(void 0)}))}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function y(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return b(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||w(e,t)||O()}function b(e){if(Array.isArray(e))return e}function g(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function w(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){return function(){return e.apply(t,arguments)}}e.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)};var x,R=Object.prototype.toString,T=Object.getPrototypeOf,j=(x=Object.create(null),function(e){var t=R.call(e);return x[t]||(x[t]=t.slice(8,-1).toLowerCase())}),k=function(e){return e=e.toLowerCase(),function(t){return j(t)===e}},A=function(e){return function(t){return f(t)===e}},P=Array.isArray,L=A("undefined"),_=k("ArrayBuffer"),N=A("string"),C=A("function"),F=A("number"),U=function(e){return null!==e&&"object"===f(e)},D=function(e){if("object"!==j(e))return!1;var t=T(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},B=k("Date"),I=k("File"),q=k("Blob"),M=k("FileList"),z=k("URLSearchParams"),H=m(["ReadableStream","Request","Response","Headers"].map(k),4),J=H[0],W=H[1],G=H[2],K=H[3];function V(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.allOwnKeys,a=void 0!==i&&i;if(null!=e)if("object"!==f(e)&&(e=[e]),P(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{var s,u=a?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;for(r=0;r<c;r++)s=u[r],t.call(null,e[s],s,e)}}function X(e,t){t=t.toLowerCase();for(var r,n=Object.keys(e),o=n.length;o-- >0;)if(t===(r=n[o]).toLowerCase())return r;return null}var $,Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Q=function(e){return!L(e)&&e!==Y},Z=($="undefined"!=typeof Uint8Array&&T(Uint8Array),function(e){return $&&e instanceof $}),ee=k("HTMLFormElement"),te=function(e){var t=Object.prototype.hasOwnProperty;return function(e,r){return t.call(e,r)}}(),re=k("RegExp"),ne=function(e,t){var r=Object.getOwnPropertyDescriptors(e),n={};V(r,(function(r,o){var i;!1!==(i=t(r,o,e))&&(n[o]=i||r)})),Object.defineProperties(e,n)},oe="abcdefghijklmnopqrstuvwxyz",ie="0123456789",ae={DIGIT:ie,ALPHA:oe,ALPHA_DIGIT:oe+oe.toUpperCase()+ie},se=k("AsyncFunction"),ue={isArray:P,isArrayBuffer:_,isBuffer:function(e){return null!==e&&!L(e)&&null!==e.constructor&&!L(e.constructor)&&C(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"==typeof FormData&&e instanceof FormData||C(e.append)&&("formdata"===(t=j(e))||"object"===t&&C(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_(e.buffer)},isString:N,isNumber:F,isBoolean:function(e){return!0===e||!1===e},isObject:U,isPlainObject:D,isReadableStream:J,isRequest:W,isResponse:G,isHeaders:K,isUndefined:L,isDate:B,isFile:I,isBlob:q,isRegExp:re,isFunction:C,isStream:function(e){return U(e)&&C(e.pipe)},isURLSearchParams:z,isTypedArray:Z,isFileList:M,forEach:V,merge:function e(){for(var t=Q(this)&&this||{},r=t.caseless,n={},o=function(t,o){var i=r&&X(n,o)||o;D(n[i])&&D(t)?n[i]=e(n[i],t):D(t)?n[i]=e({},t):P(t)?n[i]=t.slice():n[i]=t},i=0,a=arguments.length;i<a;i++)arguments[i]&&V(arguments[i],o);return n},extend:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.allOwnKeys;return V(t,(function(t,n){r&&C(t)?e[n]=S(t,r):e[n]=t}),{allOwnKeys:o}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:function(e,t,r,n){var o,i,a,s={};if(t=t||{},null==e)return t;do{for(i=(o=Object.getOwnPropertyNames(e)).length;i-- >0;)a=o[i],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==r&&T(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:j,kindOfTest:k,endsWith:function(e,t,r){e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return-1!==n&&n===r},toArray:function(e){if(!e)return null;if(P(e))return e;var t=e.length;if(!F(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r},forEachEntry:function(e,t){for(var r,n=(e&&e[Symbol.iterator]).call(e);(r=n.next())&&!r.done;){var o=r.value;t.call(e,o[0],o[1])}},matchAll:function(e,t){for(var r,n=[];null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:ee,hasOwnProperty:te,hasOwnProp:te,reduceDescriptors:ne,freezeMethods:function(e){ne(e,(function(t,r){if(C(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;var n=e[r];C(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:function(e,t){var r={},n=function(e){e.forEach((function(e){r[e]=!0}))};return P(e)?n(e):n(String(e).split(t)),r},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r}))},noop:function(){},toFiniteNumber:function(e,t){return null!=e&&Number.isFinite(e=+e)?e:t},findKey:X,global:Y,isContextDefined:Q,ALPHABET:ae,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae.ALPHA_DIGIT,r="",n=t.length;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&C(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(r,n){if(U(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[n]=r;var o=P(r)?[]:{};return V(r,(function(t,r){var i=e(t,n+1);!L(i)&&(o[r]=i)})),t[n]=void 0,o}}return r}(e,0)},isAsyncFn:se,isThenable:function(e){return e&&(U(e)||C(e))&&C(e.then)&&C(e.catch)}};function ce(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}ue.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var fe=ce.prototype,le={};function he(e){return ue.isPlainObject(e)||ue.isArray(e)}function pe(e){return ue.endsWith(e,"[]")?e.slice(0,-2):e}function de(e,t,r){return e?e.concat(t).map((function(e,t){return e=pe(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){le[e]={value:e}})),Object.defineProperties(ce,le),Object.defineProperty(fe,"isAxiosError",{value:!0}),ce.from=function(e,t,r,n,o,i){var a=Object.create(fe);return ue.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),ce.call(a,e.message,t,r,n,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};var ye=ue.toFlatObject(ue,{},null,(function(e){return/^is[A-Z]/.test(e)}));function ve(e,t,r){if(!ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var n=(r=ue.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ue.isUndefined(t[e])}))).metaTokens,o=r.visitor||c,i=r.dots,a=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&ue.isSpecCompliantForm(t);if(!ue.isFunction(o))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(ue.isDate(e))return e.toISOString();if(!s&&ue.isBlob(e))throw new ce("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(e)||ue.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,o){var s=e;if(e&&!o&&"object"===f(e))if(ue.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(ue.isArray(e)&&function(e){return ue.isArray(e)&&!e.some(he)}(e)||(ue.isFileList(e)||ue.endsWith(r,"[]"))&&(s=ue.toArray(e)))return r=pe(r),s.forEach((function(e,n){!ue.isUndefined(e)&&null!==e&&t.append(!0===a?de([r],n,i):null===a?r:r+"[]",u(e))})),!1;return!!he(e)||(t.append(de(o,r,i),u(e)),!1)}var l=[],h=Object.assign(ye,{defaultVisitor:c,convertValue:u,isVisitable:he});if(!ue.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!ue.isUndefined(r)){if(-1!==l.indexOf(r))throw Error("Circular reference detected in "+n.join("."));l.push(r),ue.forEach(r,(function(r,i){!0===(!(ue.isUndefined(r)||null===r)&&o.call(t,r,ue.isString(i)?i.trim():i,n,h))&&e(r,n?n.concat(i):[i])})),l.pop()}}(e),t}function me(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function be(e,t){this._pairs=[],e&&ve(e,this,t)}var ge=be.prototype;function we(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ee(e,t,r){if(!t)return e;var n,o=r&&r.encode||we,i=r&&r.serialize;if(n=i?i(t,r):ue.isURLSearchParams(t)?t.toString():new be(t,r).toString(o)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}ge.append=function(e,t){this._pairs.push([e,t])},ge.toString=function(e){var t=e?function(t){return e.call(this,t,me)}:me;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Oe,Se=function(){function e(){p(this,e),this.handlers=[]}return y(e,[{key:"use",value:function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){ue.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),xe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Re={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:be,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Te="undefined"!=typeof window&&"undefined"!=typeof document,je=(Oe="undefined"!=typeof navigator&&navigator.product,Te&&["ReactNative","NativeScript","NS"].indexOf(Oe)<0),ke="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ae=Te&&window.location.href||"http://localhost",Pe=s(s({},Object.freeze({__proto__:null,hasBrowserEnv:Te,hasStandardBrowserWebWorkerEnv:ke,hasStandardBrowserEnv:je,origin:Ae})),Re);function Le(e){function t(e,r,n,o){var i=e[o++];if("__proto__"===i)return!0;var a=Number.isFinite(+i),s=o>=e.length;return i=!i&&ue.isArray(n)?n.length:i,s?(ue.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!a):(n[i]&&ue.isObject(n[i])||(n[i]=[]),t(e,r,n[i],o)&&ue.isArray(n[i])&&(n[i]=function(e){var t,r,n={},o=Object.keys(e),i=o.length;for(t=0;t<i;t++)n[r=o[t]]=e[r];return n}(n[i])),!a)}if(ue.isFormData(e)&&ue.isFunction(e.entries)){var r={};return ue.forEachEntry(e,(function(e,n){t(function(e){return ue.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),n,r,0)})),r}return null}var _e={transitional:xe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){var r,n=t.getContentType()||"",o=n.indexOf("application/json")>-1,i=ue.isObject(e);if(i&&ue.isHTMLForm(e)&&(e=new FormData(e)),ue.isFormData(e))return o?JSON.stringify(Le(e)):e;if(ue.isArrayBuffer(e)||ue.isBuffer(e)||ue.isStream(e)||ue.isFile(e)||ue.isBlob(e)||ue.isReadableStream(e))return e;if(ue.isArrayBufferView(e))return e.buffer;if(ue.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ve(e,new Pe.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Pe.isNode&&ue.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=ue.isFileList(e))||n.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return ve(r?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),function(e,t,r){if(ue.isString(e))try{return(0,JSON.parse)(e),ue.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||_e.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(ue.isResponse(e)||ue.isReadableStream(e))return e;if(e&&ue.isString(e)&&(r&&!this.responseType||n)){var o=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw ce.from(e,ce.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pe.classes.FormData,Blob:Pe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],(function(e){_e.headers[e]={}}));var Ne=_e,Ce=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fe=Symbol("internals");function Ue(e){return e&&String(e).trim().toLowerCase()}function De(e){return!1===e||null==e?e:ue.isArray(e)?e.map(De):String(e)}function Be(e,t,r,n,o){return ue.isFunction(n)?n.call(this,t,r):(o&&(t=r),ue.isString(t)?ue.isString(n)?-1!==t.indexOf(n):ue.isRegExp(n)?n.test(t):void 0:void 0)}var Ie=function(e,t){function r(e){p(this,r),e&&this.set(e)}return y(r,[{key:"set",value:function(e,t,r){var n=this;function o(e,t,r){var o=Ue(t);if(!o)throw new Error("header name must be a non-empty string");var i=ue.findKey(n,o);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=De(e))}var i=function(e,t){return ue.forEach(e,(function(e,r){return o(e,r,t)}))};if(ue.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(ue.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i(function(e){var t,r,n,o={};return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!t||o[t]&&Ce[t]||("set-cookie"===t?o[t]?o[t].push(r):o[t]=[r]:o[t]=o[t]?o[t]+", "+r:r)})),o}(e),t);else if(ue.isHeaders(e)){var a,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=w(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(e.entries());try{for(s.s();!(a=s.n()).done;){var u=m(a.value,2),c=u[0];o(u[1],c,r)}}catch(e){s.e(e)}finally{s.f()}}else null!=e&&o(t,e,r);return this}},{key:"get",value:function(e,t){if(e=Ue(e)){var r=ue.findKey(this,e);if(r){var n=this[r];if(!t)return n;if(!0===t)return function(e){for(var t,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=n.exec(e);)r[t[1]]=t[2];return r}(n);if(ue.isFunction(t))return t.call(this,n,r);if(ue.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Ue(e)){var r=ue.findKey(this,e);return!(!r||void 0===this[r]||t&&!Be(0,this[r],r,t))}return!1}},{key:"delete",value:function(e,t){var r=this,n=!1;function o(e){if(e=Ue(e)){var o=ue.findKey(r,e);!o||t&&!Be(0,r[o],o,t)||(delete r[o],n=!0)}}return ue.isArray(e)?e.forEach(o):o(e),n}},{key:"clear",value:function(e){for(var t=Object.keys(this),r=t.length,n=!1;r--;){var o=t[r];e&&!Be(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}},{key:"normalize",value:function(e){var t=this,r={};return ue.forEach(this,(function(n,o){var i=ue.findKey(r,o);if(i)return t[i]=De(n),void delete t[o];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r}))}(o):String(o).trim();a!==o&&delete t[o],t[a]=De(n),r[a]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.constructor).concat.apply(e,[this].concat(r))}},{key:"toJSON",value:function(e){var t=Object.create(null);return ue.forEach(this,(function(r,n){null!=r&&!1!==r&&(t[n]=e&&ue.isArray(r)?r.join(", "):r)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=m(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[Fe]=this[Fe]={accessors:{}}).accessors,r=this.prototype;function n(e){var n=Ue(e);t[n]||(function(e,t){var r=ue.toCamelCase(" "+t);["get","set","has"].forEach((function(n){Object.defineProperty(e,n+r,{value:function(e,r,o){return this[n].call(this,t,e,r,o)},configurable:!0})}))}(r,e),t[n]=!0)}return ue.isArray(e)?e.forEach(n):n(e),this}}]),r}();Ie.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ue.reduceDescriptors(Ie.prototype,(function(e,t){var r=e.value,n=t[0].toUpperCase()+t.slice(1);return{get:function(){return r},set:function(e){this[n]=e}}})),ue.freezeMethods(Ie);var qe=Ie;function Me(e,t){var r=this||Ne,n=t||r,o=qe.from(n.headers),i=n.data;return ue.forEach(e,(function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function ze(e){return!(!e||!e.__CANCEL__)}function He(e,t,r){ce.call(this,null==e?"canceled":e,ce.ERR_CANCELED,t,r),this.name="CanceledError"}function Je(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new ce("Request failed with status code "+r.status,[ce.ERR_BAD_REQUEST,ce.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}function We(e,t){e=e||10;var r,n=new Array(e),o=new Array(e),i=0,a=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),c=o[a];r||(r=u),n[i]=s,o[i]=u;for(var f=a,l=0;f!==i;)l+=n[f++],f%=e;if((i=(i+1)%e)===a&&(a=(a+1)%e),!(u-r<t)){var h=c&&u-c;return h?Math.round(1e3*l/h):void 0}}}function Ge(e,t){var r=0,n=1e3/t,o=null;return function(){var t=arguments,i=!0===this,a=Date.now();if(i||a-r>n)return o&&(clearTimeout(o),o=null),r=a,e.apply(null,arguments);o||(o=setTimeout((function(){return o=null,r=Date.now(),e.apply(null,t)}),n-(a-r)))}}ue.inherits(He,ce,{__CANCEL__:!0});var Ke=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0,o=We(50,250);return Ge((function(r){var i=r.loaded,a=r.lengthComputable?r.total:void 0,s=i-n,u=o(s);n=i;var c={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&i<=a?(a-i)/u:void 0,event:r,lengthComputable:null!=a};c[t?"download":"upload"]=!0,e(c)}),r)},Ve=Pe.hasStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=ue.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},Xe=Pe.hasStandardBrowserEnv?{write:function(e,t,r,n,o,i){var a=[e+"="+encodeURIComponent(t)];ue.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ue.isString(n)&&a.push("path="+n),ue.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function $e(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Ye=function(e){return e instanceof qe?s({},e):e};function Qe(e,t){t=t||{};var r={};function n(e,t,r){return ue.isPlainObject(e)&&ue.isPlainObject(t)?ue.merge.call({caseless:r},e,t):ue.isPlainObject(t)?ue.merge({},t):ue.isArray(t)?t.slice():t}function o(e,t,r){return ue.isUndefined(t)?ue.isUndefined(e)?void 0:n(void 0,e,r):n(e,t,r)}function i(e,t){if(!ue.isUndefined(t))return n(void 0,t)}function a(e,t){return ue.isUndefined(t)?ue.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,o,i){return i in t?n(r,o):i in e?n(void 0,r):void 0}var u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(e,t){return o(Ye(e),Ye(t),!0)}};return ue.forEach(Object.keys(Object.assign({},e,t)),(function(n){var i=u[n]||o,a=i(e[n],t[n],n);ue.isUndefined(a)&&i!==s||(r[n]=a)})),r}var Ze,et,tt,rt,nt=function(e){var t,r,n=Qe({},e),o=n.data,i=n.withXSRFToken,a=n.xsrfHeaderName,s=n.xsrfCookieName,u=n.headers,c=n.auth;if(n.headers=u=qe.from(u),n.url=Ee($e(n.baseURL,n.url),e.params,e.paramsSerializer),c&&u.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ue.isFormData(o))if(Pe.hasStandardBrowserEnv||Pe.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(!1!==(t=u.getContentType())){var f=b(r=t?t.split(";").map((function(e){return e.trim()})).filter(Boolean):[])||g(r)||w(r)||O(),l=f[0],h=f.slice(1);u.setContentType([l||"multipart/form-data"].concat(function(e){return function(e){if(Array.isArray(e))return E(e)}(e)||g(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(h)).join("; "))}if(Pe.hasStandardBrowserEnv&&(i&&ue.isFunction(i)&&(i=i(n)),i||!1!==i&&Ve(n.url))){var p=a&&s&&Xe.read(s);p&&u.set(a,p)}return n},ot="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){var n,o=nt(e),i=o.data,a=qe.from(o.headers).normalize(),s=o.responseType;function u(){o.cancelToken&&o.cancelToken.unsubscribe(n),o.signal&&o.signal.removeEventListener("abort",n)}var c=new XMLHttpRequest;function f(){if(c){var n=qe.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());Je((function(e){t(e),u()}),(function(e){r(e),u()}),{data:s&&"text"!==s&&"json"!==s?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:n,config:e,request:c}),c=null}}c.open(o.method.toUpperCase(),o.url,!0),c.timeout=o.timeout,"onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(f)},c.onabort=function(){c&&(r(new ce("Request aborted",ce.ECONNABORTED,o,c)),c=null)},c.onerror=function(){r(new ce("Network Error",ce.ERR_NETWORK,o,c)),c=null},c.ontimeout=function(){var e=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded",t=o.transitional||xe;o.timeoutErrorMessage&&(e=o.timeoutErrorMessage),r(new ce(e,t.clarifyTimeoutError?ce.ETIMEDOUT:ce.ECONNABORTED,o,c)),c=null},void 0===i&&a.setContentType(null),"setRequestHeader"in c&&ue.forEach(a.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),ue.isUndefined(o.withCredentials)||(c.withCredentials=!!o.withCredentials),s&&"json"!==s&&(c.responseType=o.responseType),"function"==typeof o.onDownloadProgress&&c.addEventListener("progress",Ke(o.onDownloadProgress,!0)),"function"==typeof o.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Ke(o.onUploadProgress)),(o.cancelToken||o.signal)&&(n=function(t){c&&(r(!t||t.type?new He(null,e,c):t),c.abort(),c=null)},o.cancelToken&&o.cancelToken.subscribe(n),o.signal&&(o.signal.aborted?n():o.signal.addEventListener("abort",n)));var l,h,p=(l=o.url,(h=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l))&&h[1]||"");p&&-1===Pe.protocols.indexOf(p)?r(new ce("Unsupported protocol "+p+":",ce.ERR_BAD_REQUEST,e)):c.send(i||null)}))},it=function(e,t){var r,n=new AbortController,o=function(e){if(!r){r=!0,a();var t=e instanceof Error?e:this.reason;n.abort(t instanceof ce?t:new He(t instanceof Error?t.message:t))}},i=t&&setTimeout((function(){o(new ce("timeout ".concat(t," of ms exceeded"),ce.ETIMEDOUT))}),t),a=function(){e&&(i&&clearTimeout(i),i=null,e.forEach((function(e){e&&(e.removeEventListener?e.removeEventListener("abort",o):e.unsubscribe(o))})),e=null)};e.forEach((function(e){return e&&e.addEventListener&&e.addEventListener("abort",o)}));var s=n.signal;return s.unsubscribe=a,[s,function(){i&&clearTimeout(i),i=null}]},at=u().mark((function e(t,r){var n,o,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.byteLength,r&&!(n<r)){e.next=5;break}return e.next=4,t;case 4:return e.abrupt("return");case 5:o=0;case 6:if(!(o<n)){e.next=13;break}return i=o+r,e.next=10,t.slice(o,i);case 10:o=i,e.next=6;break;case 13:case"end":return e.stop()}}),e)})),st=function(){var t,o=(t=u().mark((function e(t,o,a){var s,c,f,l,h,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=!1,c=!1,e.prev=2,l=n(t);case 4:return e.next=6,i(l.next());case 6:if(!(s=!(h=e.sent).done)){e.next=27;break}if(p=h.value,e.t0=r,e.t1=n,e.t2=at,!ArrayBuffer.isView(p)){e.next=15;break}e.t3=p,e.next=18;break;case 15:return e.next=17,i(a(String(p)));case 17:e.t3=e.sent;case 18:return e.t4=e.t3,e.t5=o,e.t6=(0,e.t2)(e.t4,e.t5),e.t7=(0,e.t1)(e.t6),e.t8=i,e.delegateYield((0,e.t0)(e.t7,e.t8),"t9",24);case 24:s=!1,e.next=4;break;case 27:e.next=33;break;case 29:e.prev=29,e.t10=e.catch(2),c=!0,f=e.t10;case 33:if(e.prev=33,e.prev=34,!s||null==l.return){e.next=38;break}return e.next=38,i(l.return());case 38:if(e.prev=38,!c){e.next=41;break}throw f;case 41:return e.finish(38);case 42:return e.finish(33);case 43:case"end":return e.stop()}}),e,null,[[2,29,33,43],[34,,38,42]])})),function(){return new e(t.apply(this,arguments))});return function(e,t,r){return o.apply(this,arguments)}}(),ut=function(e,t,r,n,o){var i=st(e,t,o),a=0;return new ReadableStream({type:"bytes",pull:function(e){return h(u().mark((function t(){var o,s,c,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.next();case 2:if(o=t.sent,s=o.done,c=o.value,!s){t.next=9;break}return e.close(),n(),t.abrupt("return");case 9:f=c.byteLength,r&&r(a+=f),e.enqueue(new Uint8Array(c));case 12:case"end":return t.stop()}}),t)})))()},cancel:function(e){return n(e),i.return()}},{highWaterMark:2})},ct=function(e,t){var r=null!=e;return function(n){return setTimeout((function(){return t({lengthComputable:r,total:e,loaded:n})}))}},ft="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,lt=ft&&"function"==typeof ReadableStream,ht=ft&&("function"==typeof TextEncoder?(Ze=new TextEncoder,function(e){return Ze.encode(e)}):function(){var e=h(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,new Response(t).arrayBuffer();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pt=lt&&(et=!1,tt=new Request(Pe.origin,{body:new ReadableStream,method:"POST",get duplex(){return et=!0,"half"}}).headers.has("Content-Type"),et&&!tt),dt=lt&&!!function(){try{return ue.isReadableStream(new Response("").body)}catch(e){}}(),yt={stream:dt&&function(e){return e.body}};ft&&(rt=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((function(e){!yt[e]&&(yt[e]=ue.isFunction(rt[e])?function(t){return t[e]()}:function(t,r){throw new ce("Response type '".concat(e,"' is not supported"),ce.ERR_NOT_SUPPORT,r)})})));var vt=function(){var e=h(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",0);case 2:if(!ue.isBlob(t)){e.next=4;break}return e.abrupt("return",t.size);case 4:if(!ue.isSpecCompliantForm(t)){e.next=8;break}return e.next=7,new Request(t).arrayBuffer();case 7:case 14:return e.abrupt("return",e.sent.byteLength);case 8:if(!ue.isArrayBufferView(t)){e.next=10;break}return e.abrupt("return",t.byteLength);case 10:if(ue.isURLSearchParams(t)&&(t+=""),!ue.isString(t)){e.next=15;break}return e.next=14,ht(t);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=function(){var e=h(u().mark((function e(t,r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ue.toFiniteNumber(t.getContentLength()),e.abrupt("return",null==n?vt(r):n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),bt={http:null,xhr:ot,fetch:ft&&function(){var e=h(u().mark((function e(t){var r,n,o,i,a,c,f,l,h,p,d,y,v,b,g,w,E,O,S,x,R,T,j,k,A,P,L,_,N;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nt(t),n=r.url,o=r.method,i=r.data,a=r.signal,c=r.cancelToken,f=r.timeout,l=r.onDownloadProgress,h=r.onUploadProgress,p=r.responseType,d=r.headers,y=r.withCredentials,v=void 0===y?"same-origin":y,b=r.fetchOptions,p=p?(p+"").toLowerCase():"text",g=a||c||f?it([a,c],f):[],w=m(g,2),E=w[0],O=w[1],R=function(){!S&&setTimeout((function(){E&&E.unsubscribe()})),S=!0},e.prev=4,e.t0=h&&pt&&"get"!==o&&"head"!==o,!e.t0){e.next=11;break}return e.next=9,mt(d,i);case 9:e.t1=T=e.sent,e.t0=0!==e.t1;case 11:if(!e.t0){e.next=15;break}j=new Request(n,{method:"POST",body:i,duplex:"half"}),ue.isFormData(i)&&(k=j.headers.get("content-type"))&&d.setContentType(k),j.body&&(i=ut(j.body,65536,ct(T,Ke(h)),null,ht));case 15:return ue.isString(v)||(v=v?"cors":"omit"),x=new Request(n,s(s({},b),{},{signal:E,method:o.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",withCredentials:v})),e.next=19,fetch(x);case 19:return A=e.sent,P=dt&&("stream"===p||"response"===p),dt&&(l||P)&&(L={},["status","statusText","headers"].forEach((function(e){L[e]=A[e]})),_=ue.toFiniteNumber(A.headers.get("content-length")),A=new Response(ut(A.body,65536,l&&ct(_,Ke(l,!0)),P&&R,ht),L)),p=p||"text",e.next=25,yt[ue.findKey(yt,p)||"text"](A,t);case 25:return N=e.sent,!P&&R(),O&&O(),e.next=30,new Promise((function(e,r){Je(e,r,{data:N,headers:qe.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:x})}));case 30:return e.abrupt("return",e.sent);case 33:if(e.prev=33,e.t2=e.catch(4),R(),!e.t2||"TypeError"!==e.t2.name||!/fetch/i.test(e.t2.message)){e.next=38;break}throw Object.assign(new ce("Network Error",ce.ERR_NETWORK,t,x),{cause:e.t2.cause||e.t2});case 38:throw ce.from(e.t2,e.t2&&e.t2.code,t,x);case 39:case"end":return e.stop()}}),e,null,[[4,33]])})));return function(t){return e.apply(this,arguments)}}()};ue.forEach(bt,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));var gt=function(e){return"- ".concat(e)},wt=function(e){return ue.isFunction(e)||null===e||!1===e},Et=function(e){for(var t,r,n=(e=ue.isArray(e)?e:[e]).length,o={},i=0;i<n;i++){var a=void 0;if(r=t=e[i],!wt(t)&&void 0===(r=bt[(a=String(t)).toLowerCase()]))throw new ce("Unknown adapter '".concat(a,"'"));if(r)break;o[a||"#"+i]=r}if(!r){var s=Object.entries(o).map((function(e){var t=m(e,2),r=t[0],n=t[1];return"adapter ".concat(r," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));throw new ce("There is no suitable adapter to dispatch the request "+(n?s.length>1?"since :\n"+s.map(gt).join("\n"):" "+gt(s[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Ot(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new He(null,e)}function St(e){return Ot(e),e.headers=qe.from(e.headers),e.data=Me.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Et(e.adapter||Ne.adapter)(e).then((function(t){return Ot(e),t.data=Me.call(e,e.transformResponse,t),t.headers=qe.from(t.headers),t}),(function(t){return ze(t)||(Ot(e),t&&t.response&&(t.response.data=Me.call(e,e.transformResponse,t.response),t.response.headers=qe.from(t.response.headers))),Promise.reject(t)}))}var xt={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){xt[e]=function(r){return f(r)===e||"a"+(t<1?"n ":" ")+e}}));var Rt={};xt.transitional=function(e,t,r){function n(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,o,i){if(!1===e)throw new ce(n(o," has been removed"+(t?" in "+t:"")),ce.ERR_DEPRECATED);return t&&!Rt[o]&&(Rt[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}};var Tt={assertOptions:function(e,t,r){if("object"!==f(e))throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),o=n.length;o-- >0;){var i=n[o],a=t[i];if(a){var s=e[i],u=void 0===s||a(s,i,e);if(!0!==u)throw new ce("option "+i+" must be "+u,ce.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new ce("Unknown option "+i,ce.ERR_BAD_OPTION)}},validators:xt},jt=Tt.validators,kt=function(){function e(t){p(this,e),this.defaults=t,this.interceptors={request:new Se,response:new Se}}var t;return y(e,[{key:"request",value:(t=h(u().mark((function e(t,r){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._request(t,r);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error){Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error,o=n.stack?n.stack.replace(/^.+\n/,""):"";try{e.t0.stack?o&&!String(e.t0.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(e.t0.stack+="\n"+o):e.t0.stack=o}catch(e){}}throw e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e,r){return t.apply(this,arguments)})},{key:"_request",value:function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};var r=t=Qe(this.defaults,t),n=r.transitional,o=r.paramsSerializer,i=r.headers;void 0!==n&&Tt.assertOptions(n,{silentJSONParsing:jt.transitional(jt.boolean),forcedJSONParsing:jt.transitional(jt.boolean),clarifyTimeoutError:jt.transitional(jt.boolean)},!1),null!=o&&(ue.isFunction(o)?t.paramsSerializer={serialize:o}:Tt.assertOptions(o,{encode:jt.function,serialize:jt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=i&&ue.merge(i.common,i[t.method]);i&&ue.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete i[e]})),t.headers=qe.concat(a,i);var s=[],u=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var c,f=[];this.interceptors.response.forEach((function(e){f.push(e.fulfilled,e.rejected)}));var l,h=0;if(!u){var p=[St.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,f),l=p.length,c=Promise.resolve(t);h<l;)c=c.then(p[h++],p[h++]);return c}l=s.length;var d=t;for(h=0;h<l;){var y=s[h++],v=s[h++];try{d=y(d)}catch(e){v.call(this,e);break}}try{c=St.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,l=f.length;h<l;)c=c.then(f[h++],f[h++]);return c}},{key:"getUri",value:function(e){return Ee($e((e=Qe(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();ue.forEach(["delete","get","head","options"],(function(e){kt.prototype[e]=function(t,r){return this.request(Qe(r||{},{method:e,url:t,data:(r||{}).data}))}})),ue.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(Qe(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}kt.prototype[e]=t(),kt.prototype[e+"Form"]=t(!0)}));var At=kt,Pt=function(){function e(t){if(p(this,e),"function"!=typeof t)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(e){r=e}));var n=this;this.promise.then((function(e){if(n._listeners){for(var t=n._listeners.length;t-- >0;)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},t((function(e,t,o){n.reason||(n.reason=new He(e,t,o),r(n.reason))}))}return y(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}(),Lt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lt).forEach((function(e){var t=m(e,2),r=t[0],n=t[1];Lt[n]=r}));var _t=Lt,Nt=function e(t){var r=new At(t),n=S(At.prototype.request,r);return ue.extend(n,At.prototype,r,{allOwnKeys:!0}),ue.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Qe(t,r))},n}(Ne);return Nt.Axios=At,Nt.CanceledError=He,Nt.CancelToken=Pt,Nt.isCancel=ze,Nt.VERSION="1.7.2",Nt.toFormData=ve,Nt.AxiosError=ce,Nt.Cancel=Nt.CanceledError,Nt.all=function(e){return Promise.all(e)},Nt.spread=function(e){return function(t){return e.apply(null,t)}},Nt.isAxiosError=function(e){return ue.isObject(e)&&!0===e.isAxiosError},Nt.mergeConfig=Qe,Nt.AxiosHeaders=qe,Nt.formToJSON=function(e){return Le(ue.isHTMLForm(e)?new FormData(e):e)},Nt.getAdapter=Et,Nt.HttpStatusCode=_t,Nt.default=Nt,Nt},"object"==typeof t&&void 0!==n?n.exports=s():"function"==typeof define&&define.amd?define(s):(a="undefined"!=typeof globalThis?globalThis:a||self).axios=s(),e("default",n.exports)}),{})}}}));

System.register("chunks:///_virtual/axios.mjs_cjs=&original=.js",["./axios.js","./cjs-loader.mjs"],(function(e,t){var s,a;return{setters:[function(t){s=t.__cjsMetaURL;var a={};a.__cjsMetaURL=t.__cjsMetaURL,a.default=t.default,e(a)},function(e){a=e.default}],execute:function(){s||a.throwInvalidWrapper("./axios.js",t.meta.url),a.require(s)}}}));

System.register("chunks:///_virtual/BackgroundAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,i,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.screen,i=t.UITransform,a=t.Component}],execute:function(){var c;n._RF.push({},"71ae6w0ow1ACok/pAFH3tJT","BackgroundAdapter",void 0);var h=o.ccclass;o.property,t("BackgroundAdapter",h("BackgroundAdapter")(c=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onLoad=function(){var t=r.windowSize,e=this.node.getComponent(i).contentSize,n=Math.min(t.width/e.width,t.height/e.height),o=e.width*n,a=e.height*n,c=Math.max(t.width/o,t.height/a);this.node.setScale(c,c,c)},n}(a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/BagData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./CfgMgr.ts","./Configuration.ts","./WeaponLevelModel.ts","./SkillUpgradeModel.ts","./WeaponModel.ts","./SkillModel.ts","./LanguageManager.ts","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts","./PlayerData.ts"],(function(a){var e,t,n,i,r,o,s,g,l,p,c,u,h,f,d,v;return{setters:[function(a){e=a.createClass},function(a){t=a.cclegacy},function(a){n=a.Constants},function(a){i=a.CfgMgr},function(a){r=a.Configuration},function(a){o=a.WeaponLevelCfg},function(a){s=a.SkillUpgradeCfg},function(a){g=a.WeaponCfg},function(a){l=a.SkillCfg,p=a.TargetType},function(a){c=a.LanguageManager},function(a){u=a.HttpService},function(a){h=a.Api},function(a){f=a.EventListener},function(a){d=a.GameEvent},function(a){v=a.PlayerData}],execute:function(){t._RF.push({},"93744qyQJ9Na72gUVqNx+1H","BagData",void 0),a("BagData",function(){function a(){this._placeData=[],this._bagWeaponData=new Map,this._wearBagData=new Map,this._noWearBagData=new Map,this._noWearBagArr=[],this._lockBagData=new Map,this._weaponSkillMapData=new Map,this._weaponLevelMapData=new Map}var t=a.prototype;return t.initCfg=function(){this._weaponSkillMapData.clear(),this.initWeaponSkillData(),this.initLevelData(),this.initPlaceData(5)},t.initWeaponSkillData=function(){for(var a=i.getCfgDataArray(new s),e=0;e<a.length;e++){var t=a[e];if(t.weaponId){var n=[];this._weaponSkillMapData.has(t.weaponId)?(n=this._weaponSkillMapData.get(t.weaponId)).push(t.Id):n.push(t.Id),this._weaponSkillMapData.set(t.weaponId,n)}}},t.initLevelData=function(){for(var a=i.getCfgDataArray(new o),e=0;e<a.length;e++){var t=a[e],n=t.weaponId+"|"+t.level;this._weaponLevelMapData.set(n,t)}},t.initPlaceData=function(a){var e,t=[];e=n.SysConstant.InitPlace.ConstantValue.split("|");for(var i=0;i<e.length;i++)if(a>i)t.push(0);else{var r=e[i];t.push(Number(r))}this._placeData=t},t.initWeaponData=function(a,e){var t=this;void 0===e&&(e=0),this._bagWeaponData.clear();for(var n=0;n<a.length;n++){var i=a[n],r=new D;r.weaponId=i.weaponId,r.level=i.level,r.fragment=i.fragment,r.blueprint=i.blueprint?i.blueprint:0,r.fragments=i.fragments,r.sid=i.sid,r.golds=i.golds,r.unlock=1,this._bagWeaponData.set(i.weaponId,r)}var o=[];this._noWearBagData.clear(),this._noWearBagArr=[],this._wearBagData.clear(),this._bagWeaponData.forEach((function(a){var e=new D;e.weaponId=a.weaponId,e.level=a.level,e.sid=a.sid,e.unlock=1,e.fragment=a.fragment,e.blueprint=a.blueprint,e.golds=a.golds,o.push(a.weaponId.toString()),-1==a.sid?(t._noWearBagData.set(e.weaponId,e),t._noWearBagArr.push(e.weaponId)):t._wearBagData.set(e.sid,e)})),e>0&&this.initPlaceData(e),this._lockBagData.clear();for(var s=this.getWeaponData(),g=0;g<s.length;g++){var l=s[g];if(!o.includes(l.Id.toString())){var p=new D;p.weaponId=l.Id,p.level=0,p.sid=-1,p.unlock=0,p.fragment=0,p.blueprint=0,this._lockBagData.set(p.weaponId,p)}}f.emit(d.UPDATE_BAG_POPUP)},t.getBagDataFromNetwork=function(){var a=this;u.instance.post(h.WEAPON_INFO,{}).then((function(e){0==e.code&&a.initWeaponData(e.data.bagWeapons,e.data.slot)}))},t.getPlaceData=function(){return this._placeData},t.getWearData=function(){return Array.from(this._wearBagData.values())},t.getNoWearData=function(){for(var a=[],e=0;e<this._noWearBagArr.length;e++)this._noWearBagData.has(this._noWearBagArr[e])&&a.push(this._noWearBagData.get(this._noWearBagArr[e]));return a},t.getNoWearArr=function(){return this._noWearBagArr},t.getLockData=function(){return Array.from(this._lockBagData.values())},t.getWeaponIcon=function(e){var t=1;this._bagWeaponData.has(e)&&(t=this._bagWeaponData.get(e).level);var n=this.getWeaponCfgById(e),i=t>=n.skillIds.length?n.skillIds.length-1:t-1,r=n.skillIds[i];return a.instance.getWeaponSkillCfgById(r).res},t.getWeaponCfgById=function(a){return i.getDataById(new g,a)},t.getWeaponData=function(){for(var a=[],e=i.getCfgDataArray(new g),t=0;t<e.length;t++){var n=e[t];n.isShow&&a.push(n)}return a},t.onUpAction=function(a){this._wearBagData.set(a.sid,a),this._noWearBagData.delete(a.weaponId),this._noWearBagArr.indexOf(a.weaponId)>=0&&this._noWearBagArr.splice(this._noWearBagArr.indexOf(a.weaponId),1),this.submitEquip(a.weaponId,a.sid)},t.onDownAction=function(a){var e=a.sid;a.sid=-1,this._noWearBagData.set(a.weaponId,a),-1==this._noWearBagArr.indexOf(a.weaponId)&&this._noWearBagArr.push(a.weaponId),this._wearBagData.delete(e),this.submitEquip(a.weaponId,-1)},t.checkUpEquip=function(){for(var a=0,e=this.getWearData().length,t=0;t<this._placeData.length;t++){this._placeData[t]||a++}return!(e<a)},t.getWeaponSkillCfgById=function(a){return i.getDataById(new l,a)},t.getWeaponUpgradeSkillCfgById=function(a){return i.getDataById(new s,a)},t.getWeaponSkillArrByWeaponId=function(a){return this._weaponSkillMapData.get(a)},t.getWeaponObjById=function(a){for(var e=null,t=Array.from(this._wearBagData.values()),n=0;n<t.length;n++){var i=t[n];if(i.weaponId==a){e=i;break}}return this._noWearBagData.has(a)&&(e=this._noWearBagData.get(a)),this._lockBagData.has(a)&&(e=this._lockBagData.get(a)),e},t.getEquipAtkType=function(a){var e=c.instance.getLang("game.physical");switch(a){case 1:e=c.instance.getLang("game.physical");break;case 2:e=c.instance.getLang("game.magic");break;case 3:case 4:e=c.instance.getLang("game.armor");break;case 5:e=c.instance.getLang("game.economy")}return e},t.getEquipAtkTargetType=function(a){var e=c.instance.getLang("game.targetclosest");switch(a){case p.TARGET_NEAREST:e=c.instance.getLang("game.targetclosest");break;case p.TARGET_RANDOM:e=c.instance.getLang("game.targetrandom");break;case p.TARGET_SELF:e=c.instance.getLang("game.targetself")}return e},t.getCarryWeaponMap=function(){var a=new Map;return this._wearBagData.forEach((function(e){a.set(e.weaponId,e.level)})),a},t.getCarryWeaponArr=function(){var a=[];return this._wearBagData.forEach((function(e){a.push(e.weaponId)})),a},t.getWeaponsByQuality=function(a){var e=[];return this._wearBagData.forEach((function(a){e.push(a.weaponId)})),e},t.checkCarryWeapon=function(){for(var a=this.getCarryWeaponArr().length,e=0,t=v.instance.chapterObj.chapterId,n=0;n<this._placeData.length;n++)this._placeData[n]<t&&e++;return a==e},t.getWeaponLevelCfgByLevel=function(a,e){var t=a+"|"+e;return this._weaponLevelMapData.has(t)?this._weaponLevelMapData.get(t):null},t.calWeaponLevelCfgByLevel=function(a,e){var t=new o;t.addDamage=0,t.addBuff=0,t.addHp=0;for(var n=1;n<e;n++){var i=this.getWeaponLevelCfgByLevel(a,n);i&&(t.addDamage+=i.addDamage,t.addBuff+=i.addBuff,t.addHp+=i.addHp)}return t},t.isWeaponMaxLevel=function(a,e){var t=a+"|"+(e+1);return!this._weaponLevelMapData.has(t)},t.checkWeaponUpgrage=function(a){if(this.isWeaponMaxLevel(a.weaponId,a.level))return!1;var e=a.weaponId+"|"+a.level;if(this._weaponLevelMapData.has(e)&&a.unlock){var t=this._weaponLevelMapData.get(e);return a.fragment>=t.fragment&&a.blueprint>=t.blueprint&&v.instance.assetObj.gold>=t.gold}return!1},t.getUnlockSkillsEntry=function(a,e){var t=this._weaponSkillMapData.get(a),n=[];if(t&&t.length>0)for(var i=0;i<t.length;i++){var r=this.getWeaponUpgradeSkillCfgById(t[i]);r.weaponLevel<=e&&n.push(r)}return n},t.savePlaceData=function(){r.instance.setConfigData(n.placeConfigId,JSON.stringify(this._placeData))},t.saveWeaponData=function(){var a=this.getWearData(),e=this.getNoWearData(),t=a.concat(e);r.instance.setConfigData(n.weaponConfigId,JSON.stringify(t))},t.onUpgrade=function(a){var e=this;u.instance.post(h.WEAPON_LEVELUP,{weaponId:a}).then((function(a){0==a.code&&e.initWeaponData(a.data.bagWeapons)}))},t.submitEquip=function(a,e){u.instance.post(h.WEAPON_EQUIP,{weaponId:a,sid:e}).then((function(a){a.code}))},e(a,null,[{key:"instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}())._instance=null;var D=a("BagWeaponObj",(function(){this.weaponId=void 0,this.level=void 0,this.fragment=void 0,this.blueprint=void 0,this.sid=void 0,this.unlock=void 0,this.golds=void 0,this.fragments=void 0}));a("EquipType",function(a){return a[a.UP=0]="UP",a[a.DOWN=1]="DOWN",a[a.LOCK=2]="LOCK",a[a.CHANGE=3]="CHANGE",a[a.DETAIL=4]="DETAIL",a}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BagDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./BagData.ts","./SysOpenData.ts","./PlayerData.ts","./EventListener.ts","./GameEvent.ts","./WeaponSkillItem.ts","./BagWeaponItem.ts","./WeaponModel.ts","./ResourcesUtil.ts","./LanguageManager.ts","./GuideData.ts","./SpriteEx.ts"],(function(e){var t,n,i,a,o,r,l,p,g,s,u,d,c,h,m,f,b,y,C,w,B,v,P,N,I,_,A,O,k,L,T,S,D,j;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Label,p=e.Node,g=e.Button,s=e.Prefab,u=e.ScrollView,d=e.ParticleSystem2D,c=e.instantiate,h=e.Sprite,m=e.UITransform,f=e.Color,b=e.Component},function(e){y=e.OpenPopupManager,C=e.LayerType},function(e){w=e.Constants},function(e){B=e.BagData,v=e.EquipType},function(e){P=e.SysOpenData},function(e){N=e.PlayerData},function(e){I=e.EventListener},function(e){_=e.GameEvent},function(e){A=e.WeaponSkillItem},function(e){O=e.BagWeaponItem},function(e){k=e.WeaponType},function(e){L=e.ResourcesUtil},function(e){T=e.LanguageManager},function(e){S=e.GuideData,D=e.GuideStep},function(e){j=e.SpriteEx}],execute:function(){var z,M,E,U,G,q,W,x,H,F,R,X,V,K,Q,Y,J,Z,$,ee,te,ne,ie,ae,oe,re,le,pe,ge,se,ue,de,ce,he,me,fe,be,ye,Ce,we,Be,ve,Pe;o._RF.push({},"c37e4Q2/hlFlIXbnoMNrIkq","BagDetailPopup",void 0);var Ne=r.ccclass,Ie=r.property;e("BagDetailPopup",(z=Ne("BagDetailPopup"),M=Ie(l),E=Ie(l),U=Ie(l),G=Ie(l),q=Ie(p),W=Ie(g),x=Ie(l),H=Ie(p),F=Ie(s),R=Ie(u),X=Ie(p),V=Ie(s),K=Ie(p),Q=Ie(p),Y=Ie(p),J=Ie(p),Z=Ie(p),$=Ie(d),ee=Ie(d),te=Ie(d),z((ae=t((ie=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"title",ae,a(t)),i(t,"desc",oe,a(t)),i(t,"lockDesc",re,a(t)),i(t,"equipAtkType",le,a(t)),i(t,"btnList",pe,a(t)),i(t,"upgradeBtn",ge,a(t)),i(t,"needGold",se,a(t)),i(t,"equipItem",ue,a(t)),i(t,"equipPrefab",de,a(t)),i(t,"scrollView",ce,a(t)),i(t,"content",he,a(t)),i(t,"equipEntryPrefab",me,a(t)),i(t,"targetNode",fe,a(t)),i(t,"cdNode",be,a(t)),i(t,"atkNode",ye,a(t)),i(t,"rangeNode",Ce,a(t)),i(t,"upgradeMaterial",we,a(t)),i(t,"upgradeAnim1",Be,a(t)),i(t,"upgradeAnim2",ve,a(t)),i(t,"upgradeAnim3",Pe,a(t)),t._weaponObj=null,t._weaponCfg=null,t}n(t,e);var o=t.prototype;return o.show=function(e){var t=B.instance.getWeaponCfgById(e.weaponId);this._weaponObj=e,this._weaponCfg=t,this.title.string=T.instance.getLang(t.name),this.desc.string=T.instance.getLang(t.desc),this.equipItem.removeAllChildren();var n=c(this.equipPrefab);n.parent=this.equipItem,n.getComponent(O).init(e,v.DETAIL),this.equipAtkType.string=B.instance.getEquipAtkType(t.type),this.btnList.active=!!e.unlock,this.setSkillContent(),this.setUpgradeInfo(),this.setAttInfo(),S.instance.curStep==D.GUIDE_STEP18_WEAPON_INFO_BTN&&(y.instance.hide(w.PopupUI.GuidePopup),S.instance.curStep=1,y.instance.show(w.PopupUI.GuidePopup,null,C.TOP,!1,this.upgradeBtn.node))},o.setUnlockDesc=function(e,t){if(t&&e){var n=P.instance.getSysOpenCfgById(t);if(n){var i=n.unlock.toString(),a=T.instance.getLang(n.desc,[i]);this.lockDesc.string=a}}},o.setSkillContent=function(){this.content.removeAllChildren();var e=B.instance.getWeaponSkillArrByWeaponId(this._weaponObj.weaponId);if(null!=e){for(var t=0;t<e.length;t++){var n=e[t],i=c(this.equipEntryPrefab);i.parent=this.content,i.getComponent(A).init(n)}this.scrollView.scrollToTop()}},o.setAttInfo=function(){var e=B.instance.getWeaponCfgById(this._weaponObj.weaponId),t=B.instance.getWeaponLevelCfgByLevel(this._weaponObj.weaponId,this._weaponObj.level+1);this.targetNode.getChildByName("value").getComponent(l).string=""+B.instance.getEquipAtkTargetType(e.targetType),this.targetNode.getChildByName("add").getComponent(l).string="",this.cdNode.getChildByName("value").getComponent(l).string=e.cd+"s",this.cdNode.getChildByName("add").getComponent(l).string="";var n=B.instance.calWeaponLevelCfgByLevel(this._weaponObj.weaponId,this._weaponObj.level);e.type==k.ATTACK_PHYSICAL||e.type==k.ATTACK_MAGIC?(this.atkNode.getChildByName("icon").getComponent(j).index=0,this.rangeNode.getChildByName("icon").getComponent(j).index=0,this.atkNode.getChildByName("desc").getComponent(l).string=T.instance.getLang("game.atk"),this.rangeNode.getChildByName("desc").getComponent(l).string=T.instance.getLang("game.range"),this.atkNode.getChildByPath("layout/value").getComponent(l).string=""+(e.damage+n.addDamage),this.atkNode.getChildByPath("layout/add").getComponent(l).string=t&&t.addDamage?"+"+t.addDamage:"",this.rangeNode.getChildByPath("layout/value").getComponent(l).string=""+e.range,this.rangeNode.getChildByPath("layout/add").getComponent(l).string=""):e.type==k.ARMOR_HP?(this.atkNode.getChildByName("icon").getComponent(j).index=1,this.rangeNode.getChildByName("icon").getComponent(j).index=1,this.atkNode.getChildByName("desc").getComponent(l).string=T.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(l).string=T.instance.getLang("game.healing"),this.atkNode.getChildByPath("layout/value").getComponent(l).string=""+(e.hp+n.addHp),this.atkNode.getChildByPath("layout/add").getComponent(l).string=t&&t.addHp?"+"+t.addHp:"",this.rangeNode.getChildByPath("layout/value").getComponent(l).string=""+(e.addHp+n.addBuff),this.rangeNode.getChildByPath("layout/add").getComponent(l).string=t&&t.addBuff?"+"+t.addBuff:""):e.type==k.ARMOR_SHIELD&&(this.atkNode.getChildByName("icon").getComponent(j).index=1,this.rangeNode.getChildByName("icon").getComponent(j).index=2,this.atkNode.getChildByName("desc").getComponent(l).string=T.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(l).string=T.instance.getLang("game.armor"),this.atkNode.getChildByPath("layout/value").getComponent(l).string=""+(e.hp+n.addHp),this.atkNode.getChildByPath("layout/add").getComponent(l).string=t&&t.addHp?"+"+t.addHp:"",this.rangeNode.getChildByPath("layout/value").getComponent(l).string=""+(e.addShield+n.addBuff),this.rangeNode.getChildByPath("layout/add").getComponent(l).string=t&&t.addBuff?"+"+t.addBuff:"")},o.setUpgradeInfo=function(){var e=this;if(B.instance.isWeaponMaxLevel(this._weaponObj.weaponId,this._weaponObj.level))this.upgradeMaterial.active=!1,this.upgradeBtn.interactable=!1,this.needGold.string=T.instance.getLang("bag.fulllevel"),this.upgradeBtn.getComponent(h).grayscale=!0;else{this.upgradeMaterial.active=!0;var t=B.instance.getWeaponLevelCfgByLevel(this._weaponObj.weaponId,0==this._weaponObj.level?1:this._weaponObj.level),n=w.weaponIconPath+B.instance.getWeaponIcon(this._weaponObj.weaponId)+"/spriteFrame";L.geSpriteFrame(n).then((function(t){var n=e.upgradeMaterial.getChildByPath("fragment/icon").getComponent(h);n.spriteFrame=t;var i=n.getComponent(m).contentSize;i.height>=i.width?n.getComponent(m).setContentSize(64*i.width/i.height,64):n.getComponent(m).setContentSize(64,64*i.height/i.width)})),this.upgradeMaterial.getChildByPath("fragment/lbText").getComponent(l).string=this._weaponObj.fragment+"/"+t.fragment,this._weaponObj.fragment>=t.fragment?this.upgradeMaterial.getChildByPath("fragment/lbText").getComponent(l).color=(new f).fromHEX("#ffffff"):this.upgradeMaterial.getChildByPath("fragment/lbText").getComponent(l).color=(new f).fromHEX("#F52670");var i=w.itemsPath+"blueprint_"+this._weaponCfg.grid+"/spriteFrame";L.geSpriteFrame(i).then((function(t){var n=e.upgradeMaterial.getChildByPath("blueprint/icon").getComponent(h);n.spriteFrame=t;n.getComponent(m).contentSize;n.getComponent(m).setContentSize(64,64)})),this.upgradeMaterial.getChildByPath("blueprint/lbText").getComponent(l).string=this._weaponObj.blueprint+"/"+t.blueprint,this._weaponObj.blueprint>=t.blueprint?this.upgradeMaterial.getChildByPath("blueprint/lbText").getComponent(l).color=(new f).fromHEX("#ffffff"):this.upgradeMaterial.getChildByPath("blueprint/lbText").getComponent(l).color=(new f).fromHEX("#F52670"),this.upgradeBtn.interactable=!0,this.needGold.string=""+t.gold,this.upgradeBtn.getComponent(h).grayscale=!1}},o.onUpgradeBtn=function(){var e=B.instance.getWeaponLevelCfgByLevel(this._weaponObj.weaponId,this._weaponObj.level);if(e){var t=N.instance.assetObj;t.gold>=e.gold&&this._weaponObj.fragment>=e.fragment&&this._weaponObj.blueprint>=e.blueprint?(this._weaponObj.level++,this._weaponObj.fragment-=e.fragment,this.setUpgradeInfo(),this.setAttInfo(),N.instance.subCoin(e.gold),I.emit(_.UPDATE_POPUP_UPGRADE_INFO),this.showUpgradeAnim(),B.instance.onUpgrade(this._weaponObj.weaponId),S.instance.guideMode&&y.instance.hide(w.PopupUI.GuidePopup)):this._weaponObj.fragment<e.fragment?y.instance.showToast("fragment.insufficient"):this._weaponObj.blueprint<e.blueprint?y.instance.showToast("blueprint.insufficient"):t.gold<e.gold&&y.instance.showToast("gold.insufficient")}S.instance.guideMode&&y.instance.hide(w.PopupUI.GuidePopup)},o.showUpgradeAnim=function(){var e=this;this.upgradeAnim1.node.active=!0,this.upgradeAnim2.node.active=!0,this.upgradeAnim3.node.active=!0,this.upgradeAnim1.getComponent(d).resetSystem(),this.upgradeAnim2.getComponent(d).resetSystem(),this.upgradeAnim3.getComponent(d).resetSystem(),this.scheduleOnce((function(){e.upgradeAnim1.node.active=!1,e.upgradeAnim2.node.active=!1,e.upgradeAnim3.node.active=!1}),2)},o.onResetBtn=function(){},o.onCloseBtn=function(){y.instance.hide(w.PopupUI.BagDetailPopup),I.emit(_.GUIDE_BAG_ACTION)},t}(b)).prototype,"title",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(ie.prototype,"desc",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(ie.prototype,"lockDesc",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ie.prototype,"equipAtkType",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(ie.prototype,"btnList",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ie.prototype,"upgradeBtn",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(ie.prototype,"needGold",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(ie.prototype,"equipItem",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(ie.prototype,"equipPrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ie.prototype,"scrollView",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ie.prototype,"content",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(ie.prototype,"equipEntryPrefab",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(ie.prototype,"targetNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=t(ie.prototype,"cdNode",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=t(ie.prototype,"atkNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=t(ie.prototype,"rangeNode",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=t(ie.prototype,"upgradeMaterial",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=t(ie.prototype,"upgradeAnim1",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ie.prototype,"upgradeAnim2",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(ie.prototype,"upgradeAnim3",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=ie))||ne));o._RF.pop()}}}));

System.register("chunks:///_virtual/BagHeroData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./HeroModel.ts","./HeroLevelModel.ts","./HeroSkillModel.ts","./OpenPopupManager.ts","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var t,a,r,o,i,n,s,h,d,c,l,v,f;return{setters:[function(e){t=e.createClass},function(e){a=e.cclegacy,r=e._decorator},function(e){o=e.CfgMgr},function(e){i=e.HeroCfg,n=e.HeroObj},function(e){s=e.HeroLevelCfg},function(e){h=e.HeroSkillCfg},function(e){d=e.OpenPopupManager},function(e){c=e.HttpService},function(e){l=e.Api},function(e){v=e.EventListener},function(e){f=e.GameEvent}],execute:function(){var g,H;a._RF.push({},"2d836IFrEVPqqDHkyMsaLA3","BagHeroData",void 0);var u=r.ccclass;r.property,e("BagHeroData",u("BagHeroData")(((H=function(){function e(){this._heroData=new Map,this._heroLevelData=new Map,this._heroSkillData=new Map,this._activeHeroData=new Map,this._activeHeroId=0,this._food=0}var a=e.prototype;return a.initCfg=function(){var e=o.getCfgDataArray(new i);this._heroData.clear();for(var t=0;t<e.length;t++)this._heroData.set(e[t].Id,e[t]);var a=o.getCfgDataArray(new s);this._heroLevelData.clear();for(var r=0;r<a.length;r++){var n=a[r],d=n.heroId+"|"+n.level;this._heroLevelData.set(d,n)}var c=o.getCfgDataArray(new h);this._heroSkillData.clear();for(var l=0;l<c.length;l++){var v=c[l],f=v.heroId+"|"+v.star;this._heroSkillData.set(f,v)}},a.initHeroData=function(e){this._activeHeroData.clear();for(var t=0;t<e.length;t++){var a=e[t],r=new n;r.fragment=a.fragment,r.heroId=a.heroId,r.isUsed=a.isUsed,r.level=a.level,r.star=a.star;var o=this.calAddHpAndDamage(a.heroId,a.level),i=o.addHp,s=o.addDamage;r.addDamage=s,r.addHp=i,a.isUsed&&(this._activeHeroId=a.heroId),r.maxLevel=this.getMaxLevel(a.heroId,a.star),this._activeHeroData.set(a.heroId,r)}v.emit(f.UPDATE_HERO_INFO)},a.getHeroCfgById=function(e){return o.getDataById(new i,e)},a.getHeroIcon=function(e){return o.getDataById(new i,e).res},a.getHeroObjById=function(e){return this._activeHeroData.get(e)},a.getHeroLevelCfgByHeroId=function(e){for(var t=[],a=10;this._heroLevelData.has(e+"|"+a);)t.push(this._heroLevelData.get(e+"|"+a)),a+=10;return t},a.getHeroSkillByHeroId=function(e,t){return void 0===t&&(t=0),this._heroSkillData.get(e+"|"+t)},a.getHeroSkillCfgByHeroId=function(e){for(var t=[],a=0;this._heroSkillData.has(e+"|"+a);)t.push(this._heroSkillData.get(e+"|"+a)),a++;return t},a.getMaxLevel=function(e,t){var a=e+"|"+t;return this._heroSkillData.has(a)?this._heroSkillData.get(a).maxLevel:0},a.calAddHpAndDamage=function(e,t){for(var a=0,r=0,o=0;o<Math.ceil(t/10);o++){var i=e+"|"+10*o;if(this._heroLevelData.has(i)){for(var n=this._heroLevelData.get(i),s=t>10*(o+1)||t%10==0?10:t%10,h=0;h<s;h++)a+=Number(n.addHp),r+=Number(n.addDamage);if(10==s){var d=e+"|"+10*(o+1);if(this._heroLevelData.has(d)){var c=this._heroLevelData.get(d);a+=Number(c.extraAddHp),r+=Number(c.extraAddDamage)}}}}return{addDamage:r,addHp:a}},a.getUpgradeFood=function(e,t){var a=e+"|"+10*Math.floor((t+1)/10);return this._heroLevelData.has(a)?this._heroLevelData.get(a).food:0},a.getActiveHeros=function(){var e=this,t=[];return this._heroData.forEach((function(a){if(e._activeHeroData.has(a.Id)){var r=e._activeHeroData.get(a.Id);r.level>0&&t.push(r)}})),t},a.getLockedHeros=function(){var e=this,t=[];return this._heroData.forEach((function(a){if(e._activeHeroData.has(a.Id)){var r=e._activeHeroData.get(a.Id);0==r.level&&t.push(r)}else{var o=new n;o.heroId=a.Id,o.isUsed=!1,o.fragment=0,o.level=0,o.addDamage=0,o.addHp=0,o.star=0,o.maxLevel=e.getMaxLevel(a.Id,0),t.push(o)}})),t},a.useHero=function(e){if(0!=this._activeHeroId){var t=this._activeHeroId,a=this._activeHeroData.get(t);a.isUsed=!1,this._activeHeroData.set(t,a)}var r=this._activeHeroData.get(e);r.isUsed=!0,this._activeHeroData.set(e,r),this._activeHeroId=e,v.emit(f.UPDATE_HERO_INFO),c.instance.post(l.HERO_SET,{heroId:e}).then((function(e){}))},a.unlockHero=function(e){var t=this,a=this._activeHeroData.get(e);this.getHeroSkillByHeroId(e,a.star).fragment>a.fragment?d.instance.showToast("fragment.insufficient"):c.instance.post(l.HERO_UNLOCK,{heroId:e}).then((function(r){if(0==r.code){a.level=1;var o=t.calAddHpAndDamage(a.heroId,a.level),i=o.addHp,n=o.addDamage;a.addDamage=n,a.addHp=i,t._activeHeroData.set(e,a),v.emit(f.UPDATE_HERO_INFO)}else d.instance.showToast(r.msg)}))},a.upgradeHero=function(e,t){var a=this,r=this._activeHeroData.get(e);if(r.level!=r.maxLevel){this._food<this.getUpgradeFood(e,r.level)&&d.instance.showToast("food.insufficient"),r.level+=1;var o=this.calAddHpAndDamage(r.heroId,r.level),i=o.addHp,n=o.addDamage;r.addDamage=n,r.addHp=i,t(),c.instance.post(l.HERO_LEVELUP,{heroId:e}).then((function(t){0==t.code?(a.initHeroData(t.data.heros),a._food=t.data.food,a._activeHeroData.set(e,r),v.emit(f.UPDATE_HERO_INFO)):d.instance.showToast(t.msg)}))}else d.instance.showToast("hero.maxLevelToAwaken")},a.awakeHero=function(t){var a=this,r=this._activeHeroData.get(t),o=r.star+1,i=e.instance.getHeroSkillByHeroId(r.heroId,o);null!=i?(r.fragment<i.fragment&&d.instance.showToast("fragment.insufficient"),c.instance.post(l.HERO_AWAKE,{heroId:t}).then((function(e){0==e.code?(r.star+=1,a._activeHeroData.set(t,r),v.emit(f.UPDATE_HERO_INFO)):d.instance.showToast(e.msg)}))):d.instance.showToast("hero.maxAwaken")},a.getHeroDataFromNetwork=function(){var e=this;c.instance.post(l.HERO_INFO,{}).then((function(t){0==t.code&&(e.initHeroData(t.data.heros),e._food=t.data.food)}))},t(e,[{key:"activeHeroId",get:function(){return this._activeHeroId}},{key:"food",get:function(){return this._food}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,g=H))||g),e("HeroType",function(e){return e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LOCK=2]="LOCK",e}({}));a._RF.pop()}}}));

System.register("chunks:///_virtual/BagHeroItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./BagHeroData.ts","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./LanguageManager.ts"],(function(e){var t,i,r,n,a,o,l,s,u,c,p,h,g,f,b,m,d,v,y,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,s=e.Sprite,u=e.Node,c=e.Prefab,p=e.instantiate,h=e.UITransform,g=e.Component},function(e){f=e.OpenPopupManager,b=e.LayerType},function(e){m=e.BagHeroData},function(e){d=e.Constants},function(e){v=e.ResourcesUtil},function(e){y=e.SpriteEx},function(e){I=e.LanguageManager}],execute:function(){var L,_,w,z,H,B,C,P,S,N,O,U,D,F,M,j,T,x,R,k,E;a._RF.push({},"03241T/h7tOUKEp8nKUkW5/","BagHeroItem",void 0);var K=o.ccclass,q=o.property;e("BagHeroItem",(L=K("BagHeroItem"),_=q(l),w=q(y),z=q(s),H=q(l),B=q(u),C=q(u),P=q(u),S=q(u),N=q(c),L((D=t((U=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"heroName",D,n(t)),r(t,"bg",F,n(t)),r(t,"icon",M,n(t)),r(t,"level",j,n(t)),r(t,"levelNode",T,n(t)),r(t,"used",x,n(t)),r(t,"starList",R,n(t)),r(t,"redpoint",k,n(t)),r(t,"star",E,n(t)),t._heroObj=null,t._heroCfg=null,t}i(t,e);var a=t.prototype;return a.init=function(e){var t=this;if(this._heroObj=e,this._heroCfg=m.instance.getHeroCfgById(e.heroId),this.bg.index=this._heroCfg.quality,this.level.string=e.level.toString(),this.redpoint.active=!1,0==e.level){this.levelNode.active=!1;var i=m.instance.getHeroSkillByHeroId(e.heroId,0);this._heroObj.fragment>=i.fragment&&(this.redpoint.active=!0)}else this.levelNode.active=!0;this.heroName.string=I.instance.getLang(this._heroCfg.name),this.used.active=e.isUsed;for(var r=0;r<e.star;r++){if(!this.starList.children[r])p(this.star).parent=this.starList}for(var n=this.starList.children.length-1;n>e.star-1;n--)this.starList.children[n].removeFromParent();var a=d.heroIconPath+this._heroCfg.res+"/spriteFrame";v.getSpriteFrame(a).then((function(e){t.icon.spriteFrame=e;var i=t.icon.getComponent(h).contentSize,r=Math.min(160/i.width,160/i.height);t.icon.node.setScale(r,r)}))},a.onInfoBtn=function(){f.instance.show(d.PopupUI.HeroDetailPopup,null,b.TOP,!1,this._heroObj)},t}(g)).prototype,"heroName",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(U.prototype,"bg",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(U.prototype,"icon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(U.prototype,"level",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(U.prototype,"levelNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(U.prototype,"used",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(U.prototype,"starList",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(U.prototype,"redpoint",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(U.prototype,"star",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=U))||O));a._RF.pop()}}}));

System.register("chunks:///_virtual/BagHeroModel.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"ba4848I6JBLJYYz7iOK9OPf","BagHeroModel",void 0);e("BagHeroResult",(function(){this.heros=void 0,this.food=void 0}));o._RF.pop()}}}));

System.register("chunks:///_virtual/BagModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"2d3ad7YaddLVaGcEN1TRnbz","BagModel",void 0);i("BagCfg",(function(){this.ClassName="Bag",this.Id=void 0,this.name=void 0,this.private_gridLen=void 0,this.max_gridLen=void 0,this.private_gridWidth=void 0,this.private_gredHeight=void 0,this.private_space=void 0,this.picture=void 0,this.private_grid=void 0,this.max_grid=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BagPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagData.ts","./EventListener.ts","./GameEvent.ts","./SlotItem.ts","./BagWeaponItem.ts","./GuideData.ts","./OpenPopupManager.ts","./Constants.ts"],(function(t){var e,n,i,o,a,r,l,c,s,p,h,u,d,g,f,C,m,v,P,b,w,I,_,D,O,y,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){l=t.cclegacy,c=t._decorator,s=t.ScrollView,p=t.Label,h=t.Node,u=t.Prefab,d=t.instantiate,g=t.Layout,f=t.Sprite,C=t.Component},function(t){m=t.BagData,v=t.EquipType},function(t){P=t.EventListener},function(t){b=t.GameEvent},function(t){w=t.SlotItem},function(t){I=t.BagWeaponItem},function(t){_=t.GuideData,D=t.GuideStep},function(t){O=t.OpenPopupManager,y=t.LayerType},function(t){S=t.Constants}],execute:function(){var E,N,U,A,B,L,W,x,G,q,T,k,z,M,j,F,R,K,V,H,J;l._RF.push({},"5cb8f1LrbdFVL/2sWMnbi9G","BagPopup",void 0);var Q=c.ccclass,X=c.property;t("BagPopup",(E=Q("BagPopup"),N=X(s),U=X(p),A=X(h),B=X(h),L=X(h),W=X(u),x=X(u),G=X(h),q=X(h),E((z=e((k=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"scrollview",z,o(e)),i(e,"upPlace",M,o(e)),i(e,"placeContent",j,o(e)),i(e,"downContent",F,o(e)),i(e,"lockContent",R,o(e)),i(e,"equipPrefab",K,o(e)),i(e,"placePrefab",V,o(e)),i(e,"exchangeContent",H,o(e)),i(e,"equipList",J,o(e)),e._isUpdate=!1,e._placeCount=8,e._upCount=0,e.changeNode=null,e.changeData=null,e}n(e,t);var l=e.prototype;return l.show=function(){m.instance.getBagDataFromNetwork(),this.scrollview.scrollToTop(),!this._isUpdate&&this.setPlaceList(),!this._isUpdate&&this.setWearEquipList(),!this._isUpdate&&this.setNoWearEquipList(),!this._isUpdate&&this.setLockEquipList(),P.emit(b.init_POPUP_WEAPON_STATUS),this.upPlace.string=this._upCount+"/"+this._placeCount,this._isUpdate=!0},l.setPlaceList=function(){var t=this,e=m.instance.getPlaceData();if(this._placeCount=e.length,0==this.placeContent.children.length){for(var n=0;n<e.length;n++){var i=e[n],o=d(this.placePrefab);o.parent=this.placeContent,o.getComponent(w).init(i,n)}this.scheduleOnce((function(){t.placeContent.getComponent(g).enabled=!1;for(var e=t.placeContent.children.length-1;e>=0;e--)t.placeContent.children[e].setSiblingIndex(100+e)}),.1)}else{for(var a=this.placeContent.children.length-1;a>=0;a--)this.placeContent.children[a].setSiblingIndex(100+a);for(var r=0;r<e.length;r++){var l=e[r];if(this.placeContent.children[r])this.placeContent.children[r].getComponent(w).init(l,r);else{var c=e[r],s=d(this.placePrefab);s.parent=this.placeContent,s.getComponent(w).init(c,r)}}this.placeContent.getComponent(g).enabled=!0,this.scheduleOnce((function(){t.placeContent.getComponent(g).enabled=!1;for(var e=t.placeContent.children.length-1;e>=0;e--)t.placeContent.children[e].setSiblingIndex(100+e)}),.1)}},l.getSlotItemBySid=function(t){for(var e=this.placeContent.children,n=null,i=0;i<e.length;i++)if(e[i].getComponent(w).sid==t){n=e[i];break}return n},l.updatePlaceItem=function(t){t.getComponent(w).updateWeapon()},l.setWearEquipList=function(){var t=this,e=m.instance.getWearData();this._upCount=e.length;for(var n=[],i=function(){var i=e[o],a=i.sid;n.push(a);var r=t.getSlotItemBySid(a);t.updatePlaceItem(r);var l=r.getChildByName("content");if(0==l.children.length){var c=d(t.equipPrefab);c.parent=l,c.getComponent(I).init(i,v.UP)}else l.children[0].getComponent(I).init(i,v.UP);_.instance.guideMode&&0==o&&t.scheduleOnce((function(){_.instance.curStep==D.GUIDE_STEP16_BAG&&(t.placeContent.getComponent(g).enabled=!1,_.instance.curStep=1,O.instance.show(S.PopupUI.GuidePopup,null,y.TOP,!1,r))}),.1)},o=0;o<e.length;o++)i();for(var a=m.instance.getPlaceData(),r=0;r<a.length;r++){if(-1==n.indexOf(r))this.getSlotItemBySid(r).getChildByName("content").removeAllChildren()}},l.setNoWearEquipList=function(){var t=m.instance.getNoWearData();this.downContent.removeAllChildren(),this.downContent.getComponent(g).enabled=!0;for(var e=0;e<t.length;e++){var n=t[e],i=d(this.equipPrefab);i.parent=this.downContent,i.getComponent(I).init(n,v.DOWN)}this.downContent.parent.active=!!t.length,this.setDownInfoAfterIndex()},l.setLockEquipList=function(){var t=m.instance.getLockData(),e=0;for(e=0;e<t.length;e++){var n=t[e];if(this.lockContent.children[e])this.lockContent.children[e].getComponent(I).init(n,v.LOCK);else{var i=d(this.equipPrefab);i.parent=this.lockContent,i.getComponent(I).init(n,v.LOCK);for(var o=i.getComponentsInChildren(f),a=0;a<o.length;a++){o[a].grayscale=!0}}}for(var r=this.lockContent.children.length-1;r>=e;r--)this.lockContent.children[r].removeFromParent();this.lockContent.parent.active=!!t.length},l.getSlotId=function(){for(var t=this.placeContent.children,e=-1,n=[],i=0;i<t.length;i++){var o=t[i];if(!o.getChildByName("content").children.length){var a=o.getComponent(w).chapterId,r=o.getComponent(w).sid;0==a&&n.push(r)}}return n.length&&(e=Math.min.apply(Math,n)),e},l.onUpDownAction=function(t,e){if(t.sid>=0){this.setDownInfoBeforeIndex(),this.downContent.getComponent(g).enabled=!0;var n=t.sid;this.getSlotItemBySid(n).getChildByName("content").children[0].destroy(),m.instance.onDownAction(t);var i=d(this.equipPrefab);i.parent=this.downContent,i.getComponent(I).init(t,v.DOWN),this.setDownInfoAfterIndex()}else{var o=this.getSlotId();if(o>=0){this.setDownInfoBeforeIndex(),this.downContent.getComponent(g).enabled=!0,t.sid=o,m.instance.onUpAction(t);var a=this.getSlotItemBySid(o).getChildByName("content"),r=d(this.equipPrefab);r.parent=a,r.getComponent(I).init(t,v.UP),e.destroy(),this.setDownInfoAfterIndex()}else this.exchangeContent.active=!0,this.equipList.active=!1,this.changeData=t,this.changeNode=e,this.exchangeContent.getChildByName("equipItem").getComponent(I).init(t,v.DOWN),this.placeContent.children.forEach((function(t,e){var n=t.getChildByName("content");n.children.length>0&&n.children[0].getComponent(I).setChangeStatus()}))}},l.cancelChange=function(){this.exchangeContent.active=!1,this.equipList.active=!0,this.placeContent.children.forEach((function(t,e){var n=t.getChildByName("content");n.children.length>0&&n.children[0].getComponent(I).closeChangeStatus()}))},l.setDownInfoBeforeIndex=function(){var t=m.instance.getNoWearArr();this.downContent.getComponent(g).enabled=!1;var e=this.downContent.children;e.sort((function(e,n){var i=e.getComponent(I).weaponObj.weaponId,o=n.getComponent(I).weaponObj.weaponId;return t.indexOf(i)-t.indexOf(o)}));for(var n=0;n<e.length;n++)e[n].setSiblingIndex(n);this.downContent._updateSiblingIndex()},l.setDownInfoAfterIndex=function(){var t=this;this.scheduleOnce((function(){var e=m.instance.getNoWearArr();t.downContent.getComponent(g).enabled=!1;var n=t.downContent.children;n.sort((function(t,n){var i=t.getComponent(I).weaponObj.weaponId,o=n.getComponent(I).weaponObj.weaponId;return e.indexOf(o)-e.indexOf(i)}));for(var i=0;i<n.length;i++)n[i].setSiblingIndex(i);t.downContent._updateSiblingIndex()}),.1)},l.change=function(){var t=a(r().mark((function t(e,n){var i=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.cancelChange(),P.emit(b.WEAPON_DOWN_UP,e,n),this.scheduleOnce((function(){P.emit(b.WEAPON_DOWN_UP,i.changeData,i.changeNode)}),0);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),l.onUpdateShopItems=function(){this.setPlaceList(),this.setWearEquipList(),this.setNoWearEquipList(),this.setLockEquipList(),P.emit(b.init_POPUP_WEAPON_STATUS),this.upPlace.string=this._upCount+"/"+this._placeCount},l.onGuideEvent=function(){_.instance.curStep==D.GUIDE_STEP19_WEAPON_UPGRADE&&(this.placeContent.getComponent(g).enabled=!1,_.instance.curStep=1,O.instance.show(S.PopupUI.GuidePopup,null,y.TOP,!1,null,(function(){P.emit(b.GUIDE_BAG_ACTION)})))},l.onEnable=function(){P.on(b.UPDATE_BAG_POPUP,this.onUpdateShopItems,this),P.on(b.WEAPON_DOWN_UP,this.onUpDownAction,this),P.on(b.GUIDE_BAG_ACTION,this.onGuideEvent,this)},l.onDisable=function(){P.off(b.UPDATE_BAG_POPUP,this.onUpdateShopItems,this),P.off(b.WEAPON_DOWN_UP,this.onUpDownAction,this),P.off(b.GUIDE_BAG_ACTION,this.onGuideEvent,this)},l.update=function(){this.downContent.parent.active=!!this.downContent.children.length,this.lockContent.parent.active=!!this.lockContent.children.length},e}(C)).prototype,"scrollview",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(k.prototype,"upPlace",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(k.prototype,"placeContent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(k.prototype,"downContent",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(k.prototype,"lockContent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(k.prototype,"equipPrefab",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(k.prototype,"placePrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(k.prototype,"exchangeContent",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(k.prototype,"equipList",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=k))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/BagWeaponItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagData.ts","./Constants.ts","./ResourcesUtil.ts","./OpenPopupManager.ts","./EventListener.ts","./GameEvent.ts","./SpriteEx.ts","./SysOpenData.ts","./BagPopup.ts","./LanguageManager.ts","./GuideData.ts"],(function(e){var t,n,i,o,a,r,s,u,c,l,p,h,g,f,b,_,d,w,O,P,v,y,m,B,I,T,S,j,U,E,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){r=e.cclegacy,s=e._decorator,u=e.Label,c=e.Node,l=e.Sprite,p=e.ProgressBar,h=e.UITransform,g=e.tween,f=e.Vec3,b=e.Tween,_=e.Layout,d=e.Component},function(e){w=e.EquipType,O=e.BagData},function(e){P=e.Constants},function(e){v=e.ResourcesUtil},function(e){y=e.OpenPopupManager,m=e.LayerType},function(e){B=e.EventListener},function(e){I=e.GameEvent},function(e){T=e.SpriteEx},function(e){S=e.SysOpenData},function(e){j=e.BagPopup},function(e){U=e.LanguageManager},function(e){E=e.GuideData,k=e.GuideStep}],execute:function(){var L,A,W,D,z,C,N,q,F,G,x,M,R,H,K,V,J,Q,X,Y,Z,$,ee,te,ne,ie,oe,ae,re,se,ue,ce,le,pe,he;r._RF.push({},"982021FWyJCk5cbhftj/GEV","BagWeaponItem",void 0);var ge=s.ccclass,fe=s.property;e("BagWeaponItem",(L=ge("BagWeaponItem"),A=fe(T),W=fe(u),D=fe(c),z=fe(u),C=fe(u),N=fe(l),q=fe(l),F=fe(p),G=fe(u),x=fe(c),M=fe(T),R=fe(c),H=fe(c),K=fe(u),V=fe(c),J=fe(c),L((Y=t((X=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"bg",Y,o(t)),i(t,"title",Z,o(t)),i(t,"skin",$,o(t)),i(t,"level",ee,o(t)),i(t,"desc",te,o(t)),i(t,"icon",ne,o(t)),i(t,"grid",ie,o(t)),i(t,"progressBar",oe,o(t)),i(t,"proText",ae,o(t)),i(t,"lock",re,o(t)),i(t,"doubleTag",se,o(t)),i(t,"contentBar",ue,o(t)),i(t,"contentBtn",ce,o(t)),i(t,"btnLb",le,o(t)),i(t,"upgradeAnim",pe,o(t)),i(t,"infoBtn",he,o(t)),t._equipType=w.LOCK,t._weaponObj=null,t}n(t,e);var r=t.prototype;return r.init=function(e,t){this._equipType=t,this._weaponObj=e,this.upgradeAnim.active=O.instance.checkWeaponUpgrage(e),this.setWeaponInfo(),this.setProgress()},r.setWeaponInfo=function(){var e=this,t=O.instance.getWeaponCfgById(this._weaponObj.weaponId);this.bg.index=t.quality-1,this._equipType!=w.DETAIL?(this.title.node.active=!!this._weaponObj.unlock,this.skin&&(this.skin.active=!1)):(this.title.node.active=!1,this.skin.active=!0),this.title.string=U.instance.getLang(""+t.name),this.level.string=this._weaponObj.unlock?"Lv."+this._weaponObj.level:U.instance.getLang("bag.locked");this._weaponObj.unlock&&(this._weaponObj.level>=t.skillIds.length?t.skillIds.length:this._weaponObj.level);var n=P.weaponIconPath+O.instance.getWeaponIcon(t.Id)+"/spriteFrame",i=P.gridIconPath+t.grid+"/spriteFrame";v.geSpriteFrame(n).then((function(t){e.icon.spriteFrame=t;var n=e.icon.getComponent(h).contentSize,i=Math.min(90/n.width,90/n.height);e.icon.node.setScale(i,i)})),v.geSpriteFrame(i).then((function(t){e.grid.spriteFrame=t})),this.progressBar.node.active=!!this._weaponObj.unlock,this.lock.active=!this._weaponObj.unlock,this.btnLb.string=this._equipType==w.UP?U.instance.getLang("bag.remove"):U.instance.getLang("bag.use"),t.doubleLevel,this.doubleTag.node.active=!1},r.setUnlockDesc=function(e,t){if(t&&e){var n=S.instance.getSysOpenCfgById(t);if(n){var i=n.unlock.toString(),o=U.instance.getLang(n.desc,[i]);this.desc.string=o}else this.desc.string=""}},r.setProgress=function(){if(O.instance.isWeaponMaxLevel(this._weaponObj.weaponId,this._weaponObj.level))this.progressBar.node.active=!1;else{this.progressBar.node.active=!0;var e=this._weaponObj.fragment,t=O.instance.getWeaponLevelCfgByLevel(this._weaponObj.weaponId,0==this._weaponObj.level?1:this._weaponObj.level);this.proText.string=e+"/"+t.fragment,this.progressBar.progress=e/t.fragment}},r.onTouchBtn=function(){switch(this._equipType){case w.UP:case w.DOWN:this.setInfoStatus();break;case w.LOCK:this.onInfoBtn();break;case w.CHANGE:B.handle[I.WEAPON_DOWN_UP][0].target.getComponent(j).change(this._weaponObj,this.node)}},r.setChangeStatus=function(){this._equipType=w.CHANGE,g(this.node).sequence(g().to(.8,{scale:new f(1.1,1.1,1)}),g().to(.8,{scale:new f(1,1,1)})).repeatForever().start()},r.closeChangeStatus=function(){this._equipType=w.UP,b.stopAllByTarget(this.node)},r.onInfoBtn=function(){B.emit(I.init_POPUP_WEAPON_STATUS),y.instance.show(P.PopupUI.BagDetailPopup,null,m.TOP,!1,this._weaponObj)},r.onSkinBtn=function(){y.instance.show(P.PopupUI.WeaponStylePopup,null,m.TOP,!1,this._weaponObj.weaponId)},r.onActionBtn=function(){B.emit(I.WEAPON_DOWN_UP,this._weaponObj,this.node),this.contentBar.active=!this.contentBar.active,this.contentBtn.active=!this.contentBtn.active},r.setInfoStatus=function(){var e=this;B.emit(I.init_POPUP_WEAPON_STATUS,this._weaponObj.weaponId),this.contentBar.active=!this.contentBar.active,this.contentBtn&&(this.contentBtn.active=!this.contentBtn.active),E.instance.curStep==k.GUIDE_STEP17_WEAPON_INFO?this.scheduleOnce((function(){e.contentBtn.getComponent(_).enabled=!1,E.instance.curStep=1,y.instance.show(P.PopupUI.GuidePopup,null,m.TOP,!1,e.infoBtn)}),.1):E.instance.guideMode&&y.instance.hide(P.PopupUI.GuidePopup)},r.initInfoStaus=function(e){this._weaponObj&&(e&&this._weaponObj.weaponId==e||(this.contentBar.active=!0,this.contentBtn.active=!1))},r.updateEquipInfo=function(){this.init(this._weaponObj,this._equipType)},r.onEnable=function(){B.on(I.init_POPUP_WEAPON_STATUS,this.initInfoStaus,this),B.on(I.UPDATE_POPUP_UPGRADE_INFO,this.updateEquipInfo,this)},r.onDisable=function(){B.off(I.init_POPUP_WEAPON_STATUS,this.initInfoStaus,this),B.off(I.UPDATE_POPUP_UPGRADE_INFO,this.updateEquipInfo,this)},a(t,[{key:"weaponObj",get:function(){return this._weaponObj}}]),t}(d)).prototype,"bg",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(X.prototype,"title",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(X.prototype,"skin",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(X.prototype,"level",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(X.prototype,"desc",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(X.prototype,"icon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(X.prototype,"grid",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(X.prototype,"progressBar",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(X.prototype,"proText",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(X.prototype,"lock",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(X.prototype,"doubleTag",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(X.prototype,"contentBar",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(X.prototype,"contentBtn",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(X.prototype,"btnLb",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(X.prototype,"upgradeAnim",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(X.prototype,"infoBtn",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=X))||Q));r._RF.pop()}}}));

System.register("chunks:///_virtual/BagWeaponModel.ts",["cc"],(function(i){var o;return{setters:[function(i){o=i.cclegacy}],execute:function(){o._RF.push({},"1ab4eeNMlpFFrHEYIzlU6m0","BagWeaponModel",void 0);i("BagWeaponCfg",(function(){this.ClassName="BagWeapon",this.weaponId=void 0,this.sid=void 0,this.fragment=void 0,this.level=void 0,this.golds=void 0})),i("BagWeaponResult",(function(){this.slot=void 0,this.bagWeapons=void 0})),i("BagWeaponModel",(function(){this.weaponId=void 0,this.sid=void 0,this.fragment=void 0,this.blueprint=void 0,this.level=void 0,this.fragments=void 0,this.golds=void 0}));o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./GameController.ts"],(function(e){var t,n,i,o,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e.Component},function(e){o=e.GameDefine},function(e){a=e.default}],execute:function(){n._RF.push({},"12e28pWfOpKyIbZwZp3vv5F","BaseComponent",void 0);e("default",function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._now_time=0,t}t(n,e);var i=n.prototype;return i.childUpdate=function(e){},i.update=function(e){if(!a.pause_data.state_b)for(this._now_time+=e;this._now_time>=o.frameTime;)this.childUpdate(o.frameTime),this._now_time-=o.frameTime},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleLevelModel.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c25beFq2cdPHpZ9fLzDLadI","BattleLevelModel",void 0);e("BattleLevelCfg",(function(){this.ClassName="BattleLevel",this.Id=void 0,this.level=void 0,this.exp=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BattleUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./PoolManager.ts","./DamageItem.ts","./ResourcesUtil.ts","./BlastItem.ts","./HeroHpItem.ts","./MonsterHpItem.ts","./Constants.ts","./Shadow.ts","./MonsterBuffItem.ts","./MonsterBuffData.ts"],(function(t){var e,n,a,i,o,r,s,f,l,h,d,m,C,g,u,b,c,p,I,P,U,_,D,N,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Node,f=t.Vec3,l=t.instantiate,h=t.Animation,d=t.AnimationClip,m=t.Sprite,C=t.Component},function(t){g=t.EventListener},function(t){u=t.GameEvent},function(t){b=t.PoolManager},function(t){c=t.DamageItem},function(t){p=t.ResourcesUtil},function(t){I=t.BlastItem},function(t){P=t.HeroHpItem},function(t){U=t.MonsterHpItem},function(t){_=t.Constants},function(t){D=t.Shadow},function(t){N=t.MonsterBuffItem},function(t){S=t.MonsterBuffData}],execute:function(){var B,v,E,M,H,w,y;o._RF.push({},"8b377pXlFFISI2cYT0s3FLN","BattleUIManager",void 0);var F=r.ccclass,A=r.property;t("BattleUIManager",(B=F("BattleUIManager"),v=A(s),E=A(s),B((w=e((H=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(e,"battleUIUpParent",w,i(e)),a(e,"battleUIDownParent",y,i(e)),e._battlerUIPrefabData=new Map,e._battleUiNode=new Map,e}n(e,t);var o=e.prototype;return o.onCreateDamageNum=function(t,e,n,a){var i=this,o="damageNum",r=null,s=null;if(this._battlerUIPrefabData.has(o))s=this._battlerUIPrefabData.get(o),r=b.instance.getNodeItem(s),this.battleUIUpParent.addChild(r),r.setPosition(t),r.getComponent(c).init(e,n);else{var f=_.battlePath+o;p.getPrefab(f).then((function(a){i._battlerUIPrefabData.set(o,a),r=b.instance.getNodeItem(a),i.battleUIUpParent.addChild(r),r.setPosition(t),r.getComponent(c).init(e,n)}))}},o.onCreateDieEffect=function(t){var e=this,n="blastItem",a=null,i=null,o=this.battleUIDownParent.getChildByName("Die");if(this._battlerUIPrefabData.has(n))i=this._battlerUIPrefabData.get(n),a=b.instance.getNodeItem(i),o.addChild(a),a.setPosition(t),a.getComponent(I).init();else{var r=_.battlePath+n;p.getPrefab(r).then((function(i){e._battlerUIPrefabData.set(n,i),a=b.instance.getNodeItem(i),o.addChild(a),a.setPosition(t),a.getComponent(I).init()}))}},o.onCreateHeroHp=function(t){var e=this,n="heroHpItem",a=null,i=null,o=this.battleUIUpParent,r=new f(t.x,t.y-30,0);if(console.log("hero",r.x,r.y),this._battlerUIPrefabData.has(n))i=this._battlerUIPrefabData.get(n),a=b.instance.getNodeItem(i),o.addChild(a),a.setPosition(r),a.getComponent(P).init();else{var s=_.battlePath+n;p.getPrefab(s).then((function(t){e._battlerUIPrefabData.set(n,t),a=b.instance.getNodeItem(t),o.addChild(a),a.setPosition(r),a.getComponent(P).init()}))}},o.onCreateMonsterHp=function(t){var e=this,n="monsterHpItem",a=null,i=null,o=this.battleUIUpParent;if(this._battlerUIPrefabData.has(n))i=this._battlerUIPrefabData.get(n),a=b.instance.getNodeItem(i),o.addChild(a),a.getComponent(U).init(t),t.monsterHpItem=a.getComponent(U);else{var r=_.battlePath+n;p.getPrefab(r).then((function(i){e._battlerUIPrefabData.set(n,i),a=b.instance.getNodeItem(i),o.addChild(a),a.getComponent(U).init(t),t.monsterHpItem=a.getComponent(U)}))}},o.onCreateMonsterShadow=function(t){var e=this,n="shadown",a=null,i=null,o=this.battleUIDownParent.getChildByName("Shadow");if(this._battlerUIPrefabData.has(n))i=this._battlerUIPrefabData.get(n),a=b.instance.getNodeItem(i),o.addChild(a),a.getComponent(D).init(t),t.monsterShadow=a.getComponent(D);else{var r=_.battlePath+n;p.getPrefab(r).then((function(i){e._battlerUIPrefabData.set(n,i),a=b.instance.getNodeItem(i),o.addChild(a),a.getComponent(D).init(t),t.monsterShadow=a.getComponent(D)}))}},o.onCreateMonsterDebuff=function(t,e){var n=this,a=e.buffCfg.Id,i=null,o=this.battleUIDownParent.getChildByName("Buff");if(this._battleUiNode.has(a.toString()))(i=b.instance.getNodeItemById(this._battleUiNode.get(a.toString()),a.toString())).setPosition(1e4,1e4),o.addChild(i),i.getComponent(N).init(t,e),S.instance.addBuffItem(e,i.getComponent(N));else{var r=_.battlePath+"monsterBuffItem";p.getPrefab(r).then((function(r){if(e.buffCfg.frames>1){var s=_.buffPath+e.buffCfg.res;p.getSpriteAtlas(s).then((function(s){var f=(i=l(r)).getChildByName("icon").getComponent(h),m=d.createWithSpriteFrames(s,e.buffCfg.frames);m.name="effect",m.wrapMode=d.WrapMode.Loop,f.addClip(m),i.setPosition(1e4,1e4),o.addChild(i),n._battleUiNode.set(a.toString(),i),i.getComponent(N).init(t,e),S.instance.addBuffItem(e,i.getComponent(N))}))}else{var f=_.buffPath+e.buffCfg.res+"/spriteFrame";p.getSpriteFrame(f).then((function(s){(i=l(r)).getChildByName("icon").getComponent(m).spriteFrame=s,i.setScale(e.buffCfg.scale,e.buffCfg.scale,1),i.setPosition(1e4,1e4),o.addChild(i),n._battleUiNode.set(a.toString(),i),i.getComponent(N).init(t,e),S.instance.addBuffItem(e,i.getComponent(N))}))}}))}},o.onCreateHeroDebuff=function(t,e){var n=this,a=t.buffCfg.Id,i=null,o=this.battleUIDownParent;if(this._battleUiNode.has(a.toString()))i=b.instance.getNodeItemById(this._battleUiNode.get(a.toString()),a.toString()),o.addChild(i),i.getComponent(N).init(null,t),i.setPosition(e);else{var r=_.battlePath+"monsterBuffItem";p.getPrefab(r).then((function(r){if(t.buffCfg.frames>1){var s=_.buffPath+t.buffCfg.res;p.getSpriteAtlas(s).then((function(s){var f=(i=l(r)).getChildByName("icon").getComponent(h),m=d.createWithSpriteFrames(s,t.buffCfg.frames);m.name="effect",m.wrapMode=d.WrapMode.Loop,f.addClip(m),o.addChild(i),n._battleUiNode.set(a.toString(),i),i.getComponent(N).init(null,t),i.setPosition(e)}))}else{var f=_.buffPath+t.buffCfg.res+"/spriteFrame";p.getSpriteFrame(f).then((function(s){(i=l(r)).getChildByName("icon").getComponent(m).spriteFrame=s,i.setScale(t.buffCfg.scale,t.buffCfg.scale,1),o.addChild(i),n._battleUiNode.set(a.toString(),i),i.getComponent(N).init(null,t),i.setPosition(e)}))}}))}},o.onCreateMonsterBuff=function(t,e){var n=this,a=e.buffCfg.Id,i=null,o=2==e.buffCfg.lowLayer?this.battleUIUpParent:this.battleUIDownParent.getChildByName("Buff");if(this._battleUiNode.has(a.toString()))(i=b.instance.getNodeItemById(this._battleUiNode.get(a.toString()),a.toString())).setPosition(1e4,1e4),o.addChild(i),i.getComponent(N).init(t,e),S.instance.addBuffItem(e,i.getComponent(N));else{var r=_.battlePath+"monsterBuffItem";p.getPrefab(r).then((function(r){if(e.buffCfg.frames>1){var s=_.buffPath+e.buffCfg.res;p.getSpriteAtlas(s).then((function(s){var f=(i=l(r)).getChildByName("icon").getComponent(h),m=d.createWithSpriteFrames(s,e.buffCfg.frames);m.name="effect",m.wrapMode=d.WrapMode.Loop,f.addClip(m),i.setPosition(1e4,1e4),o.addChild(i),n._battleUiNode.set(a.toString(),i),i.getComponent(N).init(t,e),S.instance.addBuffItem(e,i.getComponent(N))}))}else{var f=_.buffPath+e.buffCfg.res+"/spriteFrame";p.getSpriteFrame(f).then((function(s){(i=l(r)).getChildByName("icon").getComponent(m).spriteFrame=s,i.setPosition(1e4,1e4),o.addChild(i),n._battleUiNode.set(a.toString(),i),i.getComponent(N).init(t,e),S.instance.addBuffItem(e,i.getComponent(N))}))}}))}},o.revive=function(){this._battlerUIPrefabData.clear(),this._battleUiNode.clear(),this.battleUIUpParent.removeAllChildren(),this.battleUIDownParent.getChildByName("Die").removeAllChildren(),this.battleUIDownParent.getChildByName("Shadow").removeAllChildren(),this.battleUIDownParent.getChildByName("Buff").removeAllChildren()},o.clear=function(){this._battlerUIPrefabData.clear(),this._battleUiNode.clear(),this.battleUIUpParent.removeAllChildren(),this.battleUIDownParent.getChildByName("Die").removeAllChildren(),this.battleUIDownParent.getChildByName("Shadow").removeAllChildren(),this.battleUIDownParent.getChildByName("Buff").removeAllChildren()},o.onReviveHero=function(){this.battleUIUpParent.removeAllChildren(),this.battleUIDownParent.getChildByName("Die").removeAllChildren(),this.battleUIDownParent.getChildByName("Shadow").removeAllChildren(),this.battleUIDownParent.getChildByName("Buff").removeAllChildren()},o.onEnable=function(){g.on(u.CREATE_DAMAGER_NUM,this.onCreateDamageNum,this),g.on(u.SHOW_MONSTER_DIE_EFFECT,this.onCreateDieEffect,this),g.on(u.SHOW_HERO_HP,this.onCreateHeroHp,this),g.on(u.SHOW_MONSTER_HP,this.onCreateMonsterHp,this),g.on(u.SHOW_MONSTER_SHADOW,this.onCreateMonsterShadow,this),g.on(u.CREATE_MONSTER_DEBUFF,this.onCreateMonsterDebuff,this),g.on(u.CREATE_HERO_DEBUFF,this.onCreateHeroDebuff,this),g.on(u.SHOW_MONSTER_BUFF,this.onCreateMonsterBuff,this),g.on(u.REVIVE_SELECT_BAG,this.onReviveHero,this)},o.onDisable=function(){g.off(u.CREATE_DAMAGER_NUM,this.onCreateDamageNum,this),g.off(u.SHOW_MONSTER_DIE_EFFECT,this.onCreateDieEffect,this),g.off(u.SHOW_HERO_HP,this.onCreateHeroHp,this),g.off(u.SHOW_MONSTER_HP,this.onCreateMonsterHp,this),g.off(u.SHOW_MONSTER_SHADOW,this.onCreateMonsterShadow,this),g.off(u.CREATE_MONSTER_DEBUFF,this.onCreateMonsterDebuff,this),g.off(u.CREATE_HERO_DEBUFF,this.onCreateHeroDebuff,this),g.off(u.SHOW_MONSTER_BUFF,this.onCreateMonsterBuff,this),g.off(u.REVIVE_SELECT_BAG,this.onReviveHero,this)},e}(C)).prototype,"battleUIUpParent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(H.prototype,"battleUIDownParent",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=H))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/BgManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./PlayerData.ts","./ChapterMapData.ts"],(function(t){var e,r,n,a,i,s,o,c,p,u,g,l,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,o=t.Node,c=t.Sprite,p=t.Component},function(t){u=t.Constants},function(t){g=t.ResourcesUtil},function(t){l=t.PlayerData},function(t){f=t.ChapterMapData}],execute:function(){var h,m,b,B,y;i._RF.push({},"bba98kwfVtJD5TEjlbR665q","BgManager",void 0);var C=s.ccclass,d=s.property;t("BgManager",(h=C("BgManager"),m=d(o),h((y=e((B=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,n(e,"bgs",y,a(e)),e}r(e,t);var i=e.prototype;return i.init=function(){this.setBattleBgRes(),this.setGridBgRes()},i.setBattleBgRes=function(){var t=l.instance.curChapter,e=f.instance.getChapterCfg(t),r=u.mapPath+e.battleMap+"/spriteFrame",n=this.bgs[0].getComponent(c);g.geSpriteFrame(r).then((function(t){n.spriteFrame=t}))},i.setGridBgRes=function(){var t=u.mapPath+"gridBg/spriteFrame",e=this.bgs[1].getComponent(c);g.geSpriteFrame(t).then((function(t){e.spriteFrame=t}))},i.clear=function(){},e}(p)).prototype,"bgs",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=B))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/BlastItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(t){var e,n,i,r,o,a,s,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.sp,c=t.Component},function(t){l=t.PoolManager}],execute:function(){var p,u,f,m,h;o._RF.push({},"6cdfbbCEVFPtarMgjH7Ar9b","BlastItem",void 0);var y=a.ccclass,d=a.property;t("BlastItem",(p=y("BlastItem"),u=d(s.Skeleton),p((h=e((m=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"spine",h,r(e)),e}return n(e,t),e.prototype.init=function(){var t=this;this.spine.setAnimation(0,"animation",!1),this.spine.setCompleteListener((function(e){"animation"==e.animation.name&&l.instance.putNode(t.node)}))},e}(c)).prototype,"spine",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/BoxManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./EventListener.ts","./GameEvent.ts","./ResourcesUtil.ts","./Constants.ts","./CoinMode.ts","./GuideData.ts"],(function(t){var e,n,o,i,r,a,s,c,u,l,p,f,h,E,d,v,C,_,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,c=t.instantiate,u=t.sp,l=t.UITransform,p=t.v3},function(t){f=t.default},function(t){h=t.EventListener},function(t){E=t.GameEvent},function(t){d=t.ResourcesUtil},function(t){v=t.Constants},function(t){C=t.CoinObj},function(t){_=t.GuideData,m=t.GuideStep}],execute:function(){var x,b,B,g,y;r._RF.push({},"847ceV2XWlA37OAqupKooMM","BoxManager",void 0);var D=a.ccclass,P=a.property;t("BoxManager",(x=D("BoxManager"),b=P(s),x((y=e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"boxParent",y,i(e)),e._pickBox=!1,e}n(e,t);var r=e.prototype;return r.onEnable=function(){h.on(E.CREATE_DROP_BOX,this.onCreateDropBox,this)},r.onDisable=function(){h.off(E.CREATE_DROP_BOX,this.onCreateDropBox,this)},r.onCreateDropBox=function(t,e){var n=this,o=v.battlePath+"boxItem";this.boxParent.setPosition(0,0),d.getPrefab(o).then((function(o){var i=c(o);i.parent=n.boxParent,i.setPosition(t);var r=i.getChildByName("box").getComponent(u.Skeleton),a=i.getComponent(l).convertToWorldSpaceAR(p(0,0,0));n.scheduleOnce((function(){n.showFlyGoldAnim(a,e)}),.5),r.setCompleteListener((function(){i.destroy(),_.instance.curStep!=m.GUIDE_STEP10_WAVE1_DONE&&h.emit(E.RESET_SELECT_BAG)}))}))},r.showFlyGoldAnim=function(t,e){var n=new C;n.pos=t,n.num=e,h.emit(E.GAME_CHANGE_COIN,n)},r.clear=function(){this._pickBox=!1},e}(f)).prototype,"boxParent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=g))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/BuffModel.ts",["cc"],(function(_){var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"bfb59mgx31MPbvoRlZ6g4n3","BuffModel",void 0);_("BuffCfg",(function(){this.ClassName="Buff",this.Id=void 0,this.type=void 0,this.skillType=void 0,this.res=void 0,this.frames=void 0,this.scale=void 0,this.range=void 0,this.cd=void 0,this.bossCd=void 0,this.during=void 0,this.lowLayer=void 0,this.hpPer=void 0,this.speedPer=void 0,this.damagePer=void 0,this.attackPer=void 0,this.probability=void 0,this.layers=void 0,this.critPer=void 0,this.aimSkills=[],this.subBuffId=void 0})),_("BuffType",function(_){return _[_.BUFF_SHIELD=1]="BUFF_SHIELD",_[_.BUFF_INSPIRE_OTHER=2]="BUFF_INSPIRE_OTHER",_[_.BUFF_INSPIRE_SELF=3]="BUFF_INSPIRE_SELF",_[_.BUFF_SPEED_UP=4]="BUFF_SPEED_UP",_[_.BUFF_HERO_FIRE=5]="BUFF_HERO_FIRE",_[_.DEBUFF_SPEED_DEC=11]="DEBUFF_SPEED_DEC",_[_.DEBUFF_FREEZE=12]="DEBUFF_FREEZE",_[_.DEBUFF_DAMAGE_ADD=13]="DEBUFF_DAMAGE_ADD",_[_.DEBUFF_ATTACH_CRIT_INJURED=14]="DEBUFF_ATTACH_CRIT_INJURED",_[_.DEBUFF_CRIT_INJURED_CRITPER_ADD=15]="DEBUFF_CRIT_INJURED_CRITPER_ADD",_[_.DEBUFF_DAMAGE_OVERLAY_ADD=16]="DEBUFF_DAMAGE_OVERLAY_ADD",_[_.DEBUFF_ATTACH_MAGIC_INJURED=17]="DEBUFF_ATTACH_MAGIC_INJURED",_}({})),_("BuffSkillType",function(_){return _[_.DEBUFF_MONSTER_UP_TYPE=0]="DEBUFF_MONSTER_UP_TYPE",_[_.DEBUFF_MONSTER_NORMAL_TYPE=1]="DEBUFF_MONSTER_NORMAL_TYPE",_[_.BUFF_MONSTER_NORMAL_TYPE=2]="BUFF_MONSTER_NORMAL_TYPE",_[_.BUFF_HERO_NORMAL_TYPE=3]="BUFF_HERO_NORMAL_TYPE",_}({}));E._RF.pop()}}}));

System.register("chunks:///_virtual/BuffObj.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffModel.ts"],(function(t){var e,i,s;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy},function(t){s=t.BuffType}],execute:function(){i._RF.push({},"1a4feqM+GxH0YS+Af1tKohr","BuffObj",void 0);t("BuffObj",function(){function t(){this.layer=0,this.isClear=!1,this._buffCfg=null,this._type=0,this._damage=0,this._skillId=0,this._weaponId=0,this._monsterKey="",this._targetMonsterKey=""}var i=t.prototype;return i.init=function(t,e,i,s,r,f){void 0===r&&(r=0),void 0===f&&(f=""),this._monsterKey=t,this._buffCfg=s,this._weaponId=e,this._skillId=i,this._type=s.type,this._damage=r,this._targetMonsterKey=f},i.append=function(t){for(var e=0;e<t.length;e++)this._buffCfg.damagePer+=t[e].damagePer,this._buffCfg.during+=t[e].during},i.reset=function(t,e){void 0===e&&(e=0),this._buffCfg=t,this._damage=e,this.isClear=!1},i.isFullLayer=function(){return!this.isClear&&this.layer>=this._buffCfg.layers},i.isFreeze=function(){return!this.isClear&&this._type==s.DEBUFF_FREEZE},i.isCritInjured=function(){return!this.isClear&&this._type==s.DEBUFF_ATTACH_CRIT_INJURED},i.getSpeedDec=function(){return this.isClear?0:this._buffCfg.speedPer},i.getDamagePer=function(t){return this.isClear?0:this._type==s.DEBUFF_DAMAGE_OVERLAY_ADD?this._buffCfg.damagePer*this.layer:this._type==s.DEBUFF_ATTACH_CRIT_INJURED||this._type==s.DEBUFF_ATTACH_MAGIC_INJURED?-1!=this._buffCfg.aimSkills.indexOf(t)?this._buffCfg.damagePer:0:this._buffCfg.damagePer},i.getAttackPer=function(){return this.isClear?0:this._buffCfg.damagePer},i.getCritPer=function(t){return this.isClear?0:-1!=this._buffCfg.aimSkills.indexOf(t)?this._buffCfg.critPer:0},i.clear=function(){this.isClear=!0},e(t,[{key:"buffCfg",get:function(){return this._buffCfg}},{key:"damage",get:function(){return this._damage}},{key:"monsterKey",get:function(){return this._monsterKey}},{key:"skillId",get:function(){return this._skillId}},{key:"weaponId",get:function(){return this._weaponId}},{key:"targetMonsterKey",get:function(){return this._targetMonsterKey}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/CfgMgr.ts",["cc","./Debug.ts"],(function(t){var a,e;return{setters:[function(t){a=t.cclegacy},function(t){e=t.Debug}],execute:function(){a._RF.push({},"8f0fcdZNgJLlbkVxJmLK0oC","CfgMgr",void 0);var i=t("CfgMgr",function(){function t(){}return t.addCfgData=function(t,a){if(null!=t&&this.CfgDataList.has(t)){var i=this.CfgData.get(t),n=this.CfgDataList.get(t);a.forEach((function(a){if(a.hasOwnProperty("Id")){var s=a.Id;i[s]=a,n.push(a)}else e.info("The Config Id Field Error:",t)}))}else e.info("Error: The config isn't exist"+t)},t.setCfgData=function(t,a){var i={},n=[];a.forEach((function(a){if(a.hasOwnProperty("Id")){var s=a.Id;i[s]=a,n.push(a)}else e.info("The Config Id Field Error:",t)})),this.CfgData.set(t,i),this.CfgDataList.set(t,n)},t.getCfgData=function(t){var a=t.ClassName;return this.CfgData.has(a)?this.CfgData.get(a):(e.info("Error: the config doesn't exist "+a),null)},t.hasCfg=function(t){return!!this.CfgData.has(t)},t.getCfgDataArray=function(t){var a=t.ClassName;return null!=a&&this.CfgDataList.has(a)?this.CfgDataList.get(a):(e.info("Error: the config doesn't exist"+a),null)},t.getDataById=function(t,a){var i=t.ClassName,n=null;if(this.CfgData.has(i)){var s=this.CfgData.get(i);s[a]?n=s[a]:e.info(i+":The ID doesn't exist"+a)}else e.info(i+":The Config doesn't exist"+a);return n},t.clearByKey=function(t){this.CfgData.delete(t),this.CfgDataList.delete(t)},t}());i.CfgData=new Map,i.CfgDataList=new Map,a._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterChestItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./RewardTipItem.ts","./RewardModel.ts","./ChestModel.ts","./OpenPopupManager.ts","./Api.ts","./HttpService.ts","./PlayerData.ts","./ItemModel.ts"],(function(e){var t,n,r,a,o,i,s,p,c,d,l,u,h,f,m,w,v,b,g,C,I,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,s=e.sp,p=e.Label,c=e.instantiate,d=e.UITransform,l=e.Vec3,u=e.Component},function(e){h=e.Constants},function(e){f=e.ResourcesUtil},function(e){m=e.RewardTipItem},function(e){w=e.RewardObj},function(e){v=e.ChestStatus},function(e){b=e.OpenPopupManager},function(e){g=e.Api},function(e){C=e.HttpService},function(e){I=e.PlayerData},function(e){_=e.ItemIdType}],execute:function(){var y,P,R,A,T,S,x;o._RF.push({},"2ff54rqghNKqKGUfmPHDBel","ChapterChestItem",void 0);var D=i.ccclass,M=i.property;e("ChapterChestItem",(y=D("ChapterChestItem"),P=M(s.Skeleton),R=M(p),y((S=t((T=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,r(t,"box",S,a(t)),r(t,"desc",x,a(t)),t._status=v.Unavailable,t._rewards=[],t._rewardId=0,t}n(t,e);var o=t.prototype;return o.init=function(e,t,n,r){this._rewardId=e,this._rewards=r.split(","),this._status=t,this.desc.string=n,0==t?this.box.setAnimation(0,"unavailable",!0):1==t?this.box.setAnimation(0,"available",!0):this.box.setAnimation(0,"received",!0)},o.onOpenChest=function(){var e=this;if(this._status==v.Unavailable){var t=h.commonPreabPath+"rewardTipItem";f.getPrefab(t).then((function(t){var n=c(t);n.parent=e.node.parent.parent;var r=e.node.getPosition();r.y+=e.node.getComponent(d).width/2;var a=e.node.parent.getComponent(d).convertToWorldSpaceAR(r),o=e.node.parent.parent.getComponent(d).convertToNodeSpaceAR(a);n.setPosition(o);for(var i=[],s=0;s<e._rewards.length;s++){var p=e._rewards[s].split("|"),l=new w;l.itemId=Number(p[0]),l.count=Number(p[1]),i.push(l)}n.getComponent(m).init(i)}))}else if(this._status==v.Available){for(var n=!1,r=[_.Diamond,_.Energy,_.Exp,_.Food,_.Gold,_.Ticket],a=0;a<this._rewards.length;a++){var o=this._rewards[a].split("|"),i=Number(o[0]);-1==r.indexOf(i)&&(n=!0)}if(C.instance.post(g.CHAPTER_CLAIM,{rewardId:this._rewardId}).then((function(t){0==t.code&&(I.instance.getPlayerInfo(!1),n&&b.instance.showRewardPopup(t.data.rewards,e.node.getComponent(d).convertToWorldSpaceAR(new l(0,0,0))))})),!n){for(var s=[],p=0;p<this._rewards.length;p++){var u=this._rewards[p].split("|"),y=new w;y.itemId=Number(u[0]),y.count=Number(u[1]),s.push(y)}I.instance.removeRewardId(this._rewardId),b.instance.showRewardPopup(s,this.node.getComponent(d).convertToWorldSpaceAR(new l(0,0,0)))}}},t}(u)).prototype,"box",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(T.prototype,"desc",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=T))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./ChapterEventModel.ts","./ChapterModel.ts"],(function(t){var e,n,r,a,i;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){r=t.CfgMgr},function(t){a=t.ChapterEventCfg},function(t){i=t.ChapterCfg}],execute:function(){n._RF.push({},"037c1pT24xDKr9WjwmVRWAA","ChapterData",void 0),t("ChapterData",function(){function t(){this._chapterIdArr=[],this._maxChapterId=0}var n=t.prototype;return n.init=function(){for(var t=0,e=r.getCfgDataArray(new i),n=0;n<e.length;n++)t=t>e[n].Id?t:e[n].Id;this._maxChapterId=t},n.getChapterData=function(){return r.getCfgDataArray(new i)},n.getChapterCfgById=function(t){return r.getDataById(new i,t)},n.getChapterEventCfgByChapterId=function(t,e){for(var n=r.getCfgDataArray(new a),i=0;i<n.length;i++)if(n[i].chapter==t){if(0==e)return n[i];if(e==n[i].wave)return n[i]}return r.getDataById(new a,t)},n.getChapter=function(t){return this._chapterIdArr.indexOf(t)+1},e(t,[{key:"maxChapterId",get:function(){return this._maxChapterId}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterEventModel.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"32241t2YThK/bgnFGmH36of","ChapterEventModel",void 0);t("ChapterEventCfg",(function(){this.ClassName="ChapterEvent",this.Id=void 0,this.chapter=void 0,this.wave=void 0,this.eType=void 0,this.hpUp=void 0,this.box=void 0,this.monsterLevel=void 0,this.monsters=void 0})),t("BrushMonsterType",function(t){return t[t.NORMAL=1]="NORMAL",t[t.BOSS=2]="BOSS",t}({})),t("MonsterType",function(t){return t[t.LITTLE=1]="LITTLE",t[t.ELITE=2]="ELITE",t[t.BOSS=3]="BOSS",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./PlayerData.ts","./ChapterData.ts","./CfgMgr.ts","./MonsterModel.ts"],(function(t){var e,r,n,a,i,o,s,c,p,l,u,h,f,m,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,s=t.Node,c=t.Sprite,p=t.Component},function(t){l=t.Constants},function(t){u=t.ResourcesUtil},function(t){h=t.PlayerData},function(t){f=t.ChapterData},function(t){m=t.CfgMgr},function(t){C=t.MonsterCfg}],execute:function(){var g,d,I,y,b,M,v,F,_,D,k;i._RF.push({},"8fc9aR0W6BMFruYFmCr58/O","ChapterItem",void 0);var w=o.ccclass,S=o.property;t("ChapterItem",(g=w("ChapterItem"),d=S(s),I=S(c),y=S(c),b=S(c),g((F=e((v=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"lock",F,a(e)),n(e,"chapterIcon",_,a(e)),n(e,"chapterMask",D,a(e)),n(e,"monster",k,a(e)),e._chapterCfg=null,e._isLoaded=!1,e}r(e,t);var i=e.prototype;return i.init=function(t){this._chapterCfg=t},i.show=function(){this._isLoaded||(this._isLoaded=!0,this.setChapterInfo(this._chapterCfg),this.setChapterMonster(this._chapterCfg))},i.setChapterInfo=function(t){var e=this,r=l.chaterMapPath+t.mapId+"/spriteFrame";h.instance.chapterObj.chapterId<t.Id&&(this.lock.active=!0),u.getSpriteFrame(r).then((function(t){e.chapterIcon.spriteFrame=t,e.chapterMask.spriteFrame=t}))},i.setChapterMonster=function(t){var e=this,r=f.instance.getChapterEventCfgByChapterId(t.Id,0);if(r&&r.monsters){var n=r.monsters[0][0],a=m.getDataById(new C,n),i=l.monsterIconPath+a.icon+"/spriteFrame";u.geSpriteFrame(i).then((function(t){e.monster&&(e.monster.spriteFrame=t,e.monster.node.setScale(a.iconScale,a.iconScale))}))}},e}(p)).prototype,"lock",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(v.prototype,"chapterIcon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(v.prototype,"chapterMask",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(v.prototype,"monster",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=v))||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterMapData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./ChapterModel.ts","./PlayerData.ts"],(function(t){var a,e,r,n,i;return{setters:[function(t){a=t.createClass},function(t){e=t.cclegacy},function(t){r=t.CfgMgr},function(t){n=t.ChapterCfg},function(t){i=t.PlayerData}],execute:function(){e._RF.push({},"76678VIX75Efa0Bu8ve9nTW","ChapterMapData",void 0),t("ChapterMapData",function(){function t(){this._chapterMapData=null,this._chapterDropRewardData=new Map}var e=t.prototype;return e.init=function(){this.setChapterMapData()},e.getChapterCfg=function(t){return r.getDataById(new n,t)},e.setChapterMapData=function(){var t=i.instance.curChapter;this._chapterMapData=r.getDataById(new n,t)},e.setChapterRewardData=function(t,a){var e=a.split("|"),r=null,n=Number(e[0]),i=Number(e[1]);t.has(n)?r.Num+=i:((r=new p).ItemId=n,r.Num=i,t.set(n,r))},e.getChapterRewardData=function(t){var a=new Map;if(this._chapterMapData.startReward)for(var e=this._chapterMapData.startReward.split(","),r=0;r<e.length;r++){var n=e[r];this.setChapterRewardData(a,n)}if(t&&this._chapterMapData.winReward)for(var i=this._chapterMapData.winReward.split(","),p=0;p<i.length;p++){var s=i[p];this.setChapterRewardData(a,s)}return Array.from(a.values())},e.clear=function(){this._chapterMapData=null,this._chapterDropRewardData.clear()},a(t,[{key:"chapterMapData",get:function(){return this._chapterMapData}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null;var p=t("ChapterDropRewardObj",(function(){this.ItemId=void 0,this.Num=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"2530f+OzZ9CfYvZ5BsmGlGp","ChapterModel",void 0);i("ChapterCfg",(function(){this.ClassName="Chapter",this.Id=void 0,this.name=void 0,this.lType=void 0,this.mapId=void 0,this.battleMap=void 0,this.startReward=void 0,this.randomReward=void 0,this.winReward=void 0,this.waveRewards=void 0})),i("ChapterRewardCfg",(function(){this.ClassName="ChapterReward",this.Id=void 0,this.ChapterId=void 0,this.Lock=void 0,this.Reward=void 0})),i("ChapterModel",(function(){this.chapterId=1,this.maxWave=0,this.unclaimRewards=[],this.raidNumber=5,this.ticket=0,this.revivalCoin=0,this.level=void 0,this.exp=void 0,this.expMax=void 0,this.unfinishedBattle=void 0})),i("ChapterBattleModel",(function(){this.battleId=void 0,this.wave=void 0,this.waveInfo=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./OpenPopupManager.ts","./PlayerData.ts","./GameEvent.ts","./ChapterData.ts","./ChapterItem.ts","./BagData.ts","./Util.ts","./Constants.ts","./ChapterChestItem.ts","./ChestModel.ts","./GameData.ts","./LanguageManager.ts","./GameDefine.ts","./ResourcesUtil.ts","./GuideData.ts","./ItemModel.ts","./Main.ts","./SpriteEx.ts"],(function(t){var e,n,i,a,o,r,s,u,h,c,l,p,g,f,m,d,b,C,w,_,y,P,v,I,E,T,R,D,G,B,O,L,A,S,N,x,U,k,z;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Label,u=t.ProgressBar,h=t.Prefab,c=t.Node,l=t.PageView,p=t.instantiate,g=t.director,f=t.UITransform,m=t.Vec3,d=t.v3,b=t.Component,C=t.tween},function(t){w=t.EventListener},function(t){_=t.OpenPopupManager,y=t.LayerType},function(t){P=t.PlayerData},function(t){v=t.GameEvent},function(t){I=t.ChapterData},function(t){E=t.ChapterItem},function(t){T=t.BagData},function(t){R=t.Util},function(t){D=t.Constants},function(t){G=t.ChapterChestItem},function(t){B=t.ChestStatus},function(t){O=t.GameData},function(t){L=t.LanguageManager},function(t){A=t.GameDefine},function(t){S=t.ResourcesUtil},function(t){N=t.GuideData,x=t.GuideStep},function(t){U=t.ItemIdType},function(t){k=t.Main},function(t){z=t.SpriteEx}],execute:function(){var M,F,j,W,V,Y,H,Q,X,q,J,K,Z,$,tt,et,nt,it,at,ot,rt,st,ut,ht,ct,lt,pt,gt,ft,mt,dt,bt,Ct,wt,_t,yt,Pt,vt,It,Et,Tt,Rt,Dt,Gt,Bt,Ot,Lt,At,St;o._RF.push({},"67dd1+qrP9B7rYTtUKTntkJ","ChapterPopup",void 0);var Nt=r.ccclass,xt=r.property;t("ChapterPopup",(M=Nt("ChapterPopup"),F=xt(s),j=xt(s),W=xt(s),V=xt(s),Y=xt(s),H=xt(u),Q=xt(s),X=xt(h),q=xt(c),J=xt(c),K=xt(l),Z=xt(s),$=xt(c),tt=xt(c),et=xt(s),nt=xt(c),it=xt(c),at=xt(c),ot=xt(c),rt=xt(c),st=xt(c),ut=xt(z),ht=xt({type:[c]}),M((pt=e((lt=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"gold",pt,a(e)),i(e,"diamond",gt,a(e)),i(e,"power",ft,a(e)),i(e,"ticket",mt,a(e)),i(e,"food",dt,a(e)),i(e,"levelProgress",bt,a(e)),i(e,"level",Ct,a(e)),i(e,"chapterPrefab",wt,a(e)),i(e,"leftBtn",_t,a(e)),i(e,"rightBtn",yt,a(e)),i(e,"pageView",Pt,a(e)),i(e,"title",vt,a(e)),i(e,"leftList",It,a(e)),i(e,"rightList",Et,a(e)),i(e,"raidNumber",Tt,a(e)),i(e,"chapterResult",Rt,a(e)),i(e,"buttons",Dt,a(e)),i(e,"battleEnergy",Gt,a(e)),i(e,"unlockInfo",Bt,a(e)),i(e,"countDown",Ot,a(e)),i(e,"chestList",Lt,a(e)),i(e,"avatar",At,a(e)),i(e,"aniFrames",St,a(e)),e._maxChapterId=0,e._curChapter=1,e._touchBtn=!1,e._battleTouchNumber=0,e}n(e,t);var o=e.prototype;return o.show=function(){this._maxChapterId=I.instance.maxChapterId,this._battleTouchNumber=0,this._touchBtn=!1,this.onUpdatePlayerInfo(),this.showChapterList(),this.powerCountdown(),N.instance.guideMode&&(N.instance.curStep==x.GUIDE_STEP15_BATTLE_DONE?w.emit(v.GUIDE_BAG_ACTION):N.instance.curStep==x.GUIDE_STEP21_ERTURN_BATTLE&&(N.instance.curStep=1,_.instance.show(D.PopupUI.GuidePopup,null,y.TOP,!1,null,(function(){N.instance.guideMode=!1})))),0==N.instance.curStep&&1==P.instance.chapterObj.chapterId&&0==P.instance.chapterObj.maxWave&&(N.instance.guideMode=!0,_.instance.show(D.PopupUI.GuidePopup,null,y.TOP,!1,this.buttons.getChildByName("battleBtn"),(function(){}),(function(){N.instance.curStep=1}))),this.checkUnLockItems()},o.powerCountdown=function(){var t=P.instance.energyObj;this.countDown.active=t.energyRefillCountdown>0,t.energyRefillCountdown>0?(this.schedule(this.setPowerCountdown,1),this.countDown.getComponent(s).string=R.timeToString(t.energyRefillCountdown)):this.unschedule(this.setPowerCountdown)},o.setPowerCountdown=function(){P.instance.energyObj.energyRefillCountdown-=1,P.instance.energyObj.energyRefillCountdown>=0?this.countDown.getComponent(s).string=R.timeToString(P.instance.energyObj.energyRefillCountdown):(P.instance.getPlayerInfo(),this.countDown.active=!1,this.unschedule(this.setPowerCountdown))},o.showChapterList=function(){if(!this.pageView.getPages().length){for(var t=I.instance.getChapterData(),e=0;e<t.length;e++){var n=t[e],i=p(this.chapterPrefab);this.pageView.addPage(i),i.getComponent(E).init(n)}this._curChapter=P.instance.curChapter,this.pageView.getPages()[this._curChapter-1].getComponent(E).show(),this.pageView.setCurrentPageIndex(this._curChapter-1),this.setChapterTitle(),this.setChapterChest(),this.setLeftRightStatus(),this.setChapterStatus()}},o.setChapterChest=function(){for(var t=I.instance.getChapterCfgById(this._curChapter).waveRewards,e=P.instance.chapterObj,n=this.chestList.children,i=0;i<n.length;i++){var a=n[i];if(t.length>i){var o=t[i],r=o[0],s=o[1],u=B.Unavailable;u=this._curChapter>e.chapterId?B.Unavailable:this._curChapter==e.chapterId?e.maxWave>=s?e.unclaimRewards.indexOf(r)>=0?B.Available:B.Received:B.Unavailable:e.unclaimRewards.indexOf(r)>=0?B.Available:B.Received;var h=L.instance.getLang("game.wave",[s]);a.getComponent(G).init(r,u,h,o[2]),a.active=!0}else a.active=!1}},o.setChapterTitle=function(){var t=P.instance.chapterObj,e=I.instance.getChapterCfgById(this._curChapter);this.title.string=e.Id+"."+L.instance.getLang(e.name),this.chapterResult.active=e.Id<=t.chapterId,e.Id==t.chapterId?this.chapterResult.getComponent(s).string=L.instance.getLang("game.maxwave",[t.maxWave]):e.Id<t.chapterId&&(this.chapterResult.getComponent(s).string=L.instance.getLang("game.cleared"))},o.setChapterStatus=function(){var t=P.instance.chapterObj;this.buttons.active=this._curChapter<=t.chapterId,this.buttons.getChildByName("mopUpBtn").active=this._curChapter<t.chapterId,this.unlockInfo.active=this._curChapter>t.chapterId,this._curChapter>t.chapterId&&(this.unlockInfo.getComponent(s).string=L.instance.getLang("game.unlockchapter",[this._curChapter-1]))},o.setLeftRightStatus=function(){1==this._curChapter?(this.leftBtn.active=!1,this.rightBtn.active=!0):this._curChapter<this._maxChapterId?(this.leftBtn.active=!0,this.rightBtn.active=!0):(this.leftBtn.active=!0,this.rightBtn.active=!1);for(var t=P.instance.chapterObj.unclaimRewards,e=I.instance.getChapterCfgById(this._curChapter).waveRewards,n=e[0][0],i=e[e.length-1][0],a=!1,o=!1,r=0;r<t.length;r++)if(t[r]<n&&(a=!0),t[r]>i){o=!0;break}this.leftBtn.getChildByName("redpoint").active=a,this.rightBtn.getChildByName("redpoint").active=o},o.checkUnLockItems=function(){var t=O.instance.unlockItems;O.instance.unlockItems=[],t.length>0&&(_.instance.show(D.PopupUI.UnlockItemPopup,null,y.TOP,!1,t),T.instance.getBagDataFromNetwork())},o.onBattleBtn=function(){var t=this;(A.gameChapterId=this._curChapter,0==this._battleTouchNumber)&&(this._battleTouchNumber++,T.instance.checkCarryWeapon()?P.instance.energyObj.energy>=5?(P.instance.setEnergy(-5),w.emit(v.COST_ENERGY_BATTLE,5),O.instance.startBattle(this._curChapter,(function(e,n){0==e?(A.gameChapterId=t._curChapter,t._battleTouchNumber++,7==t._battleTouchNumber&&g.loadScene("Game")):(t._battleTouchNumber=0,_.instance.showToast("stamina.insufficient"))}))):(this._battleTouchNumber=0,_.instance.showToast("stamina.insufficient")):(this._battleTouchNumber=0,_.instance.showToast("game.insufficientCarried")))},o.onRaidBtn=function(){var t=this;O.instance.raid(this._curChapter,(function(e,n){_.instance.showRewardPopup(e,t.buttons.getChildByName("mopUpBtn").getComponent(f).convertToWorldSpaceAR(new m(0,0,0)),(function(){n.length>0&&_.instance.show(D.PopupUI.LevelupPopup,null,y.TOP,!1,n)}))}))},o.onLeftBtn=function(){this._touchBtn=!0,this._curChapter--,this._curChapter<=1&&(this._curChapter=1),P.instance.curChapter=this._curChapter,this.pageView.getPages()[this._curChapter-1].getComponent(E).show(),this.pageView.setCurrentPageIndex(this._curChapter-1),this.setChapterTitle(),this.setChapterChest(),this.setLeftRightStatus(),this.setChapterStatus()},o.onRightBtn=function(){this._touchBtn=!0,this._curChapter++,this._curChapter>=this._maxChapterId&&(this._curChapter=this._maxChapterId),P.instance.curChapter=this._curChapter,this.pageView.getPages()[this._curChapter-1].getComponent(E).show(),this.pageView.setCurrentPageIndex(this._curChapter-1),this.setChapterTitle(),this.setChapterChest(),this.setLeftRightStatus(),this.setChapterStatus()},o.onPagerEvent=function(){this._touchBtn?this._touchBtn=!1:(this._curChapter=this.pageView.getCurrentPageIndex()+1,this.setChapterTitle(),this.setChapterChest(),this.setLeftRightStatus())},o.onAddCurrency=function(t,e){switch(Number(e)){case U.Energy:_.instance.showEnergyPopup();break;default:_.instance.Canvas.getComponent(k).onClickBtn(null,"0")}},o.onUpdatePlayerInfo=function(t){var e=P.instance.assetObj,n=P.instance.chapterObj,i=P.instance.energyObj;P.instance.heroObj;t&&"all"!=t&&"gold"!=t||R.numberAnimation(this.gold,e.gold),t&&"all"!=t&&"diamond"!=t||R.numberAnimation(this.diamond,e.diamond),t&&"all"!=t&&"energy"!=t||(this.power.string=i.energy+"/"+i.energyMax),t&&"all"!=t&&"ticket"!=t||R.numberAnimation(this.ticket,n.ticket),t&&"all"!=t&&"food"!=t||R.numberAnimation(this.food,P.instance.heroObj.food),this.raidNumber.string=""+(-1==n.raidNumber?"♾️":n.raidNumber),this.avatar.index=P.instance.userObj.avatar,t&&"all"!=t&&"exp"!=t||(this.level.string="Lv."+n.level,this.levelProgress.progress=n.exp/n.expMax),this.setChapterChest()},o.onGameItem=function(t,e){var n=this,i=["gold","diamond","energy","ticket","exp","food"],a=i.indexOf(e);if(-1!=a){var o=this.aniFrames[a].getPosition(),r=Math.min(t.num,10),s=t.pos,u=D.commonPreabPath+i[a]+"Item",h=this.aniFrames[a].parent.getComponent(f).convertToNodeSpaceAR(s);S.getPrefab(u).then((function(t){for(var i=function(i){var s=p(t),u=2*(Math.random()-.5)*(a%2==0?100:50)+h.x,c=2*(Math.random()-.5)*(a%2==0?50:100)+h.y;s.parent=n.aniFrames[a].parent,s.setPosition(h),n.scheduleOnce((function(){C(s).to(.2,{position:d(u,c,0)},{easing:"sineIn"}).delay(.2).to(1,{position:o},{easing:"sineInOut"}).call((function(){s.destroy(),1!=r&&1!=i||w.emit(v.REFRESH_PLAYER_DATA,e)})).start()}),.05+.05*i)},s=0;s<r;s++)i(s)}))}},o.onFlyEnergy=function(t){var e=this,n=this.battleEnergy.getPosition(),i=this.aniFrames[2].getComponent(f).convertToWorldSpaceAR(d(0,0,0)),a=D.commonPreabPath+"energyItem",o=this.battleEnergy.parent.getComponent(f).convertToNodeSpaceAR(i);S.getPrefab(a).then((function(i){for(var a=function(){var a=p(i),s=2*(Math.random()-.5)*100+o.x,u=2*(Math.random()-.5)*50+o.y;a.parent=e.battleEnergy.parent,a.setPosition(o),e.scheduleOnce((function(){C(a).to(.2,{position:d(s,u,0)},{easing:"sineIn"}).delay(.2).to(1,{position:n},{easing:"sineInOut"}).call((function(){a.destroy(),e._battleTouchNumber++,e._battleTouchNumber==t+2&&g.loadScene("Game")})).start()}),.05+.05*r)},r=0;r<t;r++)a()}))},o.onInviteTouch=function(){_.instance.showInvitePopup()},o.onSetTouch=function(){_.instance.showSettingPopup()},o.onRankTouch=function(){_.instance.show(D.PopupUI.LevelupPopup,null,y.TOP,!1,[]),_.instance.showRankPopup()},o.onBagTouch=function(){_.instance.show(D.PopupUI.WarehousePopup)},o.onTopupBtn=function(t,e){"pass"==e?_.instance.show(D.PopupUI.MonthlyPassPopup,null,y.TOP,!1):"fund"==e?_.instance.show(D.PopupUI.FundPopup,null,y.TOP,!1):"first"==e?_.instance.show(D.PopupUI.FirstTopupPopup):(e="spin")?_.instance.show(D.PopupUI.DailySpinPopup):"mailBox"==e&&_.instance.show(D.PopupUI.MailBoxPopup)},o.onAvatarTouch=function(){_.instance.show(D.PopupUI.AvatarPopup,null,y.TOP,!1)},o.showDailyQuest=function(){_.instance.showDailyQuestPopup()},o.onGameCoin=function(t){this.onGameItem(t,"gold")},o.onGameDiamond=function(t){this.onGameItem(t,"diamond")},o.onGameExp=function(t){this.onGameItem(t,"exp")},o.onGameEnergy=function(t){this.onGameItem(t,"energy")},o.onGameFood=function(t){this.onGameItem(t,"food")},o.onEnable=function(){w.on(v.REFRESH_PLAYER_DATA,this.onUpdatePlayerInfo,this),w.on(v.GET_GOLD_REWARD,this.onGameCoin,this),w.on(v.GET_DIAMOND_REWARD,this.onGameDiamond,this),w.on(v.GET_ENERGY_REWARD,this.onGameEnergy,this),w.on(v.GET_EXP_REWARD,this.onGameExp,this),w.on(v.GET_FOOD_REWARD,this.onGameFood,this),w.on(v.COST_ENERGY_BATTLE,this.onFlyEnergy,this)},o.onDisable=function(){w.off(v.REFRESH_PLAYER_DATA,this.onUpdatePlayerInfo,this),w.off(v.GET_GOLD_REWARD,this.onGameCoin,this),w.off(v.GET_DIAMOND_REWARD,this.onGameDiamond,this),w.off(v.GET_ENERGY_REWARD,this.onGameEnergy,this),w.off(v.GET_EXP_REWARD,this.onGameExp,this),w.off(v.GET_FOOD_REWARD,this.onGameFood,this),w.off(v.COST_ENERGY_BATTLE,this.onFlyEnergy,this)},e}(b)).prototype,"gold",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(lt.prototype,"diamond",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(lt.prototype,"power",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(lt.prototype,"ticket",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(lt.prototype,"food",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(lt.prototype,"levelProgress",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(lt.prototype,"level",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(lt.prototype,"chapterPrefab",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=e(lt.prototype,"leftBtn",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(lt.prototype,"rightBtn",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(lt.prototype,"pageView",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(lt.prototype,"title",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=e(lt.prototype,"leftList",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=e(lt.prototype,"rightList",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=e(lt.prototype,"raidNumber",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=e(lt.prototype,"chapterResult",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt=e(lt.prototype,"buttons",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gt=e(lt.prototype,"battleEnergy",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt=e(lt.prototype,"unlockInfo",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot=e(lt.prototype,"countDown",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=e(lt.prototype,"chestList",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=e(lt.prototype,"avatar",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=e(lt.prototype,"aniFrames",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ct=lt))||ct));o._RF.pop()}}}));

System.register("chunks:///_virtual/ChestModel.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"5fc42R9SQhEbL4SiFWpxqsV","ChestModel",void 0);e("ChestAnim",{Unavailable:"unavailable",Available:"available",Received:"received"}),e("ChestStatus",{Unavailable:0,Available:1,Received:2});a._RF.pop()}}}));

System.register("chunks:///_virtual/CoinMode.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"f5935e0/B9JB7tJDwsoQt7Z","CoinMode",void 0);t("CoinObj",(function(){this.pos=void 0,this.num=void 0}));o._RF.pop()}}}));

System.register("chunks:///_virtual/ComRewardAnimPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./CoinMode.ts","./ResourcesUtil.ts","./ItemModel.ts","./OpenPopupManager.ts","./EventListener.ts","./GameEvent.ts"],(function(n){var e,o,t,i,a,r,s,c,u,l,d,m,p,f,h,g,y,v,P;return{setters:[function(n){e=n.applyDecoratedDescriptor,o=n.inheritsLoose,t=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.Node,c=n.UITransform,u=n.Component,l=n.instantiate,d=n.tween,m=n.v3},function(n){p=n.Constants},function(n){f=n.CoinObj},function(n){h=n.ResourcesUtil},function(n){g=n.ItemIdType},function(n){y=n.OpenPopupManager},function(n){v=n.EventListener},function(n){P=n.GameEvent}],execute:function(){var A,b,R,C,E,I,w,M,G,O,_;a._RF.push({},"9588bqcWnBCW5tA8SUq3myV","ComRewardAnimPopup",void 0);var T=r.ccclass,D=r.property;n("ComRewardAnimPopup",(A=T("ComRewardAnimPopup"),b=D(s),R=D(s),C=D(s),E=D(s),A((M=e((w=function(n){function e(){for(var e,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a))||this,t(e,"gold",M,i(e)),t(e,"energy",G,i(e)),t(e,"diamond",O,i(e)),t(e,"food",_,i(e)),e}o(e,n);var a=e.prototype;return a.show=function(n,e){for(var o=0,t=0,i=0,a=0,r=0;r<e.length;r++){var s=e[r];switch(s.itemId){case g.Gold:i+=s.count;break;case g.Diamond:o+=s.count;break;case g.Food:a+=s.count;break;case g.Energy:t+=s.count}}if(i>0){var c=new f;c.pos=n,c.num=i,this.onGameGold(c)}if(o>0){var u=new f;u.pos=n,u.num=o,this.onGameDiamond(u)}if(t>0){var l=new f;l.pos=n,l.num=t,this.onGameEnergy(l)}if(a>0){var d=new f;d.pos=n,d.num=a,this.onGameFood(d)}0==i&&0==o&&0==t&&this.close()},a.checkAutoClose=function(){var n=this;this.scheduleOnce((function(){n.energy.parent.children.length+n.gold.parent.children.length+n.diamond.parent.children.length<=4&&n.close()}),.1)},a.close=function(){y.instance.hide(p.PopupUI.ComRewardAnimPopup)},a.onGameGold=function(n){var e=this,o=this.gold.getPosition(),t=Math.min(10,n.num),i=n.pos,a=p.commonPreabPath+"goldItem",r=this.gold.parent.getComponent(c).convertToNodeSpaceAR(i);h.getPrefab(a).then((function(n){for(var i=function(i){var a=l(n),s=2*(Math.random()-.5)*50+r.x,c=2*(Math.random()-.5)*100+r.y;a.parent=e.gold.parent,a.setPosition(r),e.scheduleOnce((function(){d(a).to(.2,{position:m(s,c,0)},{easing:"sineIn"}).delay(.2).to(1,{position:o},{easing:"sineInOut"}).call((function(){a.destroy(),1!=t&&i!=t-2||v.emit(P.REFRESH_PLAYER_DATA,"gold"),e.checkAutoClose()})).start()}),.05+.05*i)},a=0;a<t;a++)i(a)}))},a.onGameDiamond=function(n){var e=this,o=this.diamond.getPosition(),t=Math.min(n.num,10),i=n.pos,a=p.commonPreabPath+"diamondItem",r=this.diamond.parent.getComponent(c).convertToNodeSpaceAR(i);h.getPrefab(a).then((function(n){for(var i=function(i){var a=l(n),s=2*(Math.random()-.5)*100+r.x,c=2*(Math.random()-.5)*50+r.y;a.parent=e.diamond.parent,a.setPosition(r),e.scheduleOnce((function(){d(a).to(.2,{position:m(s,c,0)},{easing:"sineIn"}).delay(.2).to(1,{position:o},{easing:"sineInOut"}).call((function(){a.destroy(),1!=t&&i!=t-2||v.emit(P.REFRESH_PLAYER_DATA,"diamond"),e.checkAutoClose()})).start()}),.05+.05*i)},a=0;a<t;a++)i(a)}))},a.onGameEnergy=function(n){var e=this,o=this.energy.getPosition(),t=Math.min(n.num,10),i=n.pos,a=p.commonPreabPath+"energyItem",r=this.energy.parent.getComponent(c).convertToNodeSpaceAR(i);h.getPrefab(a).then((function(n){for(var i=function(i){var a=l(n),s=2*(Math.random()-.5)*100+r.x,c=2*(Math.random()-.5)*50+r.y;a.parent=e.energy.parent,a.setPosition(r),e.scheduleOnce((function(){d(a).to(.2,{position:m(s,c,0)},{easing:"sineIn"}).delay(.2).to(1,{position:o},{easing:"sineInOut"}).call((function(){a.destroy(),1!=t&&i!=t-2||v.emit(P.REFRESH_PLAYER_DATA,"energy"),e.checkAutoClose()})).start()}),.5+.05*i)},a=0;a<t;a++)i(a)}))},a.onGameFood=function(n){var e=this,o=this.food.getPosition(),t=Math.min(n.num,10),i=n.pos,a=p.commonPreabPath+"foodItem",r=this.food.parent.getComponent(c).convertToNodeSpaceAR(i);h.getPrefab(a).then((function(n){for(var i=function(i){var a=l(n),s=2*(Math.random()-.5)*100+r.x,c=2*(Math.random()-.5)*50+r.y;a.parent=e.food.parent,a.setPosition(r),e.scheduleOnce((function(){d(a).to(.2,{position:m(s,c,0)},{easing:"sineIn"}).delay(.2).to(1,{position:o},{easing:"sineInOut"}).call((function(){a.destroy(),1!=t&&i!=t-2||v.emit(P.REFRESH_PLAYER_DATA,"food"),e.checkAutoClose()})).start()}),.5+.05*i)},a=0;a<t;a++)i(a)}))},e}(u)).prototype,"gold",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(w.prototype,"energy",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(w.prototype,"diamond",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(w.prototype,"food",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=w))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/ComRewardPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./RewardItem.ts","./GameController.ts","./ItemModel.ts","./EventListener.ts","./GameEvent.ts","./CoinMode.ts"],(function(t){var n,e,o,i,r,a,s,u,c,l,p,d,m,h,f,_,C,w,g,v,P,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,c=t.ParticleSystem2D,l=t.Prefab,p=t.Node,d=t.Component,m=t.Vec3,h=t.instantiate},function(t){f=t.Constants},function(t){_=t.OpenPopupManager},function(t){C=t.RewardItem},function(t){w=t.default},function(t){g=t.ItemIdType},function(t){v=t.EventListener},function(t){P=t.GameEvent},function(t){y=t.CoinObj}],execute:function(){var R,b,E,x,D,I,G,A,k,B,O;s._RF.push({},"d6e04vKRHRKhIvli2i+akoG","ComRewardPopup",void 0);var T=u.ccclass,M=u.property;t("ComRewardPopup",(R=T("ComRewardPopup"),b=M(c),E=M(l),x=M(p),D=M(p),R((A=n((G=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,o(n,"rewardAnim",A,i(n)),o(n,"rewardPrefab",k,i(n)),o(n,"content",B,i(n)),o(n,"closeBtn",O,i(n)),n._callBack=null,n._diamondCount=0,n._goldCount=0,n._energyCount=0,n._expCount=0,n._foodCount=0,n._animPos=null,n}e(n,t);var s=n.prototype;return s.show=function(t,n,e){this._callBack=e,this._diamondCount=0,this._goldCount=0,this._energyCount=0,this._animPos=n,this._expCount=0,this._foodCount=0;for(var o=0;o<t.length;o++){var i=t[o];i.itemId==g.Diamond?this._diamondCount+=i.count:i.itemId==g.Gold?this._goldCount+=i.count:i.itemId==g.Energy?this._energyCount+=i.count:i.itemId==g.Exp?this._expCount+=i.count:i.itemId==g.Food&&(this._foodCount+=i.count)}this.setContent(t),this.rewardAnim.resetSystem()},s.setContent=function(){var t=r(a().mark((function t(n){var e,o,i,r,s,u=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.content.removeAllChildren(),e=new m(0,0,0),o=n.length,100,100,20,4,i=o>=4?4:o,e.x=120*-(i-1)/2,r=a().mark((function t(o){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){u.scheduleOnce((function(){var r=n[o],a=h(u.rewardPrefab),s=new m(0,0,0),c=Math.floor(o/i),l=o%i;s.x=e.x+120*l,s.y=-120*c,a.parent=u.content,a.getComponent(C).init(r,!0),a.setPosition(s),t(0)}),.1)}));case 2:case"end":return t.stop()}}),t)})),s=0;case 11:if(!(s<n.length)){t.next=16;break}return t.delegateYield(r(s),"t0",13);case 13:s++,t.next=11;break;case 16:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),s.onCloseBtn=function(){if(w.resume(),_.instance.hide(f.PopupUI.ComRewardPopup),this._animPos){if(this._diamondCount>0){var t=new y;t.pos=this._animPos,t.num=this._diamondCount,v.emit(P.GET_DIAMOND_REWARD,t)}if(this._goldCount>0){var n=new y;n.pos=this._animPos,n.num=this._goldCount,v.emit(P.GET_GOLD_REWARD,n)}if(this._energyCount>0){var e=new y;e.pos=this._animPos,e.num=this._energyCount,v.emit(P.GET_ENERGY_REWARD,e)}if(this._expCount>0){var o=new y;o.pos=this._animPos,o.num=this._expCount,v.emit(P.GET_EXP_REWARD,o)}if(this._foodCount>0){var i=new y;i.pos=this._animPos,i.num=this._foodCount,v.emit(P.GET_FOOD_REWARD,i)}}this._callBack&&this._callBack(this._goldCount>0||this._diamondCount>0||this._energyCount>0||this._foodCount>0)},n}(d)).prototype,"rewardAnim",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(G.prototype,"rewardPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(G.prototype,"content",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(G.prototype,"closeBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=G))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/ComTipsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts"],(function(t){var i,n,e,o,r,c,a,l,s,p,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,a=t.Label,l=t.Sprite,s=t.Component},function(t){p=t.Constants},function(t){u=t.OpenPopupManager}],execute:function(){var f,h,d,b,P,g,m,C,v;r._RF.push({},"48119HxZClPQb78cKFTBbd6","ComTipsPopup",void 0);var y=c.ccclass,B=c.property;t("ComTipsPopup",(f=y("ComTipsPopup"),h=B(a),d=B(a),b=B(l),f((m=i((g=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return i=t.call.apply(t,[this].concat(r))||this,e(i,"title",m,o(i)),e(i,"desc",C,o(i)),e(i,"icon",v,o(i)),i._callBack=void 0,i}n(i,t);var r=i.prototype;return r.show=function(t,i){this._callBack=i,this.desc.string=t.desc,this.title.string=t.title},r.onCloseBtn=function(){u.instance.hide(p.PopupUI.ComTipsPopup),this._callBack&&this._callBack(!1)},r.onConfirmBtn=function(t){u.instance.hide(p.PopupUI.ComTipsPopup);var i=t.target.getWorldPosition();this._callBack&&this._callBack(!0,i)},i}(s)).prototype,"title",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(g.prototype,"desc",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(g.prototype,"icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=g))||P)),t("ComTipsObj",(function(){this.title=void 0,this.desc=void 0,this.icon=void 0}));r._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigModel.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"674a5YS/ylO7KNMN6UmWS0U","ConfigModel",void 0);t("ConfigModel",(function(){this.manifestUrl=void 0,this.network=void 0,this.walletAddress=void 0,this.usdtAddress=void 0,this.adId=void 0,this.tgBot=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/Configuration.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./Util.ts"],(function(n){var e,t,a,i,o;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,a=n.sys},function(n){i=n.Constants},function(n){o=n.Util}],execute:function(){t._RF.push({},"8cb26FZvcBCFoeNEIZPrPgl","Configuration",void 0),n("Configuration",function(){function n(){this._jsonData={},this._markSave=!1}var t=n.prototype;return t.init=function(){var n=a.localStorage.getItem(i.gameConfigId);n&&n.startsWith("@")&&(n=n.substring(1),n=o.decrypt(n),this._jsonData=JSON.parse(n)),setInterval(this.scheduleData.bind(this),500)},t.clearConfigDataToVersion=function(){var n=this,e=this.getConfigData(i.cacheVersion);if(e){var t=JSON.parse(e),a=o.clone(i.cacheVersionConfig);i.cacheVersionConfig.forEach((function(e,i){t.forEach((function(t,i){e.versionName==t.versionName&&e.version>t.version&&"gameData"==t.versionName?(n.clearConfigData(),n._jsonData={}):(e.versionName==t.versionName&&e.version>t.version&&n._jsonData.hasOwnProperty(e.versionName)&&delete n._jsonData[e.versionName],a.some((function(n,e){if(n.versionName==t.versionName)return a.splice(e,1),!0})))}))})),a.forEach((function(e){n._jsonData.hasOwnProperty(e.versionName)&&delete n._jsonData[e.versionName]}))}else i.cacheVersionConfig.forEach((function(e){n._jsonData.hasOwnProperty(e.versionName)&&delete n._jsonData[e.versionName]}));this.setConfigData(i.cacheVersion,JSON.stringify(i.cacheVersionConfig))},t.clearByKey=function(n){this._jsonData.hasOwnProperty(n)&&(delete this._jsonData[n],this._markSave=!0)},t.clearConfigData=function(){a.localStorage.clear()},t.getConfigData=function(n){return this._jsonData[n]||null},t.setConfigData=function(n,e){this._jsonData[n]=e,this._markSave=!0},t.scheduleData=function(){if(this._markSave){var n=JSON.stringify(this._jsonData);a.localStorage.setItem(i.gameConfigId,"@"+o.encrypt(n)),this._markSave=!1}},e(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/Constants.ts",["cc"],(function(p){var o;return{setters:[function(p){o=p.cclegacy}],execute:function(){o._RF.push({},"38f6antDZNCibijc56rqZbp","Constants",void 0);var e=p("Constants",(function(){}));e.Prefab={},e.toastPath="Prefab/Popup/Common/toast",e.monsterPath="Prefab/Game/Monster/MonsterPrefab",e.monsterBulletPath="Prefab/Game/Monster/monsterBulletItem",e.weaponPath="Prefab/Game/Weapon/weaponItem",e.weaponBgPath="Prefab/Game/Weapon/weaponBgItem",e.weaponMergePath="Prefab/Game/Weapon/weaponMergeEffect",e.weaponBuffPath="Prefab/Game/Weapon/weaponBuffEffect",e.heroPath="Prefab/Game/Hero/heroItem",e.battSkillPath="Prefab/Game/Skill/skillBulletItem",e.battlePath="Prefab/Game/Battle/",e.shopPreabPath="Prefab/Popup/Shop/",e.dailyQuestPath="Prefab/Popup/DailyQuest/",e.commonPreabPath="Prefab/Popup/Common/",e.qualityPath="Common/quality",e.commonPath="Common/",e.skillIconPath="Game/Skill/",e.mapPath="Game/Map/",e.weaponIconPath="Game/Weapon/",e.heroIconPath="Game/Hero/",e.gridIconPath="Game/Grid/icon/",e.gridPath="Game/Grid/",e.monsterSpinePath="Spine/Monster/",e.monsterIconPath="Game/Monster/",e.chaterMapPath="Map/Chapter/",e.bulletPath="Game/Bullet/",e.buffPath="Game/Buff/",e.itemsPath="Items/",e.SysConstant={},e.ConfigPath="ConfigData/",e.Language="language",e.AUDIO_FILE_PATH={MUSIC:"Audio/Music/",SOUND:"Audio/Sound/"},e.PopupUI={ChapterPopup:"Prefab/Popup/Chapter/chapterPopup",HeroPopup:"Prefab/Popup/Hero/heroPopup",HeroDetailPopup:"Prefab/Popup/Hero/heroDetailPopup",ShopPopup:"Prefab/Popup/Shop/shopPopup",ShopItemPopup:"Prefab/Popup/Shop/shopItemPopup",ComRewardPopup:"Prefab/Popup/Common/comRewardPopup",ComRewardAnimPopup:"Prefab/Popup/Common/comRewardAnimPopup",AvatarPopup:"Prefab/Popup/User/avatarPopup",SetPositionPopup:"Prefab/Popup/User/setPositionPopup",ShopBoxRewardPopup:"Prefab/Popup/Shop/shopBoxRewardPopup",ShopBoxOpenPopup:"Prefab/Popup/Shop/shopBoxOpenPopup",ShopBoxLevelupPopup:"Prefab/Popup/Shop/shopBoxLevelupPopup",ShopBoxDetailPopup:"Prefab/Popup/Shop/shopBoxDetailPopup",ShopBoxWeaponDetailPopup:"Prefab/Popup/Shop/shopBoxWeaponDetailPopup",ShopEnergyPopup:"Prefab/Popup/Shop/shopEnergyPopup",ShopSuccessPopup:"Prefab/Popup/Shop/shopSuccessPopup",BagPopup:"Prefab/Popup/Bag/bagPopup",BagDetailPopup:"Prefab/Popup/Bag/bagDetailPopup",WeaponStylePopup:"Prefab/Popup/Bag/weaponStylePopup",EquipDetailPopup:"Prefab/Popup/Bag/equipDetailPopup",ActivityPopup:"Prefab/Popup/Activity/activityPopup",GamePopup:"Prefab/Popup/Game/gamePopup",GameOverPopup:"Prefab/Popup/Game/gameOverPopup",GameWinPopup:"Prefab/Popup/Game/gameWinPopup",GameRevivePopup:"Prefab/Popup/Game/gameRevivePopup",GameFailPopup:"Prefab/Popup/Game/gameFailPopup",GameDebugPopup:"Prefab/Popup/Game/gameDebugPopup",WeaponDetailPopup:"Prefab/Popup/Weapon/weaponDetailPopup",WeaponSelectPopup:"Prefab/Popup/Weapon/weaponSelectPopup",AdTipsPopup:"Prefab/Popup/Game/adTipsPopup",PausePopup:"Prefab/Popup/Game/pausePopup",ComTipsPopup:"Prefab/Popup/Common/comTipsPopup",SettingPopup:"Prefab/Popup/Setting/settingPopup",LanguagePopup:"Prefab/Popup/Setting/languagePopup",RankPopup:"Prefab/Popup/Rank/rankPopup",SkillSelectPopup:"Prefab/Popup/Skill/skillSelectPopup",DailyQuestPopup:"Prefab/Popup/DailyQuest/dailyQuestPopup",InvitePopup:"Prefab/Popup/Invite/invitePopup",FriendsPopup:"Prefab/Popup/Invite/friendsPopup",WalletPopup:"Prefab/Popup/Wallet/walletPopup",WithdrawPopup:"Prefab/Popup/Wallet/withdrawPopup",SelectWalletPopup:"Prefab/Popup/Wallet/selectWalletPopup",FundPopup:"Prefab/Popup/Topup/fundPopup",MonthlyPassPopup:"Prefab/Popup/Topup/monthlyPassPopup",FirstTopupPopup:"Prefab/Popup/Topup/firstTopupPopup",GuidePopup:"Prefab/Popup/Guide/guidePopup",WarehousePopup:"Prefab/Popup/Warehouse/warehousePopup",UnlockItemPopup:"Prefab/Popup/Chapter/unlockItemPopup",LevelupPopup:"Prefab/Popup/Chapter/levelupPopup",AcitvityRulePopup:"Prefab/Popup/Activity/rulePopup",LimitTodayPopup:"Prefab/Popup/Activity/limitTodayPopup",EditNamePopup:"Prefab/Popup/User/editNamePopup",RedeemCodePopup:"Prefab/Popup/Setting/redeemCodePopup",DailySpinPopup:"Prefab/Popup/Turntable/dailySpinPopup",MailBoxPopup:"Prefab/Popup/MailBox/mailBoxPopup"},e.cacheVersion="cacheVersion",e.gameConfigId="gameData",e.playerConfigId="playerData",e.placeConfigId="placeData",e.weaponConfigId="weaponData",e.shopSpecialConfigId="shopSpecialData",e.cacheVersionConfig=[{versionName:"gameData",version:1.03},{versionName:"playerData",version:1.01},{versionName:"placeData",version:1.01},{versionName:"equipData",version:1.01}],o._RF.pop()}}}));

System.register("chunks:///_virtual/ContentAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,i,r,h,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.screen,r=t.UITransform,h=t.Size,c=t.Component}],execute:function(){var s;n._RF.push({},"494f9k+dAhM/KtYR67LvtYz","ContentAdapter",void 0);var d=o.ccclass;o.property,t("ContentAdapter",d("ContentAdapter")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onLoad=function(){var t=i.windowSize,e=this.node.getComponent(r).contentSize,n=Math.min(t.width/e.width,t.height/e.height),o=e.width*n,c=e.height*n,s=new h;s.width=e.width*(t.width/o),s.height=e.height*(t.height/c),this.node.getComponent(r).setContentSize(s)},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ContentScale.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts"],(function(t){var e,n,o,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,c=t.Component},function(t){r=t.Util}],execute:function(){var a;n._RF.push({},"29ec8b7A9ZAfpoh28pIYAGQ","ContentScale",void 0);var i=o.ccclass;o.property,t("ContentScale",i("ContentScale")(a=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){var t=r.adapterScale();this.node.setScale(t,t)},n}(c))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/ContentWidthAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,i,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.view,r=t.UITransform,s=t.Component}],execute:function(){var d;n._RF.push({},"9d1beTZsZVLLodLFMhkBa8y","ContentWidthAdapter",void 0);var c=o.ccclass;o.property,t("ContentWidthAdapter",c("ContentWidthAdapter")(d=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onLoad=function(){var t=i.getVisibleSize(),e=i.getDesignResolutionSize(),n=t.width>e.width?e.width:t.width;this.node.getComponent(r).width=n},n}(s))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/ContentWidthScaleAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,d;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.view,r=t.UITransform,d=t.Component}],execute:function(){var s;i._RF.push({},"e7ff0vpzL1BzJDirZZHDBLJ","ContentWidthScaleAdapter",void 0);var c=n.ccclass;n.property,t("ContentWidthAdapter",c("ContentWidthAdapter")(s=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.onLoad=function(){var t=o.getVisibleSize(),e=o.getDesignResolutionSize(),i=t.width>e.width?e.width:t.width,n=t.width>e.width?1:t.width/e.width;this.node.getComponent(r).width=i,this.node.setScale(n,n)},i}(d))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/DailyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./DailySubItem.ts","./RewardChestItem.ts","./ChestModel.ts","./GameEvent.ts","./EventListener.ts"],(function(t){var e,i,n,r,a,s,o,l,c,u,p,d,f,b,m,h,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.Node,l=t.Label,c=t.ProgressBar,u=t.Prefab,p=t.instantiate,d=t.Component},function(t){f=t.QuestData},function(t){b=t.DailySubItem},function(t){m=t.RewardChestItem},function(t){h=t.ChestAnim},function(t){y=t.GameEvent},function(t){g=t.EventListener}],execute:function(){var L,v,I,w,P,D,C,k,E,_,z,A,R,U,x;a._RF.push({},"ba5edrbL/FBs5t07LpFHIFr","DailyItem",void 0);var F=s.ccclass,Q=s.property;t("DailyItem",(L=F("DailyItem"),v=Q(o),I=Q(o),w=Q(l),P=Q(c),D=Q(u),C=Q(u),L((_=e((E=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"taskList",_,r(e)),n(e,"boxList",z,r(e)),n(e,"credits",A,r(e)),n(e,"progress",R,r(e)),n(e,"taskItem",U,r(e)),n(e,"rewardItem",x,r(e)),e}i(e,t);var a=e.prototype;return a.init=function(){this.setContent()},a.setContent=function(){var t=this,e=f.instance.dailyQuest;if(null!=e){this.credits.string=e.dailyPoint+"",this.progress.progress=e.dailyPoint/100,e.daily.forEach((function(e,i){if(t.taskList.children[i])t.taskList.children[i].getComponent(b).init(e);else{var n=p(t.taskItem);n.getComponent(b).init(e),n.parent=t.taskList}}));for(var i=this.taskList.children.length-1;i>e.daily.length-1;i--)this.taskList.children[i].removeFromParent();e.dailyPointsRewards.forEach((function(i,n){var r=h.Received;if(i.draw||(r=e.dailyPoint<i.points?h.Unavailable:h.Available),t.boxList.children[n])t.boxList.children[n].getComponent(m).init(i.rewards,i.points,r,"quest",i.id);else{var a=p(t.rewardItem);a.getComponent(m).init(i.rewards,i.points,r,"quest",i.id),a.parent=t.boxList}}))}},a.claimReward=function(t){},a.onEnable=function(){g.on(y.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)},a.onDisable=function(){g.off(y.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)},e}(d)).prototype,"taskList",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(E.prototype,"boxList",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(E.prototype,"credits",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(E.prototype,"progress",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(E.prototype,"taskItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(E.prototype,"rewardItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=E))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/DailyQuestPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./QuestData.ts","./GameController.ts","./LanguageManager.ts","./EventListener.ts","./GameEvent.ts","./ResourcesUtil.ts"],(function(t){var e,n,i,a,r,c,o,s,u,l,p,h,f,g,v,d,y,m,b,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,u=t.Label,l=t.Node,p=t.Component,h=t.instantiate},function(t){f=t.OpenPopupManager},function(t){g=t.Constants},function(t){v=t.QuestData},function(t){d=t.default},function(t){y=t.LanguageManager},function(t){m=t.EventListener},function(t){b=t.GameEvent},function(t){C=t.ResourcesUtil}],execute:function(){var P,_,w,k,D,E,L,I,Q;o._RF.push({},"6549awKMGtAS7uVsxAicCVH","DailyQuestPopup",void 0);var x=s.ccclass,U=s.property;t("DailyQuestPopup",(P=x("DailyQuestPopup"),_=U(u),w=U(l),k=U(l),P((L=e((E=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r))||this,i(e,"title",L,a(e)),i(e,"content",I,a(e)),i(e,"tabContent",Q,a(e)),e._flag=!1,e._popup=["signInItem","dailyItem","weeklyItem","achievementItem"],e._titles=["event.dailysignin","event.daily","event.weekly","event.achievement"],e}n(e,t);var o=e.prototype;return o.show=function(){v.instance.getEventInfo(),this.setContent()},o.setContent=function(){var t=r(c().mark((function t(){var e,n,i=this;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._flag||this.content.children.length){t.next=9;break}this._flag=!0,e=c().mark((function t(e){var n,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i._popup[e],a=g.dailyQuestPath+n,t.next=4,C.getPrefab(a).then((function(t){var a=h(t);a.parent=i.content,a.active=0==e;var r=n[0].toUpperCase()+n.slice(1);a.getComponent(r).init()}));case 4:case"end":return t.stop()}}),t)})),n=0;case 4:if(!(n<this._popup.length)){t.next=9;break}return t.delegateYield(e(n),"t0",6);case 6:n++,t.next=4;break;case 9:this.content.children.forEach((function(t,e){e>0&&(t.active=!1)})),this.content.children[0].active=!0,this.title.string=y.instance.getLang(this._titles[0]),this.tabContent.children.forEach((function(t,e){t.getChildByName("checked").active=!1})),this.tabContent.children[0].getChildByName("checked").active=!0;case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.closePopup=function(){d.resume(),f.instance.hide(g.PopupUI.DailyQuestPopup)},o.switchTab=function(t,e){this.title.string=y.instance.getLang(this._titles[e]),this.tabContent.children.forEach((function(t,e){t.getChildByName("checked").active=!1})),this.tabContent.children[e].getChildByName("checked").active=!0,this.content.children.forEach((function(t){t.active=!1})),this.content.children[e].active=!0,m.emit(b.UPDATE_DAILY_QUEST_POPUP)},e}(p)).prototype,"title",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(E.prototype,"content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(E.prototype,"tabContent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=E))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/DailySpinPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TurntableData.ts","./ResourcesUtil.ts","./OpenPopupManager.ts","./Constants.ts","./CfgMgr.ts","./ItemModel.ts","./EventListener.ts","./GameEvent.ts","./HttpService.ts","./Api.ts","./AdManager.ts"],(function(t){var n,e,i,o,r,a,s,c,u,l,p,f,g,d,h,m,w,y,S,b,v,C,I,P,R,D;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,c=t.Label,u=t.instantiate,l=t.Sprite,p=t.UITransform,f=t.Color,g=t.tween,d=t.Component},function(t){h=t.TurntableData},function(t){m=t.ResourcesUtil},function(t){w=t.OpenPopupManager},function(t){y=t.Constants},function(t){S=t.CfgMgr},function(t){b=t.ItemCfg},function(t){v=t.EventListener},function(t){C=t.GameEvent},function(t){I=t.HttpService},function(t){P=t.Api},function(t){R=t.AdManager,D=t.AdType}],execute:function(){var L,N,E,A,T,_,F,M,z,O,H;r._RF.push({},"f28c0Bt0K9DhZw+Hmdu4wSR","DailySpinPopup",void 0);var U=a.ccclass,B=a.property;t("DailySpinPopup",(L=U("DailySpinPopup"),N=B(s),E=B(s),A=B(s),T=B(c),L((M=n((F=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"pointer",M,o(n)),i(n,"rewardList",z,o(n)),i(n,"rewardItem",O,o(n)),i(n,"spinNum",H,o(n)),n}e(n,t);var r=n.prototype;return r.show=function(){h.instance.getCasualInfo()},r.init=function(){var t=this;this.spinNum.string=h.instance.todayLimit.toString(),0==this.rewardList.children.length&&h.instance.rewardList.forEach((function(n,e){var i=u(t.rewardItem);i.getChildByName("num").getComponent(c).string=n.reward.count.toString();var o=S.getDataById(new b,n.reward.itemId),r=y.itemsPath+o.icon+"/spriteFrame",a=i.getChildByName("icon").getComponent(l);m.geSpriteFrame(r).then((function(t){a.spriteFrame=t;var n=a.getComponent(p).contentSize,e=Math.min(120/n.width,120/n.height);a.node.setScale(e,e)})),i.setPosition(0,0),i.angle=-45*e,i.getComponent(l).color=e%2==0?new f(5,62,234,255):new f(13,119,235,255),i.parent=t.rewardList}))},r.onSpineTouch=function(){var t=this;R.instance.showAd(D.LUCK_SPIN,0,(function(n,e){console.log(n,e),I.instance.post(P.LUCKSPIN_DRAW,{sign:n}).then((function(n){if(console.log(n),n&&0==n.code){t.spinNum.string=""+n.data.todayLimit;var e=-45*(n.data.hitId-1)-1800,i=g().to(3,{angle:e},{easing:"cubicInOut"}),o=g().call((function(){w.instance.showRewardPopup(n.data.rewards,null,(function(){t.pointer.angle=0}))}));g(t.pointer).sequence(i,o).start()}else w.instance.showToast("Network Error")}))}))},r.onCloseTouch=function(){w.instance.hide(y.PopupUI.DailySpinPopup)},r.onEnable=function(){v.on(C.REFRESH_ROTARY_INFO,this.init,this)},r.onDisable=function(){v.off(C.REFRESH_ROTARY_INFO,this.init,this)},n}(d)).prototype,"pointer",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=n(F.prototype,"rewardList",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=n(F.prototype,"rewardItem",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=n(F.prototype,"spinNum",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=F))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/DailySubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./LanguageManager.ts"],(function(t){var e,i,n,a,r,o,s,l,u,c,p,g,m,b,d,h,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Label,l=t.ProgressBar,u=t.Node,c=t.Sprite,p=t.Color,g=t.Component},function(t){m=t.QuestData},function(t){b=t.HttpService},function(t){d=t.Api},function(t){h=t.OpenPopupManager},function(t){y=t.LanguageManager}],execute:function(){var f,B,w,v,D,S,z,N,C,I,L,T,_,k,M,P,V;r._RF.push({},"e1756SlVTxO8LBnzBeNccXz","DailySubItem",void 0);var q=o.ccclass,H=o.property;t("DailySubItem",(f=q("DailySubItem"),B=H(s),w=H(s),v=H(l),D=H(s),S=H(u),z=H(u),N=H(c),f((L=e((I=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"point",L,a(e)),n(e,"desc",T,a(e)),n(e,"progress",_,a(e)),n(e,"progressValue",k,a(e)),n(e,"buttons",M,a(e)),n(e,"mask",P,a(e)),n(e,"itemBg",V,a(e)),e.questData=null,e}i(e,t);var r=e.prototype;return r.init=function(t){this.questData=t,this.node.getChildByName("item"),this.point.string=t.point.toString(),this.desc.string=y.instance.getLang(t.desc,[t.target]),this.progress.progress=t.num/t.target,this.progressValue.string=t.num+"/"+t.target,this.buttons.getChildByName("completedBtn").active=t.draw,this.mask.active=t.draw,t.draw||(t.num<t.target?(this.buttons.getChildByName("peddingBtn").active=!0,this.buttons.getChildByName("claimedBtn").active=!1,this.itemBg.color=new p(216,231,242,255)):(this.buttons.getChildByName("claimedBtn").active=!0,this.buttons.getChildByName("peddingBtn").active=!1,this.itemBg.color=new p(255,252,83,255)))},r.claimReward=function(){b.instance.post(d.EVENT_QUEST_FINISH,{questId:this.questData.id}).then((function(t){0==t.code?m.instance.dailyQuest=t.data:h.instance.showToast(t.msg)})).catch((function(t){h.instance.showToast("network.error")}))},e}(g)).prototype,"point",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(I.prototype,"desc",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(I.prototype,"progress",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(I.prototype,"progressValue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(I.prototype,"buttons",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(I.prototype,"mask",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(I.prototype,"itemBg",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=I))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/DamageItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./SkillModel.ts"],(function(e){var t,n,i,o,a,r,s,c,l,u,f,p,m,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Node,c=e.Label,l=e.Sprite,u=e.v3,f=e.tween,p=e.Color,m=e.Component},function(e){d=e.PoolManager},function(e){h=e.DamageType}],execute:function(){var g,b,v,y,D,L,w,N,F;a._RF.push({},"6c20chu39hHKYv9Mua9Oz/X","DamageItem",void 0);var P=r.ccclass,z=r.property;e("DamageItem",(g=P("DamageItem"),b=z(s),v=z(c),y=z(l),g((w=t((L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"damageNode",w,o(t)),i(t,"numLab",N,o(t)),i(t,"crt",F,o(t)),t.monsterKey="",t}n(t,e);var a=t.prototype;return a.init=function(e,t,n){void 0===n&&(n=25),this.numLab.string=""+e,this.numLab.fontSize=n,this.setsetDamageColor(t),this.setDamageFlyAnim(e,t)},a.setDamageScaleAnim=function(e,t){var n=this;e>0?(this.node.scale=u(1,1,1),f(this.node).to(.25,{scale:u(.8,.8,.8)}).call((function(){d.instance.putNode(n.node)})).start()):d.instance.putNode(this.node)},a.setDamageFlyAnim=function(e,t){var n=this,i=this.damageNode;if(e>0){var o=new function(){this.position=void 0,this.scale=void 0};o.position=i.getPosition(),o.scale=1.5,f(o).parallel(f().by(.25,{position:u(0,30,0)},{onUpdate:function(e){i.setPosition(e.position)}}),f().to(.25,{scale:1.3},{onUpdate:function(e){i.setScale(e.scale,e.scale)}})).delay(.25).call((function(){i.setPosition(0,0,0),d.instance.putNode(n.node)})).start()}else i.setPosition(0,0,0),d.instance.putNode(this.node)},a.setsetDamageColor=function(e){switch(e){case h.NORMAL:case h.DEBUFF:this.numLab.color=(new p).fromHEX("#ffffff"),this.crt.node.active=!1;break;case h.CRIT:this.numLab.color=(new p).fromHEX("#FF0000"),this.crt.node.active=!0}},t}(m)).prototype,"damageNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(L.prototype,"numLab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"crt",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=L))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/DamageStatItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./DamageStatSubItem.ts"],(function(e){var t,a,n,i,o,r,p,s,u,m,c,g,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,p=e.Node,s=e.Prefab,u=e.instantiate,m=e.Component},function(e){c=e.EventListener},function(e){g=e.GameEvent},function(e){l=e.DamageStatSubItem}],execute:function(){var d,h,f,_,v,b,M,w,D;o._RF.push({},"33726IpBbdHZ70/HIaddlbm","DamageStatItem",void 0);var I=r.ccclass,N=r.property;e("DamageStatItem",(d=I("DamageStatItem"),h=N(p),f=N(p),_=N(s),d((M=t((b=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"weaponContent",M,i(t)),n(t,"content",w,i(t)),n(t,"damageItemPrefab",D,i(t)),t._damageNumberMap=new Map,t._damageNodeMap=new Map,t._weaponLevelMap=new Map,t._active=!1,t}a(t,e);var o=t.prototype;return o.init=function(){this.updateDamages(),this._active=!1,this.content.active=!1},o.show=function(){this._active=!this._active,this.content.active=this._active,this.updateDamages()},o.updateDamage=function(e,t,a,n,i){this._damageNumberMap.has(n)?this._damageNumberMap.set(n,this._damageNumberMap.get(n)+t):this._damageNumberMap.set(n,t),this._weaponLevelMap.has(n)?i>this._weaponLevelMap.get(n)&&this._weaponLevelMap.set(n,i):this._weaponLevelMap.set(n,i),this.updateDamages()},o.updateDamages=function(){var e=this;if(this._active){for(var t=Array.from(this._damageNumberMap.values()),a=0,n=0;n<t.length;n++)a+=t[n];this._damageNumberMap.forEach((function(t,n){if(e._damageNodeMap.has(n)){e._damageNodeMap.get(n).getComponent(l).updateDamage(t,t/a,e._weaponLevelMap.get(n))}else{var i=u(e.damageItemPrefab);i.parent=e.weaponContent,i.getComponent(l).init(n,e._weaponLevelMap.get(n)),e._damageNodeMap.set(n,i),i.getComponent(l).updateDamage(t,t/a,e._weaponLevelMap.get(n))}}));var i=this.weaponContent.children;i.sort((function(e,t){return t.getComponent(l).damage-e.getComponent(l).damage}));for(var o=0;o<i.length;o++)i[o].setSiblingIndex(o);this.weaponContent._updateSiblingIndex()}},o.onEnable=function(){c.on(g.CREATE_DAMAGER_NUM,this.updateDamage,this)},o.onDisable=function(){c.off(g.CREATE_DAMAGER_NUM,this.updateDamage,this)},t}(m)).prototype,"weaponContent",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(b.prototype,"content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(b.prototype,"damageItemPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/DamageStatSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./WeaponData.ts","./LanguageManager.ts"],(function(e){var t,n,a,i,r,o,l,u,s,c,p,g,m,f,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,u=e.Sprite,s=e.Label,c=e.UITransform,p=e.Component},function(e){g=e.Constants},function(e){m=e.ResourcesUtil},function(e){f=e.SpriteEx},function(e){h=e.WeaponData},function(e){d=e.LanguageManager}],execute:function(){var b,v,y,S,_,w,I,z,D,F,L,P,x;o._RF.push({},"bb3a3o0zetMaoJHX+8fsvX9","DamageStatSubItem",void 0);var B=l.ccclass,C=l.property;e("DamageStatSubItem",(b=B("DamageStatSubItem"),v=C(f),y=C(u),S=C(s),_=C(s),w=C(u),b((D=t((z=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"quality",D,i(t)),a(t,"icon",F,i(t)),a(t,"title",L,i(t)),a(t,"damagePer",P,i(t)),a(t,"damageBar",x,i(t)),t._damage=0,t._weaponId=0,t._level=0,t}n(t,e);var o=t.prototype;return o.init=function(e,t){var n=this;this._weaponId=e,this._level=t;var a=h.instance.getWeaponByLevel(t,e);if(null!=a){this.title.string=d.instance.getLang(a.name),this.quality.index=t-1;var i=g.weaponIconPath+a.res+"/spriteFrame";m.geSpriteFrame(i).then((function(e){n.icon.spriteFrame=e;var t=n.icon.getComponent(c).contentSize,a=Math.min(40/t.width,40/t.height);n.icon.node.setScale(a,a)}))}},o.updateDamage=function(e,t,n){var a=this;if(this._damage+=e,this.damagePer.string=Number(100*t).toFixed(1)+"%",this.damageBar.fillRange=t,n>this._level){this._level=n;var i=h.instance.getWeaponByLevel(n,this._weaponId);if(null==i)return;this.quality.index=n-1;var r=g.weaponIconPath+i.res+"/spriteFrame";m.geSpriteFrame(r).then((function(e){a.icon.spriteFrame=e;var t=a.icon.getComponent(c).contentSize,n=Math.min(40/t.width,40/t.height);a.icon.node.setScale(n,n)}))}},r(t,[{key:"damage",get:function(){return this._damage}}]),t}(p)).prototype,"quality",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(z.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"title",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(z.prototype,"damagePer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(z.prototype,"damageBar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=z))||I));o._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Debug.ts",["cc","./GameDefine.ts"],(function(e){var o,r,n,t;return{setters:[function(e){o=e.cclegacy,r=e.Graphics,n=e.Node},function(e){t=e.GameDefine}],execute:function(){o._RF.push({},"57624QKseNHsYSFOwkcAy/w","Debug",void 0);e("Debug",function(){function e(){}return e.log=function(){if(t.DebugLevel<=0){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];Promise.resolve(console.log.apply(this,o))}},e.info=function(){if(t.DebugLevel<=1){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];Promise.resolve(console.info.apply(this,o))}},e.warn=function(){if(t.DebugLevel<=2){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];Promise.resolve(console.warn.apply(this,o))}},e.error=function(){if(t.DebugLevel<=3){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];Promise.resolve(console.error.apply(this,o))}},e.drawFillRect=function(e,o){var n=e.addComponent(r);n.fillColor.fromHEX("#ff0000"),n.rect(o.x,o.y,o.width,o.height),n.fill()},e.drawRect=function(e,o){var n=e.addComponent(r);n.lineWidth=2,n.strokeColor.fromHEX("#ff0000"),n.rect(o.x,o.y,o.width,o.height),n.stroke()},e.drawLine=function(e){var o=e.addComponent(r);o.lineWidth=2,o.strokeColor.fromHEX("#ffffff"),o.clear(),o.moveTo(100,100),o.lineTo(100,200),o.lineTo(200,200),o.stroke()},e.drawPolyGon=function(e,o){var t=new n;e.addChild(t);var i=t.addComponent(r);i.lineWidth=10,i.strokeColor.fromHEX("#ffffff");for(var f=0;f<o.length;f++){var l=o[f];0==f?i.moveTo(l.x,l.y):i.lineTo(l.x,l.y)}i.close(),i.stroke()},e.drawBesize=function(e,o,t,i,f,l,a){var s=new n;e.addChild(s);var c=s.addComponent(r);c.lineWidth=10,c.strokeColor.fromHEX("#ffffff"),c.moveTo(o.x,o.y),c.bezierCurveTo(i,f,l,a,t.x,t.y),c.stroke()},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/EditNamePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./HttpService.ts","./Api.ts","./UserData.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var n,t,i,o,a,s,r,u,c,p,l,m,f,h,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.EditBox,u=e.Component},function(e){c=e.OpenPopupManager},function(e){p=e.Constants},function(e){l=e.HttpService},function(e){m=e.Api},function(e){f=e.UserData},function(e){h=e.EventListener},function(e){d=e.GameEvent}],execute:function(){var E,v,P,y,g;a._RF.push({},"e4845kOoRFF17yAmAUcY/EA","EditNamePopup",void 0);var A=s.ccclass,N=s.property;e("EditNamePopup",(E=A("EditNamePopup"),v=N(r),E((g=n((y=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,i(n,"input",g,o(n)),n.username=void 0,n}t(n,e);var a=n.prototype;return a.show=function(){this.input.placeholder=f.instance.userInfo.name},a.nameChange=function(e){this.username=e},a.editName=function(){var e=this;this.username?l.instance.post(m.USER_EDIT_NAME,{name:this.username}).then((function(n){0==n.code?(f.instance.userInfo.name=e.username,h.emit(d.UPDATE_NAME),e.onCloseTouch()):c.instance.showToast(n.msg)})):c.instance.showToast("Please enter a name")},a.onCloseTouch=function(){c.instance.hide(p.PopupUI.EditNamePopup)},n}(u)).prototype,"input",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=y))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/EnergyModel.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"4561ddAAx5NLJLHsOTth62s","EnergyModel",void 0);e("EnergyModel",(function(){this.buyLimit=3,this.buyNumber=15,this.adLimit=3,this.adNumber=15,this.energy=30,this.energyMax=30,this.energyRefillCountdown=void 0,this.price=100,this.token=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/EquipItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts"],(function(e){var t,i,n,r,l,o,a,u,p,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Sprite,u=e.Label,p=e.Color,c=e.Component},function(e){s=e.SpriteEx}],execute:function(){var b,y,f,w,g,m,q,v,d,h,z,I,E;l._RF.push({},"2a7dbK0MqtA25SyN8X1NM+g","EquipItem",void 0);var S=o.ccclass,_=o.property;e("EquipItem",(b=S("EquipItem"),y=_(s),f=_(a),w=_(s),g=_(a),m=_(u),b((d=t((v=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,n(t,"equipBg",d,r(t)),n(t,"type",h,r(t)),n(t,"typeIcon",z,r(t)),n(t,"equip",I,r(t)),n(t,"level",E,r(t)),t.color=[new p(79,77,159,277),new p(79,107,120,255),new p(41,241,24,255),new p(18,106,251,255),new p(144,18,255,155),new p(255,217,11,255),new p(251,18,61,255),new p(249,18,242,255)],t}i(t,e);var l=t.prototype;return l.start=function(){},l.update=function(e){},l.init=function(){},t}(c)).prototype,"equipBg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=t(v.prototype,"type",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(v.prototype,"typeIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(v.prototype,"equip",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(v.prototype,"level",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=v))||q));l._RF.pop()}}}));

System.register("chunks:///_virtual/EventListener.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"10e50v0/Z9Cuq8TUTgBlAZ2","EventListener",void 0),n("EventListener",function(){function n(){}return n.on=function(n,t,e){this.handle[n]||(this.handle[n]=[]);var r={func:t,target:e};this.handle[n].push(r)},n.off=function(n,t,e){var r=this.handle[n];if(r&&!(r.length<=0))for(var i=0;i<r.length;i++){var a=r[i];if(a.func===t&&(!e||e===a.target)){r.splice(i,1);break}}},n.emit=function(n){var t=this.handle[n];if(t&&!(t.length<=0)){for(var e=t.length,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var h=0;h<t.length;h++){var l=t[h];if(l){l.func.apply(l.target,i);e>t.length&&(h-=e-t.length,e=t.length)}}}},n.clear=function(){this.handle={}},n}()).handle={},t._RF.pop()}}}));

System.register("chunks:///_virtual/FirstTopupModel.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"fbd71AIvK9HnL588xA9hG79","FirstTopupModel",void 0);t("FirstTopupCfg",(function(){this.ClassName="FirstTopup",this.Id=void 0,this.token=void 0,this.price=void 0,this.rewards=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/FirstTopupPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TopupData.ts","./OpenPopupManager.ts","./Constants.ts","./SpriteEx.ts","./RewardItem.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var i,e,n,a,o,r,s,p,u,l,c,b,f,h,d,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Label,p=t.Node,u=t.Component},function(t){l=t.TopupData},function(t){c=t.OpenPopupManager},function(t){b=t.Constants},function(t){f=t.SpriteEx},function(t){h=t.RewardItem},function(t){d=t.EventListener},function(t){T=t.GameEvent}],execute:function(){var y,m,g,F,P,_,v,w,x,D,I,B,z,C,E,O,U,R,A,L,S,G,M,j,k,N,H;o._RF.push({},"0cc16GpE+JDe4BtlonrjMjZ","FirstTopupPopup",void 0);var J=r.ccclass,Z=r.property;t("FirstTopupPopup",(y=J("FirstTopupPopup"),m=Z(s),g=Z(p),F=Z(f),P=Z(f),_=Z(f),v=Z(f),w=Z(f),x=Z(f),D=Z(p),I=Z(p),B=Z(p),z=Z(p),y((O=i((E=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,n(i,"btnLabel",O,a(i)),n(i,"tabs",U,a(i)),n(i,"tab1",R,a(i)),n(i,"tab2",A,a(i)),n(i,"tab3",L,a(i)),n(i,"day1",S,a(i)),n(i,"day2",G,a(i)),n(i,"day3",M,a(i)),n(i,"items",j,a(i)),n(i,"buyBtn",k,a(i)),n(i,"claimBtn",N,a(i)),n(i,"tips",H,a(i)),i._index=0,i._firstId=0,i}e(i,t);var o=i.prototype;return o.show=function(){l.instance.getFirtTopupFromNetwork(),this.setFirtTopupContent()},o.setItems=function(){for(var t=l.instance.getFirstTopupItems(this._index),i=0;i<t.length;i++)this.items[i].getComponent(h).init(t[i],!0)},o.onTabBtn=function(t,i){this.day1.index=i,this.day2.index=i,this.day3.index=i,this.tab1.index=0,this.tab2.index=0,this.tab3.index=0,0==i?this.tab1.index=1:1==i?this.tab2.index=1:this.tab3.index=1,this._index=i,this.setFirtTopupContent()},o.setFirtTopupContent=function(){this.buyBtn.active=!1,this.claimBtn.active=!1,this.tips.active=!1;var t=l.instance.firstTopupData;if(t[this._index]){var i=t[this._index];this._firstId=i.firstId,i.state?i.claimedDays.indexOf(i.availableDays)>=0?this.tips.active=!0:this.claimBtn.active=!0:this.buyBtn.active=!0}this.setItems()},o.getFirtTopupData=function(){l.instance.getFirtTopupFromNetwork()},o.onBuyBtn=function(){l.instance.onBuyFirstTopup(this._firstId)},o.onClaimBtn=function(){l.instance.onClaimFirstTopup(this._firstId)},o.onCloseTouch=function(){c.instance.hide(b.PopupUI.FirstTopupPopup)},o.onEnable=function(){d.on(T.UPDATE_FIRST_TOPUP_POPUP,this.setFirtTopupContent,this),d.on(T.GET_FIRST_TOPUP_DATA,this.getFirtTopupData,this)},o.onDisable=function(){d.off(T.UPDATE_FIRST_TOPUP_POPUP,this.setFirtTopupContent,this),d.off(T.GET_FIRST_TOPUP_DATA,this.getFirtTopupData,this)},i}(u)).prototype,"btnLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(E.prototype,"tabs",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(E.prototype,"tab1",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(E.prototype,"tab2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(E.prototype,"tab3",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(E.prototype,"day1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=i(E.prototype,"day2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(E.prototype,"day3",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(E.prototype,"items",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=i(E.prototype,"buyBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(E.prototype,"claimBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(E.prototype,"tips",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=E))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/FriendItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(e){var r,t,n,i,a,o,l,u,c,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Sprite,u=e.Label,c=e.Component},function(e){s=e.LanguageManager}],execute:function(){var p,g,b,m,f,h,y,d,v,F,z;a._RF.push({},"0373dXNGKpDx6Rc4DnG88rJ","FriendItem",void 0);var L=o.ccclass,w=o.property;e("FriendItem",(p=L("FriendItem"),g=w(l),b=w(u),m=w(u),f=w(u),p((d=r((y=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,n(r,"avatar",d,i(r)),n(r,"username",v,i(r)),n(r,"barrier",F,i(r)),n(r,"tonValue",z,i(r)),r}return t(r,e),r.prototype.init=function(e){this.username.string=e.username,this.barrier.string=s.instance.getLang("game.chapter")+":"+e.chapter,this.tonValue.string=Number(e.amount).toFixed(2)},r}(c)).prototype,"avatar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=r(y.prototype,"username",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=r(y.prototype,"barrier",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=r(y.prototype,"tonValue",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/FriendsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./FriendItem.ts","./InviteData.ts"],(function(e){var n,i,t,r,a,o,c,l,s,p,u,d,f,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Prefab,l=e.Node,s=e.instantiate,p=e.Component},function(e){u=e.OpenPopupManager},function(e){d=e.Constants},function(e){f=e.FriendItem},function(e){h=e.InviteData}],execute:function(){var b,F,m,g,v,y,C,P,I,w,z,S,D,L,_;a._RF.push({},"919eedCLydA8Ke1ifiQUbLC","FriendsPopup",void 0);var E=o.ccclass,M=o.property;e("FriendsPopup",(b=E("FriendsPopup"),F=M(c),m=M(l),g=M(l),v=M(l),y=M(l),C=M(l),b((w=n((I=function(e){function n(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,t(n,"friendItem",w,r(n)),t(n,"tabs",z,r(n)),t(n,"directScroll",S,r(n)),t(n,"spreadScroll",D,r(n)),t(n,"directFrens",L,r(n)),t(n,"spreadFrens",_,r(n)),n}i(n,e);var a=n.prototype;return a.show=function(){this.init()},a.init=function(){var e=this;h.instance.directFrens.forEach((function(n,i){if(e.directFrens.children[i])e.directFrens.children[i].getComponent(f).init(n);else{var t=s(e.friendItem);t.getComponent(f).init(n),t.parent=e.directFrens}})),h.instance.spreadFrens.forEach((function(n,i){if(e.spreadFrens.children[i])e.spreadFrens.children[i].getComponent(f).init(n);else{var t=s(e.friendItem);t.getComponent(f).init(n),t.parent=e.spreadFrens}}))},a.onCloseTouch=function(){u.instance.hide(d.PopupUI.FriendsPopup)},a.switchTab=function(e,n){var i=this;this.tabs.children.forEach((function(e,t){i.tabs.children[t].getChildByName("checked").active=t==n})),this.directScroll.active=0==n,this.spreadScroll.active=1==n},n}(p)).prototype,"friendItem",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=n(I.prototype,"tabs",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=n(I.prototype,"directScroll",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=n(I.prototype,"spreadScroll",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=n(I.prototype,"directFrens",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=n(I.prototype,"spreadFrens",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=I))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/FundItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FundRewardItem.ts"],(function(e){var t,r,i,n,a,s,l,o,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Node,o=e.Label,u=e.Component},function(e){c=e.FundRewardItem}],execute:function(){var p,v,d,g,h,m,f,b,y,w,F;a._RF.push({},"ea057yAUuNDvYNU3cCh+BRb","FundItem",void 0);var I=s.ccclass,k=s.property;e("FundItem",(p=I("FundItem"),v=k(l),d=k(o),g=k(l),h=k(l),p((b=t((f=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,i(t,"mask",b,n(t)),i(t,"level",y,n(t)),i(t,"progress",w,n(t)),i(t,"rewards",F,n(t)),t}return r(t,e),t.prototype.init=function(e,t){this.level.string=e.value.toString(),t?e.value>t.currentValue?(this.progress.active=!1,this.mask.active=!0):e.value==t.currentValue?this.progress.setScale(1,.5):(this.mask.active=!1,this.progress.active=!0):(this.mask.active=!1,this.progress.active=!0);for(var r=0;r<e.rewards.length;r++)this.rewards[r].getComponent(c).init(e,r,t)},t}(u)).prototype,"mask",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(f.prototype,"level",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(f.prototype,"progress",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(f.prototype,"rewards",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=f))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/FundPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./TopupData.ts","./FundItem.ts","./EventListener.ts","./GameEvent.ts","./SpriteEx.ts","./LanguageManager.ts"],(function(t){var e,n,i,a,r,u,o,l,s,c,p,b,h,f,d,g,y,v,F,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,o=t.Label,l=t.Node,s=t.Prefab,c=t.instantiate,p=t.Sprite,b=t.Component},function(t){h=t.OpenPopupManager},function(t){f=t.Constants},function(t){d=t.TopupData},function(t){g=t.FundItem},function(t){y=t.EventListener},function(t){v=t.GameEvent},function(t){F=t.SpriteEx},function(t){m=t.LanguageManager}],execute:function(){var _,L,w,B,P,D,T,z,C,E,G,I,x,O,U,A,N,H,R,M,S,W,k,j,J,V,Y;r._RF.push({},"8b2b43YfspC7JJzw/LHf83L","FundPopup",void 0);var q=u.ccclass,K=u.property;t("FundPopup",(_=q("FundPopup"),L=K(o),w=K(F),B=K(l),P=K(s),D=K(l),T=K(o),z=K(o),C=K(o),E=K(l),G=K(l),I=K(l),x=K(l),_((A=e((U=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,i(e,"tip",A,a(e)),i(e,"banner",N,a(e)),i(e,"content",H,a(e)),i(e,"fundItem",R,a(e)),i(e,"tabs",M,a(e)),i(e,"level",S,a(e)),i(e,"price1",W,a(e)),i(e,"price2",k,a(e)),i(e,"buyLabel1",j,a(e)),i(e,"buyLabel2",J,a(e)),i(e,"buyBtn1",V,a(e)),i(e,"buyBtn2",Y,a(e)),e._index=0,e._fundTypes=["chapter","blueprint"],e}n(e,t);var r=e.prototype;return r.show=function(){d.instance.initFundCfg(),this.getFundData(),this.setFundContent()},r.setFundContent=function(){var t=this,e=d.instance.getFundIdByType(this._fundTypes[this._index]),n=d.instance.getGrowthFundCfg(e),i=d.instance.getGrowthFundLevelArrCfg(n.Id);this.tip.string=m.instance.getLang(n.desc),this.level.string="",this.price1.string=n.prices[1].toFixed(2),this.price2.string=n.prices[2].toFixed(2);var a=d.instance.getFundObjById(e);a?(a.states[1]?(this.buyBtn1.active=!1,this.buyLabel1.active=!0):(this.buyBtn1.active=!0,this.buyLabel1.active=!1),a.states[2]?(this.buyBtn2.active=!1,this.buyLabel2.active=!0):(this.buyBtn2.active=!0,this.buyLabel2.active=!1),this.level.string=a.currentValue.toString()):(this.buyBtn1.active=!0,this.buyLabel1.active=!1,this.buyBtn2.active=!0,this.buyLabel2.active=!1),i.forEach((function(e,n){var i=null;t.content.children[n]?(i=t.content.children[n]).active=!0:(i=c(t.fundItem)).parent=t.content,i.getComponent(g).init(e,a)}));for(var r=i.length;r<this.content.children.length;r++)this.content.children[r].active=!1},r.getFundData=function(){d.instance.getFundFromNetwork()},r.switchFund=function(t,e){this._index=e,this.tabs.children.forEach((function(t,n){t.getComponent(p).enabled=e==n})),this.setFundContent()},r.onBuyBtn=function(t,e){var n=d.instance.getFundIdByType(this._fundTypes[this._index]),i=d.instance.getGrowthFundCfg(n);d.instance.onBuyFund(n,Number(e),i.name)},r.onBackBtn=function(){h.instance.hide(f.PopupUI.FundPopup)},r.onEnable=function(){y.on(v.UPDATE_GROWTH_FUND_POPUP,this.setFundContent,this),y.on(v.GET_GROWTH_FUND_DATA,this.getFundData,this)},r.onDisable=function(){y.off(v.UPDATE_GROWTH_FUND_POPUP,this.setFundContent,this),y.off(v.GET_GROWTH_FUND_DATA,this.getFundData,this)},e}(b)).prototype,"tip",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(U.prototype,"banner",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(U.prototype,"content",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(U.prototype,"fundItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(U.prototype,"tabs",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(U.prototype,"level",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(U.prototype,"price1",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(U.prototype,"price2",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(U.prototype,"buyLabel1",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(U.prototype,"buyLabel2",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(U.prototype,"buyBtn1",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(U.prototype,"buyBtn2",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=U))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/FundRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TopupData.ts","./ResourcesUtil.ts","./Constants.ts","./ShopData.ts"],(function(e){var t,i,n,a,r,o,l,c,u,s,p,d,f,m,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Sprite,c=e.Label,u=e.Node,s=e.UITransform,p=e.Component},function(e){d=e.TopupData},function(e){f=e.ResourcesUtil},function(e){m=e.Constants},function(e){h=e.ShopData}],execute:function(){var b,v,g,y,w,I,R,C,F,_,z,k,x,B,D;r._RF.push({},"db662RrdIRBh4EpyxMXyp6Y","FundRewardItem",void 0);var S=o.ccclass,L=o.property;e("FundRewardItem",(b=S("FundRewardItem"),v=L(l),g=L(c),y=L(u),w=L(u),I=L(u),R=L(u),b((_=t((F=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"icon",_,a(t)),n(t,"value",z,a(t)),n(t,"lock",k,a(t)),n(t,"redpoint",x,a(t)),n(t,"mask",B,a(t)),n(t,"claimBtn",D,a(t)),t._index=0,t._fundLevelCfg=null,t}i(t,e);var r=t.prototype;return r.init=function(e,t,i){var n=this;this._index=t,this._fundLevelCfg=e;var a=e.rewards[t],r=!i||!i.states[t],o=!!i&&i.claimedRewards.indexOf(e.Id+"-"+t)>=0,l=!!i&&(!r&&!o&&e.value<=i.currentValue),c=h.instance.getItemCfgById(a.itemId),u=m.itemsPath+c.icon+"/spriteFrame";f.geSpriteFrame(u).then((function(e){n.icon.spriteFrame=e;var t=n.icon.getComponent(s).contentSize,i=Math.min(80/t.width,80/t.height);n.icon.node.setScale(i,i)})),this.value.string="x"+a.count,this.lock.active=r,this.mask.active=o,this.redpoint.active=l,this.claimBtn.active=l},r.onClaimBtn=function(){d.instance.onClaimFund(this._fundLevelCfg.Id,this._index)},t}(p)).prototype,"icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(F.prototype,"value",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(F.prototype,"lock",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(F.prototype,"redpoint",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(F.prototype,"mask",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(F.prototype,"claimBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=F))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./EventListener.ts","./GameController.ts","./OpenPopupManager.ts","./PopupManager.ts","./GameEvent.ts","./BattleUIManager.ts","./BgManager.ts","./BoxManager.ts","./GridManager.ts","./GridMapManager.ts","./HeroManager.ts","./MonsterManager.ts","./SkillManager.ts","./WeaponManager.ts","./GameDefine.ts","./GameData.ts","./WeaponShopData.ts","./CoinMode.ts"],(function(e){var t,n,a,i,o,r,s,l,u,c,g,h,p,M,f,m,T,E,v,b,_,w,S,C,A,G,d,O,L,y,H,B,R,I,U;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,l=e.tween,u=e.v3,c=e.Tween,g=e.director,h=e.Vec3,p=e.UITransform,M=e.Input,f=e.Component},function(e){m=e.AudioManager},function(e){T=e.EventListener},function(e){E=e.default},function(e){v=e.OpenPopupManager},function(e){b=e.PopupManager},function(e){_=e.GameEvent},function(e){w=e.BattleUIManager},function(e){S=e.BgManager},function(e){C=e.BoxManager},function(e){A=e.GridManager},function(e){G=e.GridMapManager},function(e){d=e.HeroManager},function(e){O=e.MonsterManager},function(e){L=e.SkillManager},function(e){y=e.WeaponManager},function(e){H=e.GameDefine},function(e){B=e.GameData,R=e.GameState},function(e){I=e.WeaponShopData},function(e){U=e.CoinObj}],execute:function(){var P,D,N,W,z,V,k,F,x,Y,j,K,q,J,Q,X,Z,$,ee,te,ne,ae,ie,oe,re,se,le;o._RF.push({},"3b31dMje5NGcYFxxYgcs301","Game",void 0);var ue=r.ccclass,ce=r.property;e("Game",(P=ue("Game"),D=ce(s),N=ce(s),W=ce(s),z=ce(S),V=ce(G),k=ce(A),F=ce(y),x=ce(d),Y=ce(C),j=ce(O),K=ce(w),q=ce(L),P((X=t((Q=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,a(t,"gameCtrl",X,i(t)),a(t,"battleMap",Z,i(t)),a(t,"removeWeaponList",$,i(t)),a(t,"bgManager",ee,i(t)),a(t,"gridMapManager",te,i(t)),a(t,"gridManager",ne,i(t)),a(t,"weaponManager",ae,i(t)),a(t,"heroManager",ie,i(t)),a(t,"boxManager",oe,i(t)),a(t,"monsterManager",re,i(t)),a(t,"battleUIManager",se,i(t)),a(t,"skillManager",le,i(t)),t._battleMapUpPosY=1200,t._battleMapDownPosy=200,t}n(t,e);var o=t.prototype;return o.onLoad=function(){m.instance.playMusic(2,!0),H.gameTouch=!1,I.instance.init(),v.instance.showGamePopup(),this.init()},o.init=function(){this.gridManager.init(),this.bgManager.init(),this.gridMapManager.init(),this.weaponManager.init(),this.heroManager.init(),this.monsterManager.init(),this.skillManager.init(),this.onTapBtn()},o.onTapBtn=function(){H.gameTouch=!0,this.setTweenAnim(this.removeWeaponList,.3)},o.setTweenAnim=function(e,t){e.active=!0,e.setScale(.5,.5),l(e).to(t,{scale:u(1,1,1)},{easing:"backOut"}).call((function(){})).start()},o.onGameStart=function(){H.gameTouch=!1,H.gameStart=!0,H.gameOver=!1},o.onGameOver=function(){H.gameTouch=!1,H.gameStart=!1,H.gameOver=!0,c.stopAll(),this.clear(),H.gameWave=1,b.instance.hideAll(),E.resume(),g.loadScene("Main")},o.onBattleBtn=function(){var e=this;l(this.battleMap).to(.5,{position:new h(0,this._battleMapDownPosy,0)},{easing:"sineInOut"}).call((function(){e.heroManager.showHideHero(!0),T.emit(_.INIT_HERO_SKILL),e.monsterManager.setCurChapterEvent(),e.weaponManager.showHideRemoveList(!1),e.onGameStart()})).start(),B.instance.reportFight(R.Pending)},o.onResetSelectBg=function(){var e=this;l(this.battleMap).to(.5,{position:u(0,this._battleMapUpPosY,0)},{easing:"sineInOut"}).call((function(){T.emit(_.SHOW_HIDE_SKILL_LIST,!1),e.heroManager.showHideHero(!1),e.heroManager.clear(),e.skillManager.reset(),H.gameStart=!1,T.emit(_.WEAPON_REMOVE_REFRESH,!0),e.weaponManager.showHideRemoveList(!0),e.setTweenAnim(e.removeWeaponList,.3),e.weaponManager.showPurseFlyGoldAnim(),H.gameTouch=!0})).start(),B.instance.reportFight(R.Success)},o.onReviveSelectBg=function(){var e=this;this.monsterManager.revive(),this.battleUIManager.revive(),l(this.battleMap).to(.5,{position:u(0,this._battleMapUpPosY,0)},{easing:"sineInOut"}).call((function(){T.emit(_.SHOW_HIDE_SKILL_LIST,!1),e.heroManager.showHideHero(!1),e.heroManager.revive(),e.skillManager.reset(),H.gameStart=!1,T.emit(_.WEAPON_REMOVE_REFRESH,!0),e.weaponManager.showHideRemoveList(!0),e.setTweenAnim(e.removeWeaponList,.3),H.gameTouch=!0,e.weaponManager.showPurseFlyGoldAnim();var t=new U;t.pos=e.gameCtrl.getComponent(p).convertToWorldSpaceAR(u(0,0,0)),t.num=15,T.emit(_.GAME_CHANGE_COIN,t)})).start()},o.onTouchStart=function(e){if(e.preventSwallow=!0,H.gameTouch){var t=e.getUILocation();T.emit(_.GAME_TOUCH_START,t)}},o.onTouchMove=function(e){if(e.preventSwallow=!0,H.gameTouch){var t=e.getUILocation();T.emit(_.GAME_TOUCH_MOVE,t)}},o.onTouchEnd=function(e){if(e.preventSwallow=!0,H.gameTouch){var t=e.getUILocation();T.emit(_.GAME_TOUCH_END,t)}},o.onTouchCancle=function(e){if(e.preventSwallow=!0,H.gameTouch){var t=e.getUILocation();T.emit(_.GAME_TOUCH_CANCLE,t)}},o.onEnable=function(){this.gameCtrl.on(M.EventType.TOUCH_START,this.onTouchStart,this),this.gameCtrl.on(M.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gameCtrl.on(M.EventType.TOUCH_END,this.onTouchEnd,this),this.gameCtrl.on(M.EventType.TOUCH_CANCEL,this.onTouchCancle,this),T.on(_.GAME_OVER,this.onGameOver,this),T.on(_.GAME_TAP_BTN,this.onTapBtn,this),T.on(_.RESET_SELECT_BAG,this.onResetSelectBg,this),T.on(_.REVIVE_SELECT_BAG,this.onReviveSelectBg,this),T.on(_.GAME_BATTLE_START,this.onBattleBtn,this)},o.onDisable=function(){this.gameCtrl.off(M.EventType.TOUCH_START,this.onTouchStart,this),this.gameCtrl.off(M.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gameCtrl.off(M.EventType.TOUCH_END,this.onTouchEnd,this),this.gameCtrl.off(M.EventType.TOUCH_CANCEL,this.onTouchCancle,this),T.off(_.GAME_OVER,this.onGameOver,this),T.off(_.GAME_TAP_BTN,this.onTapBtn,this),T.off(_.RESET_SELECT_BAG,this.onResetSelectBg,this),T.off(_.REVIVE_SELECT_BAG,this.onReviveSelectBg,this),T.off(_.GAME_BATTLE_START,this.onBattleBtn,this)},o.clear=function(){this.bgManager.clear(),this.heroManager.clear(),this.gridManager.clear(),this.weaponManager.clear(),this.monsterManager.clear(),this.boxManager.clear(),this.battleUIManager.clear(),this.skillManager.clear()},t}(f)).prototype,"gameCtrl",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(Q.prototype,"battleMap",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Q.prototype,"removeWeaponList",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(Q.prototype,"bgManager",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(Q.prototype,"gridMapManager",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(Q.prototype,"gridManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(Q.prototype,"weaponManager",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(Q.prototype,"heroManager",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(Q.prototype,"boxManager",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(Q.prototype,"monsterManager",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(Q.prototype,"battleUIManager",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(Q.prototype,"skillManager",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=Q))||J));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["cc"],(function(e){var t,a,n,i,s,r,c,o,u;return{setters:[function(e){t=e.cclegacy,a=e.game,n=e.Game,i=e.director,s=e.AnimationManager,r=e.sp,c=e.TweenSystem,o=e.Animation,u=e.dragonBones}],execute:function(){var l;t._RF.push({},"c76e0fkdyBP5IBNGua/cGsR","GameController",void 0),function(e){var t=1,l=1;a._calculateDT=function(e){return e||(e=performance.now()),this._deltaTime=e>this._startTime?(e-this._startTime)/1e3:0,this._deltaTime>n.DEBUG_DT_THRESHOLD&&(this._deltaTime=this.frameTime/1e3),this._startTime=e,this._deltaTime=this._deltaTime*t,this._deltaTime},e.getGameTimeScale=function(){return l},e.setGameTimeScale=function(e){l=e},e.changeTimeScale=function(e){t=e};var m=e.pause_data=new(function(){return function(){this.state_b=!1,this.physics_2d_b=void 0,this.physics_3d_b=void 0,this.scheduler_as=void 0,this.anim_as=[],this.tween_target_as=void 0,this.spine_as=void 0,this.spine_TimeScale=new Map}}());function _(e,t){return void 0===t&&(t=[]),e?(t.push(e),e.children.forEach((function(e){t.push(e),_(e)})),t):t}function h(e){(Array.isArray(e)?e:[e]).forEach((function(e){var t;i.getScheduler().resumeTarget(e),null==(t=e.getComponent(o))||t.resume(),e.getComponent(u.ArmatureDisplay)&&(e.getComponent(u.ArmatureDisplay).timeScale=1),c.instance.ActionManager.resumeTarget(e)}))}e.pause_config=function(){this.exclude_as=void 0,this.recu_exclude_as=void 0},e.quick=function(e){i.getScheduler().setTimeScale(e)},e.pause=function(e){if(!m.state_b){m.scheduler_as=i.getScheduler().pauseAllTargets();var t,a=i.getSystem(s.ID);if((t=m.anim_as).splice.apply(t,[0,m.anim_as.length].concat(a._anims.array)),m.anim_as.forEach((function(e){e.pause()})),m.spine_as=i.getScene().getComponentsInChildren(r.Skeleton),m.spine_as.forEach((function(e){e.skeletonData&&(m.spine_TimeScale.set(e.skeletonData.name,e.timeScale),e.timeScale=0)})),m.tween_target_as=c.instance.ActionManager.pauseAllRunningActions(),e){var n,o=[];o.push.apply(o,e.exclude_as),null==(n=e.recu_exclude_as)||n.forEach((function(e){o.push.apply(o,_(e))})),o.forEach((function(e){h(e)}))}m.state_b=!0}},e.resume=function(){i.getScheduler().resumeTargets(m.scheduler_as),m.anim_as.forEach((function(e){e.isPlaying&&e.isPaused&&e.play()})),m.spine_as&&m.spine_as.forEach((function(e){e.skeletonData&&(e.timeScale=m.spine_TimeScale.has(e.skeletonData.name)?m.spine_TimeScale.get(e.skeletonData.name):1)})),c.instance.ActionManager.resumeTargets(m.tween_target_as),m.state_b=!1},e.pause_node=function(e){(Array.isArray(e)?e:[e]).forEach((function(e){var t;i.getScheduler().pauseTarget(e),null==(t=e.getComponent(o))||t.pause(),e.getComponent(u.ArmatureDisplay)&&(e.getComponent(u.ArmatureDisplay).timeScale=0),c.instance.ActionManager.pauseTarget(e)}))},e.resume_node=h}(l||(l={}));e("default",l);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./AdManager.ts","./Api.ts","./Configuration.ts","./HttpService.ts","./OpenPopupManager.ts","./BagData.ts","./BagHeroData.ts","./GridData.ts","./HeroData.ts","./MonsterData.ts","./PlayerData.ts","./SkillUpgradeData.ts","./WeaponShopData.ts"],(function(t){var e,n,a,i,s,o,r,c,u,l,h,d,f,p,m,_,g,v;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){a=t.Constants},function(t){i=t.AdManager,s=t.AdType,o=t.AdBattleType},function(t){r=t.Api},function(t){c=t.Configuration},function(t){u=t.HttpService},function(t){l=t.OpenPopupManager},function(t){h=t.BagData},function(t){d=t.BagHeroData},function(t){f=t.GridData},function(t){p=t.HeroData},function(t){m=t.MonsterData},function(t){_=t.PlayerData},function(t){g=t.SkillUpgradeData},function(t){v=t.WeaponShopData}],execute:function(){n._RF.push({},"1d101mQYZlH5YgNDTHpHFON","GameData",void 0),t("GameData",function(){function t(){this._waveCoinAdd=10,this._initHp=100,this._gameTime=0,this._eventTime=0,this._dataInited=!1,this._curExp=0,this._expLevel=0,this._battleId=0,this._chapterId=0,this._reviveNumber=0,this._waveId=0,this._skillIndex=0,this.winRewards=[],this.failRewards=[],this._refreshSkillCount=10,this._selectAllSkillCount=3,this._unlockItems=[]}var n=t.prototype;return n.init=function(){this.loadFromCache(),this.loadFromNetwork()},n.checkGameEventOver=function(){return!1},n.startBattle=function(t,e){var n=this;this._curExp=0,this._expLevel=0,this._reviveNumber=0,this._refreshSkillCount=10,this._selectAllSkillCount=3,u.instance.post(r.CHAPTER_BATTLE_START,{chapterId:t}).then((function(a){0==a.code?(n._chapterId=t,n._battleId=a.data.battleId,n._waveId=1,e(a.code)):e(a.code,a?a.msg:"error")}))},n.reportFight=function(t,e){var n=this,a=t==I.Pending?this._waveId:this._waveId-1,i=this.getFightContent(),s={state:t,chapterId:this._chapterId,battleId:this._battleId,wave:a,waveInfo:i};u.instance.post(r.CHAPTER_BATTLE_REPORT,s).then((function(t){0==t.code?(t.data.rewards&&t.data.rewards.failure&&(n.failRewards=t.data.rewards.failure),t.data.rewards&&t.data.rewards.success&&(n.winRewards=t.data.rewards.success),e&&e(t.code)):e&&e(t.code,t.msg)})),this.saveGameDataToCache(JSON.stringify(i))},n.reviveBattle=function(t,e){var n={battleId:this._battleId,sign:t};this._reviveNumber=1,u.instance.post(r.CHAPTER_BATTLE_REVIVE,n).then((function(t){0==t.code?e&&e(t.code):e&&e(t.code,t?t.msg:"error")}))},n.getFightContent=function(){var t={};return f.instance.getGridItemMapData().forEach((function(e,n){t[n]=e})),{timestamp:(new Date).getTime(),gameTime:m.instance.gameTime,chapterTime:m.instance.chapterTime,waveId:this._waveId,hero:{heroId:p.instance.heroId,hpPer:p.instance.hpPer,damagePer:p.instance.damagePer,hp:p.instance.curHp,maxHp:p.instance.maxHp},coin:v.instance.coin,weapons:t,gridMapData:f.instance.getGridMapData(),curExp:this.curExp,expLevel:this.expLevel,monster:{killNum:m.instance.killNum,killBossNum:m.instance.killBossNum,waveKillNum:m.instance.waveKillNum,waveKillBossNum:m.instance.waveKillBossNum},shop:{freeRefreshNumber:v.instance.freeRefreshNumber,weapon2Number:v.instance.weapon2Number},skills:g.instance.getLearnSkillUpgrades()}},n.settleBattle=function(t){var e=this,n=this._waveId,a=this.getFightContent(),i={state:t,chapterId:this._chapterId,battleId:this._battleId,wave:n,battleInfo:a};u.instance.post(r.CHAPTER_BATTLE_SETTLE,i).then((function(t){if(0==t.code){var n=[];if(t.data.unlockSlot){var a=new T;a.type=0,a.itemId=t.data.unlockSlot,n.push(a)}if(t.data.unlockWeapons)for(var i=0;i<t.data.unlockWeapons.length;i++){var s=new T;s.type=100,s.itemId=t.data.unlockWeapons[i],n.push(s)}e._unlockItems=n,_.instance.getPlayerInfo()}}))},n.raid=function(t,e){u.instance.post(r.CHAPTER_BATTLE_RAID,{chapterId:t}).then((function(t){0==t.code?(_.instance.chapterObj=t.data.chapterInfo,_.instance.getPlayerInfo(),e(t.data.rewards,t.data.levelupRewards)):l.instance.showToast(t.msg)}))},n.spendTicket=function(t){return!(_.instance.chapterObj.ticket<=0)&&(_.instance.subTicket(1),u.instance.post(r.CHAPTER_BATTLE_TICKET,{battleId:this._battleId,type:t}).then((function(t){0==t.code&&t.data.chapterInfo?_.instance.chapterObj=t.data.chapterInfo:l.instance.showToast(t.msg)})),!0)},n.watchAd=function(t,e){var n=this;i.instance.showGameAd(s.BATTLE,t,(function(a,i){e(a,i),t!=o.REVIVE&&0==a&&u.instance.post(r.CHAPTER_BATTLE_AD,{battleId:n._battleId,type:t,sign:i}).then((function(t){}))}))},n.getRandEquipMaterialByWeight=function(t){var e=t.split(","),n=0,a=0,i=0,s=[],o=[];e.forEach((function(t){var e=t.split("|");s.push(Number(e[0])),o.push(Number(e[1])),i+=Number(e[1])}));var r=Math.floor(Math.random()*i),c=0;return o.some((function(t,e){if(a=n+t,r>=n&&r<a)return c=e,!0;n=a})),s[c]},n.clear=function(){this._gameTime=0,this._eventTime=0,this._reviveNumber=0,this._curExp=0,this._expLevel=0,this._reviveNumber=0,this._refreshSkillCount=10,this._selectAllSkillCount=3},n.loadFromCache=function(){this._dataInited||(c.instance.clearConfigDataToVersion(),this._dataInited=!0)},n.loadFromNetwork=function(){h.instance.getBagDataFromNetwork(),d.instance.getHeroDataFromNetwork()},n.savePlayerDataToCache=function(t){c.instance.setConfigData(a.playerConfigId,t)},n.savePlaceDataToCache=function(t){c.instance.setConfigData(a.placeConfigId,t)},n.saveGameDataToCache=function(t){c.instance.setConfigData(a.gameConfigId,t)},n.saveWeaponDataToCache=function(t){c.instance.setConfigData(a.weaponConfigId,t)},n.clearCacheData=function(){c.instance.clearConfigData()},e(t,[{key:"eventTime",set:function(t){this._eventTime=t}},{key:"gameTime",get:function(){return this._gameTime},set:function(t){this._gameTime=t}},{key:"waveCoinAdd",get:function(){return this._waveCoinAdd}},{key:"curExp",get:function(){return this._curExp},set:function(t){this._curExp=t}},{key:"expLevel",get:function(){return this._expLevel},set:function(t){this._expLevel=t}},{key:"unlockItems",get:function(){return this._unlockItems},set:function(t){this._unlockItems=t}},{key:"refreshSkillCount",get:function(){return this._refreshSkillCount},set:function(t){this._refreshSkillCount-=t}},{key:"selectAllSkillCount",get:function(){return this._selectAllSkillCount},set:function(t){this._selectAllSkillCount-=t}},{key:"waveId",get:function(){return this._waveId},set:function(t){this._waveId=t}},{key:"reviveNumber",get:function(){return this._reviveNumber}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null;var I=t("GameState",function(t){return t.Pending="pending",t.Success="success",t.Failure="failure",t}({})),T=t("UnlockItemObj",(function(){this.type=void 0,this.itemId=void 0}));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameDebugPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./MonsterModel.ts","./CfgMgr.ts","./ResourcesUtil.ts","./MonsterItem.ts"],(function(e){var t,n,r,o,i,s,a,u,c,p,l,f,g,m,h,P,M,b,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,a=e.PageView,u=e.Node,c=e.Prefab,p=e.instantiate,l=e.Sprite,f=e.Component},function(e){g=e.Constants},function(e){m=e.OpenPopupManager},function(e){h=e.MonsterCfg,P=e.MonsterObj},function(e){M=e.CfgMgr},function(e){b=e.ResourcesUtil},function(e){d=e.MonsterItem}],execute:function(){var y,_,w,C,v,D,I,z,R,V,x;i._RF.push({},"502fcK/KVVPZ6zdptdfKy3N","GameDebugPopup",void 0);var B=s.ccclass,F=s.property;e("GameDebugPopup",(y=B("GameDebugPopup"),_=F(a),w=F(u),C=F(c),v=F(u),y((z=t((I=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,r(t,"monsterPageView",z,o(t)),r(t,"monsterParent",R,o(t)),r(t,"monsterPrefab",V,o(t)),r(t,"monsterNode",x,o(t)),t._curMonster=1,t._maxMonster=0,t}n(t,e);var i=t.prototype;return i.show=function(){this._curMonster=1;var e=M.getCfgDataArray(new h);this._maxMonster=e.length;for(var t=0;t<e.length;t++){var n=e[t],r=new P;r.addAtk=0,r.addHp=0,r.hpUp=0,r.id=n.Id,r.level=1,this.loadMonsterRes(r,n)}},i.loadMonsterRes=function(e,t,n){var r=this,o=p(this.monsterPrefab),i=g.monsterIconPath+t.icon+"/spriteFrame";b.geSpriteFrame(i).then((function(n){o.getChildByName("icon").getComponent(l).spriteFrame=n,o.parent=r.monsterParent,o.getComponent(d).init(t,e)}))},i.onLeftBtn=function(){this._curMonster>1&&(this._curMonster--,this.monsterPageView.setCurrentPageIndex(this._curMonster-1))},i.onRightBtn=function(){this._curMonster<this._maxMonster&&(this._curMonster++,this.monsterPageView.setCurrentPageIndex(this._curMonster-1))},i.onCloseBtn=function(){m.instance.hide(g.PopupUI.GameDebugPopup)},t}(f)).prototype,"monsterPageView",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(I.prototype,"monsterParent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(I.prototype,"monsterPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(I.prototype,"monsterNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=I))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameDefine.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"fd476d/4/RPHLXXF2HDHdbK","GameDefine",void 0);var t=function(e){return e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR",e}(t||{}),n=e("GameDefine",(function(){}));n.isDebug=!1,n.gameStart=!1,n.gameWave=1,n.gameOver=!1,n.gameTouch=!1,n.gameChapterId=1,n.accessToken="",n.unfinishedBattle=!1,n.frameTime=.016,n.defaultFrameTime=.016,n.viewWidth=750,n.viewHeight=1334,n.battleMapDownPosy=200,n.ScreenShakeLevel=1,n.ScreenShakeCount=1,n.ScreenShakeInteval=.0333,n.DebugLevel=t.DEBUG,a._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"d5d0dY/89NEZKp7PTxaM7GN","GameEvent",void 0);var e=E("GameEvent",(function(){}));e.SAVE_GAME_DATA="saveGameData",e.SCREEN_VIBRATOR="screenVibrator",e.GAME_CACHE="gameCache",e.GAME_TOUCH_START="gameTouchStart",e.GAME_TOUCH_MOVE="gameTouchMove",e.GAME_TOUCH_END="gameTouchEnd",e.GAME_TOUCH_CANCLE="gameTouchCancle",e.GAME_TAP_BTN="gameTapBtn",e.GAME_WIN_FAIL="gameWinFail",e.GAME_OVER="gameOver",e.GAME_BATTLE_NEXT_WAVE="gameBattleWave",e.GAME_BATTLE_START="gameBattleStart",e.GAME_CHANGE_COIN="gameChangeCoin",e.SET_BATTLE_BTN_STATUS="setBattleBtnStatus",e.ATTACK_SKILL_EFFECT="attackSkillEffect",e.ARMOR_SKILL_EFFECT="armorSkillEffect",e.INIT_BUILD_GRID_LIST="initBuildGridList",e.INIT_BUILD_WEAPON_POS="initBuildWeaponPos",e.WEAPON_MOVE="weaponMove",e.WEAPON_ICON_STATUS_INIT="weaponIconStatusInit",e.WEAPON_ICON_STATUS="weaponIconStatus",e.WEAPON_UPGRADE="weaponGrade",e.WEAPON_SHAKE="weaponShake",e.WEAPON_UPARROW="weaponUp",e.WEAPON_BUFF="weaponBuff",e.WEAPON_PlACE="weaponPlace",e.WEAPON_PlACE_FINISH="weaponPlaceFinish",e.WEAPON_REMOVE="weaponRemove",e.WEAPON_PROGRESS_BAR="weaponProgressBar",e.ADD_REMOVE_WEAPON_LIST="addRemoveWeaponList",e.ADD_PRE_WEAPON_LIST="addPreWeaponList",e.WEAPON_REMOVE_REFRESH="weaponRemoveRefresh",e.HERO_HURT="heroHurt",e.HERO_RESTORE_HP="heroRestoreHp",e.HERO_RESTORE_SHIELD="heroRestoreShield",e.INIT_HERO_SKILL="initHeroSkill",e.UPDATE_HERO_HP="updateHeroHp",e.INSERT_HERO_CIRCLE_OBJ="insertHeroCircleObj",e.INSERT_SKILL_RELEASE_CIRCLE_OBJ="insertSkillReleaseCircleObj",e.INSERT_QUARD_TREE_RECT_CIRCLE="insertQuardTreeRectCircle",e.DELETE_QUARD_TREE_OBJ="deleteQuardTreeObj",e.CHECK_QUARD_TREE_OBJ="checkQuardTreeObj",e.REFRESH_BOSS_HP="refreshBossHp",e.CREATE_DAMAGER_NUM="createDamageNum",e.SHOW_MONSTER_DIE_EFFECT="showMonsterDieEffect",e.CREATE_MONSTER_DEBUFF="createMonsterDebuff",e.CREATE_HERO_DEBUFF="createHeroDebuff",e.SHOW_HERO_HP="showHeroHp",e.SHOW_MONSTER_HP="showMonsterHp",e.SHOW_MONSTER_SHADOW="showMonsterShadow",e.SHOW_MONSTER_BUFF="showMonsterBuff",e.SHOW_BOSS_COMING="showBossComing",e.HERO_ANIM="heroAnim",e.CREATE_DROP_BOX="createDropBox",e.RESET_SELECT_BAG="resetSelectBag",e.REVIVE_SELECT_BAG="reviveSelectBag",e.UPDATE_MONSTER_PROGRESS="updateMonsterProgress",e.SHOW_HIDE_SKILL_LIST="showHideSkillList",e.SHOW_HIDE_PLACE_LIST="showHidePlaceList",e.PLACE_GRID_START="placeGridStart",e.PLACE_GRID_MOVE="placeGridMove",e.PLACE_GRID_END="placeGridEnd",e.CLEAR_AREA_DATA="clearAreaData",e.PLACE_GRID_FINISH="placeGridFinish",e.SHOW_BOTTOM_INFO="showBottomInfo",e.REFRESH_PLAYER_DATA="refreshPlayerData",e.REMOVE_POPUP_WEAPON="removePopupWeapon",e.WEAPON_DOWN_UP="weaponDownUp",e.init_POPUP_WEAPON_STATUS="initPopupWeaponStatus",e.UPDATE_POPUP_UPGRADE_INFO="updatePopupUpgradeInfo",e.UPDATE_BAG_POPUP="updateBagPopup",e.UPDATE_SHOP_POPUP=void 0,e.UPDATE_SHOP_POPUP_ITEMS="updateShopPopupItems",e.UPDATE_SHOP_DAILY="updateShopDaily",e.UPDATE_SHOP_BOX="updateShopBox",e.UPDATE_SHOP_GOLD="updateShopGold",e.UPDATE_SHOP_DIAMOND="updateShopDiamond",e.UPDATE_WALLET_INFO="updateWalletInfo",e.CLOSE_SHOP_ITEM_POPUP="closeShopItemPopup",e.GET_SHOP_DATA="getShopData",e.UPDATE_DAILY_QUEST_POPUP=void 0,e.UPDATE_FIRST_TOPUP_POPUP="updateFirstTopupPopup",e.GET_FIRST_TOPUP_DATA="getFirstTopupData",e.UPDATE_MONTHLY_PASS_POPUP="updateMonthlyPassPopup",e.GET_MONTHLY_PASS_DATA="getMontlyPassData",e.UPDATE_GROWTH_FUND_POPUP="updateGrowthFundPopup",e.GET_GROWTH_FUND_DATA="getGrowthFundData",e.GET_GOLD_REWARD="getGoldReward",e.GET_DIAMOND_REWARD="getDiamondReward",e.GET_ENERGY_REWARD="getEnergyReward",e.GET_EXP_REWARD="getExpReward",e.GET_TICKET_REWARD="getTicketReward",e.COST_ENERGY_BATTLE="costEnergyBattle",e.GET_FOOD_REWARD="getFoodReward",e.GET_WEAPON_REWARD="getWeaponReward",e.CHAPTER_GET_GOLD_REWARD="getChapterGoldReward",e.GUIDE_HIDE_FINGER="guideHideFinger",e.GUIDE_BAG_ACTION="guideBagAction",e.GUIDE_BATTLE_ACTION="guideBattleAction",e.UPDATE_INVITE_INFO="updateInviteInfo",e.UPDATE_INVITE_FRIEND_INFO="updateInviteFrenInfo",e.UPDATE_WAREHOUSE_DATA="updateWarehouseData",e.INIT_AVATAR_LIST="initAvatarList",e.UPDATE_NAME="updatName",e.UPDATE_ACHIEVEMENT="ipdateAchievement",e.UPDATE_HERO_INFO="updateHerosInfo",e.UPGRADE_HERO="upgradehero",e.UPDATE_HERO_TAB="updateHeroTab",e.SELECT_LANGUAGE="selectLanguage",e.REFRESH_ROTARY_INFO="refreshRotaryInfo",_._RF.pop()}}}));

System.register("chunks:///_virtual/GameFailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./GameEvent.ts","./RewardItem.ts","./GameData.ts"],(function(e){var t,n,r,a,i,o,u,c,s,l,p,f,m,h,d,w,v,b,y,P,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator,s=e.Prefab,l=e.Node,p=e.AnimationComponent,f=e.Component,m=e.Vec3,h=e.instantiate},function(e){d=e.Constants},function(e){w=e.EventListener},function(e){v=e.OpenPopupManager},function(e){b=e.GameEvent},function(e){y=e.RewardItem},function(e){P=e.GameData,g=e.GameState}],execute:function(){var G,x,A,C,F,R,D,E,_;u._RF.push({},"e80eeoTD8JB1r1yeuX5LqAA","GameFailPopup",void 0);var k=c.ccclass,z=c.property;e("GameFailPopup",(G=k("GameFailPopup"),x=z(s),A=z(l),C=z(p),G((D=t((R=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"rewardPrefab",D,a(t)),r(t,"content",E,a(t)),r(t,"failAnim",_,a(t)),t._status=!1,t}n(t,e);var u=t.prototype;return u.show=function(e){this.failAnim.play(),this.setContent(),P.instance.settleBattle(g.Failure)},u.setContent=function(){var e=i(o().mark((function e(){var t,n,r,a,i,u,c=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=P.instance.failRewards,this.content.removeAllChildren(),n=new m(0,0,0),r=t.length,100,100,20,4,a=r>=4?4:r,n.x=120*-(a-1)/2,i=o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){c.scheduleOnce((function(){var i=t[r],o=h(c.rewardPrefab),u=new m(0,0,0),s=Math.floor(r/a),l=r%a;u.x=n.x+120*l,u.y=-120*s,o.parent=c.content,o.getComponent(y).init(i),o.setPosition(u),e(0)}),.1)}));case 2:case"end":return e.stop()}}),e)})),u=0;case 12:if(!(u<t.length)){e.next=17;break}return e.delegateYield(i(u),"t0",14);case 14:u++,e.next=12;break;case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.onReturnBtn=function(){v.instance.hide(d.PopupUI.GameFailPopup),w.emit(b.GAME_OVER)},t}(f)).prototype,"rewardPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(R.prototype,"content",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(R.prototype,"failAnim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=R))||F));u._RF.pop()}}}));

System.register("chunks:///_virtual/GamePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./ResourcesUtil.ts","./Util.ts","./GridData.ts","./MonsterData.ts","./SkillUpgradeData.ts","./WeaponData.ts","./GameEvent.ts","./SkillTypeItem.ts","./WeaponModel.ts","./CoinMode.ts","./HeroData.ts","./WeaponShopData.ts","./LanguageManager.ts","./GameData.ts","./GuideData.ts","./GameController.ts","./SpriteEx.ts","./PlayerData.ts","./AdManager.ts","./DamageStatItem.ts","./GameDefine.ts"],(function(t){var e,n,i,a,o,s,r,u,c,l,p,h,f,S,E,d,g,_,P,b,m,G,v,I,B,T,w,L,R,D,A,y,O,C,U,x,N,W,H,k,M,z,F,V,K;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.ProgressBar,u=t.Label,c=t.Node,l=t.UITransform,p=t.Color,h=t.Button,f=t.Sprite,S=t.instantiate,E=t.view,d=t.Animation,g=t.Component,_=t.tween,P=t.v3},function(t){b=t.Constants},function(t){m=t.EventListener},function(t){G=t.OpenPopupManager,v=t.LayerType},function(t){I=t.ResourcesUtil},function(t){B=t.Util},function(t){T=t.GridData},function(t){w=t.MonsterData},function(t){L=t.SkillUpgradeData},function(t){R=t.WeaponData},function(t){D=t.GameEvent},function(t){A=t.SkillTypeItem},function(t){y=t.WeaponType},function(t){O=t.CoinObj},function(t){C=t.HeroData},function(t){U=t.WeaponShopData},function(t){x=t.LanguageManager},function(t){N=t.GameData},function(t){W=t.GuideData,H=t.GuideStep},function(t){k=t.default},function(t){M=t.SpriteEx},function(t){z=t.PlayerData},function(t){F=t.AdBattleType},function(t){V=t.DamageStatItem},function(t){K=t.GameDefine}],execute:function(){var j,X,Y,q,J,Q,Z,$,tt,et,nt,it,at,ot,st,rt,ut,ct,lt,pt,ht,ft,St,Et,dt,gt,_t,Pt,bt,mt,Gt,vt,It,Bt,Tt,wt,Lt,Rt,Dt,At,yt,Ot,Ct,Ut,xt,Nt,Wt;o._RF.push({},"dbe14r+mn5EhrfiOzy+Ys8V","GamePopup",void 0);var Ht=s.ccclass,kt=s.property;t("GamePopup",(j=Ht("GamePopup"),X=kt(r),Y=kt(u),q=kt(u),J=kt(u),Q=kt(c),Z=kt(u),$=kt(u),tt=kt(c),et=kt(c),nt=kt(c),it=kt(c),at=kt(c),ot=kt(c),st=kt(c),rt=kt(M),ut=kt(c),ct=kt(c),lt=kt(c),pt=kt(u),ht=kt(u),ft=kt(c),St=kt(c),j((gt=e((dt=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,i(e,"expProgerssBar",gt,a(e)),i(e,"expLevel",_t,a(e)),i(e,"kill",Pt,a(e)),i(e,"gold",bt,a(e)),i(e,"goldIcon",mt,a(e)),i(e,"wave",Gt,a(e)),i(e,"ticket",vt,a(e)),i(e,"damageStatButton",It,a(e)),i(e,"damgeStat",Bt,a(e)),i(e,"buttonList",Tt,a(e)),i(e,"battleButton",wt,a(e)),i(e,"freeButton",Lt,a(e)),i(e,"refreshButton",Rt,a(e)),i(e,"weapon2RefreshBtn",Dt,a(e)),i(e,"weapon2RefreshSpriteEx",At,a(e)),i(e,"placeList",yt,a(e)),i(e,"placeBtn",Ot,a(e)),i(e,"skillTypeList",Ct,a(e)),i(e,"coinLab",Ut,a(e)),i(e,"weapon2Lab",xt,a(e)),i(e,"bossComing",Nt,a(e)),i(e,"guide",Wt,a(e)),e.weaponSkill=[],e._totalGold=0,e._maxExp=100,e._showRefreshStatus=!0,e._nextStep=0,e}n(e,t);var o=e.prototype;return o.show=function(){var t=this;this._totalGold=U.instance.coin,this._maxExp=L.instance.getBattleLevelByLevel(N.instance.expLevel+1),this.weaponSkill=[],this.gold.string=""+this._totalGold,this.kill.string="0";var e=B.adapterScale();this.buttonList.setScale(e,e),this.expProgerssBar.node.active=!1,this.expProgerssBar.progress=0,this.expProgerssBar.node.setScale(e,e),this.onSetWaveInfo(1),this.updateLevelInfo(),this.clearSkill(),this.setRefreshBtnStatus(),this.setBattleBtnStatus(),this.buttonList.active=!0,this.expProgerssBar.node.active=!1,this.onCreateDamageStat();var n=z.instance.chapterObj.ticket;this.ticket.string=n.toString(),this.weapon2RefreshSpriteEx.index=n>0?1:0,W.instance.guideMode&&W.instance.curStep==H.GUIDE_STEP1_BATTLE_FIRST&&G.instance.showGuidePopup(null,(function(){G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup(t.guide)}))},o.onGameCoin=function(t){var e=this,n=this.goldIcon.getPosition(),i=t.num,a=t.pos,o=b.battlePath+"sliverItem";U.instance.coin=t.num;var s=this.goldIcon.parent.getComponent(l).convertToNodeSpaceAR(a);I.getPrefab(o).then((function(t){for(var a=function(){var i=S(t),a=2*(Math.random()-.5)*100+s.x,o=2*(Math.random()-.5)*50+s.y;i.parent=e.goldIcon.parent,i.setPosition(s),_(i).to(.2,{position:P(a,o,0)},{easing:"sineIn"}).delay(.2).to(.5,{position:n},{easing:"sineInOut"}).call((function(){e._totalGold++,e.gold.string=""+e._totalGold,e.setRefreshBtnStatus(),i.destroy()})).start()},o=0;o<i;o++)a()}))},o.onSetWaveInfo=function(t){N.instance.waveId=t,this.wave.string=x.instance.getLang("game.wave",[t+"/"+w.instance.maxWave])},o.onUpdateMonsterProgress=function(t,e){var n=this;this.kill.string=""+t,N.instance.curExp=N.instance.curExp+e;!function t(){if(n._maxExp=L.instance.getBattleLevelByLevel(N.instance.expLevel+1),N.instance.curExp>=n._maxExp){N.instance.curExp=N.instance.curExp-n._maxExp,N.instance.expLevel=N.instance.expLevel+1,n.updateLevelInfo();var e=L.instance.getSelectSkillListByWeight(N.instance.waveId);e.length&&G.instance.showSkillSelectPopup(e,N.instance.waveId,t)}else;}(),this.updateLevelInfo()},o.updateLevelInfo=function(){this.expLevel.string=""+N.instance.expLevel,this.expProgerssBar.progress=N.instance.curExp/this._maxExp},o.setRefreshBtnStatus=function(){if(U.instance.freeRefreshNumber>0)this.freeButton.active=!0,this.refreshButton.active=!1;else{var t=U.instance.price;this.coinLab.string=t.toFixed(0),t>U.instance.coin?this.coinLab.color=(new p).fromHEX("#ff0000"):this.coinLab.color=(new p).fromHEX("#ffffff"),this.freeButton.active=!1,this.refreshButton.active=!0}var e=U.instance.weapon2Number;e>0?(this.weapon2Lab.string=x.instance.getLang("game.refresh")+"("+e+"/"+U.instance.totalWeapon2Number+")",this._showRefreshStatus&&(this.weapon2RefreshBtn.active=!0)):this.weapon2RefreshBtn.active=!1},o.setBattleBtnStatus=function(){for(var t=T.instance.getGridItemData(),e=!1,n=0;n<t.length;n++){var i=t[n],a=R.instance.getWeaponByWid(i.wid);if(a.type==y.ATTACK_PHYSICAL||a.type==y.ATTACK_MAGIC){e=!0;break}}z.instance.userObj.isDebug&&(e=!0),e?(this.battleButton.getComponent(h).interactable=!0,this.battleButton.getComponent(f).grayscale=!1):(this.battleButton.getComponent(h).interactable=!1,this.battleButton.getComponent(f).grayscale=!0)},o.onWeapon2RerollBtn=function(){var t=this;0==z.instance.chapterObj.ticket?N.instance.watchAd(F.REFRESH_WEAPON,(function(){t.weapon2RefreshBtn.active=!1,t._showRefreshStatus=!1,m.emit(D.WEAPON_REMOVE_REFRESH,!1,!0)})):N.instance.spendTicket(F.REFRESH_WEAPON)&&(this.weapon2RefreshBtn.active=!1,this._showRefreshStatus=!1,m.emit(D.WEAPON_REMOVE_REFRESH,!1,!0))},o.onFreeRerollBtn=function(){W.instance.curStep==H.GUIDE_STEP3_REFRESH_WEAPON&&(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup(this.guide)),U.instance.freeRefreshNumber=1,this.setRefreshBtnStatus(),m.emit(D.WEAPON_REMOVE_REFRESH,!1)},o.onRerollBtn=function(){U.instance.price>U.instance.coin?G.instance.showAdTipsPopup(2,null,(function(t,e){if(t){var n=new O;n.pos=e,n.num=30,m.emit(D.GAME_CHANGE_COIN,n)}})):(U.instance.coin=-15,this._totalGold=U.instance.coin,this.gold.string=""+this._totalGold,this.setRefreshBtnStatus(),m.emit(D.WEAPON_REMOVE_REFRESH,!1),W.instance.curStep==H.GUIDE_STEP14_REFRESH_WEAPON&&(G.instance.hide(b.PopupUI.GuidePopup),this.scheduleOnce((function(){m.emit(D.GUIDE_BATTLE_ACTION)}),.5)))},o.onBattleBtn=function(){W.instance.curStep==H.GUIDE_STEP8_BATTLE&&G.instance.hide(b.PopupUI.GuidePopup),this.buttonList.active=!1,this.expProgerssBar.node.active=!0,m.emit(D.GAME_BATTLE_START)},o.onCreateDamageStat=function(){var t=this,e=b.battlePath+"damageStatItem";I.getPrefab(e).then((function(e){var n=S(e);n.setPosition(t.damageStatButton.getPosition()),n.getComponent(V).init(),n.parent=t.damgeStat}))},o.onDamageStatBtn=function(){this.damgeStat.children[0].getComponent(V).show()},o.onDebugBtn=function(){G.instance.show(b.PopupUI.GameDebugPopup,null,v.MID,!1)},o.onPlaceFinishBtn=function(){m.emit(D.PLACE_GRID_FINISH),this.placeList.active=!1,W.instance.curStep==H.GUIDE_STEP12_PLACE_GRID_DONE&&(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup(this.guide))},o.onShowHidePlaceList=function(t){this.buttonList.active=!t,this.placeList.active=t},o.onShowHideSkillList=function(t){this.skillTypeList.active=t,this.buttonList.active=!t,this.expProgerssBar.node.active=t,this.setRefreshBtnStatus(),this._showRefreshStatus=!0,0==t&&W.instance.curStep==H.GUIDE_STEP10_WAVE1_DONE&&(W.instance.curStep=1,U.instance.coin+=5,this.setRefreshBtnStatus(),G.instance.showGuidePopup(this.guide))},o.clearSkill=function(){for(var t=0;t<this.skillTypeList.children.length;t++){var e=this.skillTypeList.children[t];e.active&&e.destroy()}},o.initHeroSkill=function(){this.clearSkill(),L.instance.initUpgradeOptionsPoolData(),C.instance.initHp();var t=E.getVisibleSize(),e=t.width>K.viewWidth?K.viewWidth:t.width;this.skillTypeList.active=!0,this.skillTypeList.getComponent(l).width=e;var n=this.skillTypeList.children[0],i=10,a=100;this.weaponSkill=[];for(var o=Array.from(T.instance.getGridItemMapData().values()),s=0,r=0;r<o.length;r++){var u=o[r].wid;R.instance.getWeaponByWid(u).type==y.ECONOMY&&s++}var c=o.length-s,p=c>8?8:c,h=Math.floor((e-(p+1)*i)/p)>a?a:Math.floor((e-(p+1)*i)/p),f=h<a?h/a:1;n.setScale(f,f);for(var d=p%2==0?-(5+(p/2-1)*i+p/2*h-h/2):-Math.floor(p/2)*(i+h),g=c>8?50:0,_=0,P=0;P<o.length;P++){var b=o[P],m=b.wid,G=b.id,v=R.instance.getWeaponByWid(m);if(v.type!=y.ECONOMY){var I="skillTypeItem"+v.id,B=null,w=_>=8?d+_%8*(h+i):d+_*(h+i),D=_>=8?g-h-i:g;(B=S(n)).parent=this.skillTypeList,B.active=!0,B.setPosition(w,D),B.name=I,B.getComponent(A).init(G,v),this.weaponSkill.push(m),_++}}},o.onPauseBtn=function(){G.instance.showPausePopup()},o.onCreateBossComing=function(){var t=this;this.bossComing.active=!0;var e=b.battlePath+"boss";I.getPrefab(e).then((function(e){var n=S(e);n.parent=t.bossComing.parent;var i=n.getComponent(d);i.play("bosscoming"),i.on(d.EventType.FINISHED,(function(){n.destroy()}),t)}))},o.onGuideEvent=function(t){var e=this;W.instance.curStep==H.GUIDE_STEP2_DRAG_WEAPON?(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup(this.freeButton)):W.instance.curStep==H.GUIDE_STEP4_MERGE_WEAPON?(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup(this.guide)):W.instance.curStep==H.GUIDE_STEP5_DRAG_WEAPON?(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup(t,(function(){e._nextStep==H.GUIDE_STEP6_PURSE?(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=2,G.instance.showGuidePopup(e.battleButton)):(W.instance.curStep=1,G.instance.hide(b.PopupUI.GuidePopup),G.instance.showGuidePopup(e.guide))}))):W.instance.curStep==H.GUIDE_STEP7_DRAG_WEAPON?(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup(this.battleButton)):W.instance.curStep==H.GUIDE_STEP5_DRAG_WEAPON||W.instance.curStep==H.GUIDE_STEP6_PURSE?this._nextStep=H.GUIDE_STEP6_PURSE:W.instance.curStep==H.GUIDE_STEP11_PLACE_GRID?(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup(this.placeBtn)):W.instance.curStep==H.GUIDE_STEP9_SELECT_SKILL?(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,k.pause(),G.instance.showGuidePopup(null,(function(){k.resume(),G.instance.hide(b.PopupUI.GuidePopup),m.emit(D.RESET_SELECT_BAG)}))):W.instance.curStep==H.GUIDE_STEP13_DRAG_WEAPON?(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup(this.refreshButton)):W.instance.curStep==H.GUIDE_STEP14_REFRESH_WEAPON&&(G.instance.hide(b.PopupUI.GuidePopup),W.instance.curStep=1,G.instance.showGuidePopup())},o.onEnable=function(){m.on(D.GAME_CHANGE_COIN,this.onGameCoin,this),m.on(D.GAME_BATTLE_NEXT_WAVE,this.onSetWaveInfo,this),m.on(D.UPDATE_MONSTER_PROGRESS,this.onUpdateMonsterProgress,this),m.on(D.SET_BATTLE_BTN_STATUS,this.setBattleBtnStatus,this),m.on(D.INIT_HERO_SKILL,this.initHeroSkill,this),m.on(D.SHOW_HIDE_SKILL_LIST,this.onShowHideSkillList,this),m.on(D.SHOW_HIDE_PLACE_LIST,this.onShowHidePlaceList,this),m.on(D.SHOW_BOSS_COMING,this.onCreateBossComing,this),m.on(D.GUIDE_BATTLE_ACTION,this.onGuideEvent,this)},o.onDisable=function(){m.off(D.GAME_CHANGE_COIN,this.onGameCoin,this),m.off(D.GAME_BATTLE_NEXT_WAVE,this.onSetWaveInfo,this),m.off(D.UPDATE_MONSTER_PROGRESS,this.onUpdateMonsterProgress,this),m.off(D.SET_BATTLE_BTN_STATUS,this.setBattleBtnStatus,this),m.off(D.INIT_HERO_SKILL,this.initHeroSkill,this),m.off(D.SHOW_HIDE_SKILL_LIST,this.onShowHideSkillList,this),m.off(D.SHOW_HIDE_PLACE_LIST,this.onShowHidePlaceList,this),m.off(D.SHOW_BOSS_COMING,this.onCreateBossComing,this),m.off(D.GUIDE_BATTLE_ACTION,this.onGuideEvent,this)},o.onTapBtn=function(){m.emit(D.GAME_TAP_BTN)},e}(g)).prototype,"expProgerssBar",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=e(dt.prototype,"expLevel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(dt.prototype,"kill",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(dt.prototype,"gold",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(dt.prototype,"goldIcon",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=e(dt.prototype,"wave",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(dt.prototype,"ticket",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=e(dt.prototype,"damageStatButton",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(dt.prototype,"damgeStat",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=e(dt.prototype,"buttonList",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(dt.prototype,"battleButton",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=e(dt.prototype,"freeButton",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=e(dt.prototype,"refreshButton",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=e(dt.prototype,"weapon2RefreshBtn",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=e(dt.prototype,"weapon2RefreshSpriteEx",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(dt.prototype,"placeList",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=e(dt.prototype,"placeBtn",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(dt.prototype,"skillTypeList",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=e(dt.prototype,"coinLab",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=e(dt.prototype,"weapon2Lab",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(dt.prototype,"bossComing",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=e(dt.prototype,"guide",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=dt))||Et));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameRevivePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EventListener.ts","./GameEvent.ts","./GameData.ts","./PlayerData.ts","./SpriteEx.ts","./AdManager.ts","./LanguageManager.ts"],(function(e){var t,i,n,a,o,r,s,c,l,u,p,v,m,h,f,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Label,c=e.Component},function(e){l=e.Constants},function(e){u=e.OpenPopupManager},function(e){p=e.EventListener},function(e){v=e.GameEvent},function(e){m=e.GameData},function(e){h=e.PlayerData},function(e){f=e.SpriteEx},function(e){g=e.AdBattleType},function(e){b=e.LanguageManager}],execute:function(){var _,d,P,E,y,G,R,C,L;o._RF.push({},"d29e8LbbZNKj4WNeXlhIYxe","GameRevivePopup",void 0);var x=r.ccclass,B=r.property;e("GameRevivePopup",(_=x("GameRevivePopup"),d=B(s),P=B(f),E=B(s),_((R=t((G=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"time",R,a(t)),n(t,"icon",C,a(t)),n(t,"lbText",L,a(t)),t._time=10,t}i(t,e);var o=t.prototype;return o.show=function(){var e=this,t=h.instance.chapterObj.revivalCoin;t>0?(this.icon.index=0,this.lbText.string="1/"+t):(this.icon.index=1,this.lbText.string=b.instance.getLang("game.revive")),this._time=10,this.time.string=""+this._time,this.schedule((function(){e._time--,e._time<=0&&(e._time=0),e.time.string=""+e._time,e._time<=0&&e.onCloseBtn()}),1)},o.onReviveBtn=function(){var e=this;this.unscheduleAllCallbacks(),h.instance.chapterObj.revivalCoin>0?(m.instance.reviveBattle(""),u.instance.hide(l.PopupUI.GameRevivePopup),p.emit(v.REVIVE_SELECT_BAG)):m.instance.watchAd(g.REVIVE,(function(t,i){0==t?(m.instance.reviveBattle(i),u.instance.hide(l.PopupUI.GameRevivePopup),p.emit(v.REVIVE_SELECT_BAG)):e.schedule((function(){e._time--,e._time<=0&&(e._time=0),e.time.string=""+e._time,e._time<=0&&e.onCloseBtn()}),1)}))},o.onCloseBtn=function(){this.unscheduleAllCallbacks(),u.instance.hide(l.PopupUI.GameRevivePopup),u.instance.showGameFailPopup()},t}(c)).prototype,"time",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(G.prototype,"icon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(G.prototype,"lbText",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=G))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameWinPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./GameEvent.ts","./RewardItem.ts","./GameData.ts"],(function(n){var e,t,r,i,a,o,u,s,c,p,l,f,m,h,w,d,v,b,y,P;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,r=n.initializerDefineProperty,i=n.assertThisInitialized,a=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){u=n.cclegacy,s=n._decorator,c=n.Prefab,p=n.Node,l=n.AnimationComponent,f=n.Component,m=n.Vec3,h=n.instantiate},function(n){w=n.Constants},function(n){d=n.EventListener},function(n){v=n.OpenPopupManager},function(n){b=n.GameEvent},function(n){y=n.RewardItem},function(n){P=n.GameData}],execute:function(){var g,G,R,x,A,C,k,_,E;u._RF.push({},"70d47ynHkRBkLURG7tAnrK+","GameWinPopup",void 0);var z=s.ccclass,D=s.property;n("GameWinPopup",(g=z("GameWinPopup"),G=D(c),R=D(p),x=D(l),g((k=e((C=function(n){function e(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a))||this,r(e,"rewardPrefab",k,i(e)),r(e,"content",_,i(e)),r(e,"winAnim",E,i(e)),e._status=!1,e}t(e,n);var u=e.prototype;return u.show=function(n){this._status=n,this.winAnim.play(),this.setContent()},u.setContent=function(){var n=a(o().mark((function n(){var e,t,r,i,a,u,s=this;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=P.instance.winRewards,this.content.removeAllChildren(),t=new m(0,0,0),r=e.length,100,100,20,4,i=r>=4?4:r,t.x=120*-(i-1)/2,a=o().mark((function n(r){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(n){s.scheduleOnce((function(){var a=e[r],o=h(s.rewardPrefab),u=new m(0,0,0),c=Math.floor(r/i),p=r%i;u.x=t.x+120*p,u.y=-120*c,o.parent=s.content,o.getComponent(y).init(a),o.setPosition(u),n(0)}),.1)}));case 2:case"end":return n.stop()}}),n)})),u=0;case 12:if(!(u<e.length)){n.next=17;break}return n.delegateYield(a(u),"t0",14);case 14:u++,n.next=12;break;case 17:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),u.onReturnBtn=function(){v.instance.hide(w.PopupUI.GameWinPopup),d.emit(b.GAME_OVER)},e}(f)).prototype,"rewardPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(C.prototype,"content",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(C.prototype,"winAnim",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=C))||A));u._RF.pop()}}}));

System.register("chunks:///_virtual/GridBgItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridData.ts"],(function(e){var t,i,r,n,o,a,s,c,l,d,u,p,g,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,s=e._decorator,c=e.Node,l=e.UITransform,d=e.UIOpacity,u=e.Sprite,p=e.Color,g=e.Component},function(e){f=e.GridObj,h=e.GridData}],execute:function(){var y,_,m,b,C;a._RF.push({},"9bfcbt9VBpJXrTYdzarVMdh","GridBgItem",void 0);var G=s.ccclass,V=s.property;e("GridBgItem",(y=G("GridBgItem"),_=V(c),y((C=t((b=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"tipsNode",C,n(t)),t._gridObj=new f,t._gridValue="0",t._placeAreaKey="",t}i(t,e);var a=t.prototype;return a.init=function(e,t,i){this.node.getComponent(l).setContentSize(h.instance.gridWidth,h.instance.gridHeight),this.tipsNode.getComponent(l).setContentSize(h.instance.gridWidth,h.instance.gridHeight),this._gridObj.row=e,this._gridObj.col=t,this._gridValue=i,this.node.getComponent(d).opacity=i?255:0},a.setTipsGreen=function(){this.tipsNode.getComponent(u).color=p.GREEN},a.setTipsDefault=function(){this.tipsNode.getComponent(u).color=(new p).fromHEX("ffffff")},a.delPlaceAreaKey=function(e){this._placeAreaKey==e&&(this._placeAreaKey="",this._gridValue&&(this._gridValue="0"))},o(t,[{key:"placeAreaKey",get:function(){return this._placeAreaKey},set:function(e){this._placeAreaKey=e}},{key:"gridObj",get:function(){return this._gridObj}},{key:"gridValue",get:function(){return this._gridValue},set:function(e){this._gridValue=e}}]),t}(g)).prototype,"tipsNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/GridData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts","./WeaponData.ts","./CfgMgr.ts","./BagModel.ts"],(function(t){var i,e,r,a,n,d,g,o,h;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,r=t.Size,a=t.Vec3,n=t.Rect},function(t){d=t.Util},function(t){g=t.WeaponData},function(t){o=t.CfgMgr},function(t){h=t.BagCfg}],execute:function(){e._RF.push({},"fe537oi94JPVo69/FDHGzhg","GridData",void 0),t("GridData",function(){function t(){this._curGrid=109,this._gridMapData=[["0","0","0"],["0","0","0"],["0","0","0"]],this._nearbyGrid=[[-1,0],[1,0],[0,-1],[0,1]],this._bagCfg=null,this._gridRowLen=3,this._gridColLen=3,this._gridWidth=94,this._gredHeight=94,this._space=10,this._gridItemData=new Map,this._curWeaponTildeIndex=[],this._gridEditMode=!1}var e=t.prototype;return e.init=function(){this.initGridMapData(),this.initGridItemData()},e.initGridMapData=function(){this._bagCfg=d.clone(o.getDataById(new h,this._curGrid));var t=this._bagCfg.private_gridLen.split("_");this._gridMapData=this._bagCfg.private_grid,this._gridWidth=this._bagCfg.private_gridWidth,this._gredHeight=this._bagCfg.private_gredHeight,this._space=this._bagCfg.private_space,this._gridColLen=Number(t[0]),this._gridRowLen=Number(t[1])},e.initGridItemData=function(){var t=this;this._gridItemData.forEach((function(i,e){for(var r=i.data,a=0;a<r.length;a++){var n=r[a];t._gridMapData[n.row][n.col]=e}}))},e.addWeaponItem=function(t){var i=g.instance.getWeaponByWid(t),e=new s;e.id=d.getUuid(10),e.gid=this._curGrid,e.wid=t,e.level=i.level;for(var r=i.points,a=[],n=0;n<r.length;n++)for(var o=r[n],h=0;h<o.length;h++){var u=new c;u.row=n,u.col=h,a.push(u)}e.data=a,this._gridItemData.set(e.id,e)},e.setRebuildGridMapData=function(t){var i=t.length,e=t[0].length;this._gridMapData=t,this._bagCfg.private_gridLen=i+"_"+e,this._gridColLen=i,this._gridRowLen=e,this._gridItemData.forEach((function(i,e){for(var r=[],a=0;a<t.length;a++)for(var n=t[a],d=0;d<n.length;d++){if(n[d]==e){var g=new c;g.row=a,g.col=d,r.push(g)}}i.data=r}))},e.getMaxGridMapSize=function(){var t=new r,i=this.bagCfg,e=i.private_gridWidth,a=i.private_gredHeight,n=i.private_space,d=i.max_gridLen.split("_"),g=Number(d[0]),o=Number(d[1]),h=o*e+(o-1)*n,s=g*a+(g-1)*n;return t.width=h,t.height=s,t},e.getGridMapSize=function(){var t=new r,i=this.bagCfg,e=i.private_gridWidth,a=i.private_gredHeight,n=i.private_space,d=i.private_gridLen.split("_"),g=Number(d[1]),o=Number(d[0]),h=g*e+(g-1)*n,s=o*a+(o-1)*n;return t.width=h,t.height=s,t},e.getGridSizeByRowCol=function(t,i){var e=new r,a=this.bagCfg,n=a.private_gridWidth,d=a.private_gredHeight,g=a.private_space,o=t*n+(t-1)*g,h=i*d+(i-1)*g;return e.width=o,e.height=h,e},e.getGridSize=function(){var t=new r,i=this.bagCfg.private_gridWidth,e=this.bagCfg.private_gredHeight;return t.width=i,t.height=e,t},e.getGridMapData=function(){return this._gridMapData},e.getGridItemData=function(){return Array.from(this._gridItemData.values())},e.getGridItemDataKeys=function(){return Array.from(this._gridItemData.keys())},e.getGridItemMapData=function(){return this._gridItemData},e.getGridItemWid=function(t){return this._gridItemData.has(t)?this._gridItemData.get(t).wid:0},e.getItemPosByTiledObj=function(t){var i=new c;i.row=100,i.col=100;var e=new c;for(var r in e.row=0,e.col=0,t)i.row=t[r].row<i.row?t[r].row:i.row,i.col=t[r].col<i.col?t[r].col:i.col,e.row=t[r].row>e.row?t[r].row:e.row,e.col=t[r].col>e.col?t[r].col:e.col;var n=this.getGridPosByTiled(i),d=this.getGridPosByTiled(e),g=new a(0,0,0);return g.x=(n.x+d.x)/2,g.y=(n.y+d.y)/2,g},e.getGridPosByTiled=function(t){var i=t.col*this._gridWidth+this._gridWidth/2+t.col*this._space,e=t.row*this._gredHeight+this._gredHeight/2+t.row*this._space;return new a(i,-e)},e.getNearbyGridIndexByTiled=function(t){for(var i=this,e=[],r=[],a=0;a<t.length;a++)r.push(this.getGridIndexByTiled(t[a].row,t[a].col));for(var n=function(a){i._nearbyGrid.forEach((function(n){var d=n[0]+t[a].row,g=n[1]+t[a].col;if(d>=0&&d<i._gridColLen&&g>=0&&g<i._gridRowLen){var o=i.getGridIndexByTiled(d,g);-1==e.indexOf(o)&&-1==r.indexOf(o)&&e.push(o)}}))},d=0;d<t.length;d++)n(d);return e},e.getGridIndexByTiled=function(t,i){return t*this._gridRowLen+i},e.getGridTiledByIndex=function(t){var i=Math.floor(t/this._gridRowLen),e=t%this._gridRowLen,r=new c;return r.row=i,r.col=e,r},e.deletGridDataByWeaponId=function(t){if(this._gridItemData.has(t)){for(var i=this._gridItemData.get(t).data,e=0;e<i.length;e++){var r=i[e];this._gridMapData[r.row][r.col]="0"}this._gridItemData.delete(t)}},e.addGridDataByWeaponId=function(t,i,e,r){var a=new s;a.id=r,a.gid=this._curGrid,a.wid=i,a.level=e,a.data=t,this._gridItemData.set(a.id,a);for(var n=0;n<t.length;n++){var d=t[n];this._gridMapData[d.row][d.col]=a.id}},e.updateGridItemData=function(t,i){this._gridItemData.has(t)&&(this._gridItemData.get(t).wid=i)},e.getTiledByPos=function(t){var i=t.x>0?Math.floor((t.x-this._gridWidth/2)/(this._gridWidth+this._space)):3,e=t.y<0?Math.floor((Math.abs(t.y)-this._gredHeight/2)/(this._gredHeight+this._space)):3,r=new c;return r.row=e,r.col=i,r},e.getTiledIndexByPos=function(t){var i=this.getTiledByPos(t);return i.col<0||i.row<0||i.col>this._gridRowLen-1||i.row>this._gridColLen-1?-1:this.getGridIndexByTiled(i.row,i.col)},e.checkSameWeapoIdByKey=function(t,i){if(this._gridItemData.has(t)&&i==this._gridItemData.get(t).wid)return!0;return!1},e.checkPointinGrid=function(t,i){for(var e=!1,r=0;r<i.length;r++){var a=i[r],d=this.getGridPosByTiled(a);if(new n(d.x-this._gridWidth/2,d.y-this.gridHeight/2,this.gridWidth,this.gridHeight).contains(t)){e=!0;break}}return e},e.getGridBgIndexByTiled=function(t,i){var e=this._bagCfg.max_gridLen.split("_");return t*Number(e[1])+i},e.clear=function(){this._gridItemData.clear(),this._curWeaponTildeIndex=[],this._bagCfg=null,this._gridEditMode=!1},i(t,[{key:"gridEditMode",get:function(){return this._gridEditMode},set:function(t){this._gridEditMode=t}},{key:"iconScale",get:function(){return this._bagCfg.picture}},{key:"space",get:function(){return this._space}},{key:"bagCfg",get:function(){return this._bagCfg}},{key:"curWeaponTildeIndex",get:function(){return this._curWeaponTildeIndex},set:function(t){this._curWeaponTildeIndex=t}},{key:"gridWidth",get:function(){return this._gridWidth}},{key:"gridHeight",get:function(){return this._gredHeight}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null;var s=t("GridWeaponObj",(function(){this.id=void 0,this.wid=void 0,this.level=void 0,this.gid=void 0,this.data=void 0})),c=t("GridObj",(function(){this.row=void 0,this.col=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/GridItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridData.ts"],(function(t){var e,n,o,r,i,c,s,d,a,u,l;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,r=t._decorator,i=t.UITransform,c=t.UIOpacity,s=t.Sprite,d=t.Color,a=t.Component},function(t){u=t.GridData,l=t.GridObj}],execute:function(){var g;o._RF.push({},"56899LXxFdFn6T5DajIIE2O","GridItem",void 0);var f=r.ccclass;r.property,t("GridItem",f("GridItem")(g=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this)._gridObj=new l,e._gridValue="0",e}e(o,t);var r=o.prototype;return r.init=function(t,e,n){this.node.getComponent(i).setContentSize(u.instance.gridWidth,u.instance.gridHeight),this._gridObj.row=t,this._gridObj.col=e,this._gridValue=n,this.node.getComponent(c).opacity=n?255:0},r.setDeafult=function(){this.node.getComponent(s).color=(new d).fromHEX("FFFFFF")},r.setGreen=function(){this.node.getComponent(s).color=(new d).fromHEX("7ed263")},r.setRed=function(){this.node.getComponent(s).color=(new d).fromHEX("dd6662")},r.setYellow=function(){this.node.getComponent(s).color=(new d).fromHEX("dbc464")},n(o,[{key:"gridObj",get:function(){return this._gridObj}},{key:"gridValue",get:function(){return this._gridValue}}]),o}(a))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/GridManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridData.ts","./EventListener.ts","./GameEvent.ts","./GridItem.ts","./WeaponData.ts","./GridBgItem.ts","./SkillUpgradeData.ts","./HeroData.ts","./WeaponModel.ts"],(function(e){var t,i,n,r,a,o,s,l,d,c,p,g,u,f,h,v,G,b,m,I,y,_,O;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Node,l=e.Prefab,d=e.instantiate,c=e.Rect,p=e.v2,g=e.UITransform,u=e.Component},function(e){f=e.GridData,h=e.GridObj},function(e){v=e.EventListener},function(e){G=e.GameEvent},function(e){b=e.GridItem},function(e){m=e.WeaponData},function(e){I=e.GridBgItem},function(e){y=e.SkillUpgradeData},function(e){_=e.HeroData},function(e){O=e.WeaponType}],execute:function(){var w,W,P,A,D,L,E,T,S,N,C;a._RF.push({},"40e3bgPqJ9JEqCu6pQ/roWG","GridManager",void 0);var B=o.ccclass,M=o.property;e("GridManager",(w=B("GridManager"),W=M(s),P=M(s),A=M(l),D=M(l),w((T=t((E=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"allGridList",T,r(t)),n(t,"gridList",S,r(t)),n(t,"gridPrefab",N,r(t)),n(t,"gridBgPrefab",C,r(t)),t}i(t,e);var a=t.prototype;return a.init=function(){f.instance.init(),this.initGridList(),this.initAllGridList()},a.initAllGridList=function(){for(var e=f.instance.bagCfg.max_grid,t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.length;n++){var r=i[n],a=d(this.gridBgPrefab);a.parent=this.allGridList,a.getComponent(I).init(t,n,r)}},a.initGridList=function(){this.gridList.removeAllChildren();for(var e=f.instance.getGridMapData(),t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.length;n++){var r=i[n],a=d(this.gridPrefab);a.parent=this.gridList,a.getComponent(b).init(t,n,r)}},a.initGridStatus=function(){for(var e=this.gridList.children,t=0;t<e.length;t++){e[t].getComponent(b).setDeafult()}},a.cherGridStatus=function(e,t){for(var i=t.weaponObj.id,n=[],r=this.gridList.children,a=f.instance.getGridMapData(),o=0;o<e.length;o++){for(var s=e[o],l=-1,d=0;d<r.length;d++){var g=r[d],u=g.getComponent(b).gridObj,h=g.getComponent(b).gridValue,I=f.instance.getGridPosByTiled(u),_=f.instance.gridWidth,w=f.instance.gridHeight;if(new c(I.x-_/2,I.y-w/2,_,w).contains(p(s.x,s.y))&&h){l=d;break}}n.push(l)}f.instance.curWeaponTildeIndex=n;var W=[];if(n.includes(-1))for(var P=0;P<r.length;P++){var A=r[P];if(n.includes(P)){var D=f.instance.getGridTiledByIndex(P);if(a[D.row][D.col]){A.getComponent(b).setRed();var L=a[D.row][D.col];W.includes(L)||W.push(L)}else A.getComponent(b).setYellow()}else A.getComponent(b).setDeafult()}else{for(var E=0,T="",S=0;S<r.length;S++){var N=r[S];if(n.includes(S)){N.getComponent(b).setGreen();var C=f.instance.getGridTiledByIndex(S);T=a[C.row][C.col],f.instance.checkSameWeapoIdByKey(T,i)&&E++,W.includes(T)||W.push(T)}else N.getComponent(b).setDeafult()}if(E==n.length){var B=t.weaponObj.level,M=t.weaponObj.weaponId;m.instance.checkWeaponByLevel(B+1,M)&&(W=[],t.setIconYellow(),v.emit(G.WEAPON_ICON_STATUS,T,!0))}}for(var R=0;R<W.length;R++){var H=W[R];v.emit(G.WEAPON_SHAKE,H)}if(t.weaponObj.type==O.ARMOR_HP||t.weaponObj.type==O.ARMOR_SHIELD){var j=y.instance.getWeaponBuffSkillIds(t.weaponObj.weaponId);if(j.length>0){var x=[];if(!n.includes(-1)){for(var U=[],k=0;k<n.length;k++)U.push(f.instance.getGridTiledByIndex(n[k]));for(var z=f.instance.getNearbyGridIndexByTiled(U),F="",K=0;K<z.length;K++){var V=f.instance.getGridTiledByIndex(z[K]);F=a[V.row][V.col];var q=f.instance.getGridItemWid(F);0!=q&&j.indexOf(q)>=0&&(W.includes(F)||x.includes(F)||x.push(F))}}for(var J=0;J<x.length;J++){var Y=x[J];v.emit(G.WEAPON_UPARROW,Y)}}}},a.onWeaponMove=function(e){var t=e.weaponKey,i=e.weaponObj;_.instance.subHp(i.hp,t)&&v.emit(G.UPDATE_HERO_HP);var n=i.gridType.split("_"),r=Number(n[0]),a=Number(n[1]),o=[],s=i.points;f.instance.deletGridDataByWeaponId(t);for(var l=0;l<r;l++)for(var d=0;d<a;d++)if(s[l][d]){var c=new h;c.row=l,c.col=d;var p=f.instance.getGridPosByTiled(c),u=e.point.getComponent(g).convertToWorldSpaceAR(p),b=e.node.parent.getComponent(g).convertToNodeSpaceAR(u);o.push(b)}v.emit(G.WEAPON_ICON_STATUS_INIT),this.cherGridStatus(o,e),this.checkWeaponUpgrade(e)},a.checkWeaponUpgrade=function(e){for(var t=f.instance.getGridItemData(),i=0;i<t.length;i++){var n=t[i];console.log("item",n.wid,e.weaponObj.id),e.weaponObj.id==n.wid&&v.emit(G.WEAPON_SHAKE,n.id)}},a.onEnable=function(){v.on(G.WEAPON_MOVE,this.onWeaponMove,this),v.on(G.WEAPON_PlACE_FINISH,this.initGridStatus,this),v.on(G.INIT_BUILD_GRID_LIST,this.initGridList,this)},a.onDisable=function(){v.off(G.WEAPON_MOVE,this.onWeaponMove,this),v.off(G.WEAPON_PlACE_FINISH,this.initGridStatus,this),v.off(G.INIT_BUILD_GRID_LIST,this.initGridList,this)},a.clear=function(){f.instance.clear()},t}(u)).prototype,"allGridList",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"gridList",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(E.prototype,"gridPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(E.prototype,"gridBgPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=E))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/GridMapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./ResourcesUtil.ts","./Util.ts","./GridData.ts","./GameEvent.ts","./GridBgItem.ts","./WeaponItem.ts","./OpenPopupManager.ts","./GuideData.ts"],(function(t){var e,i,n,o,a,r,s,d,h,l,c,g,p,u,f,_,A,m,v,G,P,L,C,w,b,T,y,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,d=t.Vec3,h=t.UITransform,l=t.Layout,c=t.v3,g=t.UIOpacity,p=t.Rect,u=t.v2,f=t.Component,_=t.Sprite},function(t){A=t.Constants},function(t){m=t.EventListener},function(t){v=t.ResourcesUtil},function(t){G=t.Util},function(t){P=t.GridData,L=t.GridObj},function(t){C=t.GameEvent},function(t){w=t.GridBgItem},function(t){b=t.WeaponItem},function(t){T=t.OpenPopupManager},function(t){y=t.GuideData,S=t.GuideStep}],execute:function(){var E,D,R,M,I,O,N,B,x,W,K,H,U,z,k,V,j,F,Z;a._RF.push({},"c4c63CTU+5Nc5yMg+A5m9eD","GridMapManager",void 0);var q=r.ccclass,X=r.property,Y=(t("GridMapManager",(E=q("GridMapManager"),D=X(s),R=X(s),M=X(s),I=X(s),O=X(s),N=X(s),B=X(s),x=X(s),E((H=e((K=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"bgs",H,o(e)),n(e,"bg",U,o(e)),n(e,"gridList",z,o(e)),n(e,"allGridList",k,o(e)),n(e,"weaponList",V,o(e)),n(e,"removeWeaponList",j,o(e)),n(e,"preWeaponList",F,o(e)),n(e,"preBg",Z,o(e)),e._gridRes=["bag1","bag2","bag3","bag4","bag4","bag"],e._padding=90,e.startPoint=null,e._isTouch=!1,e._offfSet=new d(0,0,0),e._startPos=new d(0,0,0),e._placeStatus=!1,e._temPos=new d(0,0,0),e._temPoint=null,e._temAddPoint=null,e._mainAreaKey="1",e._addPlaceAreaData=new Map,e}i(e,t);var a=e.prototype;return a.init=function(){this.initGridRes(),this.initStatPoint()},a.initStatPoint=function(){var t=P.instance.bagCfg.max_gridLen.split("_"),e=P.instance.bagCfg.private_gridLen.split("_"),i=Math.floor((Number(t[0])-Number(e[0]))/2),n=Math.floor((Number(t[1])-Number(e[1]))/2),o=new L;o.row=i,o.col=n,this.startPoint=o},a.initAllGridRes=function(){var t=this,e=P.instance.space,i=P.instance.getMaxGridMapSize(),n=P.instance.gridWidth;this.allGridList.getComponent(h).setContentSize(i),this.allGridList.getComponent(l).spacingX=e,this.allGridList.getComponent(l).spacingY=e,this.bg.getComponent(h).setContentSize(i.width+this._padding,i.height+this._padding),this.bg.getComponent(l).paddingTop=this._padding/2,this.bg.getComponent(l).paddingBottom=this._padding/2,this.bg.getComponent(l).paddingLeft=this._padding/2,this.bg.getComponent(l).paddingRight=this._padding/2,this.allGridList.getComponent(l).updateLayout(!0),this.bg.getComponent(l).updateLayout(!0),this.allGridList.setPosition(-i.width/2,i.height/2),this.removeWeaponList.setPosition(0,-i.height/2-100);for(var o=function(e){var o=t._gridRes[e],a=t.bgs[e].getComponent(_),r=A.gridPath+o+"/spriteFrame";v.geSpriteFrame(r).then((function(o){a.spriteFrame=o;var r=t.resNodePos(e,i,t._padding,n);r.equals(d.ZERO)||t.bgs[e].setPosition(r)}))},a=0;a<this._gridRes.length;a++)o(a)},a.initGridRes=function(){var t=this,e=P.instance.space,i=P.instance.getGridMapSize(),n=P.instance.gridWidth,o=P.instance.bagCfg.private_gridLen.split("_");this.gridList.getComponent(h).setContentSize(i),this.gridList.getComponent(l).spacingX=e,this.gridList.getComponent(l).spacingY=e,this.bg.getComponent(h).setContentSize(i.width+this._padding,i.height+this._padding),this.bg.getComponent(l).paddingTop=this._padding/2,this.bg.getComponent(l).paddingBottom=this._padding/2,this.bg.getComponent(l).paddingLeft=this._padding/2,this.bg.getComponent(l).paddingRight=this._padding/2,this.gridList.getComponent(l).updateLayout(!0),this.bg.getComponent(l).updateLayout(!0),this.gridList.setPosition(-i.width/2,i.height/2),this.weaponList.setPosition(-i.width/2,i.height/2),this.preWeaponList.setPosition(-i.width/2,i.height/2),this.weaponList.getComponent(h).setContentSize(i.width,i.height),this.preWeaponList.getComponent(h).setContentSize(i.width,i.height);var a=Number(o[0])>5?100:200;this.removeWeaponList.setPosition(0,-i.height/2-a);for(var r=function(e){var o=t._gridRes[e],a=t.bgs[e].getComponent(_),r=A.gridPath+o+"/spriteFrame";v.geSpriteFrame(r).then((function(o){a.spriteFrame=o;var r=t.resNodePos(e,i,t._padding,n);r.equals(d.ZERO)||t.bgs[e].setPosition(r)}))},s=0;s<this._gridRes.length;s++)r(s)},a.resNodePos=function(t,e,i,n){var o=d.ZERO;switch(t){case 0:o=c(-(e.width-100)/2,-e.height/2-n/2,0);break;case 1:o=c((e.width-100)/2,-e.height/2-n/2,0);break;case 2:o=c(0,e.height/2+i/2,0);break;case 3:o=c(-e.width/2-3*i/4,0,0);break;case 4:o=c(e.width/2+3*i/4,0,0)}return o},a.setNodeOpacity=function(t){this.weaponList.getComponent(g).opacity=t;for(var e=0;e<this.removeWeaponList.children.length;e++){var i=this.removeWeaponList.children[e];i.getComponent(b)&&(i.getComponent(g).opacity=t)}},a.setMainPlaceAreaKey=function(t){for(var e=this.getGridMapObjArr(),i=this.allGridList.children,n=[],o=0;o<e.length;o++){var a=e[o],r=P.instance.getGridMapData()[a.row][a.col],s=t.row+a.row,d=t.col+a.col,h=new L;h.row=s,h.col=d,n.push(h);var l=i[P.instance.getGridBgIndexByTiled(s,d)];l.getComponent(w).placeAreaKey=this._mainAreaKey,l.getComponent(w).gridValue=r}var c=new Y;c.item=this.weaponList,c.data=n,this._addPlaceAreaData.set(this._mainAreaKey,c)},a.setAddPlaceAreaKey=function(t){for(var e=this._temAddPoint,i=this.getPointGridObjArr(t.gridCfg),n=this.allGridList.children,o=[],a=0;a<i.length;a++){var r=i[a],s=e.row+r.row,d=e.col+r.col,h=new L;h.row=s,h.col=d,o.push(h),n[P.instance.getGridBgIndexByTiled(s,d)].getComponent(w).placeAreaKey=t.weaponKey}var l=new Y;l.item=t.node,l.data=o,this._addPlaceAreaData.set(t.weaponKey,l)},a.delPlaceAreaKey=function(t){for(var e=this.allGridList.children,i=0;i<e.length;i++){e[i].getComponent(w).delPlaceAreaKey(t)}},a.getConnectStatus=function(t){var e=!1,i=P.instance.bagCfg.max_gridLen.split("_");if(t.row>=0&&t.col>=0&&t.row<=Number(i[0])-1&&t.col<=Number(i[1])-1){var n=P.instance.getGridBgIndexByTiled(t.row,t.col);this.allGridList.children[n].getComponent(w).placeAreaKey==this._mainAreaKey&&(e=!0)}return e},a.checkAddAreaGridData=function(t){var e=this,i=!0,n=[];if(this._addPlaceAreaData.forEach((function(t,o){if(o!=e._mainAreaKey){n.push(o);for(var a=t.data,r=!1,s=0;s<a.length;s++){var d=a[s],h=new L;h.row=d.row-1,h.col=d.col,r||(r=e.getConnectStatus(h));var l=new L;l.row=d.row+1,l.col=d.col,r||(r=e.getConnectStatus(l));var c=new L;c.row=d.row,c.col=d.col-1,r||(r=e.getConnectStatus(c));var g=new L;if(g.row=d.row,g.col=d.col+1,r||(r=e.getConnectStatus(g)),r)break}r||(i=!1)}})),t){if(!i)for(var o=0;o<n.length;o++){var a=n[o],r=this._addPlaceAreaData.get(a);m.emit(C.ADD_REMOVE_WEAPON_LIST,r.item),this._addPlaceAreaData.delete(a),this.delPlaceAreaKey(a)}i&&n.length>0&&m.emit(C.GUIDE_BATTLE_ACTION)}else if(i){if(n.length>0){for(var s=0;s<n.length;s++){var d=n[s];this._addPlaceAreaData.get(d).item.destroy()}this.rebuildGridData()}}else for(var h=0;h<n.length;h++){var l=n[h],c=this._addPlaceAreaData.get(l);m.emit(C.ADD_REMOVE_WEAPON_LIST,c.item),this._addPlaceAreaData.delete(l),this.delPlaceAreaKey(l)}},a.rebuildGridData=function(){var t=this,e=[];this._addPlaceAreaData.forEach((function(i,n){var o=i.data;e=e.concat(o),n!=t._mainAreaKey&&t._addPlaceAreaData.delete(n)}));var i=[],n=[];e.sort((function(t,e){return t.row-e.row})),i.push(e[0].row),i.push(e[e.length-1].row),e.sort((function(t,e){return t.col-e.col})),n.push(e[0].col),n.push(e[e.length-1].col);for(var o=[],a=this.allGridList.children,r=i[0];r<=i[1];r++){for(var s=[],d=n[0];d<=n[1];d++){var h=a[P.instance.getGridBgIndexByTiled(r,d)],l=h.getComponent(w).placeAreaKey?h.getComponent(w).gridValue:"";s.push(l)}o.push(s)}P.instance.setRebuildGridMapData(o),m.emit(C.INIT_BUILD_GRID_LIST),m.emit(C.INIT_BUILD_WEAPON_POS),this.startPoint.row=i[0],this.startPoint.col=n[0]},a.debugAllList=function(){for(var t=this.allGridList.children,e=0;e<7;e++)for(var i=[],n=0;n<5;n++){var o=t[P.instance.getGridBgIndexByTiled(e,n)].getComponent(w).placeAreaKey;i.push(o)}},a.debugAllListValue=function(){for(var t=this.allGridList.children,e=0;e<7;e++)for(var i=[],n=0;n<5;n++){var o=t[P.instance.getGridBgIndexByTiled(e,n)].getComponent(w).gridValue;i.push(o)}},a.debugAllListGridObj=function(){for(var t=this.allGridList.children,e=0;e<7;e++)for(var i=[],n=0;n<5;n++){var o=t[P.instance.getGridBgIndexByTiled(e,n)].getComponent(w).gridObj;i.push(o)}},a.onPlaceGridStart=function(t){if(!this.allGridList.active){this.initAllGridListPlaceValue(),P.instance.gridEditMode=!0,this.gridList.parent=this.preBg,t.node.parent=this.node,this.allGridList.active=!0,this.setNodeOpacity(100),this.initAllGridRes(),this.node.parent.getComponent(h).height=this.allGridList.getComponent(h).height,m.emit(C.SHOW_HIDE_PLACE_LIST,!0);var e=P.instance.getGridPosByTiled(this.startPoint),i=this.allGridList.getComponent(h).convertToWorldSpaceAR(e),n=this.node.parent.getComponent(h).convertToNodeSpaceAR(i),o=P.instance.gridWidth,a=P.instance.gridHeight;this.gridList.setPosition(n.x-o/2,n.y+a/2),this.weaponList.setPosition(n.x-o/2,n.y+a/2),this.setMainPlaceAreaKey(this.startPoint)}this.delPlaceAreaKey(t.weaponKey)},a.onPlaceGridMove=function(t){t.node.parent=this.node,this.initAllGridListTips();var e=new L;e.row=0,e.col=0;var i=P.instance.getGridPosByTiled(e),n=t.point.getComponent(h).convertToWorldSpaceAR(i),o=this.allGridList.getComponent(h).convertToNodeSpaceAR(n),a=this.allGridList.children,r=P.instance.bagCfg.max_gridLen.split("_");this._placeStatus=!1;for(var s=0;s<a.length;s++){var l=a[s].getComponent(w).gridObj,c=P.instance.getGridPosByTiled(l),g=P.instance.gridWidth,f=P.instance.gridHeight;if(new p(c.x-g/2,c.y-f/2,g,f).contains(u(o.x,o.y))){for(var _=this.getPointGridObjArr(t.gridCfg),A=[],m=0;m<_.length;m++){var v=_[m],C=l.row+v.row,b=l.col+v.col;if(C<Number(r[0])&&b<Number(r[1])){var T=a[P.instance.getGridBgIndexByTiled(C,b)];T.getComponent(w).placeAreaKey?A.push(0):(T.getComponent(w).setTipsGreen(),A.push(1))}else A.push(0)}if(A.includes(0))this._placeStatus=!1;else{this._placeStatus=!0;for(var y=this.allGridList.getComponent(h).convertToWorldSpaceAR(c),S=this.node.parent.getComponent(h).convertToNodeSpaceAR(y),E=t.gridCfg.points,D=[],R=0;R<E.length;R++)for(var M=E[R],I=0;I<M.length;I++){var O=new L;O.row=R,O.col=I,D.push(O)}var N=D[D.length-1],B=new L;B.row=l.row+N.row,B.col=l.col+N.col;var x=P.instance.getGridPosByTiled(B),W=this.allGridList.getComponent(h).convertToWorldSpaceAR(x),K=this.node.parent.getComponent(h).convertToNodeSpaceAR(W),H=new d(0,0,0);H.x=(S.x+K.x)/2,H.y=(S.y+K.y)/2,this._temPos=H,this._temAddPoint=G.clone(l)}break}}},a.onPlaceGridEnd=function(t){var e=this,i=t.node;this._placeStatus?t.needAd?T.instance.showAdTipsPopup(0,t.gridCfg,(function(n){n?(t.removeGridAdBubble(),e.initAllGridListTips(),i.setPosition(e._temPos),e.setAddPlaceAreaKey(t)):(e.initAllGridListTips(),m.emit(C.ADD_REMOVE_WEAPON_LIST,i),e._addPlaceAreaData.delete(t.weaponKey))})):(this.initAllGridListTips(),i.setPosition(this._temPos),this.setAddPlaceAreaKey(t),y.instance.guideMode&&y.instance.curStep==S.GUIDE_STEP11_PLACE_GRID&&this.checkAddAreaGridData(!0)):(this.initAllGridListTips(),m.emit(C.ADD_REMOVE_WEAPON_LIST,i),this._addPlaceAreaData.delete(t.weaponKey)),this._placeStatus=!1},a.onPlaceGridFinish=function(){this.allGridList.active&&(this.checkAddAreaGridData(),P.instance.gridEditMode=!1,this.allGridList.active=!1,this.gridList.parent=this.bg,this.setNodeOpacity(255),this.initGridRes(),m.emit(C.SHOW_HIDE_PLACE_LIST,!1))},a.getFirstGridObj=function(){for(var t=P.instance.getGridMapData(),e=null,i=0;i<t.length;i++){for(var n=t[i],o=0;o<n.length;o++){if(n[o]){(e=new L).row=i,e.col=o;break}}if(e)break}return e},a.getGridMapObjArr=function(){for(var t=P.instance.getGridMapData(),e=[],i=0;i<t.length;i++)for(var n=t[i],o=0;o<n.length;o++){if(n[o]){var a=new L;a.row=i,a.col=o,e.push(a)}}return e},a.getPointGridObjArr=function(t){for(var e=t.points,i=[],n=0;n<e.length;n++)for(var o=e[n],a=0;a<o.length;a++){if(o[a]){var r=new L;r.row=n,r.col=a,i.push(r)}}return i},a.initAllGridListTips=function(){for(var t=this.allGridList.children,e=0;e<t.length;e++){t[e].getComponent(w).setTipsDefault()}},a.initAllGridListPlaceValue=function(){for(var t=this.allGridList.children,e=0;e<t.length;e++){t[e].getComponent(w).placeAreaKey=""}},a.checkAllGridListByPos=function(t){var e=this.allGridList.children,i=P.instance.bagCfg.max_gridLen.split("_");this._placeStatus=!1;for(var n=0;n<e.length;n++){var o=e[n].getComponent(w).gridObj,a=P.instance.getGridPosByTiled(o),r=P.instance.gridWidth,s=P.instance.gridHeight;if(new p(a.x-r/2,a.y-s/2,r,s).contains(u(t.x,t.y))){for(var d=this.getGridMapObjArr(),l=[],c=0;c<d.length;c++){var g=d[c],f=o.row+g.row,_=o.col+g.col;if(f<Number(i[0])&&_<Number(i[1])){var A=e[P.instance.getGridBgIndexByTiled(f,_)];A.getComponent(w).placeAreaKey?l.push(0):(A.getComponent(w).setTipsGreen(),l.push(1))}else l.push(0)}if(l.includes(0))this._placeStatus=!1;else{this._placeStatus=!0;var m=this.allGridList.getComponent(h).convertToWorldSpaceAR(a),v=this.node.parent.getComponent(h).convertToNodeSpaceAR(m),L=P.instance.gridWidth,C=P.instance.gridHeight;this._temPos.x=v.x-L/2,this._temPos.y=v.y+C/2,this._temPoint=G.clone(o)}break}}},a.setGridMoveTips=function(){this.initAllGridListTips();var t=new L;t.row=0,t.col=0;var e=P.instance.getGridPosByTiled(t),i=this.gridList.getComponent(h).convertToWorldSpaceAR(e),n=this.allGridList.getComponent(h).convertToNodeSpaceAR(i);this.checkAllGridListByPos(n)},a.onTouchStart=function(t){for(var e=this.node.parent.getComponent(h).convertToNodeSpaceAR(new d(t.x,t.y,0)),i=P.instance.getGridMapData(),n=!1,o=0;o<i.length;o++){for(var a=i[o],r=0;r<a.length;r++){if(a[r]){var s=new L;s.row=o,s.col=r;var l=P.instance.getGridPosByTiled(s),c=this.gridList.getComponent(h).convertToWorldSpaceAR(l),g=this.node.parent.getComponent(h).convertToNodeSpaceAR(c),f=P.instance.gridWidth,_=P.instance.gridHeight;if(new p(g.x-f/2,g.y-_/2,f,f).contains(u(e.x,e.y))){n=!0;break}}}if(n)break}P.instance.gridEditMode&&n&&(this._isTouch=!0,this._offfSet=this.weaponList.getComponent(h).convertToNodeSpaceAR(new d(t.x,t.y,0)),this._startPos=this.weaponList.getPosition(),this.delPlaceAreaKey(this._mainAreaKey))},a.onTouchMove=function(t){if(this._isTouch){var e=this.node.parent.getComponent(h).convertToNodeSpaceAR(new d(t.x,t.y,0)),i=new d(e.x-this._offfSet.x,e.y-this._offfSet.y);this.gridList.setPosition(i),this.weaponList.setPosition(i),this.setGridMoveTips()}},a.onTouchEnd=function(t){this._isTouch&&(this._isTouch=!1,this._placeStatus&&(this._startPos=this._temPos,this.startPoint=this._temPoint),this.gridList.setPosition(this._startPos),this.weaponList.setPosition(this._startPos),this._placeStatus=!1,this.initAllGridListTips(),this.setMainPlaceAreaKey(this.startPoint))},a.onTouchCancle=function(t){this._isTouch&&(this._isTouch=!1,this._placeStatus=!1,this.gridList.setPosition(this._startPos),this.weaponList.setPosition(this._startPos),this.initAllGridListTips())},a.onClearAreaData=function(){this._addPlaceAreaData.clear()},a.onEnable=function(){m.on(C.PLACE_GRID_START,this.onPlaceGridStart,this),m.on(C.PLACE_GRID_MOVE,this.onPlaceGridMove,this),m.on(C.PLACE_GRID_END,this.onPlaceGridEnd,this),m.on(C.GAME_TOUCH_START,this.onTouchStart,this),m.on(C.GAME_TOUCH_MOVE,this.onTouchMove,this),m.on(C.GAME_TOUCH_END,this.onTouchEnd,this),m.on(C.GAME_TOUCH_CANCLE,this.onTouchEnd,this),m.on(C.CLEAR_AREA_DATA,this.onClearAreaData,this),m.on(C.PLACE_GRID_FINISH,this.onPlaceGridFinish,this)},a.onDisable=function(){m.off(C.PLACE_GRID_START,this.onPlaceGridStart,this),m.off(C.PLACE_GRID_MOVE,this.onPlaceGridMove,this),m.off(C.PLACE_GRID_END,this.onPlaceGridEnd,this),m.off(C.GAME_TOUCH_START,this.onTouchStart,this),m.off(C.GAME_TOUCH_MOVE,this.onTouchMove,this),m.off(C.GAME_TOUCH_END,this.onTouchEnd,this),m.off(C.GAME_TOUCH_CANCLE,this.onTouchEnd,this),m.off(C.CLEAR_AREA_DATA,this.onClearAreaData,this),m.off(C.PLACE_GRID_FINISH,this.onPlaceGridFinish,this)},e}(f)).prototype,"bgs",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=e(K.prototype,"bg",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(K.prototype,"gridList",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(K.prototype,"allGridList",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(K.prototype,"weaponList",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(K.prototype,"removeWeaponList",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(K.prototype,"preWeaponList",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(K.prototype,"preBg",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=K))||W)),t("GridBgObj",(function(){this.data=void 0,this.item=void 0})));a._RF.pop()}}}));

System.register("chunks:///_virtual/GridModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"d62f2KyXe1Jbp8SFkcb49TF","GridModel",void 0);i("GridCfg",(function(){this.ClassName="Grid",this.Id=void 0,this.name=void 0,this.desc=void 0,this.res=void 0,this.type=void 0,this.gridType=void 0,this.grid=void 0,this.points=void 0,this.weight=void 0,this.ad=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GrowthFundMode.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"982754S+ZtI7qvAlTGMU69y","GrowthFundMode",void 0);i("GrowthFundCfg",(function(){this.ClassName="GrowthFund",this.Id=void 0,this.name=void 0,this.desc=void 0,this.type=void 0,this.icon=void 0,this.unlockType=void 0,this.prices=void 0,this.token=void 0})),i("GrowthFundLevelCfg",(function(){this.ClassName="GrowthFundLevel",this.Id=void 0,this.fundId=void 0,this.level=void 0,this.value=void 0,this.rewards=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GuideData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./GuideModel.ts"],(function(_){var E,t,e,i;return{setters:[function(_){E=_.createClass},function(_){t=_.cclegacy},function(_){e=_.CfgMgr},function(_){i=_.GuideCfg}],execute:function(){t._RF.push({},"23746skf7ZPd6WF8x1UnIST","GuideData",void 0),_("GuideData",function(){function _(){this._curStep=0,this._maxStep=1,this._guideMapData=new Map,this._guideTargetWpos=new Map,this._guideMode=!1,this._target=""}var t=_.prototype;return t.initCfg=function(){for(var _=e.getCfgDataArray(new i),E=0;E<_.length;E++){var t=_[E];this._guideMapData.set(t.step,t)}this._maxStep=this._guideMapData.size},t.getCurGuideCfg=function(){return this.getGuideCfgByStepId(this._curStep)},t.getCurGuideData=function(){return this.getGuideCfgByStepId(this._curStep).data},t.getMaxGuideStep=function(){return this._guideMapData.size},t.checkGuide=function(){return!!this._guideMapData.has(this._curStep)},t.getGuideCfgByStepId=function(_){return this._guideMapData.has(_)?this._guideMapData.get(_):null},t.clear=function(){this._curStep=1,this._guideMode=!1},E(_,[{key:"target",get:function(){return this._target},set:function(_){this._target=_}},{key:"guideMode",get:function(){return this._guideMode},set:function(_){this._guideMode=_}},{key:"curStep",get:function(){return this._curStep},set:function(_){this._curStep+=_}},{key:"maxStep",get:function(){return this._maxStep}}],[{key:"instance",get:function(){return this._instance||(this._instance=new _),this._instance}}]),_}())._instance=null;_("GuideStep",function(_){return _[_.GUIDE_STEP0_FIRST=15]="GUIDE_STEP0_FIRST",_[_.GUIDE_STEP1_BATTLE_FIRST=1]="GUIDE_STEP1_BATTLE_FIRST",_[_.GUIDE_STEP2_DRAG_WEAPON=2]="GUIDE_STEP2_DRAG_WEAPON",_[_.GUIDE_STEP3_REFRESH_WEAPON=3]="GUIDE_STEP3_REFRESH_WEAPON",_[_.GUIDE_STEP4_MERGE_WEAPON=4]="GUIDE_STEP4_MERGE_WEAPON",_[_.GUIDE_STEP5_DRAG_WEAPON=5]="GUIDE_STEP5_DRAG_WEAPON",_[_.GUIDE_STEP6_PURSE=6]="GUIDE_STEP6_PURSE",_[_.GUIDE_STEP7_DRAG_WEAPON=7]="GUIDE_STEP7_DRAG_WEAPON",_[_.GUIDE_STEP8_BATTLE=8]="GUIDE_STEP8_BATTLE",_[_.GUIDE_STEP9_SELECT_SKILL=9]="GUIDE_STEP9_SELECT_SKILL",_[_.GUIDE_STEP10_WAVE1_DONE=10]="GUIDE_STEP10_WAVE1_DONE",_[_.GUIDE_STEP11_PLACE_GRID=11]="GUIDE_STEP11_PLACE_GRID",_[_.GUIDE_STEP12_PLACE_GRID_DONE=12]="GUIDE_STEP12_PLACE_GRID_DONE",_[_.GUIDE_STEP13_DRAG_WEAPON=13]="GUIDE_STEP13_DRAG_WEAPON",_[_.GUIDE_STEP14_REFRESH_WEAPON=14]="GUIDE_STEP14_REFRESH_WEAPON",_[_.GUIDE_STEP15_BATTLE_DONE=15]="GUIDE_STEP15_BATTLE_DONE",_[_.GUIDE_STEP16_BAG=16]="GUIDE_STEP16_BAG",_[_.GUIDE_STEP17_WEAPON_INFO=17]="GUIDE_STEP17_WEAPON_INFO",_[_.GUIDE_STEP18_WEAPON_INFO_BTN=18]="GUIDE_STEP18_WEAPON_INFO_BTN",_[_.GUIDE_STEP19_WEAPON_UPGRADE=19]="GUIDE_STEP19_WEAPON_UPGRADE",_[_.GUIDE_STEP20_WEAPON_UNLOCK=20]="GUIDE_STEP20_WEAPON_UNLOCK",_[_.GUIDE_STEP21_ERTURN_BATTLE=21]="GUIDE_STEP21_ERTURN_BATTLE",_[_.GUIDE_STEP22_CHAPTER=22]="GUIDE_STEP22_CHAPTER",_}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GuideModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"dad4ewTHzRJhIN704CS7sto","GuideModel",void 0);i("GuideCfg",(function(){this.ClassName="Guide",this.Id=void 0,this.step=void 0,this.pos=void 0,this.touchType=void 0,this.size=void 0,this.target=void 0,this.desc=void 0,this.isShowTips=void 0,this.isShowMoveFinger=void 0,this.isShowClickFinger=void 0,this.nextStep=void 0,this.data=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/GuidePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./GuideData.ts","./EventListener.ts","./GameEvent.ts","./LanguageManager.ts"],(function(e){var t,n,i,o,s,c,r,a,u,h,l,p,g,f,v,d,m,T,C,k,b,E,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,u=e.Node,h=e.Label,l=e.Tween,p=e.Vec3,g=e.UITransform,f=e.Size,v=e.tween,d=e.Mask,m=e.Component},function(e){T=e.Constants},function(e){C=e.OpenPopupManager},function(e){k=e.GuideData},function(e){b=e.EventListener},function(e){E=e.GameEvent},function(e){y=e.LanguageManager}],execute:function(){var w,F,_,S,A,D,G,O,P,z,M,N,B,H,L,R,U;r._RF.push({},"b7f14GTQL1M1pIO0vUy8UcV","GuidePopup",void 0);var I=a.ccclass,x=a.property,V=function(e){return e[e.START=0]="START",e[e.MOVE=1]="MOVE",e[e.END=2]="END",e[e.CANCLE=3]="CANCLE",e}(V||{});e("GuidePopup",(w=I("GuidePopup"),F=x(u),_=x(u),S=x(u),A=x(h),D=x(u),G=x(u),O=x(u),w((M=t((z=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return t=e.call.apply(e,[this].concat(s))||this,i(t,"content",M,o(t)),i(t,"mask",N,o(t)),i(t,"maskBg",B,o(t)),i(t,"desc",H,o(t)),i(t,"moveFinger",L,o(t)),i(t,"tips",R,o(t)),i(t,"clickFinger",U,o(t)),t._touchStatus=V.START,t._done=null,t}n(t,e);var r=t.prototype;return r.show=function(e,t,n){this._done=t,this.unscheduleAllCallbacks(),this._touchStatus=V.START,this.tips.active=!1,this.moveFinger.active=!1,this.clickFinger.active=!1,l.stopAllByTarget(this.clickFinger),this.setGuideInfo(e),n&&n()},r.setGuideInfo=function(e,t){var n=this,i=new p,o=new p,s=k.instance.getCurGuideCfg(),c=new p,r=s.pos.split("|");if(c.x=Number(r[0]),c.y=Number(r[1]),this.mask.getComponent(g).setContentSize(new f(0,0)),e){var a=e.getComponent(g).convertToWorldSpaceAR(new p(0,0,0));i=this.content.getComponent(g).convertToNodeSpaceAR(a);var u=new f;u.height=1.1*e.getComponent(g).contentSize.height,u.width=1.1*e.getComponent(g).contentSize.width,o.x=i.x+u.width/2,o.y=i.y-u.height/2;var h=new f;h.height=10*u.height,h.width=10*u.width,this.mask.getComponent(g).setContentSize(h);var l=this.mask.getComponent(g);v(l).to(.6,{contentSize:u},{easing:"sineIn"}).call((function(){})).start(),this.mask.setPosition(i),this.moveFinger.setPosition(i),this.maskBg.setPosition(-i.x,-i.y,0);var m=this.mask.getComponent(g),T=m.width,C=m.height,b=m.anchorX,E=m.anchorY,w=this.mask.getComponent(d).subComp;w.clear();var F=-T*b,_=-C*E;w.roundRect(F,_,T,C,15),w.fill(),this.setEnable()}1==s.isShowClickFinger?(this.clickFinger.setPosition(o),this.clickFinger.active=!0,v(this.clickFinger).sequence(v().delay(.5),v().call((function(){n.clickFinger.children[0].active=!n.clickFinger.children[0].active,n.clickFinger.children[1].active=!n.clickFinger.children[0].active}))).repeatForever().start()):this.clickFinger.active=!1,s.desc&&(this.desc.string="",this.tips.active=!0,this.tips.setPosition(c),this.setDescAnim(y.instance.getLang(s.desc),s.touchType)),1==s.touchType?this.setEnable():this.setDisable(),this.moveFinger.active=!!s.isShowMoveFinger},r.setDescAnim=function(){var e=s(c().mark((function e(t,n){var i,o,s,r,a,u=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=y.instance.language,o=.1,"en"==i&&(o=.02),s="",r=0;case 5:if(!(r<t.length)){e.next=13;break}return a=t[r],s+=a,e.next=10,new Promise((function(e){u.scheduleOnce((function(){u.desc.string=s,e(0)}),o)}));case 10:r++,e.next=5;break;case 13:0==n&&this.scheduleOnce((function(){u._done&&u._done()}),.5);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),r.onTouchStart=function(e){},r.onTouchMove=function(e){},r.onTouchEnd=function(){C.instance.hide(T.PopupUI.GuidePopup),this.unscheduleAllCallbacks(),this._done&&this._done()},r.onTouchCancle=function(){this._touchStatus=V.CANCLE},r.onHideFinger=function(){this.moveFinger.active=!1},r.setEnable=function(){this.maskBg.on(u.EventType.TOUCH_START,this.onTouchStart,this),this.maskBg.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this.maskBg.on(u.EventType.TOUCH_END,this.onTouchEnd,this),this.maskBg.on(u.EventType.TOUCH_CANCEL,this.onTouchCancle,this)},r.setDisable=function(){this.maskBg.off(u.EventType.TOUCH_START,this.onTouchStart,this),this.maskBg.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this.maskBg.off(u.EventType.TOUCH_END,this.onTouchEnd,this),this.maskBg.off(u.EventType.TOUCH_CANCEL,this.onTouchCancle,this)},r.onEnable=function(){b.on(E.GUIDE_HIDE_FINGER,this.onHideFinger,this)},r.onDisable=function(){b.off(E.GUIDE_HIDE_FINGER,this.onHideFinger,this),l.stopAllByTarget(this.clickFinger)},t}(m)).prototype,"content",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"mask",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"maskBg",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(z.prototype,"desc",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"moveFinger",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"tips",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(z.prototype,"clickFinger",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=z))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAwakenItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagHeroData.ts","./HeroStarItem.ts","./Constants.ts","./ResourcesUtil.ts"],(function(e){var t,r,n,o,i,a,l,s,c,h,u,p,g,b,f,m,I,w,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.ScrollView,s=e.ProgressBar,c=e.Label,h=e.Button,u=e.Sprite,p=e.Prefab,g=e.instantiate,b=e.UITransform,f=e.Component},function(e){m=e.BagHeroData},function(e){I=e.HeroStarItem},function(e){w=e.Constants},function(e){d=e.ResourcesUtil}],execute:function(){var k,v,y,H,_,B,j,O,S,z,V,C,L,A,D,F,P;i._RF.push({},"8bbadDwcsBNKrVVCd28+dtm","HeroAwakenItem",void 0);var R=a.ccclass,T=a.property;e("HeroAwakenItem",(k=R("HeroAwakenItem"),v=T(l),y=T(s),H=T(c),_=T(h),B=T(h),j=T(u),O=T(p),k((V=t((z=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"scrollView",V,o(t)),n(t,"progress",C,o(t)),n(t,"progressValue",L,o(t)),n(t,"unLockBtn",A,o(t)),n(t,"awakenBtn",D,o(t)),n(t,"heroIcon",F,o(t)),n(t,"heroStarItem",P,o(t)),t._heroObj=null,t}r(t,e);var i=t.prototype;return i.init=function(e){this._heroObj=e;var t=this._heroObj.star+(0==this._heroObj.level?0:1),r=m.instance.getHeroSkillByHeroId(this._heroObj.heroId,t);this.progressValue.string=this._heroObj.fragment+"/"+r.fragment,this.progress.progress=this._heroObj.fragment/r.fragment;var n=m.instance.getHeroSkillCfgByHeroId(this._heroObj.heroId);if(this.unLockBtn.node.active=0==e.level,this.unLockBtn.interactable=this._heroObj.fragment>=r.fragment,this.awakenBtn.node.active=e.level>0,this.awakenBtn.interactable=this._heroObj.fragment>=r.fragment,this.setHeroImg(),0==this.scrollView.content.children.length)for(var o=0;o<n.length;o++){var i=n[o];if(0!=i.star){var a=g(this.heroStarItem);a.getComponent(I).init(i,this._heroObj.star),a.parent=this.scrollView.content}}},i.setHeroImg=function(){var e=this,t=m.instance.getHeroCfgById(this._heroObj.heroId),r=w.heroIconPath+t.res+"/spriteFrame";d.getSpriteFrame(r).then((function(t){e.heroIcon.spriteFrame=t;var r=e.heroIcon.getComponent(b).contentSize,n=Math.min(90/r.width,90/r.height);e.heroIcon.node.setScale(n,n)}))},i.onUnlockTouch=function(){m.instance.unlockHero(this._heroObj.heroId)},i.onAwakenTouch=function(){m.instance.awakeHero(this._heroObj.heroId)},t}(f)).prototype,"scrollView",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(z.prototype,"progress",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(z.prototype,"progressValue",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(z.prototype,"unLockBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(z.prototype,"awakenBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(z.prototype,"heroIcon",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(z.prototype,"heroStarItem",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=z))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/HeroBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./EventListener.ts","./GameEvent.ts","./HeroData.ts","./SkillData.ts","./MonsterData.ts","./AudioManager.ts","./SkillModel.ts","./SkillUpgradeData.ts","./Util.ts"],(function(e){var t,i,l,n,s,a,r,o,c,u,h,k,f,b,p,S,d,O,_,y,H,g,v,E,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,r=e.sp,o=e.Node,c=e.Prefab,u=e.Vec3,h=e.color,k=e.tween},function(e){f=e.default},function(e){b=e.EventListener},function(e){p=e.GameEvent},function(e){S=e.HeroData,d=e.HeroAnim},function(e){O=e.SkillData},function(e){_=e.MonsterData},function(e){y=e.AudioManager},function(e){H=e.TargetType,g=e.SkillBulletObj,v=e.SkillObj},function(e){E=e.SkillUpgradeData},function(e){m=e.Util}],execute:function(){var T,R,A,P,j,D,w,C,K;s._RF.push({},"52b720GqCpG9oe8aaI0Em0S","HeroBase",void 0);var I=a.ccclass,L=a.property;e("HeroBase",(T=I("HeroBase"),R=L(r.Skeleton),A=L(o),P=L(c),T((w=t((D=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,l(t,"heroSpine",w,n(t)),l(t,"skillTypeList",C,n(t)),l(t,"skillTypePrefab",K,n(t)),t._firePos=new u(0,70,0),t.isCollider=void 0,t.heroKey="",t.releaseSkillStatus=!0,t._atkNumber=0,t._showHitTotalTime=.15,t}i(t,e);var s=t.prototype;return s.initBorn=function(){this._atkNumber=0,b.emit(p.SHOW_HERO_HP,this.node.getPosition()),this.heroKey=S.instance.heroKey,this.insertRectCircleObj()},s.getFirePos=function(){var e=this.node.getPosition();return new u(e.x+this._firePos.x,e.y+this._firePos.y,0)},s.updateSkillDamageInterval=function(){},s.insertRectCircleObj=function(){b.emit(p.INSERT_HERO_CIRCLE_OBJ,this.heroKey,this)},s.onAttacked=function(e){this.playHit(),S.instance.subCurHp(e),b.emit(p.UPDATE_HERO_HP)},s.onRestoredHp=function(e){S.instance.addCurHp(e),b.emit(p.UPDATE_HERO_HP)},s.onRestoredShield=function(e){S.instance.addCurShield(e),b.emit(p.UPDATE_HERO_HP)},s.playHit=function(){var e=this.heroSpine;e.color=h(255,255,255,1);var t=h(255,255,255,50);k(e).to(this._showHitTotalTime,{},{onUpdate:function(e,i){t=h(255,255,255,50*i),e.color=t}}).call((function(){t=h(255,255,255,255),e.color=t})).start()},s.releaseSkill=function(){var e=this;if(this.releaseSkillStatus){var t=S.instance.getQueueSkill();t&&(O.instance.isAttackType(t.skillObj.type)?(this.releaseSkillStatus=!1,y.instance.playSound(5),this.unschedule(this.initHeroAnim),this.heroSpine.setAnimation(0,0==this._atkNumber?d.ATK1:d.ATK2,!1),this._atkNumber=0==this._atkNumber?1:0,this.scheduleOnce((function(){var i=new g;i.releaseTimes=t.releaseTimes,i.skillKey=t.skillKey,i.skillObj=t.skillObj,i.pos=e.getFirePos(),i.targetPos=new u(0,-200,0);for(var l=i.skillObj.salvo,n=0;n<l;n++){var s=_.instance.getNearMonster(i.skillKey);if(i.skillObj.targetType==H.TARGET_RANDOM&&(s=m.rand(s)),s.length)for(var a=i.skillObj.bulletCount,r=0;r<a;r++)for(var o=0;o<1;o++){var c=i.skillObj.intervalAngle,h=O.instance.getSkillDirAngle(r,c);if(o<s.length){var k=m.clone(i),f=new u(s[o].x,s[o].y,s[o].z);b.emit(p.ATTACK_SKILL_EFFECT,k,f,h,.1*n)}}}t.skillObj.subSkills.length>0&&e._releaseSubSkill(t),e.releaseSkillStatus=!0,t.callback&&t.callback(),e.scheduleOnce(e.initHeroAnim,1)}),t.animTime)):(this.releaseSkillStatus=!1,this.scheduleOnce((function(){var i=new g;i.skillKey=t.skillKey,i.skillObj=t.skillObj,b.emit(p.ARMOR_SKILL_EFFECT,i),e.releaseSkillStatus=!0,t.callback&&t.callback()}),t.animTime)))}},s._releaseSubSkill=function(e){for(var t=e.skillObj.subSkills,i=0;i<t.length;i++){var l=t[i],n=O.instance.getSkillCfgById(l),s=new v;for(var a in s.Id=n.Id,n)if(Object.prototype.hasOwnProperty.call(n,a)){var r=n[a];s.hasOwnProperty(a)&&(s[a]=r)}if(s.weaponId=e.skillObj.weaponId,s.level=e.skillObj.level,s.bulletScale=100,s.cd=e.skillObj.cd,s.range=e.skillObj.range,s.damage=e.skillObj.damage,s.type=e.skillObj.type,s.salvo=1,s.bulletCount=1,!((s=E.instance.getUpgradeSkillBySkillId(s)).probability>0)||m.randomHit(s.probability)){var o=new g;o.releaseTimes=e.releaseTimes,o.skillKey=e.skillKey,o.skillObj=s,o.pos=this.getFirePos(),o.targetPos=new u(0,-200,0);for(var c=o.skillObj.salvo,h=0;h<c;h++){var k=_.instance.getNearMonster(o.skillKey);if(o.skillObj.targetType==H.TARGET_RANDOM&&(k=m.rand(k)),k.length)for(var f=o.skillObj.bulletCount,S=0;S<f;S++)for(var d=0;d<1;d++){var y=o.skillObj.intervalAngle,T=O.instance.getSkillDirAngle(S,y);if(d<k.length){var R=m.clone(o),A=new u(k[d].x,k[d].y,k[d].z);b.emit(p.ATTACK_SKILL_EFFECT,R,A,T,.1*h)}}}}}},s.revive=function(){this.unscheduleAllCallbacks(),this.releaseSkillStatus=!0,b.emit(p.SHOW_HERO_HP,this.node.getPosition())},s.clear=function(){this.unscheduleAllCallbacks(),this.releaseSkillStatus=!0,b.emit(p.UPDATE_HERO_HP)},s.initHeroAnim=function(){this.heroSpine.addAnimation(0,d.IDLE,!0)},s.onEnable=function(){this.heroSpine.setAnimation(0,d.IDLE,!0),b.on(p.HERO_HURT,this.onAttacked,this),b.on(p.HERO_RESTORE_HP,this.onRestoredHp,this),b.on(p.HERO_RESTORE_SHIELD,this.onRestoredShield,this)},s.onDisable=function(){b.off(p.HERO_HURT,this.onAttacked,this),b.off(p.HERO_RESTORE_HP,this.onRestoredHp,this),b.off(p.HERO_RESTORE_SHIELD,this.onRestoredShield,this)},s.childUpdate=function(e){},t}(f)).prototype,"heroSpine",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(D.prototype,"skillTypeList",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(D.prototype,"skillTypePrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=D))||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/HeroData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeroModel.ts","./CfgMgr.ts","./BagHeroData.ts"],(function(t){var i,e,h,s,r,n,a;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,h=t.Vec2,s=t.Vec3},function(t){r=t.HeroCfg},function(t){n=t.CfgMgr},function(t){a=t.BagHeroData}],execute:function(){e._RF.push({},"bb7bbazU8hHH7H+JeHxuMK9","HeroData",void 0),t("HeroData",function(){function t(){this._heroPoint=new s(0,-620,0),this._heroR=450,this._heroKey="1001",this._releaseSkillQueue=[],this._curHp=0,this._maxHp=100,this._lastMaxHp=100,this._remainHp=100,this._roleHp=100,this._curShield=0,this._maxShield=300,this._hpPer=0,this._heroId=0,this._damagePer=0,this._weaponKeys=new Map}var e=t.prototype;return e.init=function(){var t=a.instance.activeHeroId;if(this._heroId=0,this._hpPer=0,this._damagePer=0,t>0){this._heroId=t;var i=a.instance.getHeroObjById(t);this._hpPer+=i.addHp,this._damagePer+=i.addDamage}this._curHp=100*(100+this._hpPer)/100,this._maxHp=100*(100+this._hpPer)/100,this._roleHp=100*this._hpPer/100,this._lastMaxHp=100*(100+this._hpPer)/100,this._remainHp=100*(100+this._hpPer)/100,this._curShield=0,this._maxShield=this._maxHp},e.getHeroCfgById=function(t){return n.getDataById(new r,t)},e.initHp=function(){this._remainHp=this._curHp,this._lastMaxHp=this._maxHp},e.addHp=function(t,i){if(t=t*(100+this._hpPer)/100,this._weaponKeys.set(i,!0),this._maxHp+t<this._lastMaxHp)this._maxHp+=t,this._curHp+=t,this._curHp>this._remainHp&&(this._curHp=this._remainHp);else if(this._maxHp+t>=this._lastMaxHp&&this._maxHp<this._lastMaxHp){var e=this._maxHp+t-this._lastMaxHp;this._maxHp+=t,this._curHp=e+this._remainHp}else this._maxHp+=t,this._curHp+=t;this._maxShield=this._maxHp},e.subHp=function(t,i){return t=t*(100+this._hpPer)/100,!!this._weaponKeys.has(i)&&(this._weaponKeys.delete(i),this._maxHp-=t,this._curHp-=t,this._curHp<this._remainHp&&(this._curHp=this._remainHp),this._curHp>this._maxHp&&(this._curHp=this._maxHp),!0)},e.addHpPer=function(t){var i=100*(this.maxHp-this._roleHp)/(100+this._hpPer);this._hpPer+=t;var e=i*(100+this._hpPer)/100;this._curHp+=e-i,this._maxHp=this._roleHp+e,this._maxShield=this._maxHp,this._lastMaxHp=this._maxHp,this._curHp>this._lastMaxHp&&(this._curHp=this._lastMaxHp),this._remainHp=this._curHp},e.subCurHp=function(t){var i=t;this._curShield>=t?this._curShield-=t:(this._curShield<t&&this._curShield>=0&&(i=t-this._curShield,this._curShield=0),this._curHp-=i,this._curHp<=0&&(this._curHp=0),this._remainHp=this._curHp)},e.addCurHp=function(t){this._curHp+t>this._maxHp?this._curHp=this._maxHp:this._curHp+=t,this._remainHp=this._curHp},e.addCurShield=function(t){this._curShield+t>this._maxHp?this._curShield=this._maxHp:this._curShield+=t},e.checkInHeroRange=function(t,i,e){if(h.squaredDistance(t,new h(this._heroPoint.x,this._heroPoint.y))<i*i)return!1;if(t.y-this.heroPoint.y<300){var r=new s,n=s.subtract(r,this._heroPoint.clone(),new s(t.x,t.y,0));e.dir=n.normalize()}return!0},e.addQueueSkill=function(t){this._releaseSkillQueue.push(t)},e.getQueueSkill=function(){return this._releaseSkillQueue.shift()},e.clear=function(){this._releaseSkillQueue=[],this._curShield=0},i(t,[{key:"heroPoint",get:function(){return this._heroPoint}},{key:"heroKey",get:function(){return this._heroKey}},{key:"heroR",get:function(){return this._heroR}},{key:"maxHp",get:function(){return this._maxHp}},{key:"curHp",get:function(){return this._curHp}},{key:"maxShield",get:function(){return this._maxShield}},{key:"curShield",get:function(){return this._curShield}},{key:"hpPer",get:function(){return this._hpPer}},{key:"heroId",get:function(){return this._heroId}},{key:"damagePer",get:function(){return this._damagePer}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null;t("HeroAnim",function(t){return t.IDLE="idle",t.ATK="attack",t.ATK1="attack1",t.ATK2="attack2",t.HIT="hit",t.DIE="die",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/HeroDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./BagHeroData.ts","./ResourcesUtil.ts","./LanguageManager.ts","./HeroUpgradeItem.ts","./HeroAwakenItem.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var t,i,n,o,r,a,l,s,u,p,h,c,b,g,f,d,m,y,H,v,_,w,I,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,s=e.Sprite,u=e.Node,p=e.RichText,h=e.Prefab,c=e.sp,b=e.instantiate,g=e.Color,f=e.Component},function(e){d=e.OpenPopupManager},function(e){m=e.Constants},function(e){y=e.BagHeroData},function(e){H=e.ResourcesUtil},function(e){v=e.LanguageManager},function(e){_=e.HeroUpgradeItem},function(e){w=e.HeroAwakenItem},function(e){I=e.EventListener},function(e){C=e.GameEvent}],execute:function(){var P,T,k,O,D,U,z,A,E,L,j,B,R,F,N,S,q,G,M,x,J,Q,W,Y,K,V,X,Z,$,ee,te,ie,ne,oe,re;r._RF.push({},"cdb40fCSW9Jd4YgURbLQG49","HeroDetailPopup",void 0);var ae=a.ccclass,le=a.property;e("HeroDetailPopup",(P=ae("HeroDetailPopup"),T=le(l),k=le(s),O=le(u),D=le(l),U=le(l),z=le(l),A=le(u),E=le(p),L=le(s),j=le(u),B=le(u),R=le(u),F=le(u),N=le(u),S=le(h),q=le(c.Skeleton),P((x=t((M=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"heroName",x,o(t)),n(t,"icon",J,o(t)),n(t,"used",Q,o(t)),n(t,"level",W,o(t)),n(t,"addHp",Y,o(t)),n(t,"addDamage",K,o(t)),n(t,"starList",V,o(t)),n(t,"skill",X,o(t)),n(t,"skillIcon",Z,o(t)),n(t,"skillPopup",$,o(t)),n(t,"upgradeContent",ee,o(t)),n(t,"awakenContent",te,o(t)),n(t,"equipContent",ie,o(t)),n(t,"tabButtons",ne,o(t)),n(t,"starItem",oe,o(t)),n(t,"upgradeAnim",re,o(t)),t._heroObj=null,t._heroCfg=null,t.tabType="upgrade",t}i(t,e);var r=t.prototype;return r.show=function(e){this._heroObj=e,this._heroCfg=y.instance.getHeroCfgById(e.heroId),this.setHeroInfo()},r.setHeroInfo=function(){this.upgradeContent.getComponent(_).init(this._heroObj),this.awakenContent.getComponent(w).init(this._heroObj),this.setHeroAttr(),this.setTabInfo()},r.onUpdateHero=function(){var e=y.instance.getHeroObjById(this._heroObj.heroId);this._heroObj=e,this.setHeroInfo()},r.setHeroAttr=function(){var e=this;this.skillPopup.active=!1,this.heroName.string=v.instance.getLang(this._heroCfg.name),this.level.string=""+this._heroObj.level,this._heroObj.isUsed?this.used.active=!0:this.used.active=!1;m.heroIconPath,this._heroCfg.res;this.addHp.string=Number(this._heroObj.addHp).toFixed(1)+"%",this.addDamage.string=Number(this._heroObj.addDamage).toFixed(1)+"%";for(var t=0;t<this._heroObj.star;t++){if(!this.starList.children[t])b(this.starItem).parent=this.starList}for(var i=this.starList.children.length-1;i>this._heroObj.star-1;i--)this.starList.children[i].removeFromParent();var n=y.instance.getHeroSkillByHeroId(this._heroObj.heroId),o=m.skillIconPath+n.icon+"/spriteFrame";H.getSpriteFrame(o).then((function(t){e.skillIcon.spriteFrame=t})),this.skill.string=v.instance.getLang(n.desc)},r.showSkill=function(e,t){this.skillPopup.active="switch"==t&&!this.skillPopup.active},r.onTabTouch=function(e,t){this.tabType=t,this.setTabInfo()},r.setTabInfo=function(){this.upgradeContent.active="upgrade"==this.tabType,this.awakenContent.active="awaken"==this.tabType,this.equipContent.active="equip"==this.tabType,this.tabButtons.children.forEach((function(e){e.getComponent(s).color=new g(41,40,61,255),e.getChildByName("Sprite").active=!1}));var e=0;"awaken"==this.tabType&&(e=1),"equip"==this.tabType&&(e=2),this.tabButtons.children[e].getComponent(s).color=new g(49,129,255,255),this.tabButtons.children[e].getChildByName("Sprite").active=!0},r.onUpgradeHero=function(){this.upgradeAnim.node.active=!0,this.upgradeAnim.setAnimation(0,"animation",!1)},r.onTab=function(e){this.tabType=e,this.setTabInfo()},r.closeDialog=function(){d.instance.hide(m.PopupUI.HeroDetailPopup)},r.onEnable=function(){I.on(C.UPDATE_HERO_INFO,this.onUpdateHero,this),I.on(C.UPGRADE_HERO,this.onUpgradeHero,this),I.on(C.UPDATE_HERO_TAB,this.onTab,this)},r.onDisable=function(){I.off(C.UPDATE_HERO_INFO,this.onUpdateHero,this),I.off(C.UPGRADE_HERO,this.onUpgradeHero,this),I.off(C.UPDATE_HERO_TAB,this.onTab,this)},t}(f)).prototype,"heroName",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(M.prototype,"icon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(M.prototype,"used",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(M.prototype,"level",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(M.prototype,"addHp",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(M.prototype,"addDamage",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(M.prototype,"starList",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(M.prototype,"skill",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(M.prototype,"skillIcon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(M.prototype,"skillPopup",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(M.prototype,"upgradeContent",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(M.prototype,"awakenContent",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(M.prototype,"equipContent",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(M.prototype,"tabButtons",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(M.prototype,"starItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(M.prototype,"upgradeAnim",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=M))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroEquipItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,l,c,a,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,c=e.ScrollView,a=e.Node,u=e.Prefab,s=e.Component}],execute:function(){var p,h,f,b,m,d,y,g,v;o._RF.push({},"cf8e1+YuE5DpIkzOZR7SmEr","HeroEquipItem",void 0);var w=l.ccclass,I=l.property;e("HeroEquipItem",(p=w("HeroEquipItem"),h=I(c),f=I(a),b=I(u),p((y=t((d=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"scrollView",y,n(t)),r(t,"tabs",g,n(t)),r(t,"equipItem",v,n(t)),t}i(t,e);var o=t.prototype;return o.start=function(){},o.init=function(){this.scrollView.content.children.length},o.onChangeTab=function(e,t){this.tabs.children.forEach((function(e,t){e.getChildByName("checked").active=!1})),this.tabs.children[t].getChildByName("checked").active=!0},t}(s)).prototype,"scrollView",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(d.prototype,"tabs",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(d.prototype,"equipItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=d))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroHpItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./HeroData.ts","./GameDefine.ts","./OpenPopupManager.ts","./Util.ts","./GameData.ts"],(function(e){var t,n,i,r,o,a,s,l,h,p,c,u,m,d,f,g,H,b,v,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Node,l=e.Label,h=e.UITransform,p=e.ProgressBar,c=e.tween,u=e.Component},function(e){m=e.EventListener},function(e){d=e.GameEvent},function(e){f=e.HeroData,g=e.HeroAnim},function(e){H=e.GameDefine},function(e){b=e.OpenPopupManager},function(e){v=e.Util},function(e){B=e.GameData}],execute:function(){var w,y,M,A,C,D,x,P,T,E,z,G,I,_,N,S,L;o._RF.push({},"f84e2Gtlm9LUIZobBtPl4iy","HeroHpItem",void 0);var O=a.ccclass,R=a.property;e("HeroHpItem",(w=O("HeroHpItem"),y=R(s),M=R(s),A=R(l),C=R(s),D=R(s),x=R(l),P=R(s),w((z=t((E=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"hpBarAnim",z,r(t)),i(t,"hpBar",G,r(t)),i(t,"hpText",I,r(t)),i(t,"shieldBarAnim",_,r(t)),i(t,"shieldBar",N,r(t)),i(t,"shieldText",S,r(t)),i(t,"shieldNode",L,r(t)),t}n(t,e);var o=t.prototype;return o.init=function(){var e=v.adapterScale();this.hpBarAnim.getComponent(h).width=this.node.getComponent(h).width,this.hpText.string=""+Math.ceil(f.instance.curHp);var t=Math.ceil(f.instance.curHp),n=Math.ceil(f.instance.maxHp);this.hpBar.getComponent(p).progress=t/n,this.shieldNode.active=!1,this.shieldBarAnim.getComponent(h).width=this.node.getComponent(h).width,this.shieldBar.getComponent(p).progress=0,this.shieldText.string=""+Math.ceil(f.instance.curShield),console.log("HeroHp scale",e,this.node.getComponent(h).width),this.node.setScale(e,e)},o.setHeroHp=function(){var e=this,t=Math.ceil(Math.round(100*f.instance.curHp)/100),n=Math.ceil(Math.round(100*f.instance.maxHp)/100);t<=0&&(t=0),this.hpText.string=""+t,this.hpBar.getComponent(p).progress=t/n;var i=Math.ceil(Math.round(100*f.instance.curShield)/100),r=Math.ceil(Math.round(100*f.instance.maxShield)/100);this.shieldText.string=""+i,i<=0&&(i=0),f.instance.curShield<=0?this.shieldNode.active=!1:this.shieldNode.active=!0,i>r&&(i=r),this.shieldBar.getComponent(p).progress=i/r;var o=this.hpBar.getComponent(h).width,a=this.hpBarAnim.getComponent(h).width-o;c(this.hpBarAnim.getComponent(h)).by(.2,{width:-a}).call((function(){t<=0&&(H.gameOver=!0,H.gameStart=!1,m.emit(d.HERO_ANIM,g.DIE),0==B.instance.reviveNumber?b.instance.showGameRevivePopup():b.instance.showGameFailPopup(),e.node.destroy())})).start()},o.onEnable=function(){m.on(d.UPDATE_HERO_HP,this.setHeroHp,this)},o.onDisable=function(){m.off(d.UPDATE_HERO_HP,this.setHeroHp,this)},t}(u)).prototype,"hpBarAnim",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(E.prototype,"hpBar",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(E.prototype,"hpText",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(E.prototype,"shieldBarAnim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(E.prototype,"shieldBar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"shieldText",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(E.prototype,"shieldNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=E))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./HeroBase.ts"],(function(e){var t,r,n,o,i;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator},function(e){o=e.GameDefine},function(e){i=e.HeroBase}],execute:function(){var c;r._RF.push({},"2cadejCYdZBKrCfzup7CJ4/","HeroItem",void 0);var s=n.ccclass;n.property,e("HeroItem",s("HeroItem")(c=function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var n=r.prototype;return n.init=function(){this.initBorn()},n.childUpdate=function(e){o.gameStart&&this.releaseSkill()},r}(i))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroLevelItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(e){var r,t,a,l,i,n,o,c,u,s,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,o=e.Node,c=e.Label,u=e.RichText,s=e.Component},function(e){p=e.LanguageManager}],execute:function(){var g,d,f,v,b,h,m,y,L,A,D;i._RF.push({},"1bc6arDd9NArZUe5KeJrPvM","HeroLevelItem",void 0);var x=n.ccclass,z=n.property;e("HeroLevelItem",(g=x("HeroLevelItem"),d=z(o),f=z(c),v=z(c),b=z(u),g((y=r((m=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return r=e.call.apply(e,[this].concat(i))||this,a(r,"lock",y,l(r)),a(r,"level",L,l(r)),a(r,"target",A,l(r)),a(r,"desc",D,l(r)),r}return t(r,e),r.prototype.init=function(e,r){this.lock.active=r<e.level,this.level.string="Lv."+e.level;var t=e.extraAddDamage>0?"hero.atkbonusAdd":"hero.hpbonusAdd",a=e.extraAddDamage>0?e.extraAddDamage:e.extraAddHp,l=p.instance.getLang(t,[a+"%"]);e.level,this.desc.string="<color=#ffffff>"+l+"</color>"},r}(s)).prototype,"lock",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=r(m.prototype,"level",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=r(m.prototype,"target",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=r(m.prototype,"desc",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=m))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/HeroLevelModel.ts",["cc"],(function(e){var d;return{setters:[function(e){d=e.cclegacy}],execute:function(){d._RF.push({},"d012fcyLVdEu6sAgUO4qK2S","HeroLevelModel",void 0);e("HeroLevelCfg",(function(){this.ClassName="HeroLevel",this.Id=void 0,this.heroId=void 0,this.level=void 0,this.food=void 0,this.addDamage=void 0,this.addHp=void 0,this.extraAddDamage=void 0,this.extraAddHp=void 0}));d._RF.pop()}}}));

System.register("chunks:///_virtual/HeroManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesUtil.ts","./HeroItem.ts","./HeroData.ts","./Constants.ts"],(function(e){var t,n,r,i,o,a,c,s,u,l,h,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,s=e.instantiate,u=e.Component},function(e){l=e.ResourcesUtil},function(e){h=e.HeroItem},function(e){p=e.HeroData},function(e){f=e.Constants}],execute:function(){var v,g,H,P,d;o._RF.push({},"05904hsJphIWZgNzrf1SUbi","HeroManager",void 0);var y=a.ccclass,m=a.property;e("HeroManager",(v=y("HeroManager"),g=m(c),v((d=t((P=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"heroParent",d,i(t)),t}n(t,e);var o=t.prototype;return o.init=function(){p.instance.init(),this.creatHero()},o.creatHero=function(){var e=this,t=f.heroPath;l.getPrefab(t).then((function(t){var n=s(t),r=p.instance.heroPoint;n.parent=e.heroParent,n.setPosition(r),n.getComponent(h).init(),n.active=!1}))},o.revive=function(){p.instance.clear(),p.instance.init(),this.heroParent.children[0].getComponent(h).revive()},o.showHideHero=function(e){this.heroParent.children[0].active=e},o.clear=function(){p.instance.clear(),this.heroParent.children[0].getComponent(h).clear()},t}(u)).prototype,"heroParent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=P))||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroModel.ts",["cc"],(function(i){var o;return{setters:[function(i){o=i.cclegacy}],execute:function(){o._RF.push({},"eb88auszTVE3Jqk6DjzK4O6","HeroModel",void 0);i("HeroCfg",(function(){this.ClassName="Hero",this.Id=void 0,this.name=void 0,this.desc=void 0,this.quality=void 0,this.res=void 0,this.skeleton=void 0,this.skillId=void 0})),i("HeroModel",(function(){this.heroId=void 0,this.level=void 0,this.fragment=void 0,this.isUsed=void 0,this.star=void 0})),i("HeroObj",(function(){this.heroId=void 0,this.level=void 0,this.fragment=void 0,this.isUsed=void 0,this.star=void 0,this.maxLevel=void 0,this.addHp=void 0,this.addDamage=void 0})),i("HeroInfoModel",(function(){this.food=void 0,this.heros=void 0}));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagHeroData.ts","./BagHeroItem.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var t,n,o,r,i,a,s,l,p,u,c,f,h,H,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Prefab,l=e.Node,p=e.Layout,u=e.instantiate,c=e.Component},function(e){f=e.BagHeroData},function(e){h=e.BagHeroItem},function(e){H=e.EventListener},function(e){g=e.GameEvent}],execute:function(){var v,b,d,m,C,y,I,E,w;i._RF.push({},"b1d19jCtvNLGoEJqEGVHvMw","HeroPopup",void 0);var P=a.ccclass,D=a.property;e("HeroPopup",(v=P("HeroPopup"),b=D(s),d=D(l),m=D(l),v((I=t((y=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"bagHeroItem",I,r(t)),o(t,"upContent",E,r(t)),o(t,"downContent",w,r(t)),t}n(t,e);var i=t.prototype;return i.show=function(){this.setHeroInfos()},i.setHeroInfos=function(){this.upContent.getComponent(p).enabled=!0,this.upContent.removeAllChildren();for(var e=f.instance.getActiveHeros(),t=0;t<e.length;t++){var n=u(this.bagHeroItem);n.getComponent(h).init(e[t]),n.parent=this.upContent}this.downContent.removeAllChildren();for(var o=f.instance.getLockedHeros(),r=0;r<o.length;r++){var i=u(this.bagHeroItem);i.getComponent(h).init(o[r]),i.parent=this.downContent}},i.onUpdateHeros=function(){this.setHeroInfos()},i.onEnable=function(){H.on(g.UPDATE_HERO_INFO,this.onUpdateHeros,this)},i.onDisable=function(){H.off(g.UPDATE_HERO_INFO,this.onUpdateHeros,this)},t}(c)).prototype,"bagHeroItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(y.prototype,"upContent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"downContent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=y))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/HeroSkillModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"9a090LHBrdH9Z3ZvGcX28D1","HeroSkillModel",void 0);i("HeroSkillCfg",(function(){this.ClassName="HeroSkill",this.Id=void 0,this.heroId=void 0,this.star=void 0,this.desc=void 0,this.icon=void 0,this.maxLevel=void 0,this.type=void 0,this.fragment=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/HeroStarItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(t){var e,r,i,n,a,o,l,s,c,u,p,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Node,s=t.RichText,c=t.Prefab,u=t.instantiate,p=t.Color,h=t.Component},function(t){g=t.LanguageManager}],execute:function(){var d,f,b,m,y,v,L,w,I,C,z;a._RF.push({},"b7e3aho6FtNB7u44JoSCp+X","HeroStarItem",void 0);var S=o.ccclass,H=o.property;t("HeroStarItem",(d=S("HeroStarItem"),f=H(l),b=H(l),m=H(s),y=H(c),d((w=e((L=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"lock",w,n(e)),i(e,"starList",I,n(e)),i(e,"desc",C,n(e)),i(e,"startItem",z,n(e)),e}return r(e,t),e.prototype.init=function(t,e){this.lock.active=t.star>e,this.starList.removeAllChildren();for(var r=0;r<t.star;r++){var i=null;t.star>e?((i=u(this.node.getChildByName("star"))).active=!0,this.desc.string="<outline color=#000000 width=2>"+g.instance.getLang(t.desc)+"</outline>",this.desc.fontColor=new p(167,167,167,255)):(i=u(this.startItem),this.desc.string="<outline color=#000000 width=2>"+g.instance.getLang(t.desc)+"</outline>",this.desc.fontColor=new p(255,255,255,255)),i.parent=this.starList}},e}(h)).prototype,"lock",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(L.prototype,"starList",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(L.prototype,"desc",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(L.prototype,"startItem",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=L))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/HeroUpgradeItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagHeroData.ts","./HeroLevelItem.ts","./EventListener.ts","./GameEvent.ts","./Constants.ts","./ResourcesUtil.ts"],(function(e){var t,r,o,i,n,l,a,s,h,c,u,p,b,g,d,f,m,v,_,I,w,O,j;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,a=e.ScrollView,s=e.Label,h=e.Node,c=e.ProgressBar,u=e.Button,p=e.Prefab,b=e.Sprite,g=e.Widget,d=e.instantiate,f=e.UITransform,m=e.Component},function(e){v=e.BagHeroData},function(e){_=e.HeroLevelItem},function(e){I=e.EventListener},function(e){w=e.GameEvent},function(e){O=e.Constants},function(e){j=e.ResourcesUtil}],execute:function(){var y,B,H,z,C,L,U,k,V,E,F,A,R,D,P,S,x,T,G,M,J,N,Q,W,X,q,K,Y,Z;n._RF.push({},"580acQ6aEVJBLlMiX28uFiR","HeroUpgradeItem",void 0);var $=l.ccclass,ee=l.property;e("HeroUpgradeItem",(y=$("HeroUpgradeItem"),B=ee(a),H=ee(s),z=ee(h),C=ee(h),L=ee(c),U=ee(s),k=ee(h),V=ee(h),E=ee(u),F=ee(u),A=ee(u),R=ee(p),D=ee(b),y((x=t((S=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,o(t,"scrollView",x,i(t)),o(t,"upgradeFood",T,i(t)),o(t,"upgradeCondition",G,i(t)),o(t,"unlockCondition",M,i(t)),o(t,"progress",J,i(t)),o(t,"progressValue",N,i(t)),o(t,"food",Q,i(t)),o(t,"tip",W,i(t)),o(t,"upgradeBtn",X,i(t)),o(t,"useBtn",q,i(t)),o(t,"toAwakenBtn",K,i(t)),o(t,"heroLevelItem",Y,i(t)),o(t,"heroIcon",Z,i(t)),t._heroObj=null,t}r(t,e);var n=t.prototype;return n.start=function(){},n.init=function(e){var t=this;this._heroObj=e,this.upgradeCondition.active=this._heroObj.level>0,this.unlockCondition.active=0==this._heroObj.level;var r=this._heroObj.star+(0==this._heroObj.level?0:1),o=v.instance.getHeroSkillByHeroId(this._heroObj.heroId,r);this.progressValue.string=this._heroObj.fragment+"/"+o.fragment,this.progress.progress=this._heroObj.fragment/o.fragment,this.scrollView.node.getComponent(g).bottom=280,this.scrollView.node.getComponent(g);var i=v.instance.getUpgradeFood(this._heroObj.heroId,this._heroObj.level);this.upgradeFood.string=v.instance.food+"/"+i,this.tip.active=this._heroObj.maxLevel==this._heroObj.level,this.food.active=this._heroObj.maxLevel>this._heroObj.level,this.toAwakenBtn.node.active=this._heroObj.level==this._heroObj.maxLevel,this.upgradeBtn.node.active=this._heroObj.maxLevel>this._heroObj.level,this.upgradeBtn.interactable=v.instance.food>=i,this.useBtn.node.active=!e.isUsed,this.setHeroImg();var n=v.instance.getHeroLevelCfgByHeroId(this._heroObj.heroId);if(0==this.scrollView.content.children.length)for(var l=0;l<n.length;l++){var a=d(this.heroLevelItem);a.getComponent(_).init(n[l],this._heroObj.level),a.parent=this.scrollView.content}else this.scrollView.content.children.forEach((function(e,r){e.getComponent(_).init(n[r],t._heroObj.level)}))},n.setHeroImg=function(){var e=this,t=v.instance.getHeroCfgById(this._heroObj.heroId),r=O.heroIconPath+t.res+"/spriteFrame";j.getSpriteFrame(r).then((function(t){e.heroIcon.spriteFrame=t;var r=e.heroIcon.getComponent(f).contentSize,o=Math.min(90/r.width,90/r.height);e.heroIcon.node.setScale(o,o)}))},n.onUpgradeBtn=function(){v.instance.upgradeHero(this._heroObj.heroId,(function(){I.emit(w.UPGRADE_HERO)}))},n.onUsedBtn=function(){v.instance.useHero(this._heroObj.heroId)},n.goAwakenBtn=function(){I.emit(w.UPDATE_HERO_TAB,"awaken")},n.onUnlockBtn=function(){v.instance.unlockHero(this._heroObj.heroId)},t}(m)).prototype,"scrollView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(S.prototype,"upgradeFood",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(S.prototype,"upgradeCondition",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(S.prototype,"unlockCondition",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(S.prototype,"progress",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(S.prototype,"progressValue",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(S.prototype,"food",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(S.prototype,"tip",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(S.prototype,"upgradeBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(S.prototype,"useBtn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(S.prototype,"toAwakenBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(S.prototype,"heroLevelItem",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(S.prototype,"heroIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=S))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/HttpService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./axios.mjs_cjs=&original=.js","./Storage.ts","./Util.ts","./GameDefine.ts","./axios.js"],(function(t){var e,n,i,r,s,o,c;return{setters:[function(t){e=t.createClass,n=t.extends},function(t){i=t.cclegacy},null,function(t){r=t.Storage},function(t){s=t.Util},function(t){o=t.GameDefine},function(t){c=t.default}],execute:function(){i._RF.push({},"a0f36QIiXZCj7AJORAtKZuU","HttpService",void 0);var a="https://api.imweb3.social/";t("HttpService",function(){function t(t){this.instance=void 0,this.baseConfig={baseURL:a,timeout:1e4},this.instance=c.create(Object.assign(this.baseConfig,t)),this.instance.interceptors.request.use((function(t){var e=o.accessToken;return n({},t,{headers:{"Content-Type":"text/plain",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,Authorization:e}})}),(function(t){return Promise.reject(t)})),this.instance.interceptors.response.use((function(t){return t.data}),(function(t){}))}var i=t.prototype;return i.getRequestIdentify=function(t,e){void 0===e&&(e=!1);var n=t.url;return e&&(n=n.startsWith("/")?a+n:a+"/"+n),"get"===t.method?encodeURI(n+JSON.stringify(t.params)):encodeURI(n+("string"==typeof t.data?t.data:JSON.stringify(t.data)))},i.post=function(t,e,n){var i=this,o="",c=r.getItem("logid");c&&(o=t.indexOf("?")>=0?"&logid="+c:"?logid="+c);var a=s.encrypt(JSON.stringify(e||{}));return new Promise((function(e,r){i.instance.post(t+o,a,n).then((function(n){try{var i=JSON.parse(s.decrypt(n.toString()));return console.log("response",t,i),i||(i={code:1,msg:"network.error"}),e(i)}catch(n){console.log("post response err url:",t,n);return e({code:1,msg:"network.error"})}})).catch((function(n){return console.log("post error url:",t,n),e({code:500,msg:"network.error"})}))}))},i.get=function(t,e){return this.instance.get(t,e)},e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t({})),this._instance}}]),t}())._instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/InviteData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Api.ts","./HttpService.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var n,i,e,s,a,o;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy},function(t){e=t.Api},function(t){s=t.HttpService},function(t){a=t.EventListener},function(t){o=t.GameEvent}],execute:function(){i._RF.push({},"0fb820all9IJYdLNXC31lTn","InviteData",void 0),t("InviteData",function(){function t(){this.inviteCode=void 0,this.usdtBalance=void 0,this.frens=void 0,this.directFrens=[],this.spreadFrens=[]}var i=t.prototype;return i.getInviteInfo=function(){var t=this;this.inviteCode?a.emit(o.UPDATE_INVITE_INFO):(s.instance.post(e.FRENS_INFO).then((function(n){if(0==n.code){t.inviteCode=n.data.code,t.frens=n.data.frens;for(var i=0;i<n.data.balances.length;i++){var e=n.data.balances[i];"usdt"==e.token&&(t.usdtBalance=e)}a.emit(o.UPDATE_INVITE_INFO)}})),this.getFriends())},i.getFriends=function(){var t=this;s.instance.post(e.FRENS_INVITEES).then((function(n){0==n.code&&(t.directFrens=n.data.direct,t.spreadFrens=n.data.spread,a.emit(o.UPDATE_INVITE_FRIEND_INFO))}))},i.claim=function(){},n(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null;t("InviteInfoResult",(function(){this.code=void 0,this.balances=void 0,this.frens=void 0})),t("InviteBalanceInfo",(function(){this.token=void 0,this.current=void 0,this.total=void 0,this.withdrawn=void 0})),t("InviteFrenInfo",(function(){this.direct=void 0,this.spread=void 0})),t("FriendData",(function(){this.direct=void 0,this.spread=void 0})),t("FriendModel",(function(){this.amount=void 0,this.avatar=void 0,this.chapter=void 0,this.username=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/InvitePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./InviteData.ts","./GameController.ts","./EventListener.ts","./GameEvent.ts","./PlayerData.ts"],(function(e){var n,t,i,o,a,r,c,s,p,u,l,d,f,h,v,b;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.native,s=e.Label,p=e.Component},function(e){u=e.OpenPopupManager},function(e){l=e.Constants},function(e){d=e.InviteData},function(e){f=e.default},function(e){h=e.EventListener},function(e){v=e.GameEvent},function(e){b=e.PlayerData}],execute:function(){var g,m,y,I,P,w,C,T,D,E,B;a._RF.push({},"4624aY0TyNNrZMSEQiTJAjq","InvitePopup",void 0);var F=r.ccclass,U=r.property;c.copyTextToClipboard,e("InvitePopup",(g=F("InvitePopup"),m=U(s),y=U(s),I=U(s),P=U(s),g((T=n((C=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,i(n,"balance",T,o(n)),i(n,"code",D,o(n)),i(n,"direct",E,o(n)),i(n,"super",B,o(n)),n}t(n,e);var a=n.prototype;return a.show=function(){d.instance.getInviteInfo()},a.init=function(){this.code.string=d.instance.inviteCode,this.direct.string=""+d.instance.frens.direct,this.super.string=d.instance.frens.spread.toString(),this.balance.string=Number(d.instance.usdtBalance.total).toFixed(2)+"USDT"},a.onCloseBtn=function(){f.resume(),u.instance.hide(l.PopupUI.InvitePopup)},a.onInviteBtn=function(){var e=b.instance.configObj.tgBot+"?startapp="+d.instance.inviteCode,n="https://t.me/share/url?url="+encodeURIComponent(e)+"&text="+encodeURIComponent("BagWar battle time! Join BagWar now with my link for epic rewards! 🎁🔥");window.Telegram.WebApp.openTelegramLink(n)},a.onCopyTouch=function(){var e=document.createElement("textarea"),n=b.instance.configObj.tgBot+"?startapp="+d.instance.inviteCode;e.value=n,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length);try{document.execCommand("copy"),u.instance.showToast("Successfil")}catch(e){u.instance.showToast("Fail")}document.body.removeChild(e)},a.onWithdrawBtn=function(){u.instance.show(l.PopupUI.WithdrawPopup)},a.showFriendsPopup=function(){u.instance.show(l.PopupUI.FriendsPopup)},a.onEnable=function(){h.on(v.UPDATE_INVITE_INFO,this.init,this)},a.onDisable=function(){h.off(v.UPDATE_INVITE_INFO,this.init,this)},n}(p)).prototype,"balance",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=n(C.prototype,"code",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=n(C.prototype,"direct",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=n(C.prototype,"super",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=C))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/ItemModel.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"92039JPcShC4KexWHVx0wDu","ItemModel",void 0);e("ItemCfg",(function(){this.ClassName="Item",this.Id=void 0,this.name=void 0,this.desc=void 0,this.icon=void 0,this.quality=void 0,this.dataId=void 0,this.type=void 0})),e("ItemType",function(e){return e.WeaponFragment="weaponfragment",e.HeroFragment="herofragment",e.FragmentWeaponCard="fragmentcardweapon",e.Gold="gold",e.Diamond="diamond",e.Energy="energy",e.Ticket="ticket",e.TicketBox="ticketbox",e.Food="food",e}({})),e("ItemIdType",function(e){return e[e.Gold=101]="Gold",e[e.Diamond=102]="Diamond",e[e.Energy=103]="Energy",e[e.Ticket=104]="Ticket",e[e.Food=105]="Food",e[e.Exp=107]="Exp",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts","./GameEvent.ts","./EventListener.ts","./LanguageManager.ts"],(function(e){var n,t,i,a,o,c,r,l,s,u,g,h,p,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,r=e.Node,l=e.Sprite,s=e.Color,u=e.Component},function(e){g=e.SpriteEx},function(e){h=e.GameEvent},function(e){p=e.EventListener},function(e){d=e.LanguageManager}],execute:function(){var f,L,m,v,_,b,E,k,x;o._RF.push({},"f5a62mxorBIooJ3L2n3odXQ","LanguageItem",void 0);var y=c.ccclass,C=c.property;e("LanguageItem",(f=y("LanguageItem"),L=C(g),m=C(g),v=C(r),f((E=n((b=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return n=e.call.apply(e,[this].concat(o))||this,i(n,"flag",E,a(n)),i(n,"lang",k,a(n)),i(n,"checked",x,a(n)),n._callback=void 0,n._index=void 0,n}t(n,e);var o=n.prototype;return o.init=function(e,n,t){this._index=e,this.flag.index=e,this.lang.index=e,this._callback=t,n?(this.checked.active=!0,this.node.getComponent(l).color=new s(255,255,255,255)):(this.checked.active=!1,this.node.getComponent(l).color=new s(54,54,78,255))},o.selectLanuage=function(e){e==this._index?(this.checked.active=!0,this.node.getComponent(l).color=new s(255,255,255,255)):(this.checked.active=!1,this.node.getComponent(l).color=new s(54,54,78,255))},o.onClickBtn=function(){this._callback?this._callback(this._index):(d.instance.setLanguage(this._index),d.instance.updateSceneRenderers(),p.emit(h.SELECT_LANGUAGE,this._index))},o.onEnable=function(){p.on(h.SELECT_LANGUAGE,this.selectLanuage,this)},o.onDisable=function(){p.off(h.SELECT_LANGUAGE,this.selectLanuage,this)},n}(u)).prototype,"flag",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=n(b.prototype,"lang",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=n(b.prototype,"checked",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=b))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(e){var t,a,n,r,i,o,c,l,u,s,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.CCString,l=e.Label,u=e.RichText,s=e.Component},function(e){g=e.LanguageManager}],execute:function(){var p,L,f,b,h;i._RF.push({},"b50cel4OHxGVqeXNkma5pHX","LanguageLabel",void 0);var y=o.ccclass,v=o.property;e("LanguageLabel",(p=y("LanguageLabel"),L=v(c),p((h=t((b=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"key",h,r(t)),t}a(t,e);var i=t.prototype;return i.onLoad=function(){this.updateLabel()},i.updateLabel=function(){var e=this.getComponent(l)||this.getComponent(u);if(e){var t=g.instance.getLang(this.key);e.string=t}},t}(s)).prototype,"key",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=b))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageMode.ts","./CfgMgr.ts","./Constants.ts"],(function(e){var n,a,t,g,i,r,s;return{setters:[function(e){n=e.createClass},function(e){a=e.cclegacy,t=e.sys,g=e.director},function(e){i=e.LanguageCfg},function(e){r=e.CfgMgr},function(e){s=e.Constants}],execute:function(){a._RF.push({},"b59041AwXREjarFb2zZqXRO","LanguageManager",void 0),e("LanguageManager",function(){function e(){this._languageMap=new Map,this._language="en",this._langList=["en","ja","ko","zh","tw","ru"]}var a=e.prototype;return a.init=function(){var e=t.localStorage.getItem(s.Language);if(!e){var n=t.languageCode?t.languageCode.toLowerCase():t.language.toLowerCase();e=0==n.indexOf("zh")?"zh-cn"==n||"zh"==n?"zh":"tw":"ja"==n||"ko"==n||"ru"==n?n:"en"}console.log("lang",e),this._langList.indexOf(e)>=0&&(this._language=e);for(var a=r.getCfgDataArray(new i),g=0;g<a.length;g++)this._languageMap.set(a[g].key,a[g])},a.setLanguage=function(e){this._language=this._langList[e],t.localStorage.setItem(s.Language,this._language)},a.getLang=function(e,n){if(!this._languageMap.has(e))return"";var a=this._languageMap.get(e)[this._language];if(n&&n.length>0)for(var t=0;t<n.length;t++)a=a.replace("{"+t+"}",n[t]);return a},a.updateSceneRenderers=function(){for(var e=g.getScene().children,n=[],a=0;a<e.length;++a){var t=e[a].getComponentsInChildren("LanguageLabel");Array.prototype.push.apply(n,t)}for(var i=0;i<n.length;++i){var r=n[i];r.node.active&&r.updateLabel()}},n(e,[{key:"language",get:function(){return this._language}},{key:"index",get:function(){return this._langList.indexOf(this._language)}},{key:"langList",get:function(){return this._langList}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageMode.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"8eeb8t65PdPRazkQpRKEx16","LanguageMode",void 0);i("LanguageCfg",(function(){this.ClassName="Language",this.Id=void 0,this.key=void 0,this.zh=void 0,this.tw=void 0,this.en=void 0,this.jp=void 0,this.kr=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguagePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./LanguageManager.ts","./LanguageItem.ts"],(function(n){var e,t,a,o,i,r,u,c,p,g,s,l,f,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,a=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){i=n.cclegacy,r=n._decorator,u=n.Node,c=n.Prefab,p=n.instantiate,g=n.Component},function(n){s=n.OpenPopupManager},function(n){l=n.Constants},function(n){f=n.LanguageManager},function(n){h=n.LanguageItem}],execute:function(){var L,P,b,m,y,v,d;i._RF.push({},"5b2f54zq/5Fcb7RcGizRFUL","LanguagePopup",void 0);var I=r.ccclass,z=r.property;n("LanguagePopup",(L=I("LanguagePopup"),P=z(u),b=z(c),L((v=e((y=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e=n.call.apply(n,[this].concat(i))||this,a(e,"content",v,o(e)),a(e,"langItem",d,o(e)),e}t(e,n);var i=e.prototype;return i.show=function(){var n=this,e=f.instance.language;0==this.content.children.length&&f.instance.langList.forEach((function(t,a){var o=p(n.langItem);o.getComponent(h).init(a,e==t),o.parent=n.content}))},i.onCloseTouch=function(){s.instance.hide(l.PopupUI.LanguagePopup)},e}(g)).prototype,"content",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(y.prototype,"langItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=y))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/LearnSkillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesUtil.ts","./SpriteEx.ts","./Constants.ts"],(function(e){var t,i,n,r,o,a,c,l,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Sprite,l=e.Component},function(e){s=e.ResourcesUtil},function(e){u=e.SpriteEx},function(e){p=e.Constants}],execute:function(){var f,m,h,y,S,d,F;o._RF.push({},"18f44+CXBxHp7WMKdGx4ajK","LearnSkillItem",void 0);var b=a.ccclass,g=a.property;e("LearnSkillItem",(f=b("LearnSkillItem"),m=g(u),h=g(c),f((d=t((S=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"iconFrame",d,r(t)),n(t,"icon",F,r(t)),t._eid=0,t}return i(t,e),t.prototype.init=function(e){var t=this,i=p.skillIconPath+e.icon+"/spriteFrame";s.geSpriteFrame(i).then((function(e){t.icon.spriteFrame=e})),this.iconFrame.index=e.quality-1},t}(l)).prototype,"iconFrame",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(S.prototype,"icon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelupPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./RewardItem.ts","./LanguageManager.ts","./PlayerData.ts"],(function(e){var t,n,r,a,i,o,u,c,s,l,p,f,h,g,v,b,d,P,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator,s=e.Label,l=e.Node,p=e.Prefab,f=e.Component,h=e.Vec3,g=e.instantiate},function(e){v=e.OpenPopupManager},function(e){b=e.Constants},function(e){d=e.RewardItem},function(e){P=e.LanguageManager},function(e){w=e.PlayerData}],execute:function(){var y,m,L,x,C,z,M,k,D;u._RF.push({},"62e2cHz6BlIVb6ZWih/Z/x7","LevelupPopup",void 0);var I=c.ccclass,R=c.property;e("LevelupPopup",(y=I("LevelupPopup"),m=R(s),L=R(l),x=R(p),y((M=t((z=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"title",M,a(t)),r(t,"content",k,a(t)),r(t,"rewardPrefab",D,a(t)),t}n(t,e);var u=t.prototype;return u.show=function(e){this.title.string=P.instance.getLang("game.reachLv",[w.instance.chapterObj.level]),this.setContent(e)},u.setContent=function(){var e=i(o().mark((function e(t){var n,r,a,i,u,c=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.content.removeAllChildren(),n=new h(0,0,0),r=t.length,100,100,20,4,a=r>=4?4:r,n.x=120*-(a-1)/2,i=o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){c.scheduleOnce((function(){var i=t[r],o=g(c.rewardPrefab),u=new h(0,0,0),s=Math.floor(r/a),l=r%a;u.x=n.x+120*l,u.y=-120*s,o.parent=c.content,o.getComponent(d).init(i,!0),o.setPosition(u),e(0)}),.1)}));case 2:case"end":return e.stop()}}),e)})),u=0;case 11:if(!(u<t.length)){e.next=16;break}return e.delegateYield(i(u),"t0",13);case 13:u++,e.next=11;break;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.onCloseBtn=function(){v.instance.hide(b.PopupUI.LevelupPopup)},t}(f)).prototype,"title",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(z.prototype,"content",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"rewardPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=z))||C));u._RF.pop()}}}));

System.register("chunks:///_virtual/LimitTodayPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./SpriteEx.ts"],(function(e){var i,t,n,o,l,r,a,p,u,s,c,b,f,h,m,y;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,a=e.Sprite,p=e.Label,u=e.RichText,s=e.ScrollView,c=e.Node,b=e.instantiate,f=e.Component},function(e){h=e.OpenPopupManager},function(e){m=e.Constants},function(e){y=e.SpriteEx}],execute:function(){var w,g,d,z,T,v,P,k,C,L,S,I,x,R,_,D,E,F,M,N,O;l._RF.push({},"b9d83bsFK9E3LzZ52GtTYfn","LimitTodayPopup",void 0);var j=r.ccclass,A=r.property;e("LimitTodayPopup",(w=j("LimitTodayPopup"),g=A(a),d=A(p),z=A(u),T=A(a),v=A(s),P=A(c),k=A(p),C=A(c),L=A(c),w((x=i((I=function(e){function i(){for(var i,t=arguments.length,l=new Array(t),r=0;r<t;r++)l[r]=arguments[r];return i=e.call.apply(e,[this].concat(l))||this,n(i,"hero",x,o(i)),n(i,"heroName",R,o(i)),n(i,"activeSkills",_,o(i)),n(i,"skillIcon",D,o(i)),n(i,"passiveSkills",E,o(i)),n(i,"weaponContent",F,o(i)),n(i,"tip",M,o(i)),n(i,"weaponItem",N,o(i)),n(i,"skillTip",O,o(i)),i}t(i,e);var l=i.prototype;return l.show=function(){0==this.weaponContent.children.length&&(b(this.weaponItem).getComponent(y).index=0,this.node.parent=this.weaponContent)},l.onCloseTouch=function(){h.instance.hide(m.PopupUI.LimitTodayPopup)},l.onRefreshTouch=function(){},i}(f)).prototype,"hero",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(I.prototype,"heroName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(I.prototype,"activeSkills",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(I.prototype,"skillIcon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(I.prototype,"passiveSkills",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(I.prototype,"weaponContent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(I.prototype,"tip",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(I.prototype,"weaponItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(I.prototype,"skillTip",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=I))||S));l._RF.pop()}}}));

System.register("chunks:///_virtual/Load.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./AudioManager.ts","./CfgMgr.ts","./OpenPopupManager.ts","./SystemConstantModel.ts","./GameData.ts","./BagData.ts","./HttpService.ts","./Storage.ts","./Api.ts","./ShopData.ts","./PlayerData.ts","./ChapterData.ts","./LanguageManager.ts","./BagHeroData.ts","./GuideData.ts","./Configuration.ts","./SysOpenData.ts","./GameDefine.ts"],(function(t){var n,e,a,o,i,s,r,c,g,l,u,f,p,d,h,m,D,C,y,P,w,T,L,v,B,S,b,_,M,A,G;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,r=t.ProgressBar,c=t.Label,g=t.Node,l=t.director,u=t.resources,f=t.Component},function(t){p=t.Constants},function(t){d=t.AudioManager},function(t){h=t.CfgMgr},function(t){m=t.OpenPopupManager},function(t){D=t.SystemConstantCfg},function(t){C=t.GameData},function(t){y=t.BagData},function(t){P=t.HttpService},function(t){w=t.Storage},function(t){T=t.Api},function(t){L=t.ShopData},function(t){v=t.PlayerData},function(t){B=t.ChapterData},function(t){S=t.LanguageManager},function(t){b=t.BagHeroData},function(t){_=t.GuideData},function(t){M=t.Configuration},function(t){A=t.SysOpenData},function(t){G=t.GameDefine}],execute:function(){var N,R,k,I,z,H,O,U,x;i._RF.push({},"47e05tFPodPoaFGg/ApUzzN","Load",void 0);var F=s.ccclass,W=s.property;t("Load",(N=F("Load"),R=W(r),k=W(c),I=W(g),N((O=n((H=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return n=t.call.apply(t,[this].concat(i))||this,a(n,"progressBar",O,o(n)),a(n,"lbText",U,o(n)),a(n,"PersistRoot",x,o(n)),n._progress=0,n}e(n,t);var i=n.prototype;return i.onLoad=function(){this.initPopupLayer(),this.loginGame()},i.loginGame=function(){var t=this,n=w.getItem("access-token");console.log("window.Telegram",window.Telegram),window.Telegram?n?(G.accessToken=n,v.instance.getUserInfo((function(n){0==n?(t.loadLocalGameConfg(),t.loadNetworkData()):t._login()}))):this._login():m.instance.showToast("Please open the app in Telegram")},i._login=function(){var t=this,n=new URLSearchParams(window.location.search).get("tgWebAppStartParam"),e=window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.initData?window.Telegram.WebApp.initData:"test";console.log("startApp",n,e),P.instance.post(T.AUTH_LOGIN,{code:e,inviteInfo:n}).then((function(n){0==n.code&&("test"==e&&w.setItem("access-token",n.data.accessToken),G.accessToken=n.data.accessToken,v.instance.getUserInfo((function(){t.loadLocalGameConfg()})))})).catch((function(t){console.log("AUTH_LOGIN",t)}))},i.initPopupLayer=function(){l.addPersistRootNode(this.PersistRoot),m.instance.TopLayer=this.PersistRoot.getChildByName("Top"),m.instance.MidLayer=this.PersistRoot.getChildByName("Middle"),m.instance.BottomLayer=this.PersistRoot.getChildByName("Bottom"),m.instance.ToastLayer=this.PersistRoot.getChildByName("Toast")},i.loadLocalGameConfg=function(){var t=this;u.loadDir(p.ConfigPath,(function(n,e,a){var o=80/e;t._progress+=o,t.setProgressBar()}),(function(n,e){for(var a=0;a<e.length;a++){var o=e[a];h.setCfgData(o.name,o.json)}M.instance.init(),d.instance.init(),t.initData()}))},i.loadNetworkData=function(){},i.initData=function(){this.convertConstantData(),S.instance.init(),A.instance.init(),C.instance.init(),B.instance.init(),y.instance.initCfg(),L.instance.initCfg(),b.instance.initCfg(),L.instance.getShopInfo(),_.instance.initCfg(),this.preloadScene()},i.convertConstantData=function(){h.getCfgDataArray(new D).forEach((function(t){p.SysConstant[t.ConstantName]=t}))},i.setProgressBar=function(){this.lbText.string=Math.floor(this._progress)+"%",this.progressBar.progress=this._progress/100},i.preloadScene=function(){var t=this,n="Main";l.preloadScene(n,(function(n,e){var a=Math.floor(n/e*20);t._progress<80+a&&(t._progress=80+a),t.setProgressBar()}),(function(){t._progress=100,t.setProgressBar(),l.loadScene(n)}))},n}(f)).prototype,"progressBar",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(H.prototype,"lbText",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(H.prototype,"PersistRoot",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=H))||z));i._RF.pop()}}}));

System.register("chunks:///_virtual/MailBoxData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HttpService.ts","./Api.ts"],(function(t){var i,n,e,a,s;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy,e=t._decorator},function(t){a=t.HttpService},function(t){s=t.Api}],execute:function(){var o,c;n._RF.push({},"ababb/MIzVCdbz2VEO0oRss","MailBoxData",void 0);var r=e.ccclass;e.property,t("MailBoxData",r("MailBoxData")(((c=function(){function t(){this.mailList=[]}return t.prototype.getMailList=function(){var t=this;a.instance.post(s.MAIL_LIST).then((function(i){i&&0==i.code&&(t.mailList=i.data.mails)}))},i(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,o=c))||o),t("MailModel",(function(){this.id=void 0,this.rewards=void 0,this.title=void 0,this.expireStamp=void 0,this.isRead=void 0}));n._RF.pop()}}}));

System.register("chunks:///_virtual/MailBoxPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MailBoxData.ts","./MailItem.ts","./OpenPopupManager.ts","./Constants.ts"],(function(t){var e,i,n,o,a,l,r,c,p,u,s,f,m,h,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,r=t.ScrollView,c=t.Prefab,p=t.Node,u=t.instantiate,s=t.Component},function(t){f=t.MailBoxData},function(t){m=t.MailItem},function(t){h=t.OpenPopupManager},function(t){y=t.Constants}],execute:function(){var b,g,M,d,v,P,w,x,B;a._RF.push({},"bf15710WKFK/6WORvLbQQ4Q","MailBoxPopup",void 0);var I=l.ccclass,C=l.property;t("MailBoxPopup",(b=I("MailBoxPopup"),g=C(r),M=C(c),d=C(p),b((w=e((P=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,n(e,"scrollView",w,o(e)),n(e,"mailItem",x,o(e)),n(e,"emptyNode",B,o(e)),e}i(e,t);var a=e.prototype;return a.show=function(){f.instance.getMailList()},a.init=function(){var t=this;0==this.scrollView.content.children.length&&(this.emptyNode.active=0==f.instance.mailList.length,f.instance.mailList.forEach((function(e,i){var n=u(t.mailItem);n.getComponent(m).init(e),n.parent=t.scrollView.content})))},a.onDeleteTouch=function(){},a.onClaimTouch=function(){},a.onCloseTouch=function(){h.instance.hide(y.PopupUI.MailBoxPopup)},e}(s)).prototype,"scrollView",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(P.prototype,"mailItem",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(P.prototype,"emptyNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=P))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/MailItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HttpService.ts","./Api.ts","./OpenPopupManager.ts"],(function(e){var t,i,r,n,a,o,l,c,u,p,s,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Sprite,c=e.Label,u=e.Component},function(e){p=e.HttpService},function(e){s=e.Api},function(e){f=e.OpenPopupManager}],execute:function(){var m,d,b,w,h,y,g,v,I,M,D;a._RF.push({},"b9390QcanZPXZep01xVrNOy","MailItem",void 0);var z=o.ccclass,P=o.property;e("MailItem",(m=z("MailItem"),d=P(l),b=P(c),w=P(c),h=P(c),m((v=t((g=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"rewardIcon",v,n(t)),r(t,"rewardNum",I,n(t)),r(t,"desc",M,n(t)),r(t,"time",D,n(t)),t.mailData=void 0,t}i(t,e);var a=t.prototype;return a.start=function(){},a.init=function(e){this.mailData=e},a.onClaimTouch=function(){p.instance.post(s.MAIL_READ,{mailId:this.mailData.id}).then((function(e){e&&0==e.code?f.instance.showRewardPopup(e.data.rewards):f.instance.showToast("Network Error")}))},t}(u)).prototype,"rewardIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(g.prototype,"rewardNum",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(g.prototype,"desc",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(g.prototype,"time",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=g))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Constants.ts","./AdManager.ts","./AnimationUI.ts","./Api.ts","./AudioManager.ts","./BackgroundAdapter.ts","./BaseComponent.ts","./CfgMgr.ts","./Configuration.ts","./ContentAdapter.ts","./ContentScale.ts","./ContentWidthAdapter.ts","./ContentWidthScaleAdapter.ts","./Debug.ts","./EventListener.ts","./GameController.ts","./HttpService.ts","./LanguageLabel.ts","./LanguageManager.ts","./NoClickMore.ts","./OpenPopupManager.ts","./PoolManager.ts","./PopupManager.ts","./ResourcesUtil.ts","./ScrollViewHelper.ts","./SpriteEx.ts","./Storage.ts","./Util.ts","./WalletManager.ts","./BlastItem.ts","./DamageItem.ts","./DamageStatItem.ts","./DamageStatSubItem.ts","./HeroHpItem.ts","./MonsterBuffItem.ts","./MonsterHpItem.ts","./Shadow.ts","./ChapterMapData.ts","./GameData.ts","./GridData.ts","./HeroData.ts","./MonsterBuffData.ts","./MonsterData.ts","./PlayerData.ts","./SkillData.ts","./SkillUpgradeData.ts","./WeaponData.ts","./WeaponShopData.ts","./GameEvent.ts","./GridBgItem.ts","./GridItem.ts","./HeroBase.ts","./HeroItem.ts","./BattleUIManager.ts","./BgManager.ts","./BoxManager.ts","./GridManager.ts","./GridMapManager.ts","./HeroManager.ts","./MonsterManager.ts","./SkillManager.ts","./WeaponManager.ts","./BuffObj.ts","./MonsterBulletBase.ts","./MonsterBulletItem.ts","./MonsterEvent.ts","./MonsterBase.ts","./MonsterItem.ts","./SkillBulletBase.ts","./SkillBulletItem.ts","./SkillTypeItem.ts","./WeaponBgItem.ts","./WeaponBuffItem.ts","./WeaponItem.ts","./WeaponMergeItem.ts","./GameDefine.ts","./SysOpenData.ts","./MainEvent.ts","./AssetModel.ts","./AvatarsModel.ts","./BagHeroModel.ts","./BagModel.ts","./BagWeaponModel.ts","./BattleLevelModel.ts","./BuffModel.ts","./ChapterEventModel.ts","./ChapterModel.ts","./ChestModel.ts","./CoinMode.ts","./ConfigModel.ts","./EnergyModel.ts","./FirstTopupModel.ts","./GridModel.ts","./GrowthFundMode.ts","./GuideModel.ts","./HeroLevelModel.ts","./HeroModel.ts","./HeroSkillModel.ts","./ItemModel.ts","./LanguageMode.ts","./MonsterModel.ts","./MonthlyPassModel.ts","./RewardModel.ts","./ShopModel.ts","./SkillModel.ts","./SkillTargetModel.ts","./SkillUpgradeModel.ts","./SoundModel.ts","./SysOpenModel.ts","./SystemConstantModel.ts","./TopupModel.ts","./UserModel.ts","./WeaponLevelModel.ts","./WeaponModel.ts","./WeaponShopModel.ts","./axios.mjs_cjs=&original=.js","./ActivityPopup.ts","./RankData2.ts","./LimitTodayPopup.ts","./RankGroupItem.ts","./RulePopup.ts","./UserItem.ts","./BagDetailPopup.ts","./BagPopup.ts","./BagWeaponItem.ts","./BagData.ts","./SlotItem.ts","./WeaponDoubleSkillItem.ts","./WeaponSkillItem.ts","./WeaponStylePopup.ts","./ChapterChestItem.ts","./ChapterPopup.ts","./ChapterData.ts","./LevelupPopup.ts","./ChapterItem.ts","./UnlockItemPopup.ts","./AniBg.ts","./ComRewardAnimPopup.ts","./ComRewardPopup.ts","./ComTipsPopup.ts","./RewardItem.ts","./RewardTipItem.ts","./Toast.ts","./AchievementItem.ts","./AchievementSubItem.ts","./DailyItem.ts","./DailyQuestPopup.ts","./DailySubItem.ts","./QuestData.ts","./RewardChestItem.ts","./SignInItem.ts","./SignInSubItem.ts","./WeeklyItem.ts","./AdTipsPopup.ts","./GameDebugPopup.ts","./GameFailPopup.ts","./GamePopup.ts","./GameRevivePopup.ts","./GameWinPopup.ts","./PausePopup.ts","./GuideData.ts","./GuidePopup.ts","./BagHeroItem.ts","./BagHeroData.ts","./EquipItem.ts","./HeroAwakenItem.ts","./HeroDetailPopup.ts","./HeroEquipItem.ts","./HeroLevelItem.ts","./HeroPopup.ts","./HeroStarItem.ts","./HeroUpgradeItem.ts","./InviteData.ts","./FriendItem.ts","./FriendsPopup.ts","./InvitePopup.ts","./MailBoxData.ts","./MailBoxPopup.ts","./MailItem.ts","./AreaItem.ts","./RankData.ts","./PersonalItem.ts","./RankItem.ts","./RankPopup.ts","./LanguageItem.ts","./LanguagePopup.ts","./RedeemCodePopup.ts","./SettingPopup.ts","./ShopBillData.ts","./ShopData.ts","./ShopBoxDetailPopup.ts","./ShopBoxItem.ts","./ShopBoxLevelupPopup.ts","./ShopBoxOpenPopup.ts","./ShopBoxRewardItem.ts","./ShopBoxRewardPopup.ts","./ShopBoxSubItem.ts","./ShopBoxWeaponDetailPopup.ts","./ShopDayItem.ts","./ShopDaySubItem.ts","./ShopDiamondItem.ts","./ShopDiamondSubItem.ts","./ShopEnergyPopup.ts","./ShopGoldItem.ts","./ShopGoldSubItem.ts","./ShopItemPopup.ts","./ShopPopup.ts","./ShopSuccessPopup.ts","./LearnSkillItem.ts","./SkillSelectPopup.ts","./SkillSelectItem.ts","./TopupData.ts","./FirstTopupPopup.ts","./FundItem.ts","./FundPopup.ts","./FundRewardItem.ts","./MonthlyPassItem.ts","./MonthlyPassPopup.ts","./DailySpinPopup.ts","./TurntableData.ts","./AvatarItem.ts","./AvatarNode.ts","./AvatarPopup.ts","./UserData.ts","./EditNamePopup.ts","./SetPositionPopup.ts","./WalletData.ts","./WalletPopup.ts","./WithdrawPopup.ts","./WarehouseData.ts","./WarehousePopup.ts","./SkillGetItem.ts","./WeaponAdvancedItem.ts","./WeaponDetailPopup.ts","./WeaponSelectPopup.ts","./WeaponSkillInfoPopup.ts","./Game.ts","./Load.ts","./Main.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./PopupManager.ts","./PlayerData.ts","./GameEvent.ts","./SysOpenData.ts","./ResourcesUtil.ts","./GuideData.ts","./AudioManager.ts","./WalletManager.ts","./AdManager.ts","./LanguageManager.ts","./Util.ts"],(function(n){var t,e,o,i,a,r,s,c,u,l,p,h,d,f,m,g,b,y,E,P,A,v,G,I,_,O,R,T,D,C;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.Label,c=n.Node,u=n.UITransform,l=n.Sprite,p=n.director,h=n.Component,d=n.instantiate,f=n.tween,m=n.v3},function(n){g=n.Constants},function(n){b=n.EventListener},function(n){y=n.OpenPopupManager},function(n){E=n.PopupManager},function(n){P=n.PlayerData},function(n){A=n.GameEvent},function(n){v=n.SysOpenData},function(n){G=n.ResourcesUtil},function(n){I=n.GuideData,_=n.GuideStep},function(n){O=n.AudioManager},function(n){R=n.WalletManager},function(n){T=n.AdManager},function(n){D=n.LanguageManager},function(n){C=n.Util}],execute:function(){var M,S,w,N,L,B,k,U,W,z,H,F,j,x,Y,K,Q,q,J,V,X,Z,$,nn,tn,en,on,an,rn,sn,cn;a._RF.push({},"bf968APxkBEU60Qv2LE/OB7","Main",void 0);var un=r.ccclass,ln=r.property;n("Main",(M=un("Main"),S=ln(s),w=ln(s),N=ln(s),L=ln(s),B=ln(c),k=ln(c),U=ln(c),W=ln(c),z=ln(c),H=ln(c),F=ln(c),j=ln(c),x=ln(c),Y=ln(c),M((q=t((Q=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,o(t,"gold",q,i(t)),o(t,"diamond",J,i(t)),o(t,"ticket",V,i(t)),o(t,"food",X,i(t)),o(t,"bottomLayer",Z,i(t)),o(t,"middleLayer",$,i(t)),o(t,"topLayer",nn,i(t)),o(t,"bgNode",tn,i(t)),o(t,"toggleGroup",en,i(t)),o(t,"topInfo",on,i(t)),o(t,"bottomInfo",an,i(t)),o(t,"popupNode",rn,i(t)),o(t,"bagBtn",sn,i(t)),o(t,"battleBtn",cn,i(t)),t}e(t,n);var a=t.prototype;return a.onLoad=function(){var n=this;y.instance.MainTopLayer=this.topLayer,y.instance.PopupLayer=this.popupNode,y.instance.Canvas=this.node,this.bgNode.active=!0,this.onShowHideTopInfo(!1),this.onUpdatePlayerInfo(),O.instance.playMusic(1,!0),this.scheduleOnce((function(){R.instance.init(P.instance.configObj),T.instance.init(P.instance.configObj.adId)}),.5),this.scheduleOnce((function(){n.preloadGameScene()}),5)},a.start=function(){this.initMenu()},a.onShowHideTopInfo=function(n){this.topInfo.active=n},a.onShowHideBottomInfo=function(n){this.bottomInfo.active=n},a.initMenu=function(){var n=this;this.scheduleOnce((function(){for(var t=n.toggleGroup.parent.getComponent(u).contentSize,e=n.toggleGroup.children,o=0;o<e.length;o++){var i=e[o];if(i.getComponent(u).width=t.width/5,2==o){var a={};a.target=i,n.onClickBtn(a,o.toString())}}}),.1)},a.resetMenu=function(n){for(var t=this.toggleGroup.children,e=0;e<t.length;e++){var o=t[e];e!=n&&(o.getChildByName("noCheck").active=!0,o.getChildByName("Check").active=!1,o.getChildByName("noCheck").getComponent(l).grayscale=!v.instance.checkSysOpen(e)),o.getChildByName("line")&&(o.getChildByName("line").active=e!=n-1)}},a.preloadGameScene=function(){p.preloadScene("Game",(function(n,t){}),(function(){}))},a.onClickBtn=function(n,t){var e=this.toggleGroup.children[Number(t)],o=Number(t);if(v.instance.checkSysOpen(o)){switch(E.instance.hideAll(),this.onShowHideTopInfo(!0),o){case 0:y.instance.show(g.PopupUI.ShopPopup,this.bottomLayer);break;case 1:y.instance.show(g.PopupUI.HeroPopup,this.bottomLayer);break;case 2:this.onShowHideTopInfo(!1),y.instance.show(g.PopupUI.ChapterPopup,this.bottomLayer);break;case 3:y.instance.show(g.PopupUI.BagPopup,this.bottomLayer);break;case 4:y.instance.show(g.PopupUI.ActivityPopup,this.bottomLayer)}e.getChildByName("noCheck").active=!1,e.getChildByName("Check").active=!0,this.resetMenu(o)}else if(4==o)y.instance.showToast("Coming soon");else{var i=v.instance.getSysOpenCfgById(o);y.instance.showToast(D.instance.getLang(i.desc,[i.unlock]))}},a.onUpdatePlayerInfo=function(n){var t=P.instance.assetObj;n&&"all"!=n&&"gold"!=n||C.numberAnimation(this.gold,t.gold),n&&"all"!=n&&"diamond"!=n||C.numberAnimation(this.diamond,t.diamond),n&&"all"!=n&&"ticket"!=n||C.numberAnimation(this.ticket,P.instance.chapterObj.ticket),n&&"all"!=n&&"food"!=n||C.numberAnimation(this.food,P.instance.heroObj.food)},a.onGameCoin=function(n){var t=this,e=this.gold.node.parent.getChildByName("icon").getPosition(),o=Math.min(10,n.num),i=n.pos,a=g.commonPreabPath+"goldItem",r=this.gold.node.parent.getComponent(u).convertToNodeSpaceAR(i);G.getPrefab(a).then((function(n){for(var i=function(i){var a=d(n),s=2*(Math.random()-.5)*100+r.x,c=2*(Math.random()-.5)*50+r.y;a.parent=t.gold.node.parent,a.setPosition(r),t.scheduleOnce((function(){f(a).to(.2,{position:m(s,c,0)},{easing:"sineIn"}).delay(.2).to(1,{position:e},{easing:"sineInOut"}).call((function(){a.destroy(),1!=o&&1!=i||b.emit(A.REFRESH_PLAYER_DATA,"gold")})).start()}),.05+.05*i)},a=0;a<o;a++)i(a)}))},a.onGameDiamond=function(n){var t=this,e=this.diamond.node.parent.getChildByName("icon").getPosition(),o=Math.min(n.num,10),i=n.pos,a=g.commonPreabPath+"diamondItem",r=this.diamond.node.parent.getComponent(u).convertToNodeSpaceAR(i);G.getPrefab(a).then((function(n){for(var i=function(i){var a=d(n),s=2*(Math.random()-.5)*100+r.x,c=2*(Math.random()-.5)*50+r.y;a.parent=t.diamond.node.parent,a.setPosition(r),t.scheduleOnce((function(){f(a).to(.2,{position:m(s,c,0)},{easing:"sineIn"}).delay(.2).to(1,{position:e},{easing:"sineInOut"}).call((function(){a.destroy(),1!=o&&1!=i||b.emit(A.REFRESH_PLAYER_DATA,"diamond")})).start()}),.05+.05*i)},a=0;a<o;a++)i(a)}))},a.onGameTicket=function(n){var t=this,e=this.ticket.node.parent.getChildByName("icon").getPosition(),o=Math.min(n.num,10),i=n.pos,a=g.commonPreabPath+"ticketItem",r=this.ticket.node.parent.getComponent(u).convertToNodeSpaceAR(i);G.getPrefab(a).then((function(n){for(var i=function(i){var a=d(n),s=2*(Math.random()-.5)*100+r.x,c=2*(Math.random()-.5)*50+r.y;a.parent=t.ticket.node.parent,a.setPosition(r),t.scheduleOnce((function(){f(a).to(.2,{position:m(s,c,0)},{easing:"sineIn"}).delay(.2).to(1,{position:e},{easing:"sineInOut"}).call((function(){a.destroy(),1!=o&&1!=i||b.emit(A.REFRESH_PLAYER_DATA,"ticket")})).start()}),.05+.05*i)},a=0;a<o;a++)i(a)}))},a.onGameFood=function(n){var t=this,e=this.food.node.parent.getChildByName("icon").getPosition(),o=Math.min(n.num,10),i=n.pos,a=g.commonPreabPath+"foodItem",r=this.food.node.parent.getComponent(u).convertToNodeSpaceAR(i);G.getPrefab(a).then((function(n){for(var i=function(i){var a=d(n),s=2*(Math.random()-.5)*100+r.x,c=2*(Math.random()-.5)*50+r.y;a.parent=t.food.node.parent,a.setPosition(r),t.scheduleOnce((function(){f(a).to(.2,{position:m(s,c,0)},{easing:"sineIn"}).delay(.2).to(1,{position:e},{easing:"sineInOut"}).call((function(){a.destroy(),1!=o&&1!=i||b.emit(A.REFRESH_PLAYER_DATA,"food")})).start()}),.05+.05*i)},a=0;a<o;a++)i(a)}))},a.onGameWeapon=function(n){},a.onGuideEvent=function(){I.instance.curStep==_.GUIDE_STEP15_BATTLE_DONE?(I.instance.curStep=1,y.instance.showGuidePopup(this.bagBtn)):I.instance.curStep==_.GUIDE_STEP20_WEAPON_UNLOCK&&(I.instance.curStep=1,y.instance.showGuidePopup(this.battleBtn))},a.onEnable=function(){b.on(A.SHOW_BOTTOM_INFO,this.onShowHideBottomInfo,this),b.on(A.REFRESH_PLAYER_DATA,this.onUpdatePlayerInfo,this),b.on(A.GET_GOLD_REWARD,this.onGameCoin,this),b.on(A.GET_DIAMOND_REWARD,this.onGameDiamond,this),b.on(A.GET_TICKET_REWARD,this.onGameTicket,this),b.on(A.GET_FOOD_REWARD,this.onGameFood,this),b.on(A.GET_WEAPON_REWARD,this.onGameWeapon,this),b.on(A.GUIDE_BAG_ACTION,this.onGuideEvent,this)},a.onDisable=function(){b.off(A.SHOW_BOTTOM_INFO,this.onShowHideBottomInfo,this),b.off(A.REFRESH_PLAYER_DATA,this.onUpdatePlayerInfo,this),b.off(A.GET_GOLD_REWARD,this.onGameCoin,this),b.off(A.GET_DIAMOND_REWARD,this.onGameDiamond,this),b.off(A.GET_TICKET_REWARD,this.onGameTicket,this),b.off(A.GET_FOOD_REWARD,this.onGameFood,this),b.off(A.GET_WEAPON_REWARD,this.onGameWeapon,this),b.off(A.GUIDE_BAG_ACTION,this.onGuideEvent,this)},t}(h)).prototype,"gold",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(Q.prototype,"diamond",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(Q.prototype,"ticket",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(Q.prototype,"food",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(Q.prototype,"bottomLayer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Q.prototype,"middleLayer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nn=t(Q.prototype,"topLayer",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tn=t(Q.prototype,"bgNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),en=t(Q.prototype,"toggleGroup",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),on=t(Q.prototype,"topInfo",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),an=t(Q.prototype,"bottomInfo",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rn=t(Q.prototype,"popupNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn=t(Q.prototype,"bagBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cn=t(Q.prototype,"battleBtn",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=Q))||K));a._RF.pop()}}}));

System.register("chunks:///_virtual/MainEvent.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"8648axqgfJL17PIoUJZQZGU","MainEvent",void 0),n("MainEvent",(function(){})).SHOW_TOAST="showToast",t._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts","./EventListener.ts","./GameEvent.ts","./MonsterEvent.ts","./MonsterModel.ts","./ChapterEventModel.ts","./MonsterData.ts","./HeroData.ts","./GameDefine.ts","./SkillModel.ts","./BuffModel.ts","./MonsterBuffData.ts","./Util.ts","./BuffObj.ts","./SkillUpgradeData.ts"],(function(t){var e,i,s,n,o,r,h,a,c,m,l,u,f,d,g,p,v,M,C,E,y,H,S,A,b,k,B,P,T,_,R,D,w,O,I,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,h=t.AnimationComponent,a=t.v3,c=t.Vec3,m=t.Sprite,l=t.Color,u=t.UITransform,f=t.Animation,d=t.CircleCollider2D,g=t.Vec2,p=t.color,v=t.tween},function(t){M=t.default},function(t){C=t.PoolManager},function(t){E=t.EventListener},function(t){y=t.GameEvent},function(t){H=t.MonsterEvent},function(t){S=t.MonsterAmin,A=t.MonsterFeatureType,b=t.MonsterObj,k=t.MonsterBulletObj},function(t){B=t.MonsterType},function(t){P=t.MonsterData},function(t){T=t.HeroData},function(t){_=t.GameDefine},function(t){R=t.DamageType},function(t){D=t.BuffType},function(t){w=t.MonsterBuffData},function(t){O=t.Util},function(t){I=t.BuffObj},function(t){N=t.SkillUpgradeData}],execute:function(){var x,F,K,U,j;o._RF.push({},"1634eQBtIVM3bFh1eHG/Url","MonsterBase",void 0);var z=r.ccclass,L=r.property,W=(t("MonsterBase",(x=z("MonsterBase"),F=L(h),x((j=e((U=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,s(e,"monsterAnim",j,n(e)),e.monsterHpItem=null,e.monsterShadow=null,e.initStatus=!1,e.monsterCfg=null,e.monsterObj=null,e.moveSpeed=80,e.monsterId=101,e.monsterHp=10,e.curHp=10,e.shieldHp=0,e.atk=5,e.atkTime=0,e.dir=a(0,-1,0),e.scale=1,e.width=100,e.height=100,e.atkNumber=0,e.isMove=!0,e.curAnim="",e.curPos=new c,e.colliderPos=new c,e.boundBox=null,e.monsterKey="",e.isDie=!1,e.isCollider=void 0,e.isHurt=!1,e.isRepulse=!1,e._moveEffect=null,e._bossComing=!1,e._showHitTotalTime=.15,e}i(e,t);var o=e.prototype;return o.setMonsterBorn=function(){this.moveSpeed=P.instance.getMonsterSpeed(this.monsterCfg.speed),this.monsterId=this.monsterCfg.Id,this.atkNumber=0,this.monsterHp=this.monsterObj.addHp,this.atk=this.monsterObj.addAtk,this.curHp=this.monsterHp,this.dir=a(0,-1,0),this.curPos=this.node.getPosition(),2==this.monsterCfg.moveType&&(this.curPos.x<0?(this.dir.x=1,this.dir.y=-1,this.dir.normalize()):(this.dir.x=-1,this.dir.y=-1,this.dir.normalize())),this.isMove=!0,this.atkTime=0,this.monsterAnim.getComponent(m).color=new l(255,255,255),this.setMonsterSize();var t=this.monsterCfg.mType==B.BOSS?"boss":"monster";this.monsterKey=t+this.monsterId+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this.setMonsterBoundBox(),P.instance.addMonsterNodeByKey(this),this.isDie=!1,this.isHurt=!1,this.isRepulse=!1,E.emit(y.SHOW_MONSTER_HP,this),E.emit(y.SHOW_MONSTER_SHADOW,this),this.trigerBornMonsterFeature(),this.initStatus=!0},o.setMonsterSize=function(){this.scale=this.monsterCfg.iconScale,this.node.setScale(a(this.scale,this.scale,this.scale)),this.width=this.node.getChildByName("icon").getComponent(u).contentSize.width,this.height=this.node.getChildByName("icon").getComponent(u).contentSize.height},o.setMonsterAnim=function(t,e){this.curAnim!=t&&this.monsterCfg&&(this.monsterAnim.play(t),this.curAnim=t)},o.setMonsterAnimEvent=function(t){var e=this;this.monsterAnim.on(f.EventType.FINISHED,(function(i){var s=w.instance.calAttackPer(e.monsterKey);t&&e.attackHero(e.atk*(100+s)/100),e.setMonsterAnim(S.Move)}))},o.trigerBornMonsterFeature=function(){for(var t=0;t<this.monsterCfg.features.length;t++){var e=this.monsterCfg.features[t];if(e.buffId){var i=e.buffId,s=w.instance.getBuffCfgById(i);s.type==D.BUFF_SHIELD&&(this.shieldHp=Math.ceil(this.monsterHp*e.hpPer/100));var n=new I;n.init(this.monsterKey,0,0,s),E.emit(y.SHOW_MONSTER_BUFF,this,n)}}},o.trigerDieMonsterFeature=function(){},o.trigerAttackMonsterFeature=function(){this.atkNumber++;for(var t=0;t<this.monsterCfg.features.length;t++){var e=this.monsterCfg.features[t];if(e.type==A.FEATURE_SPLIT_UNDERATTAK&&1==this.atkNumber){var i=this.curPos.x+30*Math.random(),s=this.curPos.y+50*Math.random(),n=new c(i,s,0),o=new b;o.id=e.monsterId,o.addHp=e.hpPer*this.monsterHp,o.addAtk=e.atkPer*this.atk,E.emit(H.CREATE_REBIRTH_MONSTER,o,n,e.count)}}},o.attackHero=function(t){E.emit(y.HERO_HURT,t)},o.getColliderPos=function(){var t=this.curPos.clone(),e=this.boundBox.offset;return t.x+=e.x,t.y+=e.y,t},o.setMonsterBoundBox=function(){this.boundBox=this.node.getComponent(d),this.boundBox.radius=this.monsterCfg.colliderRadius;var t=this.monsterCfg.colliderOffset?this.monsterCfg.colliderOffset.split("|"):["0","0"];this.boundBox.offset=new g(Number(t[0]),Number(t[1]))},o.getBoundBoxCircle=function(){return this.boundBox instanceof d?this.boundBox.radius:20},o.monsterMoveFrame=function(t){if(!this.isRepulse){if(w.instance.isFreezed(this.monsterKey))return;if(this.isMove){var e=w.instance.calMoveSpeed(this.monsterKey),i=this.moveSpeed*(e>80?20:100-e)/100;this.setMonsterAnim(S.Move);var s=this.node.getPosition(),n=this.dir.clone();2==this.monsterCfg.moveType&&(this.curPos.x<-_.viewWidth/2+this.width*this.scale?(n.x=1,n.y=-1,this.dir=n.normalize()):this.curPos.x>_.viewWidth/2-this.width*this.scale&&(n.x=-1,n.y=-1,this.dir=n.normalize()));var o=n.multiply(a(i*t,i*t,0)),r=s.add(o);this.node.setPosition(r),this.curPos=r,this.monsterCfg.mType==B.BOSS&&!this._bossComing&&r.y<_.viewHeight/2-_.battleMapDownPosy&&(this._bossComing=!0,E.emit(y.SHOW_BOSS_COMING)),this.isMove=T.instance.checkInHeroRange(new g(r.x,r.y),this.monsterCfg.range,this)}else this.atkTime-=t,this.atkTime<=0&&(this.onAttackSkillEffect(),this.atkTime=this.monsterCfg.attackInterval)}},o.onAttackSkillEffect=function(){var t=this;if(this.initStatus)return this.monsterCfg.bulletId?(this.setMonsterAnim(S.Atk,!1),this.setMonsterAnimEvent(!1),void this.scheduleOnce((function(){if(t.initStatus&&t.monsterCfg){var e=new k;e.monsterObj=O.clone(t.monsterObj),e.monsterCfg=O.clone(t.monsterCfg),e.pos=t.getFirePos(),e.targetPos=T.instance.heroPoint;var i=w.instance.calAttackPer(t.monsterKey),s=t.atk*(100+i)/100;e.damage=s,E.emit(H.MONSTER_CREATE_BULLET,e)}}),.01)):(this.setMonsterAnim(S.Atk,!1),void this.setMonsterAnimEvent(!0))},o.getFirePos=function(){var t=this.node.getPosition();return new c(t.x,t.y+this.height/4*this.scale,0)},o.insertRectCircleObj=function(t){this.initStatus&&E.emit(y.INSERT_QUARD_TREE_RECT_CIRCLE,this.monsterKey,this,this.boundBox)},o.onAttacked=function(t){if(this.initStatus){var e=0,i=R.NORMAL,s=t.skillObj;if(s.critNum>0&&t.releaseTimes%s.critNum==0)e=s.critDamagePer,i=R.CRIT;else{var n=s.critPer+w.instance.calCritPer(this.monsterKey,s.Id);O.randomHit(n)&&(e=s.critDamagePer,i=R.CRIT)}var o=w.instance.calDamagePer(this.monsterKey,s.Id),r=this.monsterCfg.mType==B.BOSS?s.bossDamagePer:0,h=s.damage*(100+s.damagePer+s.damageAddPer+e+o+r+T.instance.damagePer)/100;this.trigerAttackMonsterFeature(),this.attacked(h,i,s.weaponId,s.level),this.isDie||w.instance.createDebuffs(this.monsterKey,t,this)}},o.attacked=function(t,e,i,s){if(void 0===e&&(e=0),t>0&&!this.isDie){var n=Math.ceil(t);if(this.shieldHp>0&&(this.shieldHp>=n?(this.shieldHp-=n,E.emit(y.CREATE_DAMAGER_NUM,this.getColliderPos(),n,e,i,s),n=0):(n-=this.shieldHp,this.shieldHp=0),0==n))return;if(this.curHp-=n,this.monsterHpItem&&this.monsterHpItem.setMonsterHp(this.curHp,this.monsterHp),E.emit(y.CREATE_DAMAGER_NUM,this.getColliderPos(),n,e,i,s),this.curHp<=0){this.curHp=0,this.isDie=!0;var o=this.monsterCfg.exp*(100+N.instance.getExpUpgradeSkill())/100,r=O.clone(this.monsterCfg);this.clear(),w.instance.onMonsterDie(this.monsterKey),E.emit(H.MONSTER_DIE,r,this.curPos,o,this.monsterHp,this.atk)}else this.setMonsterHurtEffect(),this.playHit()}},o.playHit=function(){var t=this.monsterAnim.getComponent(m);t.color=p(255,255,255,1);var e=p(255,255,255,50);v(t).to(this._showHitTotalTime,{},{onUpdate:function(t,i){e=p(255,255,255,50*i),t.color=e}}).call((function(){e=p(255,255,255,255),t.color=e})).start()},o.setMonsterHurtEffect=function(t){var e=this;if(void 0===t&&(t=.3),!this.isDie&&!this.isHurt){this.isHurt=!0;var i=this.monsterAnim.getComponent(m);i.color=(new l).fromHEX("FF4B4B"),this.scheduleOnce((function(){e.isHurt=!1,i.color=new l(255,255,255)}),t)}},o.setMonsterHurtMoveEffect=function(t,e,i){if(t.length){var s=t[0],n=Number(s[0]),o=Number(s[1]),r=Number(s[2]),h=new W;switch(h.speed=o,h.time=r,n){case 1:h.dir=e;break;case 2:var a=new c;c.subtract(a,this.getColliderPos(),i),h.dir=a.normalize();break;case 3:h.dir=e}this._moveEffect=h,this.isRepulse=!0}},o.moveRepulseEffectFrame=function(t){if(this.isRepulse&&this._moveEffect)if(this._moveEffect.time-=t,this._moveEffect.time<=0){this.isRepulse=!1,this._moveEffect=null;var e=this.node.getPosition();this.isMove=T.instance.checkInHeroRange(new g(e.x,e.y),this.monsterCfg.range,this)}else{var i=this.node.getPosition();if(i.y>_.viewHeight/2+this.monsterAnim.node.getComponent(u).height/2){this.isRepulse=!1,this._moveEffect=null;var s=this.node.getPosition();return void(this.isMove=T.instance.checkInHeroRange(new g(s.x,s.y),this.monsterCfg.range,this))}var n=this._moveEffect.dir,o=this._moveEffect.speed,r=n.multiply(a(o*t,o*t,0)),h=i.add(r);if(Math.abs(h.x)>_.viewWidth/2-this.monsterAnim.node.getComponent(u).width/2)r=new c(0,1,0).multiply(a(o*t,o*t,0)),h=i.add(r);this.node.setPosition(h),this.curPos=h}},o.checkColliderCount=function(){},o.updateSkillDamageAttackInterval=function(){},o.clear=function(){this.unscheduleAllCallbacks(),E.emit(y.SHOW_MONSTER_DIE_EFFECT,this.node.getPosition()),this.monsterShadow&&this.monsterShadow.clear(),this.monsterCfg&&this.monsterCfg.mType==B.BOSS&&(P.instance.killBossNum=1),this.initStatus=!1,this.monsterCfg=null,this.monsterObj=null,this.monsterHpItem=null,this.monsterShadow=null,this.isMove=!0,this.isHurt=!1,this.isRepulse=!1,P.instance.killNum=1,E.emit(y.DELETE_QUARD_TREE_OBJ,this.monsterKey),P.instance.deleteNearMonster(this.monsterKey),C.instance.putNodeByKey(this.node,this.monsterId.toString()),P.instance.deleteMonsterNodeByKey(this.monsterKey)},o.childUpdate=function(t){},e}(M)).prototype,"monsterAnim",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=U))||K)),t("MoveEffect",(function(){this.speed=void 0,this.time=void 0,this.dir=void 0})));o._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBuffData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./EventListener.ts","./Util.ts","./BuffModel.ts","./GameEvent.ts","./BuffObj.ts","./SkillUpgradeData.ts"],(function(e){var t,f,s,n,i,u,a,r,b,h,c;return{setters:[function(e){t=e.createClass},function(e){f=e.cclegacy},function(e){s=e.CfgMgr},function(e){n=e.EventListener},function(e){i=e.Util},function(e){u=e.BuffCfg,a=e.BuffSkillType,r=e.BuffType},function(e){b=e.GameEvent},function(e){h=e.BuffObj},function(e){c=e.SkillUpgradeData}],execute:function(){f._RF.push({},"ba55fiXIBhI+oJaZyBsiEiB","MonsterBuffData",void 0),e("MonsterBuffData",function(){function e(){this._debuffObjs=new Map,this._debuffItems=new Map,this._buffObjs=new Map}var f=e.prototype;return f.getBuffCfgById=function(e){return s.getDataById(new u,e)},f.createDebuffs=function(e,t,f){var s=this,u=new Map,r=new Map;this._debuffObjs.has(e)&&((u=this._debuffObjs.get(e)).forEach((function(e,t){e.isClear&&u.delete(t)})),this._debuffObjs.set(e,u)),this._debuffItems.has(e)&&(r=this._debuffItems.get(e)),u=new Map,this._debuffObjs.has(e)&&(u=this._debuffObjs.get(e));for(var c=t.skillObj,o=new Map,l=0;l<c.bulletBuffs.length;l++){var d=c.bulletBuffs[l],g=this.getBuffCfgById(d);if(g.skillType==a.DEBUFF_MONSTER_UP_TYPE){var _=new Array;o.has(g.type)&&(_=o.get(g.type)),_.push(g),o.set(g.type,_)}}for(var p=function(){var t=c.bulletBuffs[y],a=c.Id+"|"+t,l=i.clone(s.getBuffCfgById(t));if(0==l.skillType)return 0;var d=l.probability;o.has(l.type)&&o.get(l.type).forEach((function(e){d+=e.probability}));if(d>0&&!i.randomHit(d))return 0;if(u.has(a)){var g=u.get(a);if(g.reset(l,c.damage),g.isFullLayer()||g.layer++,r.has(a))o.has(l.type)&&g.append(o.get(l.type)),r.get(a).reset(g)}else{var _=i.clone(s.getBuffCfgById(t)),p=new h;p.init(e,c.weaponId,c.Id,_,c.damage),u.set(a,p),p.buffCfg.res&&(o.has(_.type)&&p.append(o.get(_.type)),n.emit(b.CREATE_MONSTER_DEBUFF,f,p))}},y=0;y<c.bulletBuffs.length;y++)p();this._debuffObjs.set(e,u)},f.addBuffItem=function(e,t){var f=new Map;if(this._debuffItems.has(e.monsterKey)){f=this._debuffItems.get(e.monsterKey);var s=e.skillId+"|"+e.buffCfg.Id;f.set(s,t)}else{var n=e.skillId+"|"+e.buffCfg.Id;f.set(n,t)}if(this._debuffItems.set(e.monsterKey,f),e.buffCfg.type==r.BUFF_INSPIRE_SELF||e.buffCfg.type==r.BUFF_SPEED_UP){var i=[];this._buffObjs.has(e.monsterKey)&&(i=this._buffObjs.get(e.monsterKey)),i.push(e),this._buffObjs.set(e.monsterKey,i)}},f.createBuff=function(e,t){},f.calAttackPer=function(e){var t=0;if(this._buffObjs.has(e))for(var f=this._buffObjs.get(e),s=0;s<f.length;s++)t+=f[s].getAttackPer();return t},f.calMoveSpeed=function(e){var t=0;this._debuffObjs.has(e)&&this._debuffObjs.get(e).forEach((function(e){t+=e.getSpeedDec()}));(t+=c.instance.getMonsterSpeedUpgradeSkill(),this._buffObjs.has(e))&&this._buffObjs.get(e).forEach((function(e){t-=e.getSpeedDec()}));return t},f.calDamagePer=function(e,t){var f=0;this._debuffObjs.has(e)&&this._debuffObjs.get(e).forEach((function(e){f+=e.getDamagePer(t)}));return f},f.calCritPer=function(e,t){var f=0;if(this._debuffObjs.has(e)){var s=this._debuffObjs.get(e),n=!1;s.forEach((function(e){e.isCritInjured()&&(n=!0)})),n&&s.forEach((function(e){f+=e.getCritPer(t)}))}return f},f.isFreezed=function(e){var t=!1;this._debuffObjs.has(e)&&this._debuffObjs.get(e).forEach((function(e){e.isFreeze()&&(t=!0)}));return t},f.onMonsterDie=function(e){this._debuffItems.has(e)&&(this._debuffItems.get(e).forEach((function(e){e.clear()})),this._debuffItems.delete(e)),this._debuffObjs.has(e)&&this._debuffObjs.delete(e),this._buffObjs.has(e)&&this._buffObjs.delete(e)},f.clear=function(){this._debuffItems.forEach((function(e){e.forEach((function(e){e.clear()}))})),this._debuffObjs.clear(),this._buffObjs.clear()},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,f._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBuffItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts","./GameDefine.ts","./BuffModel.ts","./SkillModel.ts","./BuffObj.ts","./MonsterData.ts","./EventListener.ts","./GameEvent.ts","./MonsterBuffData.ts","./GameData.ts"],(function(t){var i,e,f,s,n,a,u,r,h,o,_,c,g,b,d,l,m,p,C,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,f=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,u=t.AnimationComponent,r=t.Animation,h=t.v3},function(t){o=t.default},function(t){_=t.PoolManager},function(t){c=t.GameDefine},function(t){g=t.BuffType},function(t){b=t.DamageType},function(t){d=t.BuffObj},function(t){l=t.MonsterData},function(t){m=t.EventListener},function(t){p=t.GameEvent},function(t){C=t.MonsterBuffData},function(t){y=t.GameData}],execute:function(){var B,M,v,S,D;n._RF.push({},"e4fbbontQZJQKqOdVEUPix9","MonsterBuffItem",void 0);var O=a.ccclass,F=a.property;t("MonsterBuffItem",(B=O("MonsterBuffItem"),M=F(u),B((D=i((S=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,f(i,"buffAnim",D,s(i)),i.buffKey="",i.initStatus=!1,i._cd=0,i._initCd=0,i._initRelease=!0,i._com=null,i._buffObj=null,i._damagePer=0,i._buffCfg=null,i._during=0,i._inspireMonsterData=new Map,i._waveId=0,i}e(i,t);var n=i.prototype;return n.init=function(t,i){this._com=t,this.buffKey=i.buffCfg.Id+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this._buffCfg=i.buffCfg,this._buffObj=i,this._cd=this._buffCfg.cd,this._initCd=this._buffCfg.cd,this._during=this._buffCfg.during,this._damagePer=this._buffCfg.damagePer,this._inspireMonsterData.set(this._buffObj.monsterKey,1),this.setBuffSize();var e=this.buffAnim.getComponent(r);e.clips.length>0&&e.play("effect"),this._waveId=y.instance.waveId,this.initStatus=!0},n.setBuffSize=function(){var t=this._buffObj.buffCfg.scale;if(0==t){var i=this._com.width,e=this._com.height;t=Math.max(i,e)/100*this._com.scale}this.node.setScale(h(t,t,t))},n.reset=function(t){this._buffCfg=t.buffCfg,this._buffObj=t,this._damagePer=this._buffCfg.damagePer,this._initCd=this._buffCfg.cd,this._during=this._buffCfg.during},n.updateMonsterBuff=function(t){if(c.gameStart&&this.initStatus&&this._buffCfg)if(this._buffCfg.type==g.DEBUFF_DAMAGE_ADD)this._initRelease&&(this._cd-=t,this._cd<0&&(this._com.attacked(this._damagePer*this._buffObj.damage/100,b.DEBUFF,this._buffObj.weaponId,0),this._cd=this._initCd));else if(this._buffCfg.type==g.BUFF_SHIELD)this._com.shieldHp<=0&&this.clear();else if(this._buffCfg.type==g.BUFF_INSPIRE_OTHER)for(var i=l.instance.getNearMonsterArr(this._buffObj.monsterKey,this._buffCfg.range,Array.from(this._inspireMonsterData.keys())),e=0;e<i.length;e++){var f=i[e];if(!this._inspireMonsterData.has(f.monsterKey)){this._inspireMonsterData.set(f.monsterKey,1);var s=this._buffCfg.subBuffId,n=C.instance.getBuffCfgById(s),a=new d;a.init(f.monsterKey,0,0,n,0,this._buffObj.monsterKey),m.emit(p.SHOW_MONSTER_BUFF,f,a)}}else if(this._buffCfg.type==g.BUFF_INSPIRE_SELF){l.instance.checkWithRangeMonster(this._buffObj.monsterKey,this._buffObj.targetMonsterKey,this._buffCfg.range)||this.clear()}c.gameStart&&this.initStatus&&this._buffCfg&&this._buffCfg.during>0&&this.duringTriggleClearByType(t)},n.updateHeroBuff=function(t){if(c.gameStart&&this.initStatus&&this._buffCfg){if(this._buffCfg.type==g.BUFF_HERO_FIRE&&(this._cd-=t,this._cd<0)){var i=this._damagePer*this._buffObj.damage/100;m.emit(p.HERO_HURT,i),this._cd=this._initCd}this._buffCfg.during>0&&this.duringTriggleClearByType(t),this._waveId!=y.instance.waveId&&this.clear()}},n.setBuffMove=function(){if(this.initStatus&&this._buffCfg.type!=g.BUFF_HERO_FIRE){var t=this._com.getColliderPos(),i=this._com.height*this._com.scale;this.node.setPosition(t.x,t.y+i/4,0)}},n.duringTriggleClearByType=function(t){this._during-=t,this._during<=0&&this.clear()},n.clear=function(){this.initStatus&&(this.initStatus=!1,this._buffObj&&this._buffObj.clear(),this._inspireMonsterData.clear(),this._buffCfg=null,_.instance.putNode(this.node))},n.childUpdate=function(t){c.gameStart&&(this._com?(this.updateMonsterBuff(t),this.setBuffMove()):this.updateHeroBuff(t))},i}(o)).prototype,"buffAnim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=S))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBulletBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./BaseComponent.ts","./EventListener.ts","./GameEvent.ts","./Util.ts","./GameDefine.ts","./SkillModel.ts"],(function(t){var e,i,n,s,o,l,a,r,u,c,d,h,v,g,f,p,m,B,S,y,b,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){l=t.cclegacy,a=t._decorator,r=t.Node,u=t.Vec3,c=t.v2,d=t.v3,h=t.tween,v=t.Vec2,g=t.misc,f=t.Rect},function(t){p=t.PoolManager},function(t){m=t.default},function(t){B=t.EventListener},function(t){S=t.GameEvent},function(t){y=t.Util},function(t){b=t.GameDefine},function(t){_=t.AtkObj}],execute:function(){var k,E,x,w,M;l._RF.push({},"b4314RWAahP+bxxeivFUqgQ","MonsterBulletBase",void 0);var P=a.ccclass,R=a.property;t("MonsterBulletBase",(k=P("MonsterBulletBase"),E=R(r),k((M=e((w=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(e,"icon",M,s(e)),e.monsterBulletObj=null,e.initStatus=!1,e.bulletId=101,e.during=10,e.damageR=30,e.damageInterval=void 0,e.damageTimes=void 0,e.isCollider=void 0,e.LoopCount=0,e.moveSpeed=1500,e.initSpeed=1500,e.isEasing=!1,e.scale=1,e._dir=new u,e.curPos=new u,e.targetPos=new u,e.quadBoundBox=null,e.boundBox=null,e._skillBulletKey="",e.type=0,e}i(e,t);var l=e.prototype;return l.initMonsterBullet=function(t,e){void 0===e&&(e=0);var i=this.node.getPosition(),n=new u;this.targetPos=t.clone(),u.subtract(n,t,i);var s=y.vector_to_angle(c(n.x,n.y)),o=y.angle_to_vector(s+e);n.set(o.x,o.y),this._dir=n.normalize(),this.isEasing=!1,this.curPos=this.node.getPosition(),this.scale=1,this.setSkillSize(),this.during=10,this.moveSpeed=this.getSkillMoveSpeedByType(),this.initSpeed=this.moveSpeed,this.damageTimes=1,this.damageInterval=0,this.isCollider=!0,this.LoopCount=0,this._skillBulletKey="monsterBullet"+this.bulletId+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this.setSkillBulletAnim(),this.initStatus=!0},l.setSkillSize=function(){this.node.setScale(d(this.scale,this.scale,this.scale))},l.setSkillBulletAnim=function(){},l.easingSpeed=function(t,e){var i=this;if(this.isEasing){var n=new function(){this.t=void 0};n.t=0,h(n).to(t,{t:1},{onUpdate:function(t,e){var n=c(0,0),s=c(0,.4),o=c(.2,1),l=c(1,1),a=(n.x,s.x,o.x,l.x,n.y*(1-e)*(1-e)*(1-e)+3*s.y*e*(1-e)*(1-e)+3*o.y*e*e*(1-e)+l.y*e*e*e);i.moveSpeed=i.initSpeed+500*a}}).start()}},l.setBulletMove=function(t){if(this.monsterBulletObj.monsterCfg.bulletSpeed>0){var e=this.node.getPosition(),i=d(this._dir.x,this._dir.y,0).multiply(d(this.moveSpeed*t,this.moveSpeed*t,0)),n=e.add(i);this.node.setPosition(n),this.curPos=n,this.setBulletAngle()}},l.setBulletAngle=function(){var t=new v(this._dir.x,this._dir.y).signAngle(new v(0,1)),e=g.radiansToDegrees(t);this.node.angle=-e},l.updateSkillBulletScreen=function(t){var e=new f(-b.viewWidth/2,-b.viewHeight/2,b.viewWidth,b.viewHeight),i=this.curPos;e.contains(c(i.x,i.y))||this.clear()},l.insertRectCircleObj=function(){this.initStatus&&B.emit(S.INSERT_QUARD_TREE_RECT_CIRCLE,this._skillBulletKey,this,this.quadBoundBox,1)},l.onAttacked=function(){},l.getSkillMoveSpeedByType=function(){return this.monsterBulletObj.monsterCfg.bulletSpeed},l.onEnable=function(){},l.onDisable=function(){},l.clear=function(){this.initStatus=!1,this.boundBox=null,this.quadBoundBox=null,this.monsterBulletObj.callback&&this.monsterBulletObj.callback(),B.emit(S.DELETE_QUARD_TREE_OBJ,this._skillBulletKey),p.instance.putNode(this.node)},l.childUpdate=function(t){},o(e,[{key:"atkObj",get:function(){var t=new _;return t.atk=Math.floor(y.getRandomInt(5,15)),t}}]),e}(m)).prototype,"icon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=w))||x));l._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBulletItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MonsterBulletBase.ts","./GameDefine.ts","./HeroBase.ts","./Util.ts","./MonsterBuffData.ts","./BuffObj.ts","./GameEvent.ts","./EventListener.ts"],(function(t){var e,n,o,i,s,r,u,l,a,f,c,B,m,h,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Collider2D,s=t.Contact2DType,r=t.Vec3,u=t.director},function(t){l=t.MonsterBulletBase},function(t){a=t.GameDefine},function(t){f=t.HeroBase},function(t){c=t.Util},function(t){B=t.MonsterBuffData},function(t){m=t.BuffObj},function(t){h=t.GameEvent},function(t){p=t.EventListener}],execute:function(){var d;n._RF.push({},"1608dgTtjdKY5HYxesbur1o","MonsterBulletItem",void 0);var v=o.ccclass;o.property,t("MonsterBulletItem",v("MonsterBulletItem")(d=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.init=function(t,e){this.initStatus=!1,this.monsterBulletObj=t,this.initMonsterBullet(e)},o.start=function(){var t=this.getComponent(i);t&&t.on(s.BEGIN_CONTACT,this.onBeginContact,this)},o.onBeginContact=function(t,e,n){e.node.getComponent(f).onAttacked(this.monsterBulletObj.damage);var o=e.node.getComponent(f).node.position;this.onAttack(new r(o.x,o.y+100,o.z)),this.clear()},o.onAttack=function(t){var e=this.monsterBulletObj.monsterCfg;if(e&&e.bulletBuffs)for(var n=0;n<e.bulletBuffs.length;n++){var o=e.bulletBuffs[n],i=(e.Id,c.clone(B.instance.getBuffCfgById(o)));if(0!=i.skillType){var s=i.probability;if(!(s>0)||c.randomHit(s)){var r=new m;r.init("monsterKey",0,0,i,this.monsterBulletObj.damage),p.emit(h.CREATE_HERO_DEBUFF,r,t)}}}},o.childUpdate=function(t){if(a.gameStart&&this.initStatus){u.getTotalFrames();this.updateSkillBulletScreen(t),this.setBulletMove(t)}},n}(l))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ChapterEventModel.ts","./CfgMgr.ts","./Util.ts","./MonsterModel.ts","./GameDefine.ts"],(function(t){var e,n,s,r,i,a,o,h,u,c,l;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,s=t.Vec2,r=t.v3,i=t.view,a=t.Vec3},function(t){o=t.ChapterEventCfg},function(t){h=t.CfgMgr},function(t){u=t.Util},function(t){c=t.MonsterCfg},function(t){l=t.GameDefine}],execute:function(){n._RF.push({},"43feaU49+ZAJb6zeIrQqFaT","MonsterData",void 0),t("MonsterData",function(){function t(){this._nearMonsterData=new Map,this._monsterNodeMap=new Map,this._maxCheckCont=3,this._brushMonsterPoint=new Map,this._killNum=0,this._killBossNum=0,this._waveKillNum=0,this._waveKillBossNum=0,this._brushMonsterEventData=[],this._wave=0,this._maxWave=10,this._gameTime=0,this._chapterTime=0,this._chapterId=1}var n=t.prototype;return n.init=function(t){this._chapterId=t;for(var e=h.getCfgDataArray(new o),n=0;n<e.length;n++)e[n].chapter==t&&this._brushMonsterEventData.push(u.clone(e[n]));this.maxWave=this._brushMonsterEventData[this._brushMonsterEventData.length-1].wave},n.setNearMonster=function(t,e,n){var s=new Map;this._nearMonsterData.has(t)?(s=this._nearMonsterData.get(t)).size<this._maxCheckCont&&this.addSkillRangeMonster(e,n,s):(this._nearMonsterData.set(t,s),this.addSkillRangeMonster(e,n,s))},n.addSkillRangeMonster=function(t,e,n){for(var r=Array.from(this._monsterNodeMap.values()),i=0;i<r.length;i++){var a=r[i],o=a.curPos,h=a.monsterKey;s.squaredDistance(t,o)<=e*e&&n.size<this._maxCheckCont&&n.set(h,a)}},n.getNearMonster=function(t,e){var n=[];if(this._nearMonsterData.has(t))for(var s=Array.from(this._nearMonsterData.get(t).values()),r=0;r<s.length;r++){var i=s[r];i&&i.monsterKey!=e&&n.push(i.curPos)}return n},n.deleteNearMonster=function(t){this._nearMonsterData.forEach((function(e,n){e.has(t)&&e.delete(t)}))},n.clearNearMonster=function(){this._nearMonsterData.clear()},n.getNearMonsterTarget=function(t){var e=new Map;return this._nearMonsterData.has(t)&&(e=this._nearMonsterData.get(t)),e},n.checkNearMonsterBySkill=function(t){return!!this._nearMonsterData.has(t)&&!!this._nearMonsterData.get(t).size},n.addMonsterNodeByKey=function(t){t&&this._monsterNodeMap.set(t.monsterKey,t)},n.deleteMonsterNodeByKey=function(t){this._monsterNodeMap.delete(t)},n.checkSkillNearMonster=function(t,e){var n=!1;if(this._monsterNodeMap.size)for(var r=Array.from(this._monsterNodeMap.values()),i=0;i<r.length;i++){var a=r[i];if(a&&a.initStatus){var o=a.curPos;if(s.squaredDistance(t,o)<=e*e){n=!0;break}}}return n},n.checkWithRangeMonster=function(t,e,n){if(this._monsterNodeMap.size&&this._monsterNodeMap.has(e)&&this._monsterNodeMap.has(t)){var r=this._monsterNodeMap.get(t),i=this._monsterNodeMap.get(e);if(r&&r.initStatus&&i&&i.initStatus)if(s.squaredDistance(r.curPos,i.curPos)<n*n)return!0}return!1},n.getNearMonsterArr=function(t,e,n){var r=[];if(this._monsterNodeMap.size&&this._monsterNodeMap.has(t))for(var i=this._monsterNodeMap.get(t).curPos,a=Array.from(this._monsterNodeMap.values()),o=0;o<a.length;o++){var h=a[o];if(!(n.indexOf(h.monsterKey)>=0||t==h.monsterKey)&&(h&&h.initStatus)){var u=h.curPos,c=u.x-i.x,l=u.y-i.y;if(!(c>e||c<-e)||!(l>e||l<-e))s.squaredDistance(i,u)<e*e&&r.push(h)}}return r},n.setBrushMonsterPoint=function(t,e){this._brushMonsterPoint.set(t,e)},n.setBossBrushPoint=function(t,e){},n.getAppointMonsterPoint=function(t){void 0===t&&(t=new s(0,100));var e=this._brushMonsterPoint.size,n=Math.floor(Math.random()*e),r=this._brushMonsterPoint.get(n),i=u.getRectRandPos(r);return i.x+=t.x,i.y+=t.y,i},n.getMonsterBrushPoint=function(t,e){void 0===e&&(e=new s(60,50));var n=t.x+Math.random()*e.x,i=t.y+Math.random()*e.y;return r(n,i,0)},n.getBossBrushPoint=function(t){void 0===t&&(t=new s(100,100));var e=l.viewHeight/2+Math.random()*t.x;return r(0,e,0)},n.getScreenUpRandPos=function(t){void 0===t&&(t=new s(100,50));var e=(l.viewWidth>i.getVisibleSize().width?i.getVisibleSize().width:l.viewWidth)-t.x,n=new a;return n.x=(Math.random()-.5)*e,n.y=l.viewHeight/2+Math.random()*t.y-l.battleMapDownPosy,n},n.getMonsterCfgById=function(t){return h.getDataById(new c,t)},n.getMonsterAtk=function(t){return 10},n.getMonsterHp=function(t){return t},n.getMonsterSpeed=function(t){return t},n.revive=function(){for(var t=h.getCfgDataArray(new o),e=0;e<t.length;e++)t[e].chapter==this._chapterId&&t[e].wave==this._wave&&this._brushMonsterEventData.unshift(u.clone(t[e]));this.clearNearMonster(),this._monsterNodeMap.clear()},n.clear=function(){this._nearMonsterData.clear(),this._monsterNodeMap.clear(),this._brushMonsterPoint.clear(),this._killNum=0,this._gameTime=0,this._killBossNum=0,this._waveKillNum=0,this._waveKillBossNum=0,this._wave=0,this._maxWave=10,this._brushMonsterEventData=[]},e(t,[{key:"gameTime",get:function(){return this._gameTime},set:function(t){this._gameTime+=t}},{key:"chapterTime",get:function(){return this._chapterTime},set:function(t){this._chapterTime+=t}},{key:"wave",get:function(){return this._wave},set:function(t){this._wave=t,this._waveKillNum=0,this._waveKillBossNum=0,this._chapterTime=0}},{key:"maxWave",get:function(){return this._maxWave},set:function(t){this._maxWave=t}},{key:"killBossNum",get:function(){return this._killBossNum},set:function(t){this._killBossNum+=t,this._waveKillBossNum+=t}},{key:"waveKillBossNum",get:function(){return this._waveKillBossNum}},{key:"killNum",get:function(){return this._killNum},set:function(t){this._killNum+=t,this._waveKillNum+=t}},{key:"waveKillNum",get:function(){return this._waveKillNum}},{key:"brushMonsterEventData",get:function(){return this._brushMonsterEventData}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterEvent.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"57d4aClDBhKubGr6xXTpywI","MonsterEvent",void 0);var r=e("MonsterEvent",(function(){}));r.CREATE_MONSTER="createMonster",r.CREATE_REBIRTH_MONSTER="createRebirthMonster",r.MONSTER_DIE="monsterDie",r.ADD_NEAR_MONSTER="addNearMonster",r.MONSTER_CREATE_BULLET="monsterCreateBullet",t._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterHpItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts","./GameDefine.ts"],(function(t){var e,n,o,i,r,s,a,c,p,u,l,h,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.UITransform,p=t.ProgressBar,u=t.UIOpacity,l=t.tween},function(t){h=t.default},function(t){m=t.PoolManager},function(t){f=t.GameDefine}],execute:function(){var d,g,b,y,C,M,H;r._RF.push({},"237f5e5BC5FArB67QHuARAX","MonsterHpItem",void 0);var v=s.ccclass,w=s.property;t("MonsterHpItem",(d=v("MonsterHpItem"),g=w(a),b=w(a),d((M=e((C=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"barAnim",M,i(e)),o(e,"bar",H,i(e)),e._com=null,e}n(e,t);var r=e.prototype;return r.init=function(t){this.barAnim.getComponent(c).width=this.node.getComponent(c).width,this.getComponent(p).progress=1,this.getComponent(u).opacity=0,this._com=t},r.setMonsterHp=function(t,e){var n=this;t<=0&&(t=0),this.unschedule(this.setMonsterHide),this.getComponent(u).opacity=255,this.getComponent(p).progress=t/e;var o=this.bar.getComponent(c).width,i=this.barAnim.getComponent(c).width-o;this.scheduleOnce(this.setMonsterHide,.5),l(this.barAnim.getComponent(c)).by(.2,{width:-i}).call((function(){t<=0&&n.clear()})).start()},r.setMonsterHide=function(){this.getComponent(u).opacity=0},r.setMonsterHpPos=function(){var t=this._com.getColliderPos(),e=this._com.node.getComponent(c).height;this.node.setPosition(t.x,t.y+2*e/3,0)},r.clear=function(){m.instance.putNode(this.node)},r.childUpdate=function(t){f.gameStart&&this._com&&this.setMonsterHpPos()},e}(h)).prototype,"barAnim",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(C.prototype,"bar",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MonsterBase.ts","./GameDefine.ts"],(function(t){var e,s,n,i,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy,n=t._decorator,i=t.director},function(t){r=t.MonsterBase},function(t){o=t.GameDefine}],execute:function(){var c;s._RF.push({},"15d32i74JZKNYfV93JUtcSJ","MonsterItem",void 0);var a=n.ccclass;n.property,t("MonsterItem",a("MonsterItem")(c=function(t){function s(){return t.apply(this,arguments)||this}e(s,t);var n=s.prototype;return n.init=function(t,e){this.monsterCfg=t,this.monsterObj=e,this.initStatus=!1,this.isDie=!1,this.setMonsterBorn()},n.childUpdate=function(t){if(o.gameStart&&this.initStatus){i.getTotalFrames();this.monsterMoveFrame(t),this.moveRepulseEffectFrame(t)}},s}(r))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./MonsterItem.ts","./ResourcesUtil.ts","./EventListener.ts","./MonsterEvent.ts","./BaseComponent.ts","./GameEvent.ts","./ChapterEventModel.ts","./MonsterModel.ts","./MonsterData.ts","./Constants.ts","./GameDefine.ts","./OpenPopupManager.ts","./SkillUpgradeData.ts","./GameData.ts","./PlayerData.ts","./GuideData.ts","./MonsterBuffData.ts"],(function(t){var e,n,r,s,i,a,o,u,l,h,c,f,m,d,M,p,_,E,v,g,P,b,C,T,A,S,N,R,I,B,D,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,o=t.Node,u=t.instantiate,l=t.Sprite,h=t.Vec3},function(t){c=t.PoolManager},function(t){f=t.MonsterItem},function(t){m=t.ResourcesUtil},function(t){d=t.EventListener},function(t){M=t.MonsterEvent},function(t){p=t.default},function(t){_=t.GameEvent},function(t){E=t.MonsterType},function(t){v=t.MonsterFeatureType,g=t.MonsterEventObj,P=t.MonsterObj},function(t){b=t.MonsterData},function(t){C=t.Constants},function(t){T=t.GameDefine},function(t){A=t.OpenPopupManager},function(t){S=t.SkillUpgradeData},function(t){N=t.GameData,R=t.GameState},function(t){I=t.PlayerData},function(t){B=t.GuideData,D=t.GuideStep},function(t){y=t.MonsterBuffData}],execute:function(){var O,L,U,G,w,F,k;i._RF.push({},"bc381bL0FRA+qOjTTLMP7lu","MonsterManager",void 0);var q=a.ccclass,H=a.property;t("MonsterManager",(O=q("MonsterManager"),L=H(o),U=H(o),O((F=e((w=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,r(e,"monsterParent",F,s(e)),r(e,"bulletParent",k,s(e)),e._monsterPrefabMap=new Map,e._brushMonsterEventArr=[],e._queueMonsterArr=[],e._curChapterEvent=null,e._curTotalNum=0,e._curKillNum=0,e._screenMonsterCount=0,e._schduleTime=1,e._bulletPrefabItemMap=new Map,e}n(e,t);var i=e.prototype;return i.init=function(){this._schduleTime=1,b.instance.init(T.gameChapterId)},i.setCurChapterEvent=function(){b.instance.brushMonsterEventData.length&&(this._curChapterEvent=b.instance.brushMonsterEventData.shift(),b.instance.wave=this._curChapterEvent.wave,this.setBrushMonsterEvent())},i.setBrushMonsterEvent=function(){this._curTotalNum=0,this._curKillNum=0;for(var t=this._curChapterEvent.monsters,e=0,n=0;n<t.length;n++){var r=t[n],s=r[0],i=r[1],a=r[2],o=r[3],u=r[4],l=Math.floor(u*i),h=0==l?0:Math.floor(i/l),c=i-l*(h=h>i?i:h);c=c>=1?c:0;var f=new g;f.hpUp=this._curChapterEvent.hpUp,f.monsterId=s,f.addHp=a,f.addAtk=o,f.cd=u,f.level=this._curChapterEvent.monsterLevel,f.startTime=e,f.secNum=h,f.diffNum=c,f.curNum=0,f.totalNum=i,this._brushMonsterEventArr.push(f),this._curTotalNum+=i,e+=l+1}},i.getBossEventByWeight=function(t){for(var e=0,n=0,r=0,s=[],i=0;i<t.length;i++){var a=t[i].split("|"),o=Number(a[4]);s.push(o),r+=o}var u=Math.floor(Math.random()*r),l=0;return s.some((function(t,r){if(n=e+t,u>=e&&u<n)return l=r,!0;e=n})),t[l]},i.onCreateMonster=function(t){for(var e=this,n=function(){if(e._queueMonsterArr.length){var t=e._queueMonsterArr.shift(),n=t.id,r=null,s=new h,i=b.instance.getMonsterCfgById(n);if(e._monsterPrefabMap.has(n))s=i.mType!=E.BOSS?b.instance.getScreenUpRandPos():b.instance.getBossBrushPoint(),r=c.instance.getNodeItemById(e._monsterPrefabMap.get(n),n.toString()),e.monsterParent.addChild(r),r.setPosition(s),r.getComponent(f).init(i,t);else{var a=C.monsterPath;m.getPrefab(a).then((function(n){e.loadMonsterRes(t,i,n)}))}}},r=0;r<t;r++)n()},i.loadMonsterRes=function(t,e,n,r){var s=this;void 0===r&&(r=null);var i=u(n),a=C.monsterIconPath+e.icon+"/spriteFrame";m.geSpriteFrame(a).then((function(n){i.getChildByName("icon").getComponent(l).spriteFrame=n,null==r&&(r=e.mType!=E.BOSS?b.instance.getScreenUpRandPos():b.instance.getBossBrushPoint()),s.monsterParent.addChild(i),i.setPosition(r),i.getComponent(f).init(e,t),s._monsterPrefabMap.set(e.Id,i)}))},i.onMonsterDie=function(t,e,n,r,s){this._curKillNum++,d.emit(_.UPDATE_MONSTER_PROGRESS,b.instance.killNum,n);var i=!1;if(t.features.forEach((function(t){if(t.type==v.FEATURE_SPLIT_DIE){i=!0;var n=new P;n.id=t.monsterId,n.addHp=t.hpPer*r,n.addAtk=t.atkPer*s,d.emit(M.CREATE_REBIRTH_MONSTER,n,e,t.count)}})),!i&&!this.monsterParent.children.length&&0==this._brushMonsterEventArr.length)if(b.instance.clearNearMonster(),this._curChapterEvent.wave>=b.instance.maxWave)T.gameOver=!0,T.gameStart=!1,A.instance.showGameWinPopup(),I.instance.battleWithWin(),N.instance.settleBattle(R.Success);else{var a=this._curChapterEvent.wave+1;if(this._curChapterEvent.box){T.gameWave=a;var o=N.instance.waveCoinAdd+S.instance.getGoldUpgradeSkill();this.scheduleOnce((function(){d.emit(_.GAME_BATTLE_NEXT_WAVE,a),d.emit(_.CREATE_DROP_BOX,e,o),B.instance.curStep==D.GUIDE_STEP9_SELECT_SKILL&&d.emit(_.GUIDE_BATTLE_ACTION)}),1)}else this.setCurChapterEvent(),d.emit(_.GAME_BATTLE_NEXT_WAVE,this._curChapterEvent.wave)}},i.triggleBrushMonsterEvent=function(t){if(b.instance.gameTime=t,b.instance.chapterTime=t,this._schduleTime-=t,this._schduleTime<=0)for(var e=0,n=this._brushMonsterEventArr.length;e<n;e++){var r=this._brushMonsterEventArr[e];if(r.curNum<r.totalNum){if(b.instance.chapterTime>=r.startTime){this._schduleTime=1;var s=r.secNum;r.diffNum&&(r.diffNum--,s+=1);for(var i=0;i<s;i++){var a=new P;a.id=r.monsterId,a.hpUp=r.hpUp,a.addAtk=r.addAtk,a.addHp=r.addHp,a.level=r.level,this._queueMonsterArr.push(a)}r.curNum+=s}}else this._brushMonsterEventArr.splice(e,1),e--,n--}},i.onAddNearMonster=function(t,e){},i.onCreateRebirthMonster=function(t,e,n){for(var r=this,s=function(){var n=t.id,s=null,i=b.instance.getMonsterBrushPoint(e),a=b.instance.getMonsterCfgById(n);if(r._monsterPrefabMap.has(n))s=c.instance.getNodeItemById(r._monsterPrefabMap.get(n),n.toString()),r.monsterParent.addChild(s),s.setPosition(i),s.getComponent(f).init(a,t);else{var o=C.monsterPath;m.getPrefab(o).then((function(e){r.loadMonsterRes(t,a,e,i)}))}},i=0;i<n;i++)s()},i.onCreateBullet=function(t){var e=this,n=null,r=t.monsterCfg.bulletId,s=t.monsterCfg.Id+"|"+r;if(this._bulletPrefabItemMap.has(s))n=c.instance.getNodeItemById(this._bulletPrefabItemMap.get(s),s.toString()),this.bulletParent.addChild(n),n.setPosition(t.pos),n.components[1].init(t,t.targetPos);else{var i=C.monsterBulletPath;m.getPrefab(i).then((function(r){var i=C.bulletPath+t.monsterCfg.bulletId+"/spriteFrame";m.getSpriteFrame(i).then((function(i){var a=(n=u(r)).getChildByName("icon").getComponent(l);a.spriteFrame=i,a.node.setScale(t.monsterCfg.bulletScale,t.monsterCfg.bulletScale),e.bulletParent.addChild(n),n.setPosition(t.pos),n.components[1].init(t,t.targetPos),e._bulletPrefabItemMap.set(s,n)}))}))}},i.onEnable=function(){d.on(M.CREATE_MONSTER,this.onCreateMonster,this),d.on(M.MONSTER_DIE,this.onMonsterDie,this),d.on(M.ADD_NEAR_MONSTER,this.onAddNearMonster,this),d.on(M.CREATE_REBIRTH_MONSTER,this.onCreateRebirthMonster,this),d.on(M.MONSTER_CREATE_BULLET,this.onCreateBullet,this)},i.onDisable=function(){d.off(M.CREATE_MONSTER,this.onCreateMonster,this),d.off(M.MONSTER_DIE,this.onMonsterDie,this),d.off(M.ADD_NEAR_MONSTER,this.onAddNearMonster,this),d.off(M.CREATE_REBIRTH_MONSTER,this.onCreateRebirthMonster,this),d.off(M.MONSTER_CREATE_BULLET,this.onCreateBullet,this)},i.setMonsterSort=function(){var t=this.monsterParent.children;t.sort((function(t,e){return Math.round(e.position.y)-Math.round(t.position.y)}));for(var e=0;e<t.length;e++)t[e].setSiblingIndex(e);this.monsterParent._updateSiblingIndex()},i.revive=function(){this._queueMonsterArr=[],this._brushMonsterEventArr=[],this._schduleTime=1,this._monsterPrefabMap.clear(),this._bulletPrefabItemMap.clear(),this.monsterParent.destroyAllChildren(),this.bulletParent.destroyAllChildren(),b.instance.revive(),y.instance.clear()},i.clear=function(){this._monsterPrefabMap.clear(),this._bulletPrefabItemMap.clear(),b.instance.clear(),y.instance.clear(),this._schduleTime=1,this._brushMonsterEventArr=[],this._queueMonsterArr=[],this._curChapterEvent=null,this.monsterParent.destroyAllChildren(),this.bulletParent.destroyAllChildren()},i.childUpdate=function(t){if(T.gameStart&&(this.triggleBrushMonsterEvent(t),this.setMonsterSort(),this._queueMonsterArr.length)){var e=this._queueMonsterArr.length>60?Math.ceil(this._queueMonsterArr.length/60):1;this.onCreateMonster(e)}},e}(p)).prototype,"monsterParent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(w.prototype,"bulletParent",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=w))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"c3918UZqVtApaVupxixI5Ut","MonsterModel",void 0);i("MonsterFeature",(function(){this.type=void 0,this.monsterId=void 0,this.count=void 0,this.damagePer=void 0,this.hpPer=void 0,this.atkPer=void 0,this.speedPer=void 0,this.buffId=void 0})),i("MonsterCfg",(function(){this.ClassName="Monster",this.Id=void 0,this.mType=void 0,this.icon=void 0,this.iconScale=void 0,this.shadeScale=void 0,this.shadeOffsetY=void 0,this.colliderRadius=void 0,this.colliderOffset=void 0,this.speed=void 0,this.atk=void 0,this.hp=void 0,this.range=void 0,this.moveType=void 0,this.attackInterval=void 0,this.bulletId=void 0,this.bulletSpeed=void 0,this.bulletScale=void 0,this.bulletBuffs=void 0,this.exp=void 0,this.hurts=void 0,this.features=void 0})),i("MonsterAmin",function(i){return i.Move="Move",i.Atk="Skill",i}({})),i("MonsterObj",(function(){this.id=void 0,this.level=void 0,this.addHp=void 0,this.addAtk=void 0,this.hpUp=1})),i("MonsterEventObj",(function(){this.monsterId=void 0,this.addHp=void 0,this.addAtk=void 0,this.level=void 0,this.cd=void 0,this.hpUp=void 0,this.startTime=void 0,this.secNum=void 0,this.diffNum=void 0,this.curNum=0,this.totalNum=1})),i("MonsterBulletObj",(function(){this.bulletKey=void 0,this.monsterCfg=void 0,this.monsterObj=void 0,this.layer=1,this.pos=void 0,this.callback=void 0,this.targetPos=void 0,this.damage=void 0,this.param=void 0,this.scale=1})),i("MonsterFeatureType",function(i){return i[i.FEATURE_BUFF=1]="FEATURE_BUFF",i[i.FEATURE_MOVE_ADDSPEED=11]="FEATURE_MOVE_ADDSPEED",i[i.FEATURE_MOVE_Z=12]="FEATURE_MOVE_Z",i[i.FEATURE_MOVE_FLASH=13]="FEATURE_MOVE_FLASH",i[i.FEATURE_SPLIT_DIE=21]="FEATURE_SPLIT_DIE",i[i.FEATURE_SPLIT_UNDERATTAK=22]="FEATURE_SPLIT_UNDERATTAK",i[i.FEATURE_ATTACK_FIRE=31]="FEATURE_ATTACK_FIRE",i[i.FEATURE_UNDERATTAK_FLASH=41]="FEATURE_UNDERATTAK_FLASH",i[i.FEATURE_UNDERATTAK_REKNOCKBACK=42]="FEATURE_UNDERATTAK_REKNOCKBACK",i}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/MonthlyPassItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TopupData.ts","./SpriteEx.ts","./LanguageManager.ts","./Util.ts","./RewardItem.ts"],(function(t){var i,e,n,a,s,r,l,o,c,p,g,u,h,b,m,f,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,l=t.Label,o=t.Node,c=t.Button,p=t.Sprite,g=t.instantiate,u=t.Component},function(t){h=t.TopupData},function(t){b=t.SpriteEx},function(t){m=t.LanguageManager},function(t){f=t.Util},function(t){d=t.RewardItem}],execute:function(){var y,w,C,B,_,I,v,L,z,R,j,P,M,O,x,A,S,T,D,N,E,k,F,H,U,K,Y,Z,q;s._RF.push({},"37383bHv15AwKA2Z6ulAkYn","MonthlyPassItem",void 0);var G=r.ccclass,J=r.property;t("MonthlyPassItem",(y=G("MonthlyPassItem"),w=J(b),C=J(b),B=J(l),_=J(l),I=J(l),v=J(o),L=J(o),z=J(o),R=J(o),j=J(o),P=J(l),M=J(c),O=J(o),y((S=i((A=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,n(i,"bg",S,a(i)),n(i,"icon",T,a(i)),n(i,"title",D,a(i)),n(i,"desc",N,a(i)),n(i,"status",E,a(i)),n(i,"rightList",k,a(i)),n(i,"rightItem",F,a(i)),n(i,"rewardList",H,a(i)),n(i,"dailyRewardItem",U,a(i)),n(i,"buyBtn",K,a(i)),n(i,"price",Y,a(i)),n(i,"claimBtn",Z,a(i)),n(i,"claimBtns",q,a(i)),i._passObj=null,i._passCfg=null,i}e(i,t);var s=i.prototype;return s.init=function(t){this._passObj=t,this._passCfg=h.instance.getMonthlyPassCfg(this._passObj.passId),this.setPassInfo(),this.setRewardsInfo(),this.setRightInfo()},s.setPassInfo=function(){this.bg.index=this._passCfg.icon,this.icon.index=this._passCfg.icon,this.title.string=m.instance.getLang(this._passCfg.name),this.desc.string=m.instance.getLang(this._passCfg.desc),this.price.string=this._passObj.price.toString(),this.status.string=this._passObj.state?f.timeToString(this._passObj.countdown):m.instance.getLang("shop.noteffective"),this._passObj.state?(this.buyBtn.active=!1,this.claimBtns.active=!0):(this.buyBtn.active=!0,this.claimBtns.active=!1),this._passObj.draw?(this.claimBtn.interactable=!1,this.claimBtn.getComponent(p).grayscale=!0,this.claimBtn.node.getChildByName("lbText").getComponent(l).string=m.instance.getLang("claimed")):(this.claimBtn.interactable=!0,this.claimBtn.getComponent(p).grayscale=!1,this.claimBtn.node.getChildByName("lbText").getComponent(l).string=m.instance.getLang("claim"))},s.setRewardsInfo=function(){this.rewardList.removeAllChildren();for(var t=0;t<this._passCfg.dailyRewards.length;t++){var i=this._passCfg.dailyRewards[t],e=g(this.dailyRewardItem);e.getChildByName("rewardItem").getComponent(d).init(i),e.parent=this.rewardList}},s.setRightInfo=function(){this.rightList.removeAllChildren();for(var t=0;t<this._passCfg.rights.length;t++){var i=this._passCfg.rights[t],e=g(this.rightItem);e.getComponent(l).string=m.instance.getLang(i),e.getChildByName("icon").getComponent(b).index=this._passCfg.icon,e.parent=this.rightList}},s.onClaimBtn=function(){h.instance.onClaimMonthlyPass(this._passObj.passId)},s.onBuyBtn=function(){h.instance.onBuyMonthlyPass(this._passObj.passId,this._passCfg.name)},s.onExtendBtn=function(){h.instance.onBuyMonthlyPass(this._passObj.passId,this._passCfg.name)},i}(u)).prototype,"bg",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(A.prototype,"icon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(A.prototype,"title",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(A.prototype,"desc",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(A.prototype,"status",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(A.prototype,"rightList",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(A.prototype,"rightItem",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(A.prototype,"rewardList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(A.prototype,"dailyRewardItem",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=i(A.prototype,"buyBtn",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=i(A.prototype,"price",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=i(A.prototype,"claimBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=i(A.prototype,"claimBtns",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=A))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/MonthlyPassModel.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"6c290BF3YtK6J1V3xoGJSrf","MonthlyPassModel",void 0);s("MonthlyPassCfg",(function(){this.ClassName="MonthlyPass",this.Id=void 0,this.name=void 0,this.desc=void 0,this.icon=void 0,this.rights=void 0,this.dailyRewards=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/MonthlyPassPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./TopupData.ts","./EventListener.ts","./GameEvent.ts","./MonthlyPassItem.ts"],(function(t){var n,e,s,o,i,a,r,c,l,p,u,h,P,f,y,M;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,r=t.Node,c=t.Prefab,l=t.instantiate,p=t.Component},function(t){u=t.OpenPopupManager},function(t){h=t.Constants},function(t){P=t.TopupData},function(t){f=t.EventListener},function(t){y=t.GameEvent},function(t){M=t.MonthlyPassItem}],execute:function(){var g,m,v,_,D,T,d;i._RF.push({},"562261GEyBO5I7qkssRaZRF","MonthlyPassPopup",void 0);var A=a.ccclass,L=a.property;t("MonthlyPassPopup",(g=A("MonthlyPassPopup"),m=L(r),v=L(c),g((T=n((D=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return n=t.call.apply(t,[this].concat(i))||this,s(n,"content",T,o(n)),s(n,"passItem",d,o(n)),n}e(n,t);var i=n.prototype;return i.show=function(){P.instance.getMonthlyPassFromNetwork()},i.setPassList=function(){for(var t=P.instance.monthlyPassData,n=0,e=0;e<t.length;e++){var s=t[e];if(null!=P.instance.getMonthlyPassCfg(s.passId)){if(this.content.children[n])this.content.children[n].getComponent(M).init(s),this.content.children[n].active=!0;else{var o=l(this.passItem);o.getComponent(M).init(s),o.parent=this.content}n++}}for(;n<this.content.children.length;n++)this.content.children[n].active=!1},i.getMontlyPassData=function(){P.instance.getMonthlyPassFromNetwork()},i.onBackTouch=function(){u.instance.hide(h.PopupUI.MonthlyPassPopup)},i.onEnable=function(){f.on(y.UPDATE_MONTHLY_PASS_POPUP,this.setPassList,this),f.on(y.GET_MONTHLY_PASS_DATA,this.getMontlyPassData,this)},i.onDisable=function(){f.off(y.UPDATE_MONTHLY_PASS_POPUP,this.setPassList,this),f.off(y.GET_MONTHLY_PASS_DATA,this.getMontlyPassData,this)},n}(p)).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=n(D.prototype,"passItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=D))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/NoClickMore.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var c,e,n,o,i;return{setters:[function(t){c=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.Button,i=t.Component}],execute:function(){var r;e._RF.push({},"015f6bdFqVIW6PhMJVk+oxv","NoClickMore",void 0);var s=n.ccclass;n.property,t("NoClickMore",s("NoClickMore")(r=function(t){function e(){for(var c,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(c=t.call.apply(t,[this].concat(n))||this).safeTime=1,c.clickEvents=null,c}return c(e,t),e.prototype.start=function(){var t=this,c=this.getComponent(o);c&&(this.clickEvents=c.clickEvents,this.node.on("click",(function(){c.clickEvents=[],t.scheduleOnce((function(e){c.clickEvents=t.clickEvents}),t.safeTime)}),this))},e}(i))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/OpenPopupManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./Toast.ts","./GameController.ts","./PopupManager.ts","./ResourcesUtil.ts"],(function(p){var n,e,t,a,o,i,s,u,r;return{setters:[function(p){n=p.createClass},function(p){e=p.cclegacy,t=p.instantiate},function(p){a=p.Constants},function(p){o=p.Toast},function(p){i=p.default},function(p){s=p.PopupManager,u=p.PopupOptions},function(p){r=p.ResourcesUtil}],execute:function(){e._RF.push({},"2e999vijwZOkpi2Rl4QGn2h","OpenPopupManager",void 0);var h=p("LayerType",function(p){return p[p.BOTTOM=0]="BOTTOM",p[p.MID=1]="MID",p[p.TOP=2]="TOP",p}({}));p("OpenPopupManager",function(){function p(){this.TopLayer=null,this.MidLayer=null,this.BottomLayer=null,this.ToastLayer=null,this.Canvas=null,this.MainTopLayer=null,this.PopupLayer=null}var e=p.prototype;return e.showSeqPopup=function(p,n,e,t){var a=new u;a.path=p,a.parent=this.TopLayer,s.instance.pushToPopupSeq(a,e,t)},e.hideSeqPopup=function(p,n){s.instance.shiftFromPopupSeq(p,n)},e.addHidePopup=function(p){s.instance.addHidePopup(p)},e.showChapterPopup=function(p){var n=new u;n.path=a.PopupUI.ChapterPopup,n.parent=p,s.instance.show(n)},e.showGamePopup=function(){var p=new u;p.path=a.PopupUI.GamePopup,p.parent=this.BottomLayer,p.closeCur=!0,s.instance.show(p)},e.showGameFailPopup=function(){var p=new u;p.path=a.PopupUI.GameFailPopup,p.parent=this.TopLayer,s.instance.show(p,[])},e.showGameWinPopup=function(){var p=new u;p.path=a.PopupUI.GameWinPopup,p.parent=this.TopLayer,s.instance.show(p,[])},e.showGameRevivePopup=function(){var p=new u;p.path=a.PopupUI.GameRevivePopup,p.parent=this.TopLayer,s.instance.show(p,[])},e.showWeaponDetailPopup=function(p){var n=new u;n.path=a.PopupUI.WeaponDetailPopup,n.parent=this.MidLayer,s.instance.show(n,[p])},e.showAdTipsPopup=function(p,n,e){var t=new u;t.path=a.PopupUI.AdTipsPopup,t.parent=this.MidLayer,s.instance.show(t,[p,n,e])},e.showComTipsPopup=function(p,n){var e=new u;e.path=a.PopupUI.ComTipsPopup,e.parent=this.MidLayer,s.instance.show(e,[p,n])},e.showPausePopup=function(){var p=new u;p.path=a.PopupUI.PausePopup,p.parent=this.MidLayer,i.pause(),s.instance.show(p)},e.showSkillSelectPopup=function(p,n,e){var t=new u;t.path=a.PopupUI.SkillSelectPopup,t.parent=this.MidLayer,i.pause(),s.instance.show(t,[p,n,e])},e.showToast=function(p,n,e){var i=this;void 0===n&&(n=0);var s=a.toastPath;r.getPrefab(s).then((function(a){var s=t(a);s.parent=i.ToastLayer,s.setPosition(0,n),s.getComponent(o).init(p,e)}))},e.showEquipDetailPopup=function(p){var n=new u;n.path=a.PopupUI.EquipDetailPopup,n.parent=this.PopupLayer,i.pause(),s.instance.show(n,[p])},e.showDailyQuestPopup=function(){var p=new u;p.path=a.PopupUI.DailyQuestPopup,p.parent=this.PopupLayer,i.pause(),s.instance.show(p)},e.showInvitePopup=function(){var p=new u;p.path=a.PopupUI.InvitePopup,p.parent=this.PopupLayer,i.pause(),s.instance.show(p)},e.showSettingPopup=function(p){var n=new u;n.path=a.PopupUI.SettingPopup,n.parent="game"==p?this.MidLayer:this.PopupLayer,s.instance.show(n,p)},e.showRankPopup=function(){var p=new u;p.path=a.PopupUI.RankPopup,p.parent=this.PopupLayer,i.pause(),s.instance.show(p)},e.showRewardPopup=function(p,n,e){var t=new u;t.path=a.PopupUI.ComRewardPopup,t.parent=this.PopupLayer,i.pause(),s.instance.show(t,[p,n,e])},e.showRewardAnimPopup=function(p,n){var e=new u;e.path=a.PopupUI.ComRewardAnimPopup,e.parent=this.PopupLayer,s.instance.show(e,[p,n])},e.showEnergyPopup=function(){var p=new u;p.path=a.PopupUI.ShopEnergyPopup,p.parent=this.PopupLayer,i.pause(),s.instance.show(p)},e.showGuidePopup=function(p,n){var e=new u;e.path=a.PopupUI.GuidePopup,e.parent=this.MidLayer,s.instance.show(e,[p,n])},e.show=function(p,n,e,t){void 0===e&&(e=h.TOP),void 0===t&&(t=!1);var a=new u;a.path=p,a.parent=n||this.getLayerByType(e),t&&i.pause();for(var o=arguments.length,r=new Array(o>4?o-4:0),P=4;P<o;P++)r[P-4]=arguments[P];s.instance.show(a,r)},e.hide=function(p,n){s.instance.hide(p,n)},e.getLayerByType=function(p){var n=this.TopLayer;switch(p){case 0:n=this.BottomLayer;break;case 1:n=this.MidLayer;break;case 2:n=this.PopupLayer}return n},n(p,null,[{key:"instance",get:function(){return this._instance||(this._instance=new p),this._instance}}]),p}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/PausePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./GameController.ts","./GameEvent.ts","./OpenPopupManager.ts","./SkillUpgradeData.ts","./LearnSkillItem.ts","./ComTipsPopup.ts","./LanguageManager.ts"],(function(n){var e,t,i,o,a,r,l,s,u,p,c,f,g,m,P,b,h,k,w,S;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,l=n.Prefab,s=n.Node,u=n.ScrollView,p=n.instantiate,c=n.Component},function(n){f=n.Constants},function(n){g=n.EventListener},function(n){m=n.default},function(n){P=n.GameEvent},function(n){b=n.OpenPopupManager},function(n){h=n.SkillUpgradeData},function(n){k=n.LearnSkillItem},function(n){w=n.ComTipsObj},function(n){S=n.LanguageManager}],execute:function(){var d,v,y,C,L,T,z,I,D,E,M;a._RF.push({},"b2536DTNS1Ii5OAmWoVKrzx","PausePopup",void 0);var V=r.ccclass,B=r.property;n("PausePopup",(d=V("PausePopup"),v=B(l),y=B(s),C=B(u),L=B(s),d((I=e((z=function(n){function e(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a))||this,i(e,"skillPrefab",I,o(e)),i(e,"weaponSkills",D,o(e)),i(e,"scrollView",E,o(e)),i(e,"normalSkills",M,o(e)),e}t(e,n);var a=e.prototype;return a.show=function(){this.weaponSkills.removeAllChildren();for(var n=h.instance.getLearnSkillUpgrades(),e=0;e<n.length;e++){var t=n[e],i=h.instance.getSkillUpgradeCfgById(t),o=p(this.skillPrefab);o.getComponent(k).init(i),i.weaponId>0?o.parent=this.weaponSkills:o.parent=this.normalSkills}this.scrollView.scrollToTop()},a.onReturnBtn=function(){var n=new w;n.title=S.instance.getLang("tips"),n.desc=S.instance.getLang("game.backHomeTips"),b.instance.showComTipsPopup(n,(function(n){n&&g.emit(P.GAME_OVER)}))},a.onContinueBtn=function(){b.instance.hide(f.PopupUI.PausePopup),m.resume()},a.onSettingBtn=function(){b.instance.showSettingPopup("game")},e}(c)).prototype,"skillPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(z.prototype,"weaponSkills",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(z.prototype,"scrollView",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(z.prototype,"normalSkills",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=z))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/PersonalItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,i,a,o,l,u,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,u=e.Sprite,s=e.Component}],execute:function(){var c,p,b,m,g,f,h,y,v,d,k;a._RF.push({},"c4497hCROdA3qLpNCb3ORkq","PersonalItem",void 0);var z=o.ccclass,I=o.property;e("PersonalItem",(c=z("PersonalItem"),p=I(l),b=I(u),m=I(l),g=I(l),c((y=r((h=function(e){function r(){for(var r,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a))||this,t(r,"rank",y,i(r)),t(r,"avatar",v,i(r)),t(r,"username",d,i(r)),t(r,"number",k,i(r)),r}return n(r,e),r.prototype.init=function(e){this.rank.string=e.rank.toString(),this.username.string=e.userInfo.username,e.number?this.number.string=e.number.toString():this.number.string=e.process.toString()},r}(s)).prototype,"rank",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=r(h.prototype,"avatar",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=r(h.prototype,"username",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=r(h.prototype,"number",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Api.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./ChapterData.ts","./GameEvent.ts"],(function(t){var e,n,i,a,s,r,o,c;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){i=t.Api},function(t){a=t.EventListener},function(t){s=t.HttpService},function(t){r=t.OpenPopupManager},function(t){o=t.ChapterData},function(t){c=t.GameEvent}],execute:function(){n._RF.push({},"2cf576ioxpCAaOFMsTCq3pg","PlayerData",void 0),t("PlayerData",function(){function t(){this._userObj=void 0,this._chapterObj=void 0,this._assetObj=void 0,this._energyObj=void 0,this._configObj=void 0,this._heroObj=void 0,this._curChapter=0}var n=t.prototype;return n.getUserInfo=function(t){var e=this;s.instance.post(i.USER_INFO).then((function(n){0==n.code?(e._userObj=n.data.userInfo,e._chapterObj=n.data.chapterInfo,e._assetObj=n.data.assetInfo,e._energyObj=n.data.energyInfo,e._configObj=n.data.config,e._heroObj=n.data.heroInfo,0==e._curChapter&&(e._curChapter=n.data.chapterInfo.chapterId),a.emit(c.REFRESH_PLAYER_DATA),t(0)):t(1)}))},n.getPlayerInfo=function(t){var e=this;void 0===t&&(t=!0),s.instance.post(i.USER_PLAYER_INFO).then((function(n){0==n.code&&(e._chapterObj=n.data.chapterInfo,e._assetObj=n.data.assetInfo,e._energyObj=n.data.energyInfo,e._heroObj=n.data.heroInfo,0==e._curChapter&&(e._curChapter=n.data.chapterInfo.chapterId),t&&a.emit(c.REFRESH_PLAYER_DATA))}))},n.battleWithWin=function(){this._curChapter<o.instance.maxChapterId&&this._curChapter==this._chapterObj.chapterId&&(this._curChapter+=1,this._chapterObj.chapterId+=1)},n.getBalance=function(){var t=this;s.instance.post(i.ASSET_BALANCE).then((function(e){0==e.code?t._assetObj=e.data:r.instance.showToast(e.msg)}))},n.initPlayerData=function(t){t||this.savePlayerDataToCache()},n.subCoin=function(t){this._assetObj.gold-=t},n.addCoin=function(t){this._assetObj.gold+=t},n.setCoin=function(t){this._assetObj.gold=t},n.subTicket=function(t){this._chapterObj.ticket-=t},n.setEnergy=function(t){this._energyObj.energy+=t,a.emit(c.REFRESH_PLAYER_DATA)},n.removeRewardId=function(t){var e=this._chapterObj.unclaimRewards.indexOf(t);-1!==e&&this._chapterObj.unclaimRewards.splice(e,1),a.emit(c.REFRESH_PLAYER_DATA)},n.savePlayerDataToCache=function(){},e(t,[{key:"userObj",get:function(){return this._userObj},set:function(t){this._userObj=t}},{key:"chapterObj",get:function(){return this._chapterObj},set:function(t){this._chapterObj=t,a.emit(c.REFRESH_PLAYER_DATA)}},{key:"assetObj",get:function(){return this._assetObj},set:function(t){this._assetObj=t}},{key:"energyObj",get:function(){return this._energyObj},set:function(t){this._energyObj=t,a.emit(c.REFRESH_PLAYER_DATA)}},{key:"configObj",get:function(){return this._configObj}},{key:"heroObj",get:function(){return this._heroObj}},{key:"curChapter",get:function(){return this._curChapter},set:function(t){this._curChapter=t}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null;t("UserResult",(function(){this.userInfo=void 0,this.chapterInfo=void 0,this.assetInfo=void 0,this.energyInfo=void 0,this.config=void 0,this.heroInfo=void 0}));n._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,e,n,a,r;return{setters:[function(t){o=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,n=t.instantiate,a=t.NodePool,r=t.Component}],execute:function(){e._RF.push({},"fcd3aoftHFN/Iw6BfOJPxdN","PoolManager",void 0),t("PoolManager",function(t){function e(){for(var o,i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return(o=t.call.apply(t,[this].concat(e))||this)._dictPool={},o}o(e,t);var r=e.prototype;return r.getNode=function(t,o){var i=t.name;t.position||(i=t.data.name);var e=null;if(this._dictPool.hasOwnProperty(i)){var r=this._dictPool[i];e=r.size()>0?r.get():n(t)}else{var s=new a;this._dictPool[i]=s,e=n(t)}return e.parent=o,e.setPosition(1e4,1e5),e.active=!0,e},r.getNodeItem=function(t){var o=t.name;t.position||(o=t.data.name);var i=null;if(this._dictPool.hasOwnProperty(o)){var e=this._dictPool[o];i=e.size()>0?e.get():n(t)}else{var r=new a;this._dictPool[o]=r,i=n(t)}return i.setPosition(1e4,1e5),i.active=!0,i},r.getNodeItemById=function(t,o){var i=null;if(this._dictPool.hasOwnProperty(o)){var e=this._dictPool[o];i=e.size()>0?e.get():n(t)}else{var r=new a;this._dictPool[o]=r,i=n(t)}return i.setPosition(1e4,1e5),i.active=!0,i},r.putNodeByKey=function(t,o){var i=new a;this._dictPool.hasOwnProperty(o)?i=this._dictPool[o]:this._dictPool[o]=i,t.active=!1,i.put(t)},r.getPoolSizeByPrefab=function(t){var o=0,i=t.name;(t.position||(i=t.data.name),this._dictPool.hasOwnProperty(i))&&(o=this._dictPool[i].size());return o},r.putPool=function(t){if(t){var o=t.name,i=null;this._dictPool.hasOwnProperty(o)?i=this._dictPool[o]:(i=new a,this._dictPool[o]=i),t.active=!1,i.put(t)}},r.putNode=function(t){if(t){var o=t.name,i=new a;this._dictPool.hasOwnProperty(o)?i=this._dictPool[o]:this._dictPool[o]=i,t.active=!1,i.put(t)}},r.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},r.clear=function(){for(var t in this._dictPool){if(this._dictPool.hasOwnProperty(t))this._dictPool[t].clear()}},r.prePool=function(t,o){var i=t.data.name,e=new a;this._dictPool[i]=e;for(var r=0;r<o;r++){var s=n(t);e.put(s)}},i(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(r))._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/PopupManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesUtil.ts"],(function(i){var t,o,n,e,a,s,r;return{setters:[function(i){t=i.createClass},function(i){o=i.cclegacy,n=i._decorator,e=i.isValid,a=i.find,s=i.Vec3},function(i){r=i.ResourcesUtil}],execute:function(){var p,h;o._RF.push({},"eb72adhUm1IXpHlO5jdi3i9","PopupManager",void 0);var c=n.ccclass;n.property,i("PopupManager",c("PopupManager")(((h=function(){function i(){this._dictSharedPanel={},this._dictLoading={},this._arrPopupDialog=[],this._hidePopupArr=[],this._showTipsTime=0}var o=i.prototype;return o.isDialogVisible=function(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;var t=this._dictSharedPanel[i];return e(t)&&t.active&&e(t.parent)},o.show=function(i,t,o){var n=this,s=i.path;if(!this._dictLoading[s]){i.closeCur&&this.hideJoinPopup(s);var p=s.lastIndexOf("/"),h=s.slice(p+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(s)){var c=this._dictSharedPanel[s];if(e(c)){var u;c.parent=null!=(u=i.parent)?u:a("Canvas"),c.active=!0;var l=c.getComponent(h),d=c.getComponent(h.charAt(0).toUpperCase()+h.slice(1)),f=c.getComponent("AnimationUI");if(l&&l.show)l.show.apply(l,t),f?f.open((function(){o&&o(l)})):o&&o(l);else{if(!d||!d.show)throw"Script file not found "+h;d.show.apply(d,t),f?f.open((function(){o&&o(d)})):o&&o(d)}return}}this._dictLoading[s]=!0,r.createUI(s,i.parent).then((function(i){var e=!1;n._dictLoading[s]||(e=!0),n._dictLoading[s]=!1,n._dictSharedPanel[s]=i;var a=i.getComponent("AnimationUI"),r=i.getComponent(h.charAt(0).toUpperCase()+h.slice(1));if(!r||!r.show)throw"Not Found "+h+" or please define show";r.show.apply(r,t),a?a.open((function(){o&&o(r)})):o&&o(r),e&&n.hide(s)}))}},o.hide=function(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){var o=this._dictSharedPanel[i];if(o&&e(o)){var n=o.getComponent("AnimationUI");n?n.close((function(){o.parent=null,t&&"function"==typeof t&&t()})):(o.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1},o.hideAll=function(){for(var i in this._dictSharedPanel){if(Object.prototype.hasOwnProperty.call(this._dictSharedPanel,i))this._dictSharedPanel[i].parent=null}},o.addHidePopup=function(i){this._hidePopupArr.includes(i)||this._hidePopupArr.push(i)},o.hideJoinPopup=function(i){if(this._hidePopupArr.length)for(var t=0,o=this._hidePopupArr.length;t<o;t++){var n=this._hidePopupArr[t];n!=i&&(this.hide(n),this._hidePopupArr.splice(t,1),t--,o--)}},o.pushToPopupSeq=function(i,t,o){var n={options:i,callBack:o,param:t,isShow:!1};this._arrPopupDialog.push(n),this._checkPopupSeq()},o.insertToPopupSeq=function(i,t,o,n){var e={options:t,callBack:n,param:o,isShow:!1};this._arrPopupDialog.splice(i,0,e)},o.shiftFromPopupSeq=function(i,t){var o=this;this._arrPopupDialog[0]&&this._arrPopupDialog[0].options.path===i?this.hide(i,(function(){o._arrPopupDialog.shift(),o._checkPopupSeq()})):this.hide(i,t)},o._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var i=this._arrPopupDialog[0];i.isShow||(this.show(i.options,i.param,i.callBack),this._arrPopupDialog[0].isShow=!0)}},o.showTips=function(i,t,o,n,e){var a=this;void 0===t&&(t="txt"),void 0===o&&(o=new s),void 0===n&&(n=1),void 0===e&&(e=function(){});var r=String(i),p=function(){a._showTipsAni(r,t,o,n,e)},h=Date.now();if(h-this._showTipsTime<800&&"gold"!==t&&"heart"!==t){var c=800-(h-this._showTipsTime);setTimeout((function(){p()}),c),this._showTipsTime=h+c}else p(),this._showTipsTime=h},o._showTipsAni=function(i,t,o,n,e){},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=void 0,p=h))||p),i("PopupOptions",(function(){this.path=void 0,this.parent=void 0,this.closeCur=!1}));o._RF.pop()}}}));

System.register("chunks:///_virtual/QuestData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Api.ts","./EventListener.ts","./HttpService.ts","./GameEvent.ts"],(function(i){var t,n,e,s,o,d;return{setters:[function(i){t=i.createClass},function(i){n=i.cclegacy},function(i){e=i.Api},function(i){s=i.EventListener},function(i){o=i.HttpService},function(i){d=i.GameEvent}],execute:function(){n._RF.push({},"6c264lT2lREhaW6e7u7o/rZ","QuestData",void 0),i("QuestData",function(){function i(){this._signInfo=null,this._dailyQuest=null,this._achievements=[]}return i.prototype.getEventInfo=function(){var i=this;o.instance.post(e.EVENT_INFO,{}).then((function(t){0==t.code&&(i._signInfo=t.data.signInfo,i._dailyQuest=t.data.questInfo,i._achievements=t.data.achievements,s.emit(d.UPDATE_DAILY_QUEST_POPUP))}))},t(i,[{key:"signInfo",get:function(){return this._signInfo},set:function(i){this._signInfo=i}},{key:"dailyQuest",get:function(){return this._dailyQuest},set:function(i){this._dailyQuest=i,s.emit(d.UPDATE_DAILY_QUEST_POPUP)}},{key:"achievements",get:function(){return this._achievements}}],[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=null;i("EventInfo",(function(){this.signInfo=void 0,this.questInfo=void 0,this.achievements=void 0})),i("AchievementsModel",(function(){this.desc=void 0,this.groupId=void 0,this.num=void 0,this.rewards=void 0,this.target=void 0})),i("QuestInfo",(function(){this.daily=void 0,this.dailyPoint=void 0,this.dailyPointsRewards=void 0,this.weekly=void 0,this.weeklyPoint=void 0,this.weeklyPointsRewards=void 0})),i("DailyModel",(function(){this.desc=void 0,this.draw=void 0,this.id=void 0,this.num=void 0,this.point=void 0,this.target=void 0})),i("DailyRewardModel",(function(){this.id=void 0,this.draw=void 0,this.points=void 0,this.rewards=void 0})),i("SignInfo",(function(){this.cumulativeDays=void 0,this.cumulativeRewards=void 0,this.signDay=void 0,this.isSign=void 0,this.signRewards=void 0})),i("SignClaimInfo",(function(){this.rewards=void 0,this.signInfo=void 0})),i("SignRewardModel",(function(){this.draw=void 0,this.day=void 0,this.rewards=void 0}));n._RF.pop()}}}));

System.register("chunks:///_virtual/RankData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,s;return{setters:[function(n){e=n.createClass},function(n){s=n.cclegacy}],execute:function(){s._RF.push({},"74330MFOlFBDZEA5l5NFkIz","RankData",void 0),n("RankeData",function(){function n(){this.friendList=[{rank:1,userInfo:{avatar:1,username:"name"},process:1},{rank:2,userInfo:{avatar:1,username:"name"},process:1},{rank:3,userInfo:{avatar:1,username:"name"},process:1},{rank:4,userInfo:{avatar:1,username:"name"},process:1},{rank:5,userInfo:{avatar:1,username:"name"},process:1}],this.personalList=[{rank:1,userInfo:{avatar:0,username:"name"},process:process}],this.areaList=[{rank:1,userInfo:{avatar:0,username:"name"},process:process}]}return e(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=null;n("RankObj",(function(){this.friendList=void 0,this.personalList=void 0,this.areaList=void 0})),n("RankModel",(function(){this.rank=void 0,this.userInfo=void 0,this.process=void 0,this.number=void 0})),n("AreaModel",(function(){this.rank=void 0,this.province=void 0,this.rate=void 0,this.people=void 0}));s._RF.pop()}}}));

System.register("chunks:///_virtual/RankData2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var r,e,s;return{setters:[function(n){r=n.createClass},function(n){e=n.cclegacy,s=n._decorator}],execute:function(){var a,t;e._RF.push({},"e65f1RTVodNXJD0RPMaugFv","RankData",void 0);var i=s.ccclass;s.property,n("RankData",i("RankData")(((t=function(){function n(){this._ProvinceRankData=[{rank:1,province:"",users:[1,2,3,4,5,6,7,8]},{rank:2,province:"",users:[1,2,3,4,5,6,7,8]},{rank:3,province:"",users:[1,2,3,4,5,6,7,8]},{rank:4,province:"",users:[1,2,3,4,5,6,7,8]},{rank:5,province:"",users:[1,2,3,4,5,6,7,8]},{rank:6,province:"",users:[1,2,3,4,5,6,7,8]},{rank:7,province:"",users:[1,2,3,4,5,6,7,8]},{rank:8,province:"",users:[1,2,3,4,5,6,7,8]},{rank:9,province:"",users:[1,2,3,4,5,6,7,8]},{rank:10,province:"",users:[1,2,3,4,5,6,7,8]},{rank:11,province:"",users:[1,2,3,4,5,6,7,8]},{rank:12,province:"",users:[1,2,3,4,5,6,7,8]},{rank:13,province:"",users:[1,2,3,4,5,6,7,8]}]}var e=n.prototype;return e.getProvinceRankData=function(){return this._ProvinceRankData},e.clear=function(){},r(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=null,a=t))||a),n("ProvinceObj",(function(){this.rank=void 0,this.province=void 0,this.users=[]}));e._RF.pop()}}}));

System.register("chunks:///_virtual/RankGroupItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts","./UserItem.ts"],(function(t){var e,n,r,i,o,a,s,u,l,c,p,f,h,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Prefab,u=t.Node,l=t.Label,c=t.instantiate,p=t.Vec3,f=t.Component},function(t){h=t.Util},function(t){b=t.UserItem}],execute:function(){var m,v,y,g,d,k,I,P,w,M,R;o._RF.push({},"0e073/U0a1P5J02s5BFYS3b","RankGroupItem",void 0);var U=a.ccclass,z=a.property;t("RankGroupItem",(m=U("RankGroupItem"),v=z(s),y=z(u),g=z(l),d=z(l),m((P=e((I=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"userPrefab",P,i(e)),r(e,"content",w,i(e)),r(e,"rank",M,i(e)),r(e,"lbName",R,i(e)),e}n(e,t);var o=e.prototype;return o.init=function(t){this.rank.string=""+t.rank,this.lbName.string=""+t.province,this.showUserList(t.users)},o.showUserList=function(t){var e=this;this.content.removeAllChildren();for(var n=h.getRandomInt(20,60),r=[],i=50,o=4,a=0;a<n;){for(var s=Math.min(o,n-a),u=360/s,l=0;l<s;l++){var f=l*u*(Math.PI/180),m=i*Math.cos(f),v=i*Math.sin(f);if(r.push({x:m,y:v}),++a>=n)break}i+=25,o+=4}for(var y=0,g=r;y<g.length;y++){var d=g[y],k=c(this.userPrefab);k.setPosition(new p(d.x,d.y,0)),k.parent=this.content,k.getComponent(b).init()}this.scheduleOnce((function(){var t=e.content.children;t.sort((function(t,e){return Math.round(e.position.y)-Math.round(t.position.y)}));for(var n=0;n<t.length;n++)t[n].setSiblingIndex(n)}),.1)},e}(f)).prototype,"userPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(I.prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(I.prototype,"rank",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(I.prototype,"lbName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=I))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/RankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AvatarNode.ts"],(function(e){var r,t,a,n,i,o,l,u,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Label,u=e.Component},function(e){s=e.AvatarNode}],execute:function(){var c,p,f,v,b,h,m,y,g,k,I;i._RF.push({},"3286e3s88hLh7Ukr1hFrTUI","RankItem",void 0);var d=o.ccclass,z=o.property;e("RankItem",(c=d("RankItem"),p=z(l),f=z(l),v=z(l),b=z(s),c((y=r((m=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,a(r,"rank",y,n(r)),a(r,"username",g,n(r)),a(r,"value",k,n(r)),a(r,"avatar",I,n(r)),r}return t(r,e),r.prototype.init=function(e){this.avatar.init(e.userInfo.avatar),e.rank>3&&(this.rank.string=""+e.rank),this.username.string=e.userInfo.username,this.value.string=""+e.process},r}(u)).prototype,"rank",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=r(m.prototype,"username",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=r(m.prototype,"value",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=r(m.prototype,"avatar",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=m))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/RankPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RankData.ts","./OpenPopupManager.ts","./Constants.ts","./GameController.ts","./RankItem.ts"],(function(n){var t,e,i,a,o,r,l,p,c,s,u,f,h,k,m,b,g,y;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){o=n.cclegacy,r=n._decorator,l=n.Node,p=n.ScrollView,c=n.Prefab,s=n.instantiate,u=n.Sprite,f=n.Color,h=n.Component},function(n){k=n.RankeData},function(n){m=n.OpenPopupManager},function(n){b=n.Constants},function(n){g=n.default},function(n){y=n.RankItem}],execute:function(){var R,d,C,v,P,w,L,z,I,D,S,_,M;o._RF.push({},"5b51fS5nkVNrKce5ZZ0KbCj","RankPopup",void 0);var N=r.ccclass,T=r.property;n("RankPopup",(R=N("RankPopup"),d=T(l),C=T(p),v=T(l),P=T(c),w=T(l),R((I=t((z=function(n){function t(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return t=n.call.apply(n,[this].concat(o))||this,i(t,"topRank",I,a(t)),i(t,"rankList",D,a(t)),i(t,"myRank",S,a(t)),i(t,"rankItem",_,a(t)),i(t,"tabs",M,a(t)),t}e(t,n);var o=t.prototype;return o.show=function(){var n=k.instance.friendList;this.init(n)},o.init=function(n){this.topRank.children.forEach((function(t,e){0==e&&t.getComponent(y).init(n[1]),1==e&&t.getComponent(y).init(n[0]),2==e&&t.getComponent(y).init(n[2])})),this.rankList.content.removeAllChildren();for(var t=3;t<n.length;t++){var e=s(this.rankItem);e.getComponent(y).init(n[t]),e.parent=this.rankList.content}this.myRank.getComponent(y).init(n[0])},o.onTabTouch=function(n,t){this.tabs.children.forEach((function(n,e){n.getComponent(u).color=t==e?new f(49,129,255,255):new f(41,40,61,255),n.getChildByName("checked").active=t==e}));var e=null;0==t?e=k.instance.friendList:1==t?k.instance.areaList:k.instance.personalList,this.init(e)},o.hidePopup=function(){g.resume(),m.instance.hide(b.PopupUI.RankPopup)},t}(h)).prototype,"topRank",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(z.prototype,"rankList",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(z.prototype,"myRank",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(z.prototype,"rankItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(z.prototype,"tabs",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=z))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/RedeemCodePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts"],(function(e){var o,n,t,c,u,p;return{setters:[function(e){o=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,c=e.Component},function(e){u=e.OpenPopupManager},function(e){p=e.Constants}],execute:function(){var r;n._RF.push({},"48c1bzwjRZMna2jiRmqfIX4","RedeemCodePopup",void 0);var i=t.ccclass;t.property,e("RedeemCodePopup",i("RedeemCodePopup")(r=function(e){function n(){for(var o,n=arguments.length,t=new Array(n),c=0;c<n;c++)t[c]=arguments[c];return(o=e.call.apply(e,[this].concat(t))||this).code="",o}o(n,e);var t=n.prototype;return t.show=function(){},t.onClaimTouch=function(){},t.codeChange=function(e){this.code=e},t.onCloseTouch=function(){u.instance.hide(p.PopupUI.RedeemCodePopup)},n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/ResourcesUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,o,i,a,u,f,s,l,c,d,p,m,v,g,R,h,F;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e.isValid,a=e.Sprite,u=e.assetManager,f=e.Texture2D,s=e.SpriteFrame,l=e.resources,c=e.Prefab,d=e.Material,p=e.error,m=e.SpriteAtlas,v=e.sp,g=e.TiledMapAsset,R=e.Component,h=e.instantiate,F=e.find}],execute:function(){o._RF.push({},"85b9dh82G1BfaMK6OYv6K+u","ResourcesUtil",void 0);e("ResourcesUtil",function(e){function o(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e.call.apply(e,[this].concat(r))||this).cache={},n}n(o,e),o.loadRes=function(e,n,t){void 0===t&&(t=function(){}),l.load(e,(function(e,n){e?t(e,n):t&&t(null,n)}))},o.loadEffectRes=function(e){var n=this;return new Promise((function(t,r){n.loadRes("prefab/effect/"+e,c,(function(n,o){if(n)return console.info("effect load failed",e),void(r&&r());t&&t(o)}))}))},o.loadModelRes=function(e){var n=this;return new Promise((function(t,r){n.loadRes(""+e,c,(function(n,o){if(n)return console.info("model load failed",e),void(r&&r());t&&t(o)}))}))},o.loadMatRes=function(e){var n=this;return new Promise((function(t,r){n.loadRes(""+e,d,(function(n,o){if(n)return console.info("mat load failed",e),void(r&&r());t&&t(o)}))}))},o.loadModelResArr=function(e,n,t,r){var o=n.map((function(n){return e+"/"+n}));l.load(o,c,t,r)},o.getMapObj=function(e,n,t,r){for(var o=[],i=0;i<n.length;i++)o.push("map/"+e+"/"+n[i]);l.load(o,c,t,r)},o.getJsonData=function(){var e=t(r().mark((function e(n,t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadRes("ConfigData/"+n,null,(function(e,n){e?p(e.message||e):n.json?t(e,n.json):t("failed!!!")}));case 1:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),o.getTextData=function(e,n){this.loadRes("datas/"+e,null,(function(e,t){if(e)p(e.message||e);else{var r=t.text;n(e,r)}}))},o.loadFile=function(e,n){return new Promise((function(t,r){if(e){var o=l.get(e);o?t([e,o]):l.load(e,n,(function(n,r){null==n?t([e,r]):console.info("Load error:"+n)}))}else t([])}))},o.loadDir=function(e){return new Promise((function(n,t){e?l.loadDir(e,(function(e,t){null==e?n(t):console.info("Load dir error"+e)})):n([])}))},o.loadRemote=function(e,n){return new Promise((function(n,t){if(!e)return n([]),void console.info("The path error:"+e);u.loadRemote(e,(function(e,t){null==e?n(t):console.info("Load Remote Error:"+e)}))}))},o.loadResNew=function(e,n){return new Promise((function(t,r){l.load(e,n,(function(e,n){if(e)return p(e.message||e),void(r&&r(e));t&&t(n)}))}))},o.getUIPrefabRes=function(e){return this.loadResNew(e,c)},o.createUI=function(){var e=t(r().mark((function e(n,t){var o,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUIPrefabRes(n);case 2:return o=e.sent,(i=h(o)).setPosition(0,0,0),t||(t=F("Canvas")),t.addChild(i),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),o.setSpriteFrame=function(e,n,t,r){void 0===t&&(t=!0),void 0===r&&(r=null),n?(t&&(n.spriteFrame=null),l.load(e,s,(function(t,o){if(t)return console.info("set sprite frame failed! err:",e,t),void(r&&r());n&&n&&(n.spriteFrame=o),r&&r()}))):r&&r()},o.geSpriteFrame=function(e){return new Promise((function(n,t){l.load(e,s,(function(t,r){if(t)return console.info("set sprite frame failed! err:",e),void n(null);n(r)}))}))},o.setSpriteAtlasSpriteFrame=function(e,n,t){t&&l.load(e,m,(function(r,o){if(r)console.info("set spriteAtlas frame failed! err:",e,r);else{var i=o.getSpriteFrame(n);t.spriteFrame=i}}))},o.getSpriteAtlasSpriteFrame=function(e,n){return new Promise((function(t){l.load(e,m,(function(r,o){if(r)return console.info("get SpriteAtlasSprite failed! err:",e),void t(null);var i=o.getSpriteFrame(n);t(i)}))}))},o.getSpriteAtlas=function(e){return new Promise((function(n){l.load(e,m,(function(t,r){if(t)return console.info("get SpriteAtlasSprite failed! err:",e),void n(null);var o=r.getSpriteFrames();n(o)}))}))},o.getSpriteFrame=function(e){return new Promise((function(n){l.load(e,s,(function(e,t){n(t)}))}))},o.getSkeletonData=function(e){return new Promise((function(n){l.load(e,v.SkeletonData,(function(t,r){t?console.info("get SkeletonData failed! err:",e):n(r)}))}))},o.getPrefab=function(e){return new Promise((function(n,t){l.load(e,c,(function(r,o){r&&(console.info("get Prefab failed! err:",e),t(null)),n(o)}))}))},o.releaseRes=function(e){var n=e.spriteFrame;e.spriteFrame=null,n.decRef()},o.getTiledMap=function(e){return new Promise((function(n){l.load(e,g,(function(t,r){t?console.info("get Prefab failed! err:",e):n(r)}))}))};var R=o.prototype;return R.releaseSprite=function(e){if(i(e)){var n=e.getComponent(a);n&&n.spriteFrame&&(n.spriteFrame.decRef(),n.spriteFrame=null)}},R.loadRemoteImg=function(e){var n=this;u.loadRemote(e,(function(e,t){if(!e&&t){var r=n.cache[t._uuid];if(!r){var o=new f;o.image=t,(r=new s).texture=o,t.addRef(),n.cache[t._uuid]=r}r.addRef()}}))},R.releaseRemoteSprite=function(e){if(i(e)){var n=e.getComponent(a);if(n&&n.spriteFrame){var t=n.spriteFrame;if(n.spriteFrame.decRef(!1),n.spriteFrame=null,t.refCount<=0){var r,o,u=t.texture;if(t.packable)u=null==(r=t.original)?void 0:r._texture;if(u)delete this.cache[u.image._uuid],null==(o=u.image)||o.decRef(),u.destroy();t.destroy()}}}},o}(R));o._RF.pop()}}}));

System.register("chunks:///_virtual/RewardChestItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./ChestModel.ts","./Constants.ts","./ResourcesUtil.ts","./RewardTipItem.ts","./PlayerData.ts"],(function(t){var e,n,o,a,i,s,r,c,u,p,d,l,h,f,w,v,_,m,b,g,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,r=t.Label,c=t.sp,u=t.instantiate,p=t.UITransform,d=t.Vec3,l=t.Component},function(t){h=t.QuestData},function(t){f=t.HttpService},function(t){w=t.Api},function(t){v=t.OpenPopupManager},function(t){_=t.ChestAnim},function(t){m=t.Constants},function(t){b=t.ResourcesUtil},function(t){g=t.RewardTipItem},function(t){R=t.PlayerData}],execute:function(){var y,I,A,C,P,T,S;i._RF.push({},"82994r4U7pNXZa0iFiJswBk","RewardChestItem",void 0);var x=s.ccclass,D=s.property;t("RewardChestItem",(y=x("RewardChestItem"),I=D(r),A=D(c.Skeleton),y((T=e((P=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,o(e,"desc",T,a(e)),o(e,"box",S,a(e)),e._type="sign",e._value=void 0,e._status=void 0,e._rewards=[],e._pointId=0,e._boxStatus=!1,e}n(e,t);var i=e.prototype;return i.init=function(t,e,n,o,a){this._type=o,this._rewards=t,this._value=e,this._status=n,this.desc.string=e+"",this._pointId=a,this._boxStatus&&this.box.setAnimation(0,this._status,!0)},i.onEnable=function(){var t=this;this.scheduleOnce((function(){t._boxStatus=!0,t.box.setAnimation(0,t._status,!0)}),.1)},i.onDisable=function(){this._boxStatus=!1},i.onOpenBox=function(){var t=this;if(this._status==_.Unavailable){var e=m.commonPreabPath+"rewardTipItem";b.getPrefab(e).then((function(e){var n=u(e);n.parent=t.node.parent.parent;var o=t.node.getPosition();o.y+=t.node.getComponent(p).width/2;var a=t.node.parent.getComponent(p).convertToWorldSpaceAR(o),i=t.node.parent.parent.getComponent(p).convertToNodeSpaceAR(a);n.setPosition(i),n.getComponent(g).init(t._rewards)}))}else this._status==_.Received?v.instance.showToast("claimed"):this._status==_.Available&&("sign"==this._type?f.instance.post(w.EVENT_SIGN_CLAIM,{day:this._value}).then((function(e){0==e.code?(v.instance.showRewardPopup(e.data.rewards,null,(function(n){if(n){var o=t.node.getComponent(p).convertToWorldSpaceAR(new d(0,0,0));v.instance.showRewardAnimPopup(o,e.data.rewards)}})),t.box.setAnimation(0,_.Received,!0),R.instance.getPlayerInfo(!1)):v.instance.showToast(e.msg)})).catch((function(){v.instance.showToast("network.error")})):f.instance.post(w.EVENT_QUEST_CLAIM,{pointId:this._pointId}).then((function(e){0==e.code?(v.instance.showRewardPopup(e.data.rewards,null,(function(n){if(n){var o=t.node.getComponent(p).convertToWorldSpaceAR(new d(0,0,0));v.instance.showRewardAnimPopup(o,e.data.rewards)}})),R.instance.getPlayerInfo(!1),h.instance.dailyQuest=e.data.questInfo,t.box.setAnimation(0,_.Received,!0)):v.instance.showToast(e.msg)})).catch((function(){v.instance.showToast("network.error")})))},e}(l)).prototype,"desc",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(P.prototype,"box",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=P))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/RewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./CfgMgr.ts","./ItemModel.ts","./BagData.ts","./BagHeroData.ts"],(function(t){var e,n,i,r,a,o,c,u,l,s,p,f,g,m,h,y,d,b,I,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Label,u=t.Node,l=t.Sprite,s=t.UITransform,p=t.Vec3,f=t.Component},function(t){g=t.Constants},function(t){m=t.ResourcesUtil},function(t){h=t.SpriteEx},function(t){y=t.CfgMgr},function(t){d=t.ItemCfg,b=t.ItemType},function(t){I=t.BagData},function(t){w=t.BagHeroData}],execute:function(){var F,v,C,D,R,z,B,S,_,q,x;a._RF.push({},"349f58lb1hBbb52EUxOkch9","RewardItem",void 0);var H=o.ccclass,M=o.property;t("RewardItem",(F=H("RewardItem"),v=M(c),C=M(u),D=M(l),R=M(h),F((S=e((B=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"count",S,r(e)),i(e,"flag",_,r(e)),i(e,"icon",q,r(e)),i(e,"quality",x,r(e)),e._itemCfg=null,e}n(e,t);var a=e.prototype;return a.init=function(t,e){var n=this,i=this._itemCfg=y.getDataById(new d,t.itemId),r="";r=i.type==b.WeaponFragment?g.weaponIconPath+I.instance.getWeaponIcon(i.dataId)+"/spriteFrame":i.type==b.HeroFragment?g.heroIconPath+w.instance.getHeroIcon(this._itemCfg.dataId)+"/spriteFrame":g.itemsPath+i.icon+"/spriteFrame",m.geSpriteFrame(r).then((function(t){n.icon.spriteFrame=t;var e=n.icon.getComponent(s).contentSize,i=Math.min(80/e.width,80/e.height);n.icon.node.setScale(i,i)})),this.count.string="x"+t.count,this.quality.index=i.quality?i.quality:0,this.flag.active=i.type==b.WeaponFragment||i.type==b.HeroFragment,e&&this.setAnim()},a.setAnim=function(){this.quality.node.scale=new p(1,1,1)},e}(f)).prototype,"count",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(B.prototype,"flag",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(B.prototype,"icon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(B.prototype,"quality",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=B))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/RewardModel.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"560c2JG8shKebqO+U16scxE","RewardModel",void 0);e("RewardCfg",(function(){})),e("RewardObj",(function(){this.itemId=void 0,this.count=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/RewardTipItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardItem.ts"],(function(e){var t,n,r,i,o,a,l,c,u,s,p,f,w,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Prefab,c=e.Node,u=e.Sprite,s=e.instantiate,p=e.UITransform,f=e.Vec3,w=e.tween,h=e.Component},function(e){d=e.RewardItem}],execute:function(){var b,m,g,y,v,z,I,R,C,P,S;o._RF.push({},"ca968CgVJpKkL7CHyyjX27Q","RewardTipItem",void 0);var T=a.ccclass,_=a.property;e("RewardTipItem",(b=T("RewardTipItem"),m=_(l),g=_(c),y=_(u),v=_(c),b((R=t((I=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"rewardPrefab",R,i(t)),r(t,"bg",C,i(t)),r(t,"arrow",P,i(t)),r(t,"content",S,i(t)),t}n(t,e);var o=t.prototype;return o.init=function(e){for(var t=0;t<e.length;t++){var n=s(this.rewardPrefab),r=n.getComponent(p).contentSize,i=Math.min(80/r.width,80/r.height);n.parent=this.content,n.setScale(i,i),n.setPosition(0,this.node.getComponent(p).contentSize.height/2,0),n.getComponent(d).init(e[t])}this.setAnim()},o.onCloseBtn=function(e){e.preventSwallow=!0,this.node.parent=null},o.setAnim=function(){this.node.scale=new f(0,0,0),w(this.node).to(.2,{scale:new f(1.1,1.1,1.1)}).to(.2,{scale:new f(1,1,1)}).start()},t}(h)).prototype,"rewardPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(I.prototype,"bg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(I.prototype,"arrow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(I.prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=I))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/RulePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts"],(function(n){var o,t,u,e,p,c;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,u=n._decorator,e=n.Component},function(n){p=n.Constants},function(n){c=n.OpenPopupManager}],execute:function(){var r;t._RF.push({},"77a36nzC6xMuJZ/3ciHArmM","RulePopup",void 0);var s=u.ccclass;u.property,n("RulePopup",s("RulePopup")(r=function(n){function t(){return n.apply(this,arguments)||this}o(t,n);var u=t.prototype;return u.show=function(){},u.onCloseTouch=function(){c.instance.hide(p.PopupUI.AcitvityRulePopup)},t}(e))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollViewHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,s,o,h,a,l,r,c,d,p,g,m,u,w,f,C,S,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){h=t.cclegacy,a=t._decorator,l=t.Prefab,r=t.CCInteger,c=t.CCBoolean,d=t.CCFloat,p=t.Vec3,g=t.instantiate,m=t.UITransform,u=t.ScrollView,w=t.Node,f=t.Layout,C=t.Size,S=t.v2,v=t.Component}],execute:function(){var V,I,b,P,y,H,z,T,F,U,_,x,W,E,M,O,A,D,Y,Z,B,N,R,L,X,k,j;h._RF.push({},"70560D8yYtHxa50BEfaQ43H","ScrollViewHelper",void 0);var Q=a.ccclass,q=a.property;t("ScrollViewHelper",(V=Q("ScrollViewHelper"),I=q(l),b=q(r),P=q(r),y=q(r),H=q(r),z=q(r),T=q(r),F=q(r),U=q(c),_=q({displayName:"Threshold",type:d,min:.1}),x=q({displayName:"need Select Item"}),W=q({displayName:"direction"}),V((O=i((M=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),h=0;h<e;h++)o[h]=arguments[h];return i=t.call.apply(t,[this].concat(o))||this,n(i,"itemTemplate",O,s(i)),n(i,"rowSpacing",A,s(i)),n(i,"colSpacing",D,s(i)),n(i,"paddingStart",Y,s(i)),n(i,"paddingEnd",Z,s(i)),n(i,"rowCount",B,s(i)),n(i,"colCount",N,s(i)),n(i,"bufferCount",R,s(i)),n(i,"isChild",L,s(i)),n(i,"threshold_n",X,s(i)),n(i,"needSelectItem",k,s(i)),n(i,"direction",j,s(i)),i.scrollView=null,i.content=null,i.items=[],i.itemHeight=0,i.itemWidth=0,i.cacheCount=0,i.spawnCount=0,i.bufferZone=0,i.parentScroll=null,i.isInit=!1,i.canUpdateFrame=!0,i.data=null,i.itemUpdateFunc=null,i.lastContentPosX=null,i.lastContentPosY=null,i.lastPos=new p,i._listenScroll=!1,i._selectItemData=void 0,i}e(i,t);var h=i.prototype;return h.onLoad=function(){var t=g(this.itemTemplate);this.itemHeight=t.getComponent(m).height,this.itemWidth=t.getComponent(m).width,this.scrollView=this.node.getComponent(u),this.content=this.scrollView.content,this.scrollView.horizontal?(this.rowCount=1,this.cacheCount=this.colCount+this.bufferCount,this.spawnCount=this.cacheCount*this.rowCount,this.bufferZone=this.cacheCount*(this.itemWidth+this.colSpacing)/2,this.content.on("transform-changed",this._updateHContentView.bind(this))):this.scrollView.vertical&&(this.cacheCount=this.rowCount+this.bufferCount,this.spawnCount=this.cacheCount*this.colCount,this.bufferZone=this.cacheCount*(this.itemHeight+this.rowSpacing)/2,this.content.on("transform-changed",this._updateVContentView.bind(this))),this.needSelectItem&&(this.scrollView.node.on("scroll-ended",this.onScrollEnded.bind(this)),this.node.on(w.EventType.TOUCH_START,this._touchStart,this))},h.resetData=function(t,i,e,n){if(n&&(this.parentScroll=n),this.isChild){this.node.getComponent("ScrollView_Inner");this.parentScroll&&this.parentScroll.getComponent("ScrollView_Outer")}this.isInit=!1,this.canUpdateFrame=!0,this.isInit=this.initialize(t,i),this.isInit&&e&&(this.scrollView.horizontal?this.scrollView.scrollToLeft():this.direction?this.content.setPosition(0,-this.scrollView.view.height/2):this.scrollView.scrollToTop())},h.initialize=function(t,i){if(!(i&&t&&this.itemTemplate&&this.scrollView))return!1;if(0===t.length)return this.content.removeAllChildren(),!0;this.data=t,this.itemUpdateFunc=i;var e=0;this.scrollView.horizontal?(this.content.getComponent(m).height=this.rowCount*(this.itemHeight+this.rowSpacing)-this.rowSpacing,this.content.getComponent(m).width=Math.ceil(t.length/this.rowCount)*(this.itemWidth+this.colSpacing)+this.paddingStart+this.paddingEnd,e=this.rowCount):this.scrollView.vertical&&(this.content.getComponent(m).height=Math.ceil(t.length/this.colCount)*(this.itemHeight+this.rowSpacing)+this.paddingStart+this.paddingEnd,this.content.getComponent(m).width=this.colCount*(this.itemWidth+this.colSpacing)-this.colSpacing,e=this.colCount),this.lastContentPosX=0,this.lastContentPosY=0,this.content.removeAllChildren(),this.content.getComponent(f)&&this.content.getComponent(f).destroy();var n=0;n=t.length>this.spawnCount?this.spawnCount:t.length;for(var s=0,o=0,h=0,a=0;a<n;a+=e){this.scrollView.horizontal?o=(s+.5)*this.itemWidth+this.colSpacing*s+this.paddingStart:this.scrollView.vertical&&(h=this.direction?(s+.5)*this.itemHeight+this.rowSpacing*s+this.paddingStart:-(s+.5)*this.itemHeight-this.rowSpacing*s-this.paddingStart);var l=n-a;l>e&&(l=e);for(var r=0;r<l;r++){var c=a+r,d=null;c>=this.items.length?(d=g(this.itemTemplate),this.items.push(d)):d=this.items[c],this.scrollView.horizontal?h=-(r+.5)*this.itemHeight-this.rowSpacing*r:this.scrollView.vertical&&(o=(r+.5)*this.itemWidth+this.colSpacing*r),d.setPosition(o,h),d.itemId=c,c>=this.data.length?d.active=!1:(d.active=!0,this.itemUpdateFunc(c,d,this.data[c])),this.content.addChild(d)}s++}return!0},h.refreshList=function(){if(!(this.data&&this.itemUpdateFunc&&this.itemTemplate&&this.scrollView))return!1;var t=0;this.scrollView.horizontal?(this.content.getComponent(m).height=this.rowCount*(this.itemHeight+this.rowSpacing)-this.rowSpacing,this.content.getComponent(m).width=Math.ceil(this.data.length/this.rowCount)*(this.itemWidth+this.colSpacing)+this.paddingStart+this.paddingEnd,t=this.rowCount):this.scrollView.vertical&&(this.content.getComponent(m).height=Math.ceil(this.data.length/this.colCount)*(this.itemHeight+this.rowSpacing)+this.paddingStart+this.paddingEnd,this.content.getComponent(m).width=this.colCount*(this.itemWidth+this.colSpacing)-this.colSpacing,t=this.colCount);this.lastContentPosX,this.lastContentPosY;this.lastContentPosX=0,this.lastContentPosY=0,this.content.removeAllChildren(),this.content.getComponent(f)&&this.content.getComponent(f).destroy();var i=0;i=this.data.length>this.spawnCount?this.spawnCount:this.data.length;for(var e=0,n=0,s=0,o=0;o<i;o+=t){this.scrollView.horizontal?n=(e+.5)*this.itemWidth+this.colSpacing*e+this.paddingStart:this.scrollView.vertical&&(s=-(e+.5)*this.itemHeight-this.rowSpacing*e-this.paddingStart);var h=i-o;h>t&&(h=t);for(var a=0;a<h;a++){var l=o+a,r=null;l>=this.items.length?(r=g(this.itemTemplate),this.items.push(r)):r=this.items[l],this.content.addChild(r),this.scrollView.horizontal?s=-(a+.5)*this.itemHeight-this.rowSpacing*a:this.scrollView.vertical&&(n=(a+.5)*this.itemWidth+this.colSpacing*a),r.setPosition(n,s),r.itemId=l,l>=this.data.length?r.active=!1:(r.active=!0,this.itemUpdateFunc(l,r,this.data[l]))}e++}return this.scrollView.horizontal?this._updateHContentView(w.TransformBit.POSITION):this._updateVContentView(w.TransformBit.POSITION),!0},h.updateContent=function(){if(this.scrollView){var t=this.items,i=this.data.length>=this.spawnCount?this.spawnCount:this.data.length;if(t.length<i)for(var e=0,n=0,s=0,o=this.scrollView.horizontal?this.rowCount:this.colCount,h=0;h<i;h+=o){var a=i-h;a>o&&(a=o),this.scrollView.horizontal?n=(e+.5)*this.itemWidth+this.colSpacing*e+this.paddingStart:this.scrollView.vertical&&(s=this.direction?(e+.5)*this.itemHeight+this.rowSpacing*e+this.paddingStart:-(e+.5)*this.itemHeight-this.rowSpacing*e-this.paddingStart);for(var l=0;l<a;l++){var r=h+l;if(!(r<t.length)){var c=null;r>=this.items.length?(c=g(this.itemTemplate),this.items.push(c)):c=this.items[r],this.scrollView.horizontal?s=-(l+.5)*this.itemHeight-this.rowSpacing*l:this.scrollView.vertical&&(n=(l+.5)*this.itemWidth+this.colSpacing*l),c.setPosition(n,s),c.itemId=r,this.content.addChild(c)}}e+=1}for(var d=0;d<t.length;d++){var p=t[d];p.itemId<this.data.length?p.itemId<0?p.active=!1:(p.active=!0,this.itemUpdateFunc(p.itemId,p,this.data[p.itemId])):p.active=!1}}},h.getPositionInView=function(t){var i=t.parent.getComponent(m).convertToWorldSpaceAR(t.position);return this.scrollView.node.getComponent(m).convertToNodeSpaceAR(i)},h._updateHContentView=function(t){if(this.isInit&&this.canUpdateFrame&&!(this.data&&this.data.length<this.spawnCount)){this.canUpdateFrame=!1;for(var i=this.items,e=this.scrollView.content.position.x<this.lastContentPosX,n=(this.itemWidth+this.colSpacing)*this.cacheCount,s=0,o=0;o<i.length;o++){var h=this.getPositionInView(i[o]);if(e){if(s=i[o].position.x+n,h.x<-this.bufferZone&&s<this.content.getComponent(m).width){var a=o;i[a].setPosition(s,i[a].getPosition().y);var l=i[a].itemId+this.spawnCount;i[a].itemId=l,l<this.data.length?(i[a].active=!0,this.itemUpdateFunc(l,i[a],this.data[l])):i[a].active=!1}}else if(s=i[o].position.x-n,h.x>this.bufferZone&&s>0){var r=o;i[r].setPosition(s,i[r].getPosition().y);var c=i[r].itemId-this.spawnCount;i[r].itemId=c,c>=0?(i[r].active=!0,this.itemUpdateFunc(c,i[r],this.data[c])):i[r].active=!1}}this.lastContentPosX=this.scrollView.content.position.x,this.canUpdateFrame=!0}},h._updateVContentView=function(t){if(this.isInit&&this.canUpdateFrame&&!(this.data&&this.data.length<this.spawnCount)){this.canUpdateFrame=!1;for(var i=this.items,e=this.direction?this.scrollView.content.position.y<this.lastContentPosY:this.scrollView.content.position.y>this.lastContentPosY,n=(this.itemHeight+this.rowSpacing)*this.cacheCount,s=(Math.floor(this.scrollView.content.position.y/n),0),o=0;o<i.length;o++){var h=this.getPositionInView(i[o]);if(e){if(this.direction){if(s=i[o].position.y+n,h.y<-this.bufferZone&&s<this.content.getComponent(m).height){var a=o;i[a].setPosition(i[a].getPosition().x,s);var l=i[a].itemId+this.spawnCount;i[a].itemId=l,l>=0&&l<this.data.length?(i[a].active=!0,this.itemUpdateFunc(l,i[a],this.data[l]),i[a].setSiblingIndex(i.length-1)):i[a].active=!1}}else if(s=i[o].position.y-n,h.y>this.bufferZone&&s>-this.content.getComponent(m).height){var r=o;i[r].setPosition(i[r].getPosition().x,s);var c=i[r].itemId+this.spawnCount;i[r].itemId=c,c>=0&&c<this.data.length?(i[r].active=!0,this.itemUpdateFunc(c,i[r],this.data[c])):i[r].active=!1}}else if(this.direction){if(s=i[o].position.y-n,h.y>this.bufferZone&&s>0){var d=o;i[d].setPosition(i[d].getPosition().x,s);var p=i[d].itemId-this.spawnCount;i[d].itemId=p,p>=0&&p<this.data.length?(i[d].active=!0,this.itemUpdateFunc(p,i[d],this.data[p]),i[d].setSiblingIndex(0)):i[d].active=!1}}else if(s=i[o].position.y+n,h.y<-this.bufferZone&&s<0){var g=o;i[g].setPosition(i[g].getPosition().x,s);var u=i[g].itemId-this.spawnCount;i[g].itemId=u,u>=0&&u<this.data.length?(i[g].active=!0,this.itemUpdateFunc(u,i[g],this.data[u])):i[g].active=!1}}this.lastContentPosY=this.scrollView.content.position.y,this.canUpdateFrame=!0}},h._jump_to_item=function(t){var i=new C(this.node.getComponent(m).width,this.content.getComponent(m).height-this.content.parent.getComponent(m).height),e=((this.itemHeight+this.rowSpacing)*t+this.content.getComponent(m).height*this.content.getComponent(m).anchorY-.5*this.content.parent.getComponent(m).height)/i.height;return e>1||e<0||(this.scrollView.stopAutoScroll(),this.scrollView.scrollTo(S(0,e),this.threshold_n)),e},h._touchStart=function(){this.listenScroll||(this.listenScroll=!0)},h.onScrolling=function(){var t=new p;p.subtract(t,this.content.position,this.lastPos),this.lastPos.x=this.content.position.x,this.lastPos.y=this.content.position.y,t.length(),this.threshold_n},h.onScrollEnded=function(){this.listenScroll||(this.listenScroll=!0);var t=this.content.position.y-94.2,i=Math.floor(t/(this.itemHeight+this.rowSpacing));t-(this.itemHeight+this.rowSpacing)*i>this.itemHeight/2&&(i+=1);var e=new p;p.subtract(e,this.content.position,this.lastPos),this.lastPos.x=this.content.position.x,this.lastPos.y=this.content.position.y,e.length()>this.threshold_n||(this.listenScroll=!1,this.scrollView.stopAutoScroll(),this.scrollView.scrollToOffset(S(this.content.position.x,(this.itemHeight+this.rowSpacing)*i),1),this.selectItemData=this.data[i+2])},h.getItems=function(){return this.items},h.setData=function(t){this.data=t,this.canUpdateFrame=!1,this.scrollView.horizontal?this.content.getComponent(m).width=Math.ceil(this.data.length/this.rowCount)*(this.itemWidth+this.colSpacing)+this.paddingStart+this.paddingEnd:this.scrollView.vertical&&(this.content.getComponent(m).height=Math.ceil(this.data.length/this.colCount)*(this.itemHeight+this.rowSpacing)+this.paddingStart+this.paddingEnd),this.canUpdateFrame=!0},h.getData=function(){return this.data},h.removeItem=function(t){if(this.data.splice(t,1),this.data.length>=this.spawnCount)for(var i=0;i<this.items.length;i++){var e=this.items[i].itemId;e>=t&&this.itemUpdateFunc(e,this.items[i],this.data[e])}else{for(var n=t;n<this.data.length;n++)this.itemUpdateFunc(n,this.items[n],this.data[n]);this.scrollView.content.removeChild(this.items[this.items.length-1]),this.items.splice(this.items.length-1,1),this.resetContentSize()}},h.resetContentSize=function(){this.scrollView.horizontal?this.content.getComponent(m).width=Math.ceil(this.data.length/this.rowCount)*(this.itemWidth+this.colSpacing)+this.paddingStart+this.paddingEnd:this.scrollView.vertical&&(this.content.getComponent(m).height=Math.ceil(this.data.length/this.colCount)*(this.itemHeight+this.rowSpacing)+this.paddingStart+this.paddingEnd)},h.getItem=function(t){if(!(this.data.length>this.spawnCount))return this.items[t];for(var i=0;i<this.spawnCount;i++){if(this.items[i].itemId==t)return this.items[i]}},h.getItemPos=function(t){var i=0,e=0;if(this.data.length>this.spawnCount)for(var n=0;n<this.spawnCount;n++){var s=this.items[n];(0==e||e<s.position.y)&&(e=s.position.y,i=s.itemId)}return i>=t},h.resetScrollViewSizePos=function(t,i,e,n){this.canUpdateFrame=!1;var s=0,o=0;s=e||this.scrollView.view.width,o=n||this.scrollView.view.height,this.node.setPosition(t,i),this.getComponent(m).setContentSize(s,o),this.scrollView.view.setContentSize(s,o),this.canUpdateFrame=!0},h.scrollToTop=function(){this.scrollView.stopAutoScroll(),this.canUpdateFrame=!1,this.content.setPosition(this.content.getPosition().x,this.getComponent(m).height/2),this.canUpdateFrame=!0;var t=this.data.length>=this.spawnCount?this.spawnCount:this.data.length;if(this.items.length<t)for(var i=0,e=0,n=0,s=this.scrollView.horizontal?this.rowCount:this.colCount,o=0;o<t;o+=s){var h=t-o;h>s&&(h=s),this.scrollView.horizontal?e=(i+.5)*this.itemWidth+this.colSpacing*i+this.paddingStart:this.scrollView.vertical&&(n=this.direction?(i+.5)*this.itemHeight+this.rowSpacing*i+this.paddingStart:-(i+.5)*this.itemHeight-this.rowSpacing*i-this.paddingStart);for(var a=0;a<h;a++){var l=o+a;if(!(l<this.items.length)){var r=null;l>=this.items.length?(r=g(this.itemTemplate),this.items.push(r)):r=this.items[l],this.scrollView.horizontal?n=-(a+.5)*this.itemHeight-this.rowSpacing*a:this.scrollView.vertical&&(e=(a+.5)*this.itemWidth+this.colSpacing*a),r.setPosition(e,n),r.itemId=l,this.content.addChild(r)}}i+=1}for(var c=0;c<this.items.length;c++){var d=this.items[c];if(d.itemId=c,d.itemId<this.data.length)if(d.itemId<0)d.active=!1;else{d.active=!0;var p=-(c+.5)*this.itemHeight-this.rowSpacing*c-this.paddingStart;d.setPosition(d.getPosition().x,p),this.itemUpdateFunc(d.itemId,d,this.data[d.itemId])}else d.active=!1}},h.scrollToIndex=function(t){if(this.scrollView.horizontal)if(t>this.cacheCount){for(var i=Math.floor(t/this.cacheCount),e=1;e<=i;e++)this.scrollView.scrollToOffset(S(this.cacheCount*e*(this.itemWidth+this.colSpacing),0));t%this.cacheCount>0&&this.scrollView.scrollToOffset(S(t*(this.itemWidth+this.colSpacing),0))}else this.scrollView.scrollToOffset(S(t*(this.itemWidth+this.colSpacing),0));else if(this.scrollView.vertical)if(this.direction){var n=this.scrollView.getMaxScrollOffset().y;this.scrollView.scrollToOffset(S(0,n-t*(this.itemHeight+this.rowSpacing)),.5)}else this.scrollView.scrollToOffset(S(0,t*(this.itemHeight+this.rowSpacing)),.5)},h.resetPosByIndex=function(t){if(this.direction){this.canUpdateFrame=!1,this.content.setPosition(this.content.getPosition().x,-this.scrollView.view.height/2-t*(this.itemHeight+this.rowSpacing)),this.canUpdateFrame=!0,t-1+this.cacheCount>this.data.length&&(t=this.data.length+1-this.cacheCount);for(var i=0;i<this.items.length;i++){var e=this.items[i];if(e.itemId=t-1+i,e.itemId<this.data.length)if(e.itemId<0)e.active=!1;else{e.active=!0;var n=(t-1+i+.5)*this.itemHeight+this.rowSpacing*(t-1+i)+this.paddingStart;e.setPosition(e.getPosition().x,n),this.itemUpdateFunc(e.itemId,e,this.data[e.itemId])}else e.active=!1}}},h.scrollToRight=function(t){if(t>this.cacheCount)for(var i=Math.floor(t/this.cacheCount),e=1;e<=i;e++)this.scrollView.scrollToOffset(S(this.cacheCount*e*(this.itemWidth+this.colSpacing),0));this.scrollView.scrollToRight()},h.scrollToBottom=function(){this.scrollView.scrollToBottom(.5)},h.setItemWH=function(t,i){this.itemHeight=i,this.itemWidth=t},h.removeAllItem=function(){this.items=[],this.content.removeAllChildren()},o(i,[{key:"listenScroll",get:function(){return this._listenScroll},set:function(t){this._listenScroll=t,this._listenScroll?this.node.on("scrolling",this.onScrolling,this):this.node.off("scrolling",this.onScrolling,this)}},{key:"selectItemData",get:function(){return this._selectItemData},set:function(t){this._selectItemData=t}}]),i}(v)).prototype,"itemTemplate",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(M.prototype,"rowSpacing",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),D=i(M.prototype,"colSpacing",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Y=i(M.prototype,"paddingStart",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=i(M.prototype,"paddingEnd",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=i(M.prototype,"rowCount",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),N=i(M.prototype,"colCount",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),R=i(M.prototype,"bufferCount",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),L=i(M.prototype,"isChild",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=i(M.prototype,"threshold_n",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=i(M.prototype,"needSelectItem",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=i(M.prototype,"direction",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=M))||E));h._RF.pop()}}}));

System.register("chunks:///_virtual/SetPositionPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts"],(function(t){var n,e,o,i,r,c,a,s,p,u,l,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,a=t.Node,s=t.instantiate,p=t.Label,u=t.Component},function(t){l=t.OpenPopupManager},function(t){f=t.Constants}],execute:function(){var h,y,P,m,g,d,v;r._RF.push({},"1547dp4SMFLBZCfm9sYDAoW","SetPositionPopup",void 0);var C=c.ccclass,b=c.property;t("SetPositionPopup",(h=C("SetPositionPopup"),y=b(a),P=b(a),h((d=n((g=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return n=t.call.apply(t,[this].concat(r))||this,o(n,"content",d,i(n)),o(n,"cityItem",v,i(n)),n._cityList=["LA"],n}e(n,t);var r=n.prototype;return r.show=function(){var t=this;this.content.removeAllChildren(),this._cityList.forEach((function(n,e){var o=s(t.cityItem);o.getChildByName("name").getComponent(p).string=n,o.parent=t.content,o.on("click",(function(){t.onCloseTouch()}))}))},r.onCloseTouch=function(){l.instance.hide(f.PopupUI.SetPositionPopup)},n}(u)).prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=n(g.prototype,"cityItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=g))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/SettingPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./GameController.ts","./AudioManager.ts","./SpriteEx.ts","./GameEvent.ts","./EventListener.ts","./LanguageManager.ts"],(function(e){var n,t,i,o,a,r,u,s,l,p,c,d,g,h,f,m,b,S;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,u=e.Slider,s=e.Node,l=e.UITransform,p=e.Component},function(e){c=e.OpenPopupManager},function(e){d=e.Constants},function(e){g=e.default},function(e){h=e.AudioManager},function(e){f=e.SpriteEx},function(e){m=e.GameEvent},function(e){b=e.EventListener},function(e){S=e.LanguageManager}],execute:function(){var C,L,v,y,w,E,P,M,x,G,N,z,A;a._RF.push({},"1bba2nxlvZExKfutJRNi7Gy","SettingPopup",void 0);var T=r.ccclass,U=r.property;e("SettingPopup",(C=T("SettingPopup"),L=U(u),v=U(u),y=U(s),w=U(f),E=U(f),C((x=n((M=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,i(n,"musicSlider",x,o(n)),i(n,"soundSlider",G,o(n)),i(n,"buttonList",N,o(n)),i(n,"flag",z,o(n)),i(n,"lang",A,o(n)),n}t(n,e);var a=n.prototype;return a.show=function(e){this.buttonList.active="game"!=e;var n=h.instance.musicVolume,t=h.instance.soundVolume;this.musicSlider.progress=n,this.soundSlider.progress=t,this.musicSlider.node.getChildByName("bar").getComponent(l).width=n*this.musicSlider.node.getComponent(l).width,this.soundSlider.node.getChildByName("bar").getComponent(l).width=t*this.soundSlider.node.getComponent(l).width,this.setLanuage()},a.onMusicEvent=function(e){var n=e.progress,t=e.node.getComponent(l).width;e.node.getChildByName("bar").getComponent(l).width=n*t,h.instance.setMusic(n)},a.onSoundEvent=function(e){var n=e.progress,t=e.node.getComponent(l).width;e.node.getChildByName("bar").getComponent(l).width=n*t,h.instance.setSound(n),this.setLanuage()},a.hidePopup=function(){g.resume(),c.instance.hide(d.PopupUI.SettingPopup)},a.onFeedbackTouch=function(){},a.onCodeTouch=function(){c.instance.show(d.PopupUI.RedeemCodePopup)},a.onLangTouch=function(){c.instance.show(d.PopupUI.LanguagePopup)},a.setLanuage=function(){var e=S.instance.index;this.lang.index=e,this.flag.index=e},a.onEnable=function(){b.on(m.SELECT_LANGUAGE,this.setLanuage,this)},a.onDisable=function(){b.off(m.SELECT_LANGUAGE,this.setLanuage,this)},n}(p)).prototype,"musicSlider",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=n(M.prototype,"soundSlider",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=n(M.prototype,"buttonList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=n(M.prototype,"flag",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=n(M.prototype,"lang",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=M))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/Shadow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts","./GameDefine.ts"],(function(t){var o,n,e,a,s,i;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator},function(t){a=t.default},function(t){s=t.PoolManager},function(t){i=t.GameDefine}],execute:function(){var c;n._RF.push({},"12edahXWHVEuIb79B8twMAT","Shadow",void 0);var r=e.ccclass;e.property,t("Shadow",r("Shadow")(c=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];return(o=t.call.apply(t,[this].concat(e))||this)._com=null,o}o(n,t);var e=n.prototype;return e.init=function(t){this._com=t;var o=t.monsterCfg.shadeScale;this.node.setScale(o,o,o)},e.setMonsterShadownPos=function(){var t=this._com.node.getPosition();this.node.setPosition(t.x,t.y+0,0)},e.clear=function(){s.instance.putNode(this.node)},e.childUpdate=function(t){i.gameStart&&this._com&&this.setMonsterShadownPos()},n}(a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBillData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./Api.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts"],(function(t){var n,i,e,s,o,a,l,h;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy},function(t){e=t.Constants},function(t){s=t.Api},function(t){o=t.EventListener},function(t){a=t.HttpService},function(t){l=t.OpenPopupManager,h=t.LayerType}],execute:function(){i._RF.push({},"926f85ZnndDzIhJKxwXtf42","ShopBillData",void 0),t("ShopBillData",function(){function t(){this._billData=new Map,this._interval=0,this._types=["shop.diamond1","shop.diamond2","shop.diamond3","shop.diamond4","shop.diamond5","shop.diamond6","chapterfund","blueprintfund","shop.monthlypassName1","shop.monthlypassName2","shop.monthlypassName3","firsttop"],this._names=["diamond","diamond","diamond","diamond","diamond","diamond","shop.stageFund","shop.blueprintFund","shop.monthlypassName1","shop.monthlypassName2","shop.monthlypassName3","shop.firsttopup"]}var i=t.prototype;return i.addBill=function(t,n,i,e){var s=this._types.indexOf(n),o=new p;o.billId=t,o.type=n,o.name=this._names[s],o.status=!1,o.count=i,o.event=e,o.icon=s,o.request=0,this._billData.set(t,o),clearInterval(this._interval),setInterval(this.getBillsFromNetwork.bind(this),2e3)},i.getBillsFromNetwork=function(){var t=this,n=0;this._billData.forEach((function(i){n++,i.request>30?t._billData.delete(i.billId):t.getBillFromNetwork(i)})),0==n&&clearInterval(this._interval)},i.getBillFromNetwork=function(t){var n=this;a.instance.post(s.PYAMENT_BILL_INFO,{billId:t.billId}).then((function(i){0==i.code&&i.data.state?n._billData.has(t.billId)&&(o.emit(t.event),n._billData.delete(t.billId),l.instance.show(e.PopupUI.ShopSuccessPopup,null,h.TOP,!1,t)):(t.request+=1,n._billData.set(t.billId,t))}))},i.clear=function(){},n(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null;var p=t("ShopBillObj",(function(){this.billId=void 0,this.type=void 0,this.name=void 0,this.event=void 0,this.icon=void 0,this.item=void 0,this.count=void 0,this.status=void 0,this.request=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./OpenPopupManager.ts","./Constants.ts","./SpriteEx.ts","./ShopBoxRewardItem.ts","./LanguageManager.ts"],(function(e){var t,n,i,r,o,a,l,u,p,c,s,b,h,f,d,y,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Label,u=e.Node,p=e.Prefab,c=e.instantiate,s=e.Component},function(e){b=e.ShopData},function(e){h=e.OpenPopupManager},function(e){f=e.Constants},function(e){d=e.SpriteEx},function(e){y=e.ShopBoxRewardItem},function(e){g=e.LanguageManager}],execute:function(){var m,x,w,B,v,I,S,D,P,z,L,C,_,R,M,k,E,A,F,O,T;o._RF.push({},"e1572C/WrRDY5BhkDrdPKnn","ShopBoxDetailPopup",void 0);var j=a.ccclass,H=a.property;e("ShopBoxDetailPopup",(m=j("ShopBoxDetailPopup"),x=H(l),w=H(d),B=H(d),v=H(l),I=H(u),S=H(p),D=H(d),P=H(u),z=H(u),m((_=t((C=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"title",_,r(t)),i(t,"banner",R,r(t)),i(t,"icon",M,r(t)),i(t,"fee",k,r(t)),i(t,"rewardList",E,r(t)),i(t,"rewardItem",A,r(t)),i(t,"buyIcon",F,r(t)),i(t,"adBtn",O,r(t)),i(t,"buyBtn",T,r(t)),t._boxItem=void 0,t}n(t,e);var o=t.prototype;return o.show=function(e){var t=this;this._boxItem=e;var n=b.instance.boxShop.level;this.title.string=g.instance.getLang("shop.chest"+e.type),"rare"==e.type?(this.banner.index=1,this.icon.index=1):(this.banner.index=0,this.icon.index=0),e.key>0?(this.buyIcon.index="common"==e.type?2:3,this.fee.node.active=!1):(this.buyIcon.index=1,this.fee.node.active=!0,this.fee.string=""+e.price),e.adLimit>0?this.adBtn.active=!0:this.adBtn.active=!1,this.rewardList.removeAllChildren(),b.instance.getShopChestRewardItems(n,e.type).forEach((function(e,n){var i=c(t.rewardItem);i.getComponent(y).init(e),i.parent=t.rewardList}))},o.onBuyBoxBtn=function(){b.instance.buyBox(this._boxItem)},o.onCloseTouch=function(){h.instance.hide(f.PopupUI.ShopBoxDetailPopup)},t}(s)).prototype,"title",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(C.prototype,"banner",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(C.prototype,"icon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(C.prototype,"fee",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(C.prototype,"rewardList",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(C.prototype,"rewardItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(C.prototype,"buyIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(C.prototype,"adBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(C.prototype,"buyBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=C))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./ShopData.ts","./ShopBoxSubItem.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var t,n,o,r,i,a,s,p,l,u,c,h,f,b,g,v,x,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Node,p=e.Prefab,l=e.Label,u=e.ProgressBar,c=e.instantiate,h=e.Component},function(e){f=e.Constants},function(e){b=e.OpenPopupManager},function(e){g=e.ShopData},function(e){v=e.ShopBoxSubItem},function(e){x=e.EventListener},function(e){B=e.GameEvent}],execute:function(){var S,m,P,y,d,w,E,z,D,I,_,C,L;i._RF.push({},"3a779k/GFNEza7fj0ApUTv9","ShopBoxItem",void 0);var O=a.ccclass,M=a.property;e("ShopBoxItem",(S=O("ShopBoxItem"),m=M(s),P=M(p),y=M(l),d=M(u),w=M(l),S((D=t((z=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"content",D,r(t)),o(t,"shopBoxSubPrefab",I,r(t)),o(t,"level",_,r(t)),o(t,"progressBar",C,r(t)),o(t,"progressValue",L,r(t)),t}n(t,e);var i=t.prototype;return i.init=function(){var e=g.instance.boxShop;this.level.string="Lv."+e.level,this.progressValue.string=e.exp+"/"+e.expMax,this.progressBar.progress=e.exp/e.expMax,this.setShopBoxContent()},i.setShopBoxContent=function(){var e=g.instance.boxShop.shopBoxes;if(this.content.children.length)this.content.children.forEach((function(t,n){var o=e[n];t.getComponent(v).init(o)}));else for(var t=0;t<e.length;t++){var n=e[t],o=c(this.shopBoxSubPrefab);o.parent=this.content,o.getComponent(v).init(n)}},i.onRewardBtn=function(){b.instance.show(f.PopupUI.ShopBoxRewardPopup)},i.onEnable=function(){x.on(B.UPDATE_SHOP_BOX,this.init,this)},i.onDisable=function(){x.off(B.UPDATE_SHOP_BOX,this.init,this)},t}(h)).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(z.prototype,"shopBoxSubPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(z.prototype,"level",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(z.prototype,"progressBar",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(z.prototype,"progressValue",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=z))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxLevelupPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./ResourcesUtil.ts","./Constants.ts","./OpenPopupManager.ts"],(function(e){var t,r,n,o,i,a,l,s,p,c,u,h,m,d,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Label,s=e.Node,p=e.instantiate,c=e.Sprite,u=e.Component},function(e){h=e.ShopData},function(e){m=e.ResourcesUtil},function(e){d=e.Constants},function(e){v=e.OpenPopupManager}],execute:function(){var f,g,y,w,b,C,S,B,I,P,L;i._RF.push({},"e4e0diw95ZGfYqzIPhCOKlg","ShopBoxLevelupPopup",void 0);var R=a.ccclass,x=a.property;e("ShopBoxLevelupPopup",(f=R("ShopBoxLevelupPopup"),g=x(l),y=x(s),w=x(s),b=x(s),f((B=t((S=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"level",B,o(t)),n(t,"commonRewards",I,o(t)),n(t,"rareRewards",P,o(t)),n(t,"rewardItem",L,o(t)),t.rewardData=null,t}r(t,e);var i=t.prototype;return i.show=function(){var e=h.instance.boxShop.level;this.level.string="Lv."+e.toString();var t=h.instance.getShopChestByLevel(e);this.setChestItems(t.common,this.commonRewards),this.setChestItems(t.rare,this.rareRewards)},i.setChestItems=function(e,t){var r=this;e.forEach((function(e,n){var o,i=h.instance.getItemCfgById(e.itemId);t.children[n]?(o=t.children[n],t.children[n].active=!0):(o=p(r.rewardItem)).parent=t;var a=d.itemsPath+i.icon+"/spriteFrame";m.setSpriteFrame(a,o.getChildByName("fragment").getChildByName("rarity").getComponent(c)),o.getChildByName("count").getComponent(l).string="+"+e.count}));for(var n=e.length;n<t.children.length;n++)t.children[n].active=!1},i.onCloseBtn=function(){v.instance.hide(d.PopupUI.ShopBoxLevelupPopup)},t}(u)).prototype,"level",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(S.prototype,"commonRewards",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(S.prototype,"rareRewards",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(S.prototype,"rewardItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=S))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxOpenPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./SpriteEx.ts","./EventListener.ts","./GameEvent.ts","./LanguageManager.ts"],(function(e){var n,t,i,o,r,a,p,u,s,l,c,h,f,b,m,g,y,v;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,p=e.ParticleSystem2D,u=e.Node,s=e.AnimationComponent,l=e.Label,c=e.Component},function(e){h=e.Constants},function(e){f=e.OpenPopupManager,b=e.LayerType},function(e){m=e.SpriteEx},function(e){g=e.EventListener},function(e){y=e.GameEvent},function(e){v=e.LanguageManager}],execute:function(){var x,w,P,S,_,d,B,L,A,O,E,z,I;r._RF.push({},"d412a8ehqBHzISnwFQDkukY","ShopBoxOpenPopup",void 0);var D=a.ccclass,C=a.property;e("ShopBoxOpenPopup",(x=D("ShopBoxOpenPopup"),w=C(p),P=C(u),S=C(s),_=C(l),d=C(m),x((A=n((L=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,i(n,"starAnim",A,o(n)),i(n,"bg",O,o(n)),i(n,"boxAnim",E,o(n)),i(n,"title",z,o(n)),i(n,"icon",I,o(n)),n._rewards=[],n._boxItem=null,n._showBoxLevelup=!1,n}t(n,e);var r=n.prototype;return r.show=function(e,n,t){var i=this;this._boxItem=e,this._rewards=n,this._showBoxLevelup=t,this.title.string=v.instance.getLang("shop.chest"+e.type),this.icon.index="common"==e.type?0:1,this.bg.active=!1,this.boxAnim.play(),this.boxAnim.on(s.EventType.FINISHED,(function(){i.bg.active=!0,i.starAnim.resetSystem()}))},r.onCloseBtn=function(){var e=this;f.instance.hide(h.PopupUI.ShopBoxOpenPopup),f.instance.showRewardPopup(this._rewards,null,(function(n){e._showBoxLevelup&&f.instance.show(h.PopupUI.ShopBoxLevelupPopup,null,b.TOP,!1)})),g.emit(y.UPDATE_SHOP_BOX)},n}(c)).prototype,"starAnim",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(L.prototype,"bg",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(L.prototype,"boxAnim",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(L.prototype,"title",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(L.prototype,"icon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=L))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./ItemModel.ts","./BagData.ts","./ShopData.ts"],(function(t){var e,n,i,o,r,a,c,u,l,s,p,f,h,m,g,y,d,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Label,u=t.Node,l=t.Sprite,s=t.UITransform,p=t.Vec3,f=t.Component},function(t){h=t.Constants},function(t){m=t.ResourcesUtil},function(t){g=t.SpriteEx},function(t){y=t.ItemType},function(t){d=t.BagData},function(t){b=t.ShopData}],execute:function(){var I,S,w,v,x,B,z,D,F,R,C;r._RF.push({},"4ad60OfpcxDQJhlzQbifeJF","ShopBoxRewardItem",void 0);var q=a.ccclass,_=a.property;t("ShopBoxRewardItem",(I=q("ShopBoxRewardItem"),S=_(c),w=_(u),v=_(l),x=_(g),I((D=e((z=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"count",D,o(e)),i(e,"flag",F,o(e)),i(e,"icon",R,o(e)),i(e,"quality",C,o(e)),e._itemCfg=null,e}n(e,t);var r=e.prototype;return r.init=function(t,e){var n=this,i=this._itemCfg=b.instance.getItemCfgById(t.itemId),o="";o=i.type==y.WeaponFragment?h.weaponIconPath+d.instance.getWeaponIcon(i.dataId)+"/spriteFrame":h.itemsPath+i.icon+"/spriteFrame",m.geSpriteFrame(o).then((function(t){n.icon.spriteFrame=t;var e=n.icon.getComponent(s).contentSize,i=Math.min(80/e.width,80/e.height);n.icon.node.setScale(i,i)})),this.count.string="x"+t.count,this.quality.index=i.quality?i.quality:0,this.flag.active=!1,e&&this.setAnim()},r.setAnim=function(){this.quality.node.scale=new p(1,1,1)},r.onInfoBtn=function(){},e}(f)).prototype,"count",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(z.prototype,"flag",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(z.prototype,"icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(z.prototype,"quality",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=z))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxRewardPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./ShopData.ts","./ResourcesUtil.ts"],(function(e){var t,n,r,i,o,a,s,l,c,u,h,p,v,f,m,g,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.Node,h=e.instantiate,p=e.Sprite,v=e.Component},function(e){f=e.Constants},function(e){m=e.OpenPopupManager},function(e){g=e.ShopData},function(e){d=e.ResourcesUtil}],execute:function(){var L,w,B,y,b,_,C,I,R,x,S,P,z,D,F;s._RF.push({},"e8850OvsihAIaIWkg18gHym","ShopBoxRewardPopup",void 0);var N=l.ccclass,k=l.property;e("ShopBoxRewardPopup",(L=N("ShopBoxRewardPopup"),w=k(c),B=k(u),y=k(u),b=k(u),_=k(u),C=k(u),L((x=t((R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"level",x,i(t)),r(t,"leftBtn",S,i(t)),r(t,"rightBtn",P,i(t)),r(t,"commonRewards",z,i(t)),r(t,"rareRewards",D,i(t)),r(t,"rewardItem",F,i(t)),t._maxLevel=10,t._curLevel=1,t}n(t,e);var s=t.prototype;return s.show=function(){var e=o(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._curLevel=g.instance.boxShop.level,this.setChestLevelInfo();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.setChestLevelInfo=function(){this.level.string="Lv."+this._curLevel,this._curLevel<=1?(this.leftBtn.active=!1,this.rightBtn.active=!0):this._curLevel<this._maxLevel?(this.leftBtn.active=!0,this.rightBtn.active=!0):(this.leftBtn.active=!0,this.rightBtn.active=!1);var e=g.instance.getShopChestByLevel(this._curLevel);this.setChestItems(e.common,this.commonRewards),this.setChestItems(e.rare,this.rareRewards)},s.setChestItems=function(e,t){var n=this;e.forEach((function(e,r){var i,o=g.instance.getItemCfgById(e.itemId);t.children[r]?(i=t.children[r],t.children[r].active=!0):(i=h(n.rewardItem)).parent=t;var a=f.itemsPath+o.icon+"/spriteFrame";d.setSpriteFrame(a,i.getChildByName("fragment").getChildByName("rarity").getComponent(p)),i.getChildByName("count").getComponent(c).string="+"+e.count}));for(var r=e.length;r<t.children.length;r++)t.children[r].active=!1},s.onLeftBtn=function(){this._curLevel--,this._curLevel<=0&&(this._curLevel=1),this.setChestLevelInfo()},s.onRightBtn=function(){this._curLevel++,this._curLevel>=this._maxLevel&&(this._curLevel=this._maxLevel),this.setChestLevelInfo()},s.onCloseBtn=function(){m.instance.hide(f.PopupUI.ShopBoxRewardPopup)},t}(v)).prototype,"level",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(R.prototype,"leftBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(R.prototype,"rightBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(R.prototype,"commonRewards",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(R.prototype,"rareRewards",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(R.prototype,"rewardItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=R))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./SpriteEx.ts","./ShopData.ts","./LanguageManager.ts","./AdManager.ts"],(function(n){var e,t,o,i,r,a,c,u,l,s,p,b,h,f,g,y,m,d,B;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.Label,u=n.RichText,l=n.Node,s=n.UITransform,p=n.Component},function(n){b=n.Constants},function(n){h=n.OpenPopupManager,f=n.LayerType},function(n){g=n.SpriteEx},function(n){y=n.ShopData},function(n){m=n.LanguageManager},function(n){d=n.AdManager,B=n.AdType}],execute:function(){var x,v,S,w,C,L,O,z,I,_,A,F,D,P,j,M,T,H,k;r._RF.push({},"14914cHVmtA/6BExA0fHeks","ShopBoxSubItem",void 0);var E=a.ccclass,R=a.property;n("ShopBoxSubItem",(x=E("ShopBoxSubItem"),v=R(c),S=R(g),w=R(u),C=R(g),L=R(c),O=R(l),z=R(l),I=R(l),x((F=e((A=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r))||this,o(e,"title",F,i(e)),o(e,"bg",D,i(e)),o(e,"desc",P,i(e)),o(e,"buyIcon",j,i(e)),o(e,"fee",M,i(e)),o(e,"countdown",T,i(e)),o(e,"adBtn",H,i(e)),o(e,"buyBtn",k,i(e)),e._boxObj=null,e}t(e,n);var r=e.prototype;return r.init=function(n){var e=y.instance.boxShop.level;this._boxObj=n,this.title.string=m.instance.getLang("shop.chest"+n.type),this.bg.index="common"==n.type?0:1,n.key>0?(this.buyIcon.index="common"==n.type?2:3,this.fee.node.active=!1):(this.buyIcon.index=1,this.fee.node.active=!0,this.fee.string=""+n.price),n.adLimit>0?(this.adBtn.active=!0,this.buyBtn.getComponent(s).setContentSize(140,90)):(this.adBtn.active=!1,this.buyBtn.getComponent(s).setContentSize(200,90));var t="<color=#31FF0A>"+m.instance.getLang("common")+"</color>";e>2&&"common"==n.type&&(t="<color=#00CCFF>"+m.instance.getLang("uncommon")+"</color>"),e<=2&&"rare"==n.type&&(t="<color=#00CCFF>"+m.instance.getLang("uncommon")+"</color>"),e>2&&"rare"==n.type&&(t="<color=#FA1CB3>"+m.instance.getLang("rare")+"</color>"),this.desc.string="<b>"+m.instance.getLang("shop.chestweapon",[t])+"<b>",this.countdown.active=n.freeCountdown&&n.freeCountdown>0,this.setOutLine()},r.setOutLine=function(){var n=this;this.scheduleOnce((function(){for(var e=n.desc.node.children,t=0;t<e.length;t++){var o=e[t];o.getComponent(c).isBold=!0,o.getComponent(c).enableOutline=!0,o.getComponent(c).enableShadow=!1,o.getComponent(c).outlineWidth=3}}),.01)},r.onBuyBoxBtn=function(){y.instance.buyBox(this._boxObj)},r.onWatchAdBtn=function(){var n=this;d.instance.showAd(B.SHOP_BOX,"common"==this._boxObj.type?0:1,(function(e){y.instance.buyBox(n._boxObj,e)}))},r.toBoxDetail=function(){h.instance.show(b.PopupUI.ShopBoxDetailPopup,null,f.TOP,!1,this._boxObj)},r.onDisable=function(){},e}(p)).prototype,"title",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(A.prototype,"bg",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(A.prototype,"desc",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(A.prototype,"buyIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(A.prototype,"fee",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(A.prototype,"countdown",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(A.prototype,"adBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(A.prototype,"buyBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=A))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxWeaponDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./CfgMgr.ts","./ItemModel.ts","./SpriteEx.ts","./ResourcesUtil.ts","./BagData.ts","./ShopData.ts"],(function(e){var t,n,a,o,i,r,p,l,c,s,u,g,h,m,f,y,d,b,w,C,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,p=e.Label,l=e.Node,c=e.Sprite,s=e.UITransform,u=e.Component,g=e.instantiate},function(e){h=e.OpenPopupManager},function(e){m=e.Constants},function(e){f=e.CfgMgr},function(e){y=e.ItemCfg,d=e.ItemType},function(e){b=e.SpriteEx},function(e){w=e.ResourcesUtil},function(e){C=e.BagData},function(e){v=e.ShopData}],execute:function(){var S,I,B,D,x,P,F,z,M,W,L,N,A;i._RF.push({},"2e5cdVydl1AVbqiy2lKmht3","ShopBoxWeaponDetailPopup",void 0);var q=r.ccclass,O=r.property;e("ShopBoxWeaponDetailPopup",(S=q("ShopBoxWeaponDetailPopup"),I=O(p),B=O(l),D=O(l),x=O(c),P=O(b),S((M=t((z=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"probability",M,o(t)),a(t,"weaponList",W,o(t)),a(t,"wepaonItem",L,o(t)),a(t,"icon",N,o(t)),a(t,"banner",A,o(t)),t}n(t,e);var i=t.prototype;return i.show=function(e){for(var t=this,n=v.instance.getItemCfgById(e),a=[],o=f.getCfgDataArray(new y),i=0;i<o.length;i++){var r=o[i];r.type==d.WeaponFragment&&r.quality==n.quality&&a.push(r)}var p=C.instance.getCarryWeaponArr(),l=m.itemsPath+n.icon+"/spriteFrame";w.geSpriteFrame(l).then((function(e){t.icon.spriteFrame=e;var n=t.icon.getComponent(s).contentSize,a=Math.min(160/n.width,160/n.height);t.icon.node.setScale(a,a)})),this.weaponList.removeAllChildren(),a.sort((function(e,t){if(p.indexOf(e.dataId)>=0)return-1}));for(var u=0,h=function(){var e=a[S],n=!(p.indexOf(e.dataId)>=0);u+=n?0:1;var o=g(t.wepaonItem);o.getComponent(b).index=e.quality;var i=m.weaponIconPath+C.instance.getWeaponIcon(e.dataId)+"/spriteFrame";w.geSpriteFrame(i).then((function(e){o.getChildByName("weapon").getComponent(c).spriteFrame=e;var t=o.getChildByName("weapon").getComponent(s).contentSize,n=Math.min(64/t.width,64/t.height);o.getChildByName("weapon").setScale(n,n)})),o.getChildByName("lock").active=n,n&&(o.getComponent(c).grayscale=!0,o.getChildByName("weapon").getComponent(c).grayscale=!0),o.parent=t.weaponList},S=0;S<a.length;S++)h();this.probability.string=Number(100/u).toFixed(2)+"%"},i.onCloseTouch=function(){h.instance.hide(m.PopupUI.ShopBoxWeaponDetailPopup)},t}(u)).prototype,"probability",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(z.prototype,"weaponList",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(z.prototype,"wepaonItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(z.prototype,"icon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(z.prototype,"banner",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=z))||F));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./WalletManager.ts","./PlayerData.ts","./GameEvent.ts","./ItemModel.ts","./RewardModel.ts","./ShopModel.ts","./ShopBillData.ts"],(function(t){var n,e,o,i,a,s,h,c,d,p,u,r,l,f,S,_,g,y;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){o=t.Constants},function(t){i=t.Api},function(t){a=t.CfgMgr},function(t){s=t.EventListener},function(t){h=t.HttpService},function(t){c=t.OpenPopupManager,d=t.LayerType},function(t){p=t.WalletManager},function(t){u=t.PlayerData},function(t){r=t.GameEvent},function(t){l=t.ItemCfg},function(t){f=t.RewardObj},function(t){S=t.ShopChestLevelCfg,_=t.BoxShopModel,g=t.DailyShopModel},function(t){y=t.ShopBillData}],execute:function(){e._RF.push({},"7a99dPOyFBNd6BcTo/voQfQ","ShopData",void 0),t("ShopData",function(){function t(){this._boxShop=new _,this._dailyShop=new g,this._goldShop=[],this._diamondShop=[],this._chestLevelData=new Map,this.pageNode=void 0}var e=t.prototype;return e.initCfg=function(){for(var t=a.getCfgDataArray(new S),n=0;n<t.length;n++){var e=t[n];this._chestLevelData.set(e.level,e)}},e.getItemCfgById=function(t){return a.getDataById(new l,t)},e.getShopInfo=function(){var t=this;this._diamondShop.length>0&&s.emit(r.UPDATE_SHOP_POPUP),h.instance.post(i.SHOP_INFO).then((function(n){0==n.code&&(t._boxShop=n.data.boxShop,t._dailyShop=n.data.dailyShop,t._goldShop=n.data.goldShop,t._diamondShop=n.data.diamondShop,s.emit(r.UPDATE_SHOP_POPUP))}))},e.refreshDailyShop=function(t){this._dailyShop=t,s.emit(r.UPDATE_SHOP_DAILY)},e.refreshBoxShop=function(t){this._boxShop=t,s.emit(r.UPDATE_SHOP_BOX)},e.refreshGoldShop=function(t){this._goldShop=t,s.emit(r.UPDATE_SHOP_GOLD)},e.refreshDiamondShop=function(t){this._diamondShop=t,s.emit(r.UPDATE_SHOP_DIAMOND)},e.getShopCfgById=function(t){return this._dailyShop.goods.find((function(n){return n.id==t}))},e.getShopChestByLevel=function(t){return this._chestLevelData.get(t)},e.getShopChestRewardItems=function(t,n){for(var e=[],o=new Map,i=0;i<=t;i++)for(var a=this._chestLevelData.get(i)[n],s=0;s<a.length;s++){var h=a[s],c=h.count;o.has(h.itemId)&&(c+=o.get(h.itemId)),o.set(h.itemId,c)}return o.forEach((function(t,n){var o=new f;o.count=t,o.itemId=n,e.push(o)})),e},e.buyBox=function(t,n){var e=this;h.instance.post(i.SHOP_BOX_BUY,{shopId:t.id,type:t.type,sign:n,isKeyOpen:t.key>0}).then((function(n){if(0==n.code){var i=!1;n.data.boxShop.level>e._boxShop.level&&(i=!0),e.refreshBoxShop(n.data.boxShop),c.instance.show(o.PopupUI.ShopBoxOpenPopup,null,d.TOP,!1,t,n.data.result,i)}else c.instance.showToast(n.msg)})).catch((function(){}))},e.buyDalilyItem=function(n,e,o){h.instance.post(i.SHOP_DAILY_BUY,{shopId:n,sign:e}).then((function(n){0==n.code?(c.instance.showRewardPopup(n.data.result,null,o),s.emit(r.CLOSE_SHOP_ITEM_POPUP),t.instance.refreshDailyShop(n.data.dailyShop),u.instance.getPlayerInfo(!1)):c.instance.showToast(n.msg)}))},e.buyDiamondWithWallet=function(t,n){var e=this;p.instance.isConnected()?this._buyDiamondWithWallet(t,n):p.instance.connectWallet((function(){e._buyDiamondWithWallet(t,n)}))},e._buyDiamondWithWallet=function(t,n){h.instance.post(i.SHOP_DIAMOND_PREBUY,{shopId:t}).then((function(t){0==t.code?p.instance.buyWithToken(t.data.amount,t.data.payload,(function(e,o){0==e&&(y.instance.addBill(t.data.billId,"diamond",n,r.GET_SHOP_DATA),c.instance.showToast("shop.submitSuccess"))})):c.instance.showToast(t?t.msg:"network.error")}))},e.buyDiamond=function(n,e,o){h.instance.post(i.SHOP_DIAMOND_BUY,{shopId:n,sign:e}).then((function(n){0==n.code?(c.instance.showRewardPopup(n.data.result,null,o),s.emit(r.CLOSE_SHOP_ITEM_POPUP),t.instance.refreshDiamondShop(n.data.diamondShop),u.instance.getPlayerInfo(!1)):c.instance.showToast(n.msg)}))},e.clear=function(){},n(t,[{key:"dailyShop",get:function(){return this._dailyShop}},{key:"boxShop",get:function(){return this._boxShop}},{key:"goldShop",get:function(){return this._goldShop}},{key:"diamondShop",get:function(){return this._diamondShop}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null;t("ShopBuyObj",(function(){this.sid=void 0,this.count=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDayItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts","./ShopData.ts","./ShopDaySubItem.ts","./EventListener.ts","./GameEvent.ts","./LanguageManager.ts","./AdManager.ts","./HttpService.ts","./Api.ts"],(function(t){var e,n,i,o,a,r,s,c,u,h,l,f,p,d,m,y,D,S,g,b,_,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Label,c=t.RichText,u=t.Node,h=t.Prefab,l=t.instantiate,f=t.Component},function(t){p=t.Util},function(t){d=t.ShopData},function(t){m=t.ShopDaySubItem},function(t){y=t.EventListener},function(t){D=t.GameEvent},function(t){S=t.LanguageManager},function(t){g=t.AdManager,b=t.AdType},function(t){_=t.HttpService},function(t){v=t.Api}],execute:function(){var T,A,P,I,E,L,w,H,R,F,z;a._RF.push({},"506acm8PaJAVIQN7NcEX9ZF","ShopDayItem",void 0);var C=r.ccclass,M=r.property;t("ShopDayItem",(T=C("ShopDayItem"),A=M(s),P=M(c),I=M(u),E=M(h),T((H=e((w=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"time",H,o(e)),i(e,"dayTimes",R,o(e)),i(e,"content",F,o(e)),i(e,"shopDaySubPrefab",z,o(e)),e._diffTime=3828,e._refreshData=null,e}n(e,t);var a=e.prototype;return a.init=function(){this._refreshData=d.instance.dailyShop.refresh,this.dayTimes.string="<b><color=#ffffff>"+S.instance.getLang("shop.lefttoday")+"</color><color=#3BFC16>"+this._refreshData.limit+"</color><color=#ffffff></color></b>",this.unschedule(this.updateTime),this.schedule(this.updateTime,1),this.setShopDayContent()},a.setShopDayContent=function(){var t=d.instance.dailyShop.goods,e=0;for(e=0;e<t.length;e++){var n=t[e];if(this.content.children[e])this.content.children[e].getComponent(m).init(n);else{var i=l(this.shopDaySubPrefab);i.parent=this.content,i.getComponent(m).init(n)}}for(var o=this.content.children.length-1;o>=e;o--)this.content.children[o].removeFromParent()},a.onRefreshBtn=function(){g.instance.showAd(b.SHOP_DAILY_REFRESH,0,(function(t){_.instance.post(v.SHOP_DAILY_REFRESH,{sign:t}).then((function(t){0==t.code&&d.instance.refreshDailyShop(t.data.dailyShop)}))}))},a.updateTime=function(){this._refreshData.countdown<=0&&(d.instance.getShopInfo(),this.unschedule(this.updateTime)),this._refreshData.countdown--,this.time.string=p.timeToString(this._refreshData.countdown)},a.onEnable=function(){y.on(D.UPDATE_SHOP_DAILY,this.init,this)},a.onDisable=function(){this.unschedule(this.updateTime),y.off(D.UPDATE_SHOP_DAILY,this.init,this)},e}(f)).prototype,"time",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(w.prototype,"dayTimes",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(w.prototype,"content",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(w.prototype,"shopDaySubPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=w))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDaySubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./ResourcesUtil.ts","./SpriteEx.ts","./GameEvent.ts","./ShopData.ts","./ItemModel.ts","./BagData.ts","./LanguageManager.ts","./CoinMode.ts","./Util.ts","./BagHeroData.ts","./AdManager.ts"],(function(t){var e,i,n,o,a,r,s,u,l,c,m,g,f,p,h,d,b,y,I,_,v,D,L,E,w,C,S,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Label,u=t.Node,l=t.Sprite,c=t.UITransform,m=t.Vec3,g=t.Component},function(t){f=t.Constants},function(t){p=t.EventListener},function(t){h=t.OpenPopupManager,d=t.LayerType},function(t){b=t.ResourcesUtil},function(t){y=t.SpriteEx},function(t){I=t.GameEvent},function(t){_=t.ShopData},function(t){v=t.ItemType},function(t){D=t.BagData},function(t){L=t.LanguageManager},function(t){E=t.CoinObj},function(t){w=t.Util},function(t){C=t.BagHeroData},function(t){S=t.AdManager,T=t.AdType}],execute:function(){var R,A,F,G,z,x,M,O,P,W,k,B,q,U,H,N,Y,j,K,V,J,Q,X,Z,$;a._RF.push({},"a486bSBqYFN2p6sE6rUzfgF","ShopDaySubItem",void 0);var tt=r.ccclass,et=r.property;t("ShopDaySubItem",(R=tt("ShopDaySubItem"),A=et(y),F=et(s),G=et(s),z=et(s),x=et(s),M=et(u),O=et(l),P=et(y),W=et(y),k=et(u),B=et(u),R((H=e((U=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"bg",H,o(e)),n(e,"title",N,o(e)),n(e,"count",Y,o(e)),n(e,"fee",j,o(e)),n(e,"discount",K,o(e)),n(e,"flag",V,o(e)),n(e,"icon",J,o(e)),n(e,"qulity",Q,o(e)),n(e,"buyIcon",X,o(e)),n(e,"soldout",Z,o(e)),n(e,"mask",$,o(e)),e._goodItem=null,e._itemCfg=null,e._types=[v.Diamond,v.Energy,v.Gold,v.Ticket,v.TicketBox,v.Food,v.WeaponFragment],e._events=[I.GET_DIAMOND_REWARD,I.GET_ENERGY_REWARD,I.GET_GOLD_REWARD,I.GET_TICKET_REWARD,I.GET_TICKET_REWARD,I.GET_FOOD_REWARD,I.GET_WEAPON_REWARD],e}i(e,t);var a=e.prototype;return a.init=function(t){var e=this;this._goodItem=t,this._itemCfg=_.instance.getItemCfgById(t.item.itemId),this.mask.active=t.freeLimit>0||t.adLimit>0,this.title.string=L.instance.getLang(this._itemCfg.name),this.qulity.index=this._itemCfg.quality,this.bg.index=0==t.price?0:1;var i=f.itemsPath+this._itemCfg.icon+"/spriteFrame";this._itemCfg.type==v.WeaponFragment?(this.flag.active=!0,i=f.weaponIconPath+D.instance.getWeaponIcon(this._itemCfg.dataId)+"/spriteFrame"):this._itemCfg.type==v.HeroFragment?(this.flag.active=!0,i=f.heroIconPath+C.instance.getHeroIcon(this._itemCfg.dataId)+"/spriteFrame"):this.flag.active=!1,b.geSpriteFrame(i).then((function(t){e.icon.spriteFrame=t;var i=e.icon.getComponent(c).contentSize,n=Math.min(80/i.width,80/i.height);e.icon.node.setScale(n,n)})),this.count.string="x"+t.item.count,void 0===this._itemCfg.quality&&(this.qulity.getComponent(l).spriteFrame=null),this.buyIcon.node.active=!0,t.freeLimit>0?(this.buyIcon.index=0,this.buyIcon.node.active=!1,this.fee.string=L.instance.getLang("free")):t.adLimit>0?(this.buyIcon.index=0,this.fee.string=L.instance.getLang("free")):t.buyLimit>0&&"gold"==t.token?(this.buyIcon.index=1,this.fee.string=""+t.price):(this.buyIcon.index=2,this.fee.string=""+t.price);var n=!0;(t.adLimit>0||t.freeLimit>0||t.buyLimit>0)&&(n=!1),this.soldout.active=n,this.buyIcon.node.parent.active=!n},a.getTokenIndex=function(t){return t.freeLimit>0||t.adLimit>0?0:t.buyLimit>0&&"gold"==t.token?1:2},a.onClickBtn=function(){var t=this,e=!0;(this._goodItem.adLimit>0||this._goodItem.freeLimit>0||this._goodItem.buyLimit>0)&&(e=!1),e?h.instance.showToast("shop.soldout"):this._goodItem.freeLimit>0?_.instance.buyDalilyItem(this._goodItem.id,"",this.showFlyGoldAnim.bind(this)):this._goodItem.adLimit>0?S.instance.showAd(T.SHOP_DAILY,this._goodItem.id,(function(e){_.instance.buyDalilyItem(t._goodItem.id,e,t.showFlyGoldAnim.bind(t))})):h.instance.show(f.PopupUI.ShopItemPopup,null,d.TOP,!1,this._goodItem,this.showFlyGoldAnim.bind(this))},a.showFlyGoldAnim=function(){var t=this._types.indexOf(this._itemCfg.type);if(!(t<0)){var e=this.node.getComponent(c).convertToWorldSpaceAR(new m(0,0,0)),i=new E;i.pos=e,i.num=w.getRandomInt(5,10),p.emit(this._events[t],i)}},a.getDiscountStr=function(t){return Math.floor(t/10)+"Off"},e}(g)).prototype,"bg",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(U.prototype,"title",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(U.prototype,"count",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(U.prototype,"fee",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(U.prototype,"discount",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(U.prototype,"flag",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(U.prototype,"icon",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(U.prototype,"qulity",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(U.prototype,"buyIcon",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(U.prototype,"soldout",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(U.prototype,"mask",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=U))||q));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDiamondItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./ShopDiamondSubItem.ts","./EventListener.ts","./GameEvent.ts","./WalletManager.ts","./OpenPopupManager.ts","./Constants.ts"],(function(n){var t,e,o,i,a,l,r,c,s,u,p,h,f,b,m,d,D,g;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,l=n._decorator,r=n.Node,c=n.Prefab,s=n.Label,u=n.instantiate,p=n.Component},function(n){h=n.ShopData},function(n){f=n.ShopDiamondSubItem},function(n){b=n.EventListener},function(n){m=n.GameEvent},function(n){d=n.WalletManager},function(n){D=n.OpenPopupManager},function(n){g=n.Constants}],execute:function(){var S,v,P,I,W,C,E,y,U,_,w;a._RF.push({},"c9d22s+z8REQ7ZNKuPUT79b","ShopDiamondItem",void 0);var A=l.ccclass,L=l.property;n("ShopDiamondItem",(S=A("ShopDiamondItem"),v=L(r),P=L(c),I=L(s),W=L(s),S((y=t((E=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return t=n.call.apply(n,[this].concat(a))||this,o(t,"content",y,i(t)),o(t,"shopDiamondSubPrefab",U,i(t)),o(t,"balance",_,i(t)),o(t,"walletBtn",w,i(t)),t}e(t,n);var a=t.prototype;return a.init=function(){this.setShopDiamondContent(),this.setWalletContent()},a.setShopDiamondContent=function(){var n=h.instance.diamondShop;if(this.content.children.length)this.content.children.forEach((function(t,e){var o=n[e];t.getComponent(f).init(o,e)}));else for(var t=0;t<n.length;t++){var e=n[t],o=u(this.shopDiamondSubPrefab);o.parent=this.content,o.getComponent(f).init(e,t)}},a.setWalletContent=function(){var n=this,t=d.instance.connectUI&&d.instance.connectUI.connected;this.walletBtn.string=t?"Wallet":"Connect",t?d.instance.getTokenBalance((function(t){n.balance.string=Number(Number(t)/Math.pow(10,9)).toFixed(2)})):this.balance.string="--"},a.onWalletBtn=function(){var n=this;d.instance.connectUI.connected?D.instance.show(g.PopupUI.WalletPopup):d.instance.connectWallet((function(){n.walletBtn.string="Wallet"}))},a.onUpdateWallet=function(){this.setWalletContent()},a.onEnable=function(){b.on(m.UPDATE_SHOP_DIAMOND,this.setShopDiamondContent,this),b.on(m.UPDATE_WALLET_INFO,this.onUpdateWallet,this)},a.onDisable=function(){b.off(m.UPDATE_SHOP_DIAMOND,this.setShopDiamondContent,this),b.on(m.UPDATE_WALLET_INFO,this.onUpdateWallet,this)},t}(p)).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(E.prototype,"shopDiamondSubPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(E.prototype,"balance",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(E.prototype,"walletBtn",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=E))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDiamondSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./SpriteEx.ts","./Util.ts","./GameEvent.ts","./CoinMode.ts","./LanguageManager.ts","./ShopData.ts","./AdManager.ts"],(function(n){var t,i,e,o,a,r,u,s,c,l,m,d,p,b,f,h,g,y,I,v;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,u=n.Label,s=n.Node,c=n.UITransform,l=n.Vec3,m=n.Component},function(n){d=n.EventListener},function(n){p=n.SpriteEx},function(n){b=n.Util},function(n){f=n.GameEvent},function(n){h=n.CoinObj},function(n){g=n.LanguageManager},function(n){y=n.ShopData},function(n){I=n.AdManager,v=n.AdType}],execute:function(){var D,_,w,L,S,A,M,z,x,E,k,P,R,C,F,T,N;a._RF.push({},"d0e64YxAnNM0afPlMwIPeIj","ShopDiamondSubItem",void 0);var O=r.ccclass,W=r.property;n("ShopDiamondSubItem",(D=O("ShopDiamondSubItem"),_=W(u),w=W(u),L=W(u),S=W(u),A=W(p),M=W(p),z=W(s),D((k=t((E=function(n){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,e(t,"title",k,o(t)),e(t,"count",P,o(t)),e(t,"fee",R,o(t)),e(t,"bonus",C,o(t)),e(t,"icon",F,o(t)),e(t,"buyIcon",T,o(t)),e(t,"mask",N,o(t)),t._diamondItem=null,t.PopupLayer=void 0,t}i(t,n);var a=t.prototype;return a.init=function(n,t){this._diamondItem=n,this.title.string=g.instance.getLang(n.name),this.buyIcon.node.active=!0,n.freeLimit>0?(this.buyIcon.node.active=!1,this.fee.string=g.instance.getLang("free"),this.mask.active=!0):n.adLimit>0?(this.buyIcon.index=0,this.fee.string=g.instance.getLang("free"),this.mask.active=!0):(this.buyIcon.index=1,this.fee.string=""+n.price,this.mask.active=!1),n.bonus?(this.bonus.node.parent.active=!0,this.bonus.string="Bonus:"+n.bonus):this.bonus.node.parent.active=!1,this.count.string="x"+n.item.count,this.icon.index=t},a.onClickBtn=function(){var n=this;this._diamondItem.freeLimit>0?y.instance.buyDiamond(this._diamondItem.id,"",this.showFlyDiamondAnim.bind(this)):this._diamondItem.adLimit>0?I.instance.showAd(v.SHOP_DIAMOND,this._diamondItem.id,(function(t){y.instance.buyDiamond(n._diamondItem.id,t,n.showFlyDiamondAnim.bind(n))})):y.instance.buyDiamondWithWallet(this._diamondItem.id,this._diamondItem.item.count)},a.showFlyDiamondAnim=function(){var n=this.node.getComponent(c).convertToWorldSpaceAR(new l(0,0,0)),t=new h;t.pos=n,t.num=b.getRandomInt(5,10),d.emit(f.GET_DIAMOND_REWARD,t)},t}(m)).prototype,"title",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(E.prototype,"count",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"fee",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(E.prototype,"bonus",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(E.prototype,"icon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(E.prototype,"buyIcon",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(E.prototype,"mask",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=E))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShopEnergyPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerData.ts","./OpenPopupManager.ts","./Constants.ts","./LanguageManager.ts","./HttpService.ts","./Api.ts","./GameController.ts","./AdManager.ts","./RewardModel.ts","./ItemModel.ts"],(function(e){var n,t,i,o,r,a,u,s,p,c,l,b,g,y,m,d,f,h,w,P,E,v;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,u=e.Sprite,s=e.Label,p=e.UITransform,c=e.Vec3,l=e.Component},function(e){b=e.PlayerData},function(e){g=e.OpenPopupManager},function(e){y=e.Constants},function(e){m=e.LanguageManager},function(e){d=e.HttpService},function(e){f=e.Api},function(e){h=e.default},function(e){w=e.AdManager,P=e.AdType},function(e){E=e.RewardObj},function(e){v=e.ItemIdType}],execute:function(){var A,L,N,I,R,S,z,O,T,M,_,j,C,Y,D,H,U;r._RF.push({},"844f0/uYzRAkKEbbPrU4gP3","ShopEnergyPopup",void 0);var B=a.ccclass,G=a.property;e("ShopEnergyPopup",(A=B("ShopEnergyPopup"),L=G(u),N=G(s),I=G(s),R=G(s),S=G(s),z=G(s),O=G(s),A((_=n((M=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,i(n,"icon",_,o(n)),i(n,"buyNumber",j,o(n)),i(n,"buyAmount",C,o(n)),i(n,"buyLimit",Y,o(n)),i(n,"adNumber",D,o(n)),i(n,"adAmount",H,o(n)),i(n,"adLimit",U,o(n)),n}t(n,e);var r=n.prototype;return r.show=function(){this.setEnergyInfo()},r.setEnergyInfo=function(){var e=b.instance.energyObj;this.buyNumber.string="x"+e.buyNumber,this.buyLimit.string=m.instance.getLang("shop.lefttoday")+e.buyLimit,this.buyAmount.string=e.price.toString(),this.adNumber.string="x"+e.adNumber,this.adLimit.string=m.instance.getLang("shop.lefttoday")+e.adLimit},r.hidePopup=function(){g.instance.hide(y.PopupUI.ShopEnergyPopup),h.resume()},r.onBuyEnergy=function(){var e=this,n=b.instance.energyObj;n.buyLimit<=0?g.instance.showToast("shop.usedup"):d.instance.post(f.SHOP_ENERGY_BUY).then((function(t){if(t&&0==t.code){b.instance.energyObj=t.data.energyInfo;var i=[],o=new E;o.count=n.buyNumber,o.itemId=v.Energy,i.push(o),g.instance.showRewardPopup(i,null,(function(){var n=e.buyNumber.node.getComponent(p).convertToWorldSpaceAR(new c(0,0,0));g.instance.showRewardAnimPopup(n,i)})),e.setEnergyInfo()}else g.instance.showToast(t.msg)}))},r.onWatchEnergy=function(){var e=this,n=b.instance.energyObj;n.adLimit<=0?g.instance.showToast("shop.usedup"):w.instance.showAd(P.ENERGY,0,(function(t){d.instance.post(f.SHOP_ENERGY_BUY,{sign:t}).then((function(t){if(0==t.code){var i=[],o=new E;o.count=n.adNumber,o.itemId=v.Energy,i.push(o),g.instance.showRewardPopup(i,null,(function(){var n=e.adNumber.node.getComponent(p).convertToWorldSpaceAR(new c(0,0,0));g.instance.showRewardAnimPopup(n,i)})),b.instance.energyObj=t.data.energyInfo,e.setEnergyInfo()}else g.instance.showToast(t.msg)}))}))},n}(l)).prototype,"icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=n(M.prototype,"buyNumber",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=n(M.prototype,"buyAmount",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=n(M.prototype,"buyLimit",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=n(M.prototype,"adNumber",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=n(M.prototype,"adAmount",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=n(M.prototype,"adLimit",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=M))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopGoldItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./ShopGoldSubItem.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var n,e,o,i,r,a,c,l,s,u,p,h,f,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,l=t.Prefab,s=t.instantiate,u=t.Component},function(t){p=t.ShopData},function(t){h=t.ShopGoldSubItem},function(t){f=t.EventListener},function(t){d=t.GameEvent}],execute:function(){var b,S,v,G,m,g,y;r._RF.push({},"c755a3qYBNHNJcLkdoWVbWz","ShopGoldItem",void 0);var D=a.ccclass,P=a.property;t("ShopGoldItem",(b=D("ShopGoldItem"),S=P(c),v=P(l),b((g=n((m=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,o(n,"content",g,i(n)),o(n,"shopGoldSubPrefab",y,i(n)),n}e(n,t);var r=n.prototype;return r.init=function(){this.setShopGoldContent()},r.setShopGoldContent=function(){var t=p.instance.goldShop;if(this.content.children.length)this.content.children.forEach((function(n,e){var o=t[e];n.getComponent(h).init(o,e)}));else for(var n=0;n<t.length;n++){var e=t[n],o=s(this.shopGoldSubPrefab);o.parent=this.content,o.getComponent(h).init(e,n)}},r.onEnable=function(){f.on(d.UPDATE_SHOP_GOLD,this.init,this)},r.onDisable=function(){f.off(d.UPDATE_SHOP_GOLD,this.init,this)},n}(u)).prototype,"content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(m.prototype,"shopGoldSubPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=m))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopGoldSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./SpriteEx.ts","./Util.ts","./GameEvent.ts","./CoinMode.ts","./LanguageManager.ts"],(function(n){var e,t,i,o,r,a,u,l,c,s,p,f,g,m,b,h,d,y,I,v;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,u=n.Label,l=n.Node,c=n.UITransform,s=n.Vec3,p=n.Component},function(n){f=n.Constants},function(n){g=n.EventListener},function(n){m=n.OpenPopupManager,b=n.LayerType},function(n){h=n.SpriteEx},function(n){d=n.Util},function(n){y=n.GameEvent},function(n){I=n.CoinObj},function(n){v=n.LanguageManager}],execute:function(){var S,w,L,G,P,z,_,E,C,x,D,M,R,T,k;r._RF.push({},"9ca90VsPz5I0JiIDB0FIPJB","ShopGoldSubItem",void 0);var A=a.ccclass,F=a.property;n("ShopGoldSubItem",(S=A("ShopGoldSubItem"),w=F(u),L=F(u),G=F(u),P=F(h),z=F(h),_=F(l),S((x=e((C=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r))||this,i(e,"title",x,o(e)),i(e,"count",D,o(e)),i(e,"fee",M,o(e)),i(e,"icon",R,o(e)),i(e,"buyIcon",T,o(e)),i(e,"mask",k,o(e)),e._goldItem=null,e.PopupLayer=void 0,e}t(e,n);var r=e.prototype;return r.init=function(n,e){this._goldItem=n,this.title.string=v.instance.getLang(n.name),this.buyIcon.index=2,this.fee.string=n.price>0?""+n.price:v.instance.getLang("free"),this.count.string="x"+n.item.count,this.icon.index=e,this.mask.active=!(n.price>0)},r.onClickBtn=function(){m.instance.show(f.PopupUI.ShopItemPopup,null,b.TOP,!1,this._goldItem,this.showFlyGoldAnim.bind(this))},r.showFlyGoldAnim=function(){var n=this.node.getComponent(c).convertToWorldSpaceAR(new s(0,0,0)),e=new I;e.pos=n,e.num=d.getRandomInt(5,10),g.emit(y.GET_GOLD_REWARD,e)},e}(p)).prototype,"title",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(C.prototype,"count",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(C.prototype,"fee",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(C.prototype,"icon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(C.prototype,"buyIcon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(C.prototype,"mask",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=C))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopItemPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./ResourcesUtil.ts","./SpriteEx.ts","./GameEvent.ts","./ShopData.ts","./HttpService.ts","./Api.ts","./ItemModel.ts","./BagData.ts","./PlayerData.ts","./LanguageManager.ts","./BagHeroData.ts"],(function(t){var e,n,i,o,a,r,s,l,c,u,p,f,g,h,m,d,_,y,b,I,P,C,S,w,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Label,l=t.Node,c=t.Sprite,u=t.UITransform,p=t.Component},function(t){f=t.Constants},function(t){g=t.EventListener},function(t){h=t.OpenPopupManager},function(t){m=t.ResourcesUtil},function(t){d=t.SpriteEx},function(t){_=t.GameEvent},function(t){y=t.ShopData},function(t){b=t.HttpService},function(t){I=t.Api},function(t){P=t.ItemType},function(t){C=t.BagData},function(t){S=t.PlayerData},function(t){w=t.LanguageManager},function(t){v=t.BagHeroData}],execute:function(){var D,B,E,H,L,O,z,F,M,U,k,T,R,x,q,G,A,W,Y;a._RF.push({},"3d838+GhuZPYKiDIll/Hhzd","ShopItemPopup",void 0);var j=r.ccclass,K=r.property;t("ShopItemPopup",(D=j("ShopItemPopup"),B=K(s),E=K(s),H=K(s),L=K(s),O=K(l),z=K(c),F=K(d),M=K(d),D((T=e((k=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"title",T,o(e)),i(e,"count",R,o(e)),i(e,"fee",x,o(e)),i(e,"desc",q,o(e)),i(e,"flag",G,o(e)),i(e,"icon",A,o(e)),i(e,"qulity",W,o(e)),i(e,"buyIcon",Y,o(e)),e._goodItem=null,e._itemCfg=null,e._callback=null,e._tokens=["ad","gold","diamond","ton"],e}n(e,t);var a=e.prototype;return a.show=function(t,e){var n=this;this._itemCfg=y.instance.getItemCfgById(t.item.itemId),this._callback=e,this._goodItem=t,this.title.string=w.instance.getLang(this._itemCfg.name),this.count.string=""+t.item.count,this.qulity.index=this._itemCfg.quality?this._itemCfg.quality:0,this.buyIcon.index=this._tokens.indexOf(t.token),this.fee.string=t.price?""+t.price:w.instance.getLang("free"),this.flag.active=this._itemCfg.type==P.WeaponFragment||this._itemCfg.type==P.HeroFragment,this.desc.string=w.instance.getLang(this._itemCfg.desc);var i="";i=this._itemCfg.type==P.WeaponFragment?f.weaponIconPath+C.instance.getWeaponIcon(this._itemCfg.dataId)+"/spriteFrame":this._itemCfg.type==P.HeroFragment?f.heroIconPath+v.instance.getHeroIcon(this._itemCfg.dataId)+"/spriteFrame":f.itemsPath+this._itemCfg.icon+"/spriteFrame",m.geSpriteFrame(i).then((function(t){n.icon.spriteFrame=t;var e=n.icon.getComponent(u).contentSize,i=Math.min(80/e.width,80/e.height);n.icon.node.setScale(i,i)}))},a.onCloseBtn=function(){h.instance.hide(f.PopupUI.ShopItemPopup)},a.onBuyBtn=function(){var t=this;"gold"==this._itemCfg.type?b.instance.post(I.SHOP_GOLD_BUY,{goldId:this._goodItem.id}).then((function(e){0==e.code?(t.showRewardPopup(e.data.result),y.instance.refreshGoldShop(e.data.goldShop),S.instance.getPlayerInfo()):h.instance.showToast(e.msg)})):y.instance.buyDalilyItem(this._goodItem.id,"",this._callback)},a.showRewardPopup=function(t){this.onCloseBtn(),h.instance.showRewardPopup(t,null,this._callback),g.emit(_.UPDATE_SHOP_POPUP_ITEMS,this._goodItem.id)},a.onEnable=function(){g.on(_.CLOSE_SHOP_ITEM_POPUP,this.onCloseBtn,this)},a.onDisable=function(){g.off(_.CLOSE_SHOP_ITEM_POPUP,this.onCloseBtn,this)},e}(p)).prototype,"title",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(k.prototype,"count",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(k.prototype,"fee",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(k.prototype,"desc",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(k.prototype,"flag",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(k.prototype,"icon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(k.prototype,"qulity",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(k.prototype,"buyIcon",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=k))||U));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShopModel.ts",["cc"],(function(i){var o;return{setters:[function(i){o=i.cclegacy}],execute:function(){o._RF.push({},"a5ce7us23JJ3J56AkrGJjGd","ShopModel",void 0);i("ShopChestLevelCfg",(function(){this.ClassName="ShopChestLevel",this.Id=void 0,this.level=void 0,this.exp=void 0,this.common=void 0,this.rare=void 0})),i("ShopInfoResult",(function(){this.boxShop=void 0,this.dailyShop=void 0,this.goldShop=void 0,this.diamondShop=void 0})),i("ShopBuyBoxResult",(function(){this.boxShop=void 0,this.result=void 0})),i("DiamondPreBuyResult",(function(){this.amount=void 0,this.billId=void 0,this.payload=void 0,this.toAddress=void 0,this.tokenAddress=void 0})),i("BoxShopModel",(function(){this.exp=0,this.expMax=100,this.level=1,this.shopBoxes=void 0})),i("BoxItemModel",(function(){this.id=void 0,this.freeCountdown=void 0,this.items=void 0,this.price=void 0,this.token=void 0,this.type=void 0,this.adLimit=void 0,this.freeLimit=void 0,this.buyLimit=void 0,this.key=void 0})),i("DailyShopModel",(function(){this.goods=[],this.refresh=void 0})),i("GoodItemModel",(function(){this.id=void 0,this.item=void 0,this.price=void 0,this.token=void 0,this.name=void 0,this.freeLimit=void 0,this.adLimit=void 0,this.buyLimit=void 0,this.bonus=void 0})),i("DailyRefreshModel",(function(){this.countdown=0,this.limit=20,this.price=10}));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./ShopData.ts","./EventListener.ts","./GameEvent.ts","./PlayerData.ts"],(function(t){var e,n,o,r,i,a,s,c,p,u,l,f,h,g,v,y,b,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,p=t.Node,u=t.ScrollView,l=t.Component,f=t.instantiate},function(t){h=t.Constants},function(t){g=t.ResourcesUtil},function(t){v=t.ShopData},function(t){y=t.EventListener},function(t){b=t.GameEvent},function(t){D=t.PlayerData}],execute:function(){var S,m,P,_,d,w,x;s._RF.push({},"a553f0vbv9AQoJWK3AQjT9x","ShopPopup",void 0);var T=c.ccclass,A=c.property;t("ShopPopup",(S=T("ShopPopup"),m=A(p),P=A(u),S((w=e((d=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"content",w,r(e)),o(e,"scrollView",x,r(e)),e._flag=!1,e._popup=["shopDayItem","shopBoxItem","shopDiamondItem"],e}n(e,t);var s=e.prototype;return s.show=function(){v.instance.getShopInfo(),this.setContentList()},s.getShopData=function(){v.instance.getShopInfo(),D.instance.getPlayerInfo()},s.onEnable=function(){y.on(b.GET_SHOP_DATA,this.getShopData,this)},s.onDisable=function(){y.off(b.GET_SHOP_DATA,this.getShopData,this)},s.setContentList=function(){var t=i(a().mark((function t(){var e,n,o=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._flag||this.content.children.length){t.next=9;break}this._flag=!0,e=a().mark((function t(){var e,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o._popup[n],r=h.shopPreabPath+e,t.next=4,g.getPrefab(r).then((function(t){var n=f(t);n.parent=o.content;var r=e[0].toUpperCase()+e.slice(1);n.getComponent(r).init()}));case 4:case"end":return t.stop()}}),t)})),n=0;case 4:if(!(n<this._popup.length)){t.next=9;break}return t.delegateYield(e(),"t0",6);case 6:n++,t.next=4;break;case 9:this.scrollView.scrollToTop();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(l)).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(d.prototype,"scrollView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=d))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/ShopSuccessPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./GameController.ts","./SpriteEx.ts"],(function(t){var n,e,r,i,o,u,c,s,a,p,l,f,h,m,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){c=t.cclegacy,s=t._decorator,a=t.ParticleSystem2D,p=t.Label,l=t.Component},function(t){f=t.Constants},function(t){h=t.OpenPopupManager},function(t){m=t.default},function(t){y=t.SpriteEx}],execute:function(){var g,S,d,b,C,P,w,_,v,z,x;c._RF.push({},"7323eH+zmNNTI0sEXjaPSxg","ShopSuccessPopup",void 0);var A=s.ccclass,D=s.property;t("ShopSuccessPopup",(g=A("ShopSuccessPopup"),S=D(a),d=D(y),b=D(p),C=D(p),g((_=n((w=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];return n=t.call.apply(t,[this].concat(o))||this,r(n,"rewardAnim",_,i(n)),r(n,"icon",v,i(n)),r(n,"title",z,i(n)),r(n,"count",x,i(n)),n._diamondCount=0,n._coinCount=0,n._energyCount=0,n}e(n,t);var c=n.prototype;return c.show=function(t,n){this._diamondCount=0,this._coinCount=0,this._energyCount=0,this.setContent(t),this.rewardAnim.resetSystem()},c.setContent=function(){var t=o(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.count.string=n.count.toString(),this.title.string=n.name,this.icon.index=n.icon;case 3:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),c.onCloseBtn=function(){m.resume(),h.instance.hide(f.PopupUI.ShopSuccessPopup)},n}(l)).prototype,"rewardAnim",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(w.prototype,"icon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(w.prototype,"title",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(w.prototype,"count",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=w))||P));c._RF.pop()}}}));

System.register("chunks:///_virtual/SignInItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./SignInSubItem.ts","./RewardChestItem.ts","./ChestModel.ts","./GameEvent.ts","./EventListener.ts","./PlayerData.ts"],(function(e){var n,t,i,r,a,o,s,c,l,u,p,g,f,d,m,h,b,I,w,v,y,S,D,L,P;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Node,c=e.Label,l=e.ProgressBar,u=e.Button,p=e.Prefab,g=e.instantiate,f=e.UITransform,d=e.Vec3,m=e.Component},function(e){h=e.QuestData},function(e){b=e.HttpService},function(e){I=e.Api},function(e){w=e.OpenPopupManager},function(e){v=e.SignInSubItem},function(e){y=e.RewardChestItem},function(e){S=e.ChestAnim},function(e){D=e.GameEvent},function(e){L=e.EventListener},function(e){P=e.PlayerData}],execute:function(){var C,E,T,A,R,_,k,z,B,U,x,M,N,O,Q,G,H;a._RF.push({},"b5b2d6qBSJB7LDJDN/u17mb","SignInItem",void 0);var F=o.ccclass,J=o.property;e("SignInItem",(C=F("SignInItem"),E=J(s),T=J(s),A=J(c),R=J(l),_=J(u),k=J(p),z=J(p),C((x=n((U=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,i(n,"rewardList",x,r(n)),i(n,"boxList",M,r(n)),i(n,"checkInTime",N,r(n)),i(n,"progress",O,r(n)),i(n,"checkInBtn",Q,r(n)),i(n,"rewardItem",G,r(n)),i(n,"siginItem",H,r(n)),n}t(n,e);var a=n.prototype;return a.init=function(){this.setContent()},a.setContent=function(){var e=this,n=0,t=h.instance.signInfo;null!=t&&(n=t.cumulativeDays==t.cumulativeRewards[t.cumulativeRewards.length-1].day?1:t.cumulativeDays%10/10,this.checkInTime.string=t.cumulativeDays.toString(),this.progress.progress=n,this.checkInBtn.interactable=!t.isSign,t.signRewards.forEach((function(n,i){if(e.rewardList.children[i])e.rewardList.children[i].getComponent(v).init(n,i,t.signDay,t.isSign);else{var r=g(e.siginItem);r.getComponent(v).init(n,i,t.signDay,t.isSign),r.parent=e.rewardList}})),t.cumulativeRewards.forEach((function(n,i){var r=S.Received;if(n.draw||(r=t.cumulativeDays<n.day?S.Unavailable:S.Available),e.boxList.children[i])e.boxList.children[i].getComponent(y).init(n.rewards,n.day,r,"sign");else{var a=g(e.rewardItem);a.getComponent(y).init(n.rewards,n.day,r,"sign"),a.parent=e.boxList}})))},a.onSiginIn=function(){var e=this;b.instance.post(I.EVENT_SIGN_CLAIM,{}).then((function(n){0==n.code?(w.instance.showRewardPopup(n.data.rewards,null,(function(t){if(t){for(var i=h.instance.signInfo,r=0;r<7;r++)if(!i.isSign&&r==i.signDay){r+=1;break}if(e.rewardList.children[0]){var a=e.rewardList.children[0].getComponent(f).convertToWorldSpaceAR(new d(0,0,0));w.instance.showRewardAnimPopup(a,n.data.rewards)}}})),h.instance.signInfo=n.data.signInfo,e.setContent(),P.instance.getPlayerInfo(!1)):w.instance.showToast(n.msg)})).catch((function(e){console.log(e),w.instance.showToast("network.error")}))},a.onEnable=function(){L.on(D.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)},a.onDisable=function(){L.off(D.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)},n}(m)).prototype,"rewardList",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=n(U.prototype,"boxList",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=n(U.prototype,"checkInTime",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=n(U.prototype,"progress",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=n(U.prototype,"checkInBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=n(U.prototype,"rewardItem",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=n(U.prototype,"siginItem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=U))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/SignInSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardItem.ts","./LanguageManager.ts","./SpriteEx.ts"],(function(e){var t,i,r,n,a,o,l,s,c,u,p,d,g,b,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Label,s=e.Node,c=e.Prefab,u=e.UITransform,p=e.instantiate,d=e.Component},function(e){g=e.RewardItem},function(e){b=e.LanguageManager},function(e){h=e.SpriteEx}],execute:function(){var m,f,w,y,v,I,L,S,z,k,C,x,F,R,D,P,_;a._RF.push({},"19e25PVjZBNFoFr/5cLRDgF","SignInSubItem",void 0);var E=o.ccclass,M=o.property;e("SignInSubItem",(m=E("SignInSubItem"),f=M(l),w=M(s),y=M(s),v=M(s),I=M(c),L=M(s),S=M(s),m((C=t((k=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"day",C,n(t)),r(t,"mask",x,n(t)),r(t,"redpoint",F,n(t)),r(t,"rewardList",R,n(t)),r(t,"reward",D,n(t)),r(t,"bg",P,n(t)),r(t,"checked",_,n(t)),t}return i(t,e),t.prototype.init=function(e,t,i,r){var n=this;if(this.day.string=b.instance.getLang("day",[t+1]),this.mask.active=t+1<=i,this.redpoint.active=!r&&t==i,this.checked.active=!r&&t==i,this.rewardList.removeAllChildren(),6==t)this.node.getComponent(u).width=560,this.node.getComponent(h).index=1,this.bg.active=!0,e.rewards.forEach((function(e,t){var i=p(n.reward);i.getComponent(g).init(e),i.parent=n.rewardList}));else{this.node.getComponent(h).index=0;var a=p(this.reward);a.getComponent(g).init(e.rewards[0]),a.parent=this.rewardList}},t}(d)).prototype,"day",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(k.prototype,"mask",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(k.prototype,"redpoint",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(k.prototype,"rewardList",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(k.prototype,"reward",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(k.prototype,"bg",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(k.prototype,"checked",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=k))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBulletBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./BaseComponent.ts","./EventListener.ts","./GameEvent.ts","./Util.ts","./GameDefine.ts","./SkillModel.ts","./SkillData.ts","./MonsterData.ts","./SkillUpgradeData.ts"],(function(e){var t,i,l,s,n,o,a,r,u,h,d,c,g,b,k,v,B,f,m,p,O,_,T,y,E,S,j,A,P,R,x,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,a=e.Node,r=e.Vec3,u=e.v2,h=e.v3,d=e.Animation,c=e.CircleCollider2D,g=e.tween,b=e.Vec2,k=e.misc,v=e.Rect,B=e.UITransform,f=e.bezier},function(e){m=e.PoolManager},function(e){p=e.default},function(e){O=e.EventListener},function(e){_=e.GameEvent},function(e){T=e.Util},function(e){y=e.GameDefine},function(e){E=e.SkillBulletType,S=e.BulletMoveType,j=e.TargetType,A=e.SkillObj,P=e.SkillBulletObj},function(e){R=e.SkillData},function(e){x=e.MonsterData},function(e){M=e.SkillUpgradeData}],execute:function(){var C,L,w,D,I;n._RF.push({},"8f7c12DY8NE1LdJCAb4kT1q","SkillBulletBase",void 0);var N=o.ccclass,U=o.property;e("SkillBulletBase",(C=N("SkillBulletBase"),L=U(a),C((I=t((D=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,l(t,"icon",I,s(t)),t.skillBulletObj=null,t.initStatus=!1,t.bulletId=101,t.during=10,t.cd=0,t.damageR=30,t.damageInterval=void 0,t.damageTimes=void 0,t.isCollider=void 0,t.LoopCount=0,t.moveSpeed=1500,t.initSpeed=1500,t.isEasing=!1,t.scale=1,t.bulletMove=[],t._dir=new r,t._screenTriggleNumber=0,t.curPos=new r,t.targetPos=new r,t.quadBoundBox=null,t.boundBox=null,t._skillBulletKey="",t.type=0,t._minY=5,t._maxY=300,t._minX=0,t._maxX=0,t._playTime=1,t}i(t,e);var n=t.prototype;return n.initSkillBullet=function(e,t){void 0===t&&(t=0),this.type=this.skillBulletObj.skillObj.type;var i=this.node.getPosition(),l=new r;this.targetPos=e.clone(),r.subtract(l,e,i);var s=T.vector_to_angle(u(l.x,l.y)),n=T.angle_to_vector(s+t);l.set(n.x,n.y),this._dir=l.normalize(),this.isEasing=!1,this.curPos=this.node.getPosition(),this.scale=this.skillBulletObj.skillObj.bulletScale/100,this.setSkillSize(),this.during=this.skillBulletObj.skillObj.during*(100+this.skillBulletObj.skillObj.duringPer)/100,this.moveSpeed=this.getSkillMoveSpeedByType(),this.initSpeed=this.moveSpeed,this.bulletMove=this.skillBulletObj.skillObj.bulletMove,this.damageTimes=this.skillBulletObj.skillObj.damageNum,this.damageInterval=0,this.isCollider=!0,this.LoopCount=0,this.bulletId=this.skillBulletObj.skillObj.Id,this._skillBulletKey="skillBullet"+this.bulletId+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this.setSkillBulletBoundBox(),this.setSkillBulletAnim(),this.initStatus=!0},n.setSkillSize=function(){this.node.setScale(h(this.scale,this.scale,this.scale))},n.setSkillBulletAnim=function(){var e=this.icon.getComponent(d);e.clips.length>0&&(e.on(d.EventType.LASTFRAME,this.onLastPlay,this),e.play("effect"))},n.onLastPlay=function(){0==this.skillBulletObj.skillObj.during&&this.clear()},n.setSkillBulletBoundBox=function(){this.boundBox=this.node.getComponent(c),this.boundBox.radius=this.skillBulletObj.skillObj.colliderRadius},n.easingSpeed=function(e,t){var i=this;if(this.isEasing){var l=new function(){this.t=void 0};l.t=0,g(l).to(e,{t:1},{onUpdate:function(e,t){var l=u(0,0),s=u(0,.4),n=u(.2,1),o=u(1,1),a=(l.x,s.x,n.x,o.x,l.y*(1-t)*(1-t)*(1-t)+3*s.y*t*(1-t)*(1-t)+3*n.y*t*t*(1-t)+o.y*t*t*t);i.moveSpeed=i.initSpeed+500*a}}).start()}},n.setBulletMove=function(e){if(this.skillBulletObj.skillObj.bulletSpeed>0){var t=this.node.getPosition(),i=h(this._dir.x,this._dir.y,0).multiply(h(this.moveSpeed*e,this.moveSpeed*e,0)),l=t.add(i);this.node.setPosition(l),this.curPos=l,this.setBulletAngle(this.skillBulletObj.skillObj.bulletType)}else{var s=h(this.targetPos.x,this.targetPos.y+90,0);this.node.setPosition(s),this.boundBox=this.node.getComponent(c),this.boundBox.offset=new b(Number(0),Number(-90))}},n.setBulletAngle=function(e){switch(e){case E.SKILL_BULLET_LINE:var t=new b(this._dir.x,this._dir.y).signAngle(new b(0,1)),i=k.radiansToDegrees(t);this.node.angle=-i;break;case E.SKILL_BULLET_LINE_ROTATION:case E.SKILL_BULLET_PARABOLA:this.node.angle=this.node.angle-20}},n.playBulletTween=function(e){var t=this;this.node.eulerAngles=new r(0,0,0);var i=this.node,l=i.position,s=i.eulerAngles,n=g(l);this._minY=l.y+(e.y-l.y)/2+100,this._maxY=l.y+(e.y-l.y)/2+100,this._maxX=l.x+(e.x-l.x)/2+100,this._minX=l.x+(e.x-l.x)/2+100;var o=this._minY,a=this._maxY,u=this._minX,h=this._maxX;n.parallel(g().to(this._playTime,{x:e.x},{progress:function(e,t,i,l){return f(e,u,h,t,l)},easing:"smooth",onUpdate:function(){i.setPosition(l),t.curPos=l}}),g().to(this._playTime,{y:e.y},{progress:function(e,t,i,l){return f(e,o,a,t,l)},easing:"smooth",onUpdate:function(){i.setPosition(l),t.curPos=l}})).call((function(){})).start(),g(s).to(this._playTime,{z:-1440},{onUpdate:function(){i.eulerAngles=s}}).start()},n.updateSkillBulletScreen=function(e){var t=new v(-y.viewWidth/2,-y.viewHeight/2,y.viewWidth,y.viewHeight),i=this.curPos,l=this.skillBulletObj.releaseTimes,s=this.bulletMove&&0!=this.bulletMove.length?this.bulletMove[l%this.bulletMove.length]:S.MOVE_NORMAL;if(s==S.MOVE_NORMAL){if(!t.contains(u(i.x,i.y)))return void this.clear()}else s!=S.MOVE_EDGE_REBOUND&&s!=S.MOVE_TARGET_EDGE_REBOUND&&s!=S.MOVE_BACK||this.setScreenTriggleChange(s)},n.updateSkillDamageInterval=function(e){this.skillBulletObj.skillObj.damageInterval&&(this.damageInterval-=e,this.isCollider=!1,this.damageInterval<=0&&(this.isCollider=!0,this.damageInterval=this.skillBulletObj.skillObj.damageInterval))},n.insertRectCircleObj=function(){if(this.initStatus)switch(this.type){case 10:break;default:O.emit(_.INSERT_QUARD_TREE_RECT_CIRCLE,this._skillBulletKey,this,this.quadBoundBox,1)}},n.onAttacked=function(){},n.colliderEffect=function(e){if(e.node.parent&&this.skillBulletObj.skillObj.hitBack>0){var t=[[2,this.skillBulletObj.skillObj.hitBack,.2]];e.setMonsterHurtMoveEffect(t,this._dir.clone(),this.curPos)}},n.setScreenTriggleChange=function(e){if(this.curPos.x>y.viewWidth/2||this.curPos.x<-y.viewWidth/2||this.curPos.y>y.viewHeight/2||this.curPos.y<-y.viewHeight/2){if(e==S.MOVE_EDGE_REBOUND||e==S.MOVE_TARGET_EDGE_REBOUND){var t=0,i=0;this.curPos.x>y.viewWidth/2?(t=1,i=0):this.curPos.x<-y.viewWidth/2?(t=-1,i=0):this.curPos.y>y.viewHeight/2?(t=0,i=1):this.curPos.y<=-y.viewHeight/2&&(t=0,i=-1);var l=new r(t,i,0);this._dir=this._dir.subtract(l.multiplyScalar(2*r.dot(this._dir,l)))}else if(e==S.MOVE_BACK&&0==this._screenTriggleNumber){var s=new r(this._dir.x,this._dir.y,this._dir.z);this._dir=s.negative()}this._screenTriggleNumber++}},n.reflect=function(e,t){return e.subtract(t.multiplyScalar(2*r.dot(e,t)))},n.setMoveReflect=function(e){var t=this.node.getPosition().subtract(e).normalize();this._dir=this._dir.subtract(t.multiplyScalar(2*r.dot(this._dir,t))),this.damageTimes=1},n.triggleClearByDuring=function(e){0!=this.during&&(this.during-=e,this.during<=0&&this.clear())},n.triggleSkillBySkillId=function(){},n.colliderTriggleSkill=function(e,t,i){for(var l=0;l<e.length;l++){var s=e[l],n=R.instance.getSkillCfgById(s),o=new A;for(var a in o.Id=n.Id,n)if(Object.prototype.hasOwnProperty.call(n,a)){var u=n[a];o.hasOwnProperty(a)&&(o[a]=u)}o.weaponId=this.skillBulletObj.skillObj.weaponId,o.level=this.skillBulletObj.skillObj.level,"0"==n.bulletRes&&(o.bulletRes=this.skillBulletObj.skillObj.bulletRes,o.res=this.skillBulletObj.skillObj.res),o=M.instance.getUpgradeSkillBySkillId(o),0==n.damagePer?o.damage=this.skillBulletObj.skillObj.damage:o.damage=this.skillBulletObj.skillObj.damage*n.damagePer/100;var d=new P;d.releaseTimes=1,d.skillKey=this.skillBulletObj.skillKey,d.skillObj=o,d.pos=this.getFirePos(),d.targetPos=new r(0,-200,0),n.targetType!=j.TARGET_NEXT&&n.targetType!=j.TARGET_CURRENT&&n.targetType!=j.TARGET_ALONG||(d.monsterKey=t);for(var c=d.skillObj.salvo,g=0;g<c;g++)if(n.targetType==j.TARGET_CURRENT||n.targetType==j.TARGET_CURRENT_ALL)for(var b=d.skillObj.bulletCount,k=this.node.getPosition(),v=0;v<b;v++){var B=d.skillObj.intervalAngle,f=R.instance.getSkillDirAngle(v,B);O.emit(_.ATTACK_SKILL_EFFECT,d,k,f,.1*g)}else if(n.targetType==j.TARGET_ALONG){var m=d.skillObj.bulletCount,p=this.node.getPosition(),T=h(this._dir.x,this._dir.y,0).multiply(h(1*this.moveSpeed,1*this.moveSpeed,0)),y=p.add(T);this.setBulletAngle(this.skillBulletObj.skillObj.bulletType);for(var E=0;E<m;E++){var S=d.skillObj.intervalAngle,C=R.instance.getSkillDirAngle(E,S);O.emit(_.ATTACK_SKILL_EFFECT,d,y,C,.1*g)}}else{var L=x.instance.getNearMonster(d.skillKey,n.targetType==j.TARGET_NEXT?t:"");if(L.length)for(var w=d.skillObj.bulletCount,D=0;D<w;D++)for(var I=0;I<1;I++){var N=d.skillObj.intervalAngle,U=R.instance.getSkillDirAngle(D,N);I<L.length&&O.emit(_.ATTACK_SKILL_EFFECT,d,L[I],U,.1*g)}}}},n.getFirePos=function(){var e=this.node.getPosition();return new r(e.x,e.y+this.node.getComponent(B).height,0)},n.checkColliderCount=function(e){var t=e.monsterKey;if(0!=this.damageTimes&&this.skillBulletObj.monsterKey!=t){var i=e.node.getPosition();this.damageTimes>0&&this.damageTimes--;var l=this.skillBulletObj.skillObj.bulletSkills;if(e.onAttacked(this.skillBulletObj),this.colliderEffect(e),this.colliderTriggleSkill(l,t,i),0==this.damageTimes){var s=this.skillBulletObj.releaseTimes,n=this.bulletMove&&0!=this.bulletMove.length?this.bulletMove[s%this.bulletMove.length]:S.MOVE_NORMAL;n==S.MOVE_TARGET_REBOUND||n==S.MOVE_TARGET_EDGE_REBOUND?this.setMoveReflect(i):this.clear()}}},n.colliderTriggleClearByType=function(e,t){},n.damageTimeClearByType=function(){this.clear()},n.getSkillMoveSpeedByType=function(){var e=0;switch(this.type){case 99:e=0;break;default:e=this.skillBulletObj.skillObj.bulletSpeed*(100+this.skillBulletObj.skillObj.bulletSpeedPer)/100}return e},n.onEnable=function(){},n.onDisable=function(){},n.clear=function(){this.initStatus=!1,this.boundBox=null,this.quadBoundBox=null,this.skillBulletObj.callback&&this.skillBulletObj.callback(),O.emit(_.DELETE_QUARD_TREE_OBJ,this._skillBulletKey),m.instance.putNode(this.node)},n.childUpdate=function(e){},t}(p)).prototype,"icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=D))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBulletItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SkillBulletBase.ts","./GameDefine.ts","./MonsterBase.ts"],(function(t){var e,i,n,l,o,s,r,a,u;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,l=t.Collider2D,o=t.Contact2DType,s=t.director},function(t){r=t.SkillBulletBase},function(t){a=t.GameDefine},function(t){u=t.MonsterBase}],execute:function(){var c;i._RF.push({},"a6484nUmyVJOrVFOypCdAIm","SkillBulletItem",void 0);var h=n.ccclass;n.property,t("SkillBulletItem",h("SkillBulletItem")(c=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))||this)._curWave=void 0,e}e(i,t);var n=i.prototype;return n.init=function(t,e,i,n){this.initStatus=!1,this.skillBulletObj=t,this._curWave=n,this.initSkillBullet(e,i)},n.start=function(){var t=this.getComponent(l);t&&t.on(o.BEGIN_CONTACT,this.onBeginContact,this)},n.onBeginContact=function(t,e,i){this.checkColliderCount(e.node.getComponent(u))},n.childUpdate=function(t){if(a.gameStart&&this.initStatus){s.getTotalFrames();this.updateSkillBulletScreen(t),this.triggleClearByDuring(t),this.setBulletMove(t),this.initStatus&&a.gameWave!=this._curWave&&this.clear()}},i}(r))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/SkillData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./SkillModel.ts","./SkillTargetModel.ts","./MonsterData.ts","./WeaponModel.ts"],(function(e){var t,n,r,a,s,o,i,l;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,r=e.Vec3},function(e){a=e.CfgMgr},function(e){s=e.SkillCfg},function(e){o=e.SkillTargetCfg},function(e){i=e.MonsterData},function(e){l=e.WeaponType}],execute:function(){n._RF.push({},"d47c0P8lLFPJqDru2of1KHi","SkillData",void 0),e("SkillData",function(){function e(){}var n=e.prototype;return n.getSkillCfgById=function(e){return a.getDataById(new s,e)},n.getSkillTargetId=function(e,t){return e.length?t<e.length?e[t]:e[e.length-1]:0},n.getSkillBulletCount=function(e){if(e){var t=a.getDataById(new o,e);if(t.random){var n=t.random.split(":");return Number(n[1])}return 1}return 1},n.getSkillDirAngle=function(e,t){var n=0;return e&&(n=e%2==0?e/2*t:-Math.ceil(e/2)*t),n},n.getSkillAtkTargetPos=function(e,t,n){var r=[];if(e){var s=a.getDataById(new o,e),i=s.type,l=s.random.split(":"),c=Number(l[0]),g=Number(l[1]);if(i.length)switch(i[0]){case 1:case 2:r=this.getHeroNearTargetPos(!0,c,g,n,t);break;case 3:case 4:r=this.getMonsterHpTargetPos(!0,c,g,n,t);break;case 7:r=this.getScreenTargetPos(c,g,n);break;case 8:case 9:r=this.getSelfTargetPos(!0,c,g,n,t);break;default:r=this.getScreenTargetPos(c,g,n)}r=r.length?r:this.getRandPos(t,g)}else r=[t];return r},n.getHeroNearTargetPos=function(e,t,n,r,a){var s=[],o=i.instance.getNearMonsterTarget(r),l=[],c=[];if(o.size&&(o.forEach((function(e){var t=e.getColliderPos().x;l.push({monsterBase:e,distance:t})})),l.sort((function(t,n){return e?t.distance-n.distance:n.distance-t.distance})),t=t>=l.length?l.length:t,(c=l.slice(0,t)).length))for(var g=0;g<n;g++){var u=c[g<c.length?Math.floor(Math.random()*c.length):0];s.push(u.monsterBase.getColliderPos())}return s},n.getMonsterHpTargetPos=function(e,t,n,r,a){var s=[],o=i.instance.getNearMonsterTarget(r),l=[],c=[];if(o.size&&(o.forEach((function(e){var t=e.curHp;l.push({monsterBase:e,hp:t})})),l.sort((function(t,n){return e?n.hp-t.hp:t.hp-n.hp})),t=t>=l.length?l.length:t,(c=l.slice(0,t)).length))for(var g=0;g<n;g++){var u=c[g<c.length?Math.floor(Math.random()*c.length):0];s.push(u.monsterBase.getColliderPos())}return s},n.getScreenTargetPos=function(e,t,n){var r=[],a=i.instance.getNearMonsterTarget(n);if(a.size)for(var s=Array.from(a.values()),o=0;o<t;o++){var l=Math.floor(Math.random()*s.length);r.push(s[l].getColliderPos())}return r},n.getSelfTargetPos=function(e,t,n,a,s){var o=[],l=i.instance.getNearMonsterTarget(a),c=[],g=[];if(l.size&&(l.forEach((function(e){var t=r.distance(e.getColliderPos(),s);t>50&&c.push({monsterBase:e,distance:t})})),c.sort((function(t,n){return e?t.distance-n.distance:n.distance-t.distance})),t=t>=c.length?c.length:t,(g=c.slice(0,t)).length))for(var u=0;u<n;u++){var f=g[u<g.length?Math.floor(Math.random()*g.length):0];o.push(f.monsterBase.getColliderPos())}return o},n.getRandPos=function(e,t){for(var n=[],a=0;a<t;a++){var s=new r;s.x=0,s.y=2*(Math.random()-.5)*200,n.push(s)}return n},n.checkColliderTriggleSkill=function(e,t,n){var r=!1;switch(e){case 1:r=1==t;break;case 2:r=t==n;break;case 3:r=!0;break;default:r=!1}return r},n.clear=function(){},n.isAttackType=function(e){return e!=l.ARMOR_HP&&e!=l.ARMOR_SHIELD},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillGetItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts"],(function(t){var e,i,n,r,o,l,c,a,s,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,c=t.Sprite,a=t.Component},function(t){s=t.Constants},function(t){u=t.ResourcesUtil},function(t){p=t.SpriteEx}],execute:function(){var f,h,m,y,d,v,g;o._RF.push({},"45b51MEfYFLoqIOehOVd5LO","SkillGetItem",void 0);var S=l.ccclass,b=l.property;t("SkillGetItem",(f=S("SkillGetItem"),h=b(p),m=b(c),f((v=e((d=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(e,"iconFrame",v,r(e)),n(e,"icon",g,r(e)),e}return i(e,t),e.prototype.init=function(t,e){void 0===e&&(e=!0);var i=s.skillIconPath+t.icon+"/spriteFrame";this.iconFrame.index=t.quality-1,u.setSpriteFrame(i,this.icon);var n=this.node.getComponentsInChildren(c);if(!e)for(var r=0;r<n.length;r++){n[r].grayscale=!0}},e}(a)).prototype,"iconFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(d.prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/SkillManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./EventListener.ts","./SkillData.ts","./ResourcesUtil.ts","./PoolManager.ts","./Constants.ts","./SkillUpgradeData.ts","./WeaponModel.ts","./GameData.ts"],(function(e){var t,n,i,l,a,s,o,r,c,f,p,u,k,b,d,m,h,S,g,E,O;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,o=e.Node,r=e.instantiate,c=e.Sprite,f=e.Animation,p=e.AnimationClip,u=e.Component},function(e){k=e.GameEvent},function(e){b=e.EventListener},function(e){d=e.SkillData},function(e){m=e.ResourcesUtil},function(e){h=e.PoolManager},function(e){S=e.Constants},function(e){g=e.SkillUpgradeData},function(e){E=e.WeaponType},function(e){O=e.GameData}],execute:function(){var P,_,v,R,M;a._RF.push({},"bfbb4uHJ+JKjq7N/Z8t/KLe","SkillManager",void 0);var j=s.ccclass,A=s.property;e("SkillManager",(P=j("SkillManager"),_=A(o),P((M=t((R=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,i(t,"skillParentUp",M,l(t)),t._skillPrefabItemMap=new Map,t}n(t,e);var a=t.prototype;return a.init=function(){g.instance.init()},a.onEnable=function(){b.on(k.ATTACK_SKILL_EFFECT,this.onAttackSkillEffect,this),b.on(k.ARMOR_SKILL_EFFECT,this.onArmorSkillEffect,this)},a.onDisable=function(){b.off(k.ATTACK_SKILL_EFFECT,this.onAttackSkillEffect,this),b.off(k.ARMOR_SKILL_EFFECT,this.onArmorSkillEffect,this)},a.onAttackSkillEffect=function(e,t,n,i){var l=this;void 0===i&&(i=0),this.scheduleOnce((function(){var i=null,a=e.skillObj.Id;if(l._skillPrefabItemMap.has(a))i=h.instance.getNodeItemById(l._skillPrefabItemMap.get(a),a.toString()),l.skillParentUp.addChild(i),i.setPosition(e.pos),i.components[1].init(e,t,n,O.instance.waveId);else{var s=S.battSkillPath;m.getPrefab(s).then((function(s){var o="";o=e.skillObj.res==e.skillObj.bulletRes?S.weaponIconPath+e.skillObj.bulletRes:S.bulletPath+e.skillObj.bulletRes,1==e.skillObj.bulletFrames?(o+="/spriteFrame",m.getSpriteFrame(o).then((function(o){var f=(i=r(s)).getChildByName("icon").getComponent(c);f.spriteFrame=o,f.node.angle=e.skillObj.angle,f.node.setScale(e.skillObj.scale,e.skillObj.scale),l.skillParentUp.addChild(i),i.setPosition(e.pos),i.components[1].init(e,t,n,O.instance.waveId),l._skillPrefabItemMap.set(a,i)}))):m.getSpriteAtlas(o).then((function(o){var c=(i=r(s)).getChildByName("icon").getComponent(f),u=p.createWithSpriteFrames(o,e.skillObj.bulletFrames);u.name="effect",u.wrapMode=p.WrapMode.Loop,c.addClip(u),c.node.angle=e.skillObj.angle,c.node.setScale(e.skillObj.scale,e.skillObj.scale),l.skillParentUp.addChild(i),i.setPosition(e.pos),i.components[1].init(e,t,n,O.instance.waveId),l._skillPrefabItemMap.set(a,i)}))}))}}),i)},a.onArmorSkillEffect=function(e){var t=e.skillObj.damage*(100+e.skillObj.damagePer)/100;e.skillObj.type==E.ARMOR_HP?b.emit(k.HERO_RESTORE_HP,t):e.skillObj.type==E.ARMOR_SHIELD&&b.emit(k.HERO_RESTORE_SHIELD,t)},a.reset=function(){this.unscheduleAllCallbacks()},a.clear=function(){d.instance.clear(),g.instance.clear()},t}(u)).prototype,"skillParentUp",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=R))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/SkillModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"e96c1LMiTlDMYmCWtHlD/ym","SkillModel",void 0);i("SkillCfg",(function(){this.ClassName="Skill",this.Id=void 0,this.name=void 0,this.desc=void 0,this.scale=void 0,this.quality=void 0,this.res=void 0,this.element=void 0,this.targetType=void 0,this.bulletRes=void 0,this.bulletFrames=void 0,this.bulletType=void 0,this.during=0,this.cd=0,this.angle=void 0,this.probability=0,this.damageNum=0,this.damagePer=0,this.bulletSpeed=void 0,this.bulletCount=1,this.colliderRadius=50,this.intervalAngle=void 0,this.move=void 0,this.bulletBuffs=void 0,this.subSkills=void 0,this.doubleSkills=void 0})),i("SkillBulletType",function(i){return i[i.SKILL_BULLET_LINE=1]="SKILL_BULLET_LINE",i[i.SKILL_BULLET_LINE_ROTATION=2]="SKILL_BULLET_LINE_ROTATION",i[i.SKILL_BULLET_PARABOLA=3]="SKILL_BULLET_PARABOLA",i[i.SKILL_BULLET_RANGE=10]="SKILL_BULLET_RANGE",i}({})),i("BulletMoveType",function(i){return i[i.MOVE_NORMAL=0]="MOVE_NORMAL",i[i.MOVE_EDGE_REBOUND=1]="MOVE_EDGE_REBOUND",i[i.MOVE_TARGET_REBOUND=2]="MOVE_TARGET_REBOUND",i[i.MOVE_TARGET_EDGE_REBOUND=3]="MOVE_TARGET_EDGE_REBOUND",i[i.MOVE_BACK=4]="MOVE_BACK",i}({})),i("SkillObj",(function(){this.Id=void 0,this.weaponId=void 0,this.level=void 0,this.name=void 0,this.desc=void 0,this.quality=void 0,this.res=void 0,this.frame=void 0,this.type=void 0,this.element=void 0,this.targetType=void 0,this.scale=0,this.angle=0,this.colliderRadius=50,this.bulletRes=void 0,this.bulletFrames=void 0,this.bulletType=void 0,this.bulletSpeed=0,this.bulletSpeedPer=0,this.bulletScale=100,this.bulletCount=1,this.during=10,this.duringPer=0,this.probability=0,this.doubleSkills=void 0,this.intervalAngle=0,this.range=0,this.cd=0,this.cdPer=0,this.cdAddPer=0,this.damage=0,this.damageRange=0,this.damageNum=0,this.damagePer=0,this.damageAddPer=0,this.damageInterval=0,this.bossDamagePer=0,this.critPer=0,this.critNum=0,this.critDamagePer=50,this.salvo=1,this.hitBack=0,this.bulletMove=[],this.bulletBuffs=[],this.subSkills=[],this.bulletSkills=[]})),i("SkillBulletObj",(function(){this.releaseTimes=void 0,this.skillKey=void 0,this.skillObj=void 0,this.monsterKey=void 0,this.layer=1,this.pos=void 0,this.callback=void 0,this.targetPos=void 0,this.param=void 0,this.scale=1})),i("ReleaseSkillObj",(function(){this.skillKey=void 0,this.skillObj=void 0,this.animTime=.05,this.releaseTimes=1,this.bulletCount=1,this.callback=void 0})),i("DamageType",function(i){return i[i.NORMAL=0]="NORMAL",i[i.CRIT=1]="CRIT",i[i.DEBUFF=2]="DEBUFF",i}({})),i("TargetType",function(i){return i[i.TARGET_NEAREST=0]="TARGET_NEAREST",i[i.TARGET_RANDOM=1]="TARGET_RANDOM",i[i.TARGET_SELF=2]="TARGET_SELF",i[i.TARGET_NEXT=3]="TARGET_NEXT",i[i.TARGET_CURRENT=4]="TARGET_CURRENT",i[i.TARGET_CURRENT_ALL=5]="TARGET_CURRENT_ALL",i[i.TARGET_ALONG=6]="TARGET_ALONG",i}({})),i("AtkObj",(function(){this.atk=0,this.type=0})),i("SkillElementType",function(i){return i[i.NORMAL=0]="NORMAL",i[i.FIRE=1]="FIRE",i[i.ICE=2]="ICE",i[i.WIND=3]="WIND",i[i.LIGHTNING=4]="LIGHTNING",i[i.DRUG=5]="DRUG",i[i.HOLY=6]="HOLY",i}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillSelectItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./SkillUpgradeData.ts","./EventListener.ts","./GameEvent.ts","./CoinMode.ts","./WeaponShopData.ts","./GuideData.ts","./OpenPopupManager.ts","./LanguageManager.ts"],(function(e){var t,i,n,a,r,l,s,c,o,u,p,g,d,f,h,k,S,b,_,U,m,C,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,s=e.Sprite,c=e.RichText,o=e.Label,u=e.Component},function(e){p=e.Constants},function(e){g=e.ResourcesUtil},function(e){d=e.SpriteEx},function(e){f=e.SkillUpgradeData,h=e.SkillUpgradeType},function(e){k=e.EventListener},function(e){S=e.GameEvent},function(e){b=e.CoinObj},function(e){_=e.WeaponShopData},function(e){U=e.GuideData,m=e.GuideStep},function(e){C=e.OpenPopupManager},function(e){y=e.LanguageManager}],execute:function(){var O,v,L,E,P,A,I,B,D,G,M;r._RF.push({},"d2164JsWmlHK60Q7+zA/GgW","SkillSelectItem",void 0);var T=l.ccclass,j=l.property;e("SkillSelectItem",(O=T("SkillSelectItem"),v=j(d),L=j(d),E=j(s),P=j(c),O((B=t((I=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"frame",B,a(t)),n(t,"quality",D,a(t)),n(t,"icon",G,a(t)),n(t,"desc",M,a(t)),t._callBack=null,t._skillUpgradeCfg=null,t}i(t,e);var r=t.prototype;return r.init=function(e,t){var i=this,n=f.instance.getSkillUpgradeCfgById(e.id);this._callBack=t,this._skillUpgradeCfg=n,this.frame.index=n.quality-1,this.quality.index=n.quality-1;var a=y.instance.getLang(n.desc);this.desc.string="<b><outline width=3 color=#000>"+a+"</outline></b>",this.setOutLine();var r=p.skillIconPath+n.icon+"/spriteFrame";g.geSpriteFrame(r).then((function(e){i.icon.spriteFrame=e}))},r.setOutLine=function(){var e=this;this.scheduleOnce((function(){for(var t=e.desc.node.children,i=0;i<t.length;i++){t[i].getComponent(o).enableShadow=!1}}),.01)},r.setUpgradeSkill=function(e){if(this._skillUpgradeCfg)switch(this._skillUpgradeCfg.type){case h.SKILL_BATTLE:f.instance.upgradeBattleSkillObjAtt(this._skillUpgradeCfg);break;case h.SKILL_BUFF:f.instance.upgradeBuffSkillObjAtt(this._skillUpgradeCfg);break;case h.GOLD:var t=f.instance.upgradeGoldObjAtt(this._skillUpgradeCfg);if(t>0){var i=new b;i.pos=e,i.num=t,k.emit(S.GAME_CHANGE_COIN,i)}break;case h.MONSTR_MOVE:f.instance.upgradeMonsterSpeedObjAtt(this._skillUpgradeCfg);break;case h.EXP:f.instance.upgradeExpObjAtt(this._skillUpgradeCfg);break;case h.HP:f.instance.upgradeHpObjAtt(this._skillUpgradeCfg),k.emit(S.UPDATE_HERO_HP);break;case h.SHOP:f.instance.upgradeShopObjAtt(this._skillUpgradeCfg),_.instance.upgradeSkill(this._skillUpgradeCfg.attrs);break;case h.BOSS:}},r.onTouchBtn=function(e){var t=e.target.getWorldPosition();this._callBack&&this._callBack(),this.setUpgradeSkill(t),U.instance.curStep==m.GUIDE_STEP9_SELECT_SKILL&&C.instance.hide(p.PopupUI.GuidePopup)},t}(u)).prototype,"frame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"quality",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(I.prototype,"icon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(I.prototype,"desc",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=I))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/SkillSelectPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./GameController.ts","./PopupManager.ts","./SkillUpgradeData.ts","./SkillSelectItem.ts","./GuideData.ts","./OpenPopupManager.ts","./SpriteEx.ts","./PlayerData.ts","./GameData.ts","./AdManager.ts"],(function(e){var t,n,i,l,r,a,c,o,s,u,p,f,h,b,S,g,k,d,m,v,w,y,L,I,A,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,o=e._decorator,s=e.Node,u=e.Label,p=e.Component,f=e.tween,h=e.v3},function(e){b=e.Constants},function(e){S=e.default},function(e){g=e.PopupManager},function(e){k=e.SkillUpgradeData,d=e.SelectObj},function(e){m=e.SkillSelectItem},function(e){v=e.GuideData,w=e.GuideStep},function(e){y=e.OpenPopupManager},function(e){L=e.SpriteEx},function(e){I=e.PlayerData},function(e){A=e.GameData},function(e){P=e.AdBattleType}],execute:function(){var B,C,_,E,D,x,z,G,R,T,F,O,U,j,M,H,N,K,W,Y,V,q,J;c._RF.push({},"6da23yMgY1B+pjD6+TmVFFj","SkillSelectPopup",void 0);var Q=o.ccclass,X=o.property;e("SkillSelectPopup",(B=Q("SkillSelectPopup"),C=X(s),_=X(s),E=X(s),D=X(s),x=X(L),z=X(u),G=X(s),R=X(L),T=X(u),F=X(s),B((j=t((U=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"content",j,l(t)),i(t,"block",M,l(t)),i(t,"mask",H,l(t)),i(t,"btnList",N,l(t)),i(t,"refreshIcon",K,l(t)),i(t,"refreshLabel",W,l(t)),i(t,"refreshBtn",Y,l(t)),i(t,"selectAllIcon",V,l(t)),i(t,"selectAllLabel",q,l(t)),i(t,"selectAllBtn",J,l(t)),t._wave=1,t._itemNumber=0,t}n(t,e);var c=t.prototype;return c.show=function(e,t){if(v.instance.curStep==w.GUIDE_STEP8_BATTLE){for(var n=v.instance.getCurGuideData(),i=[],l=0;l<n.length;l++){var r=new d;r.id=n[l],r.premise=0,r.weaponId=0,r.weight=0,i.push(r)}e=i}this._wave=t,this._itemNumber=e.length,this.setSkillSelectInfo(e),I.instance.chapterObj.ticket>0?(this.refreshIcon.index=1,this.selectAllIcon.index=1):(this.refreshIcon.index=0,this.selectAllIcon.index=0)},c.setSkillSelectInfo=function(){var e=r(a().mark((function e(t){var n,i,l,r,c=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(A.instance.refreshSkillCount<=0?this.refreshBtn.active=!1:this.refreshBtn.active=!0,A.instance.selectAllSkillCount<=0?this.selectAllBtn.active=!1:this.selectAllBtn.active=!0,this.refreshLabel.string=A.instance.refreshSkillCount+"/10",this.selectAllLabel.string=A.instance.selectAllSkillCount+"/3",this.mask.active=!0,n=this.content.children,this.block.active=!0,this.btnList.setScale(.5,.5),i=0;i<n.length;i++)n[i].active=!1;l=a().mark((function e(i){var l,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t[i],(r=n[i]).getComponent(m).init(l,c.onCloseBtn.bind(c)),e.next=5,new Promise((function(e){r.setScale(.5,.5),r.active=!0,f(r).to(.1,{scale:h(1,1,1)},{easing:"backOut"}).call((function(){i==t.length-1&&(c.block.active=!1),e(0)})).start()}));case 5:case"end":return e.stop()}}),e)})),r=0;case 11:if(!(r<t.length)){e.next=16;break}return e.delegateYield(l(r),"t0",13);case 13:r++,e.next=11;break;case 16:f(this.btnList).to(.1,{scale:h(1,1,1)},{easing:"backOut"}).call((function(){c.mask.active=!1})).start(),v.instance.curStep==w.GUIDE_STEP8_BATTLE&&(y.instance.hide(b.PopupUI.GuidePopup),v.instance.curStep=1,y.instance.showGuidePopup(this.content.children[0]));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.onCloseBtn=function(){S.resume(),g.instance.hide(b.PopupUI.SkillSelectPopup)},c.onRefrshBtn=function(){var e=this;if(I.instance.chapterObj.ticket>0){if(A.instance.spendTicket(P.REFRESH_SKILL)){A.instance.refreshSkillCount=1;var t=k.instance.getSelectSkillListByWeight(this._wave);this.setSkillSelectInfo(t)}}else A.instance.watchAd(P.REFRESH_SKILL,(function(){A.instance.refreshSkillCount=1;var t=k.instance.getSelectSkillListByWeight(e._wave);e.setSkillSelectInfo(t)}))},c.onAllBtn=function(e){var t=this;if(I.instance.chapterObj.ticket>0){if(A.instance.spendTicket(P.REFRESH_SKILL)){var n=e.target.getWorldPosition();this.onCloseBtn(),A.instance.selectAllSkillCount=1;for(var i=this.content.children,l=0;l<i.length&&l<this._itemNumber;l++){i[l].getComponent(m).setUpgradeSkill(n)}}}else A.instance.watchAd(P.REFRESH_SKILL,(function(){var n=e.target.getWorldPosition();t.onCloseBtn(),A.instance.selectAllSkillCount=1;for(var i=t.content.children,l=0;l<i.length&&l<t._itemNumber;l++){i[l].getComponent(m).setUpgradeSkill(n)}}))},t}(p)).prototype,"content",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(U.prototype,"block",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(U.prototype,"mask",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(U.prototype,"btnList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(U.prototype,"refreshIcon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(U.prototype,"refreshLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(U.prototype,"refreshBtn",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(U.prototype,"selectAllIcon",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(U.prototype,"selectAllLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(U.prototype,"selectAllBtn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=U))||O));c._RF.pop()}}}));

System.register("chunks:///_virtual/SkillTargetModel.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"44ac058KoRK5JPZE8lOhCeF","SkillTargetModel",void 0);t("SkillTargetCfg",(function(){this.ClassName="SkillTarget",this.Id=void 0,this.type=void 0,this.stress=void 0,this.random=void 0,this.targetCamp=void 0,this.targetHp=void 0,this.targetStatus=void 0,this.condition=void 0,this.notargetStatus=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/SkillTypeItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./SkillModel.ts","./SkillData.ts","./MonsterData.ts","./HeroData.ts","./GameDefine.ts","./Constants.ts","./ResourcesUtil.ts","./SkillUpgradeData.ts","./Util.ts"],(function(i){var t,e,l,n,s,a,r,o,c,h,k,u,p,d,_,S,b,f,g,y;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,l=i.initializerDefineProperty,n=i.assertThisInitialized,s=i.createClass},function(i){a=i.cclegacy,r=i._decorator,o=i.Sprite,c=i.UITransform},function(i){h=i.default},function(i){k=i.SkillObj,u=i.ReleaseSkillObj},function(i){p=i.SkillData},function(i){d=i.MonsterData},function(i){_=i.HeroData},function(i){S=i.GameDefine},function(i){b=i.Constants},function(i){f=i.ResourcesUtil},function(i){g=i.SkillUpgradeData},function(i){y=i.Util}],execute:function(){var O,j,m,I,v,C,w;a._RF.push({},"f6d1449qq9HZJX0i4z/zLFB","SkillTypeItem",void 0);var T=r.ccclass,D=r.property;i("SkillTypeItem",(O=T("SkillTypeItem"),j=D(o),m=D(o),O((C=t((v=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=i.call.apply(i,[this].concat(s))||this,l(t,"quality",C,n(t)),l(t,"skilIcon",w,n(t)),t._skillObj=null,t._initSkillObj=null,t._cd=0,t._initRelease=!0,t._weaponKey="",t._releaseTimes=0,t}e(t,i);var a=t.prototype;return a.init=function(i,t){this._releaseTimes=0,this._weaponKey=i;var e=p.instance.getSkillCfgById(t.skillId);for(var l in this._initSkillObj=new k,this._initSkillObj.Id=e.Id,e)if(Object.prototype.hasOwnProperty.call(e,l)){var n=e[l];this._initSkillObj.hasOwnProperty(l)&&(this._initSkillObj[l]=n)}this._initSkillObj.weaponId=t.weaponId,this._initSkillObj.level=t.level,this._initSkillObj.bulletScale=100,this._initSkillObj.cd=t.cd,this._initSkillObj.range=80*t.range,this._initSkillObj.damage=t.damage,this._initSkillObj.type=t.type,this._initSkillObj.salvo=1,this._initSkillObj.bulletCount=1,this._skillObj=g.instance.getUpgradeSkillBySkillId(this._initSkillObj),this._cd=this.getCd(),this.setSkillTypeInfo(this._skillObj)},a.getCd=function(){var i=(100-this._skillObj.cdPer-this._skillObj.cdAddPer)/100;return i<.2&&(i=.2),this._skillObj.cd*i},a.setSkillTypeInfo=function(i){var t=this,e=b.weaponIconPath+i.res+"/spriteFrame",l=b.qualityPath+i.quality+"/spriteFrame";f.geSpriteFrame(l).then((function(i){t.quality.spriteFrame=i})),f.geSpriteFrame(e).then((function(i){t.skilIcon.spriteFrame=i;var e=t.skilIcon.getComponent(c).contentSize,l=Math.min(80/e.width,80/e.height);t.skilIcon.node.setScale(l,l),t._initRelease=!0}))},a.initSkillCd=function(){},a.setSkillProgressBar=function(i){var t=i/this._skillObj.cd;this.node.getChildByName("bar").getComponent(o).fillRange=t},a.createQueueSkill=function(){var i=new u;i.skillObj=y.clone(this._skillObj),i.callback=this.initSkillCd.bind(this),i.skillKey=this._weaponKey,this._releaseTimes++,i.releaseTimes=this._releaseTimes,_.instance.addQueueSkill(i)},a.childUpdate=function(i){if(S.gameStart&&this._initRelease){this._cd-=i,this.setSkillProgressBar(this._cd);var t=_.instance.heroPoint;this._cd<0&&(this._skillObj=g.instance.getUpgradeSkillBySkillId(this._initSkillObj),p.instance.isAttackType(this._skillObj.type)?d.instance.checkSkillNearMonster(t,this._skillObj.range)?(this.createQueueSkill(),this._cd=this.getCd()):this._cd=this.getCd():(this.createQueueSkill(),this._cd=this.getCd())),d.instance.setNearMonster(this._weaponKey,t,this._skillObj.range)}},s(t,[{key:"range",get:function(){return this._skillObj.range}}]),t}(h)).prototype,"quality",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"skilIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=v))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/SkillUpgradeData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./Util.ts","./BattleLevelModel.ts","./SkillUpgradeModel.ts","./BagData.ts","./GridData.ts","./HeroData.ts","./WeaponData.ts"],(function(a){var e,t,l,i,r,n,s,o,p,d,g,u;return{setters:[function(a){e=a.createClass},function(a){t=a.cclegacy},function(a){l=a.CfgMgr},function(a){i=a.Util},function(a){r=a.BattleLevelCfg},function(a){n=a.SkillUpgradeCfg,s=a.SkillUpgradeObj,o=a.SkillUpgradeAttrType},function(a){p=a.BagData},function(a){d=a.GridData},function(a){g=a.HeroData},function(a){u=a.WeaponData}],execute:function(){t._RF.push({},"0197azBjyNEkIhWWJCAKOOQ","SkillUpgradeData",void 0),a("SkillUpgradeData",function(){function a(){this._battleSkillUpgradeData=new Map,this._buffSkillUpgradeData=new Map,this._normalSkillUpgradeData=new Map,this._battleLevelData=new Map,this._unlockUpgradeOptionsPoolData=[],this._unlockUpgradeOptionsNumber=new Map,this._doubleSkillGroup=new Map,this._carryWeaponGroup=new Map,this._learnUpgradeSkill=new Map,this._learnUpgradeSkillGroup=new Map,this._learnUpgradeData=[]}var t=a.prototype;return t.init=function(){for(var a=l.getCfgDataArray(new r),e=0;e<a.length;e++){var t=a[e];this._battleLevelData.set(t.level,t)}this._carryWeaponGroup=p.instance.getCarryWeaponMap()},t.initUpgradeOptionsPoolData=function(){this.clearUpgradeData();for(var a=l.getCfgDataArray(new n),e=0;e<a.length;e++){var t=a[e];if(0!=t.aimSkills.length){var i=new h;i.id=t.Id,i.premise=t.premise,i.weaponId=t.weaponId,i.weight=t.weight;var r=t.weaponId+"|"+t.type+"|"+t.skillLevel;if(t.weaponId){if(this._carryWeaponGroup.has(t.weaponId))this._carryWeaponGroup.get(t.weaponId)>=t.weaponLevel&&this._unlockUpgradeOptionsPoolData.push(i)}else this._unlockUpgradeOptionsPoolData.push(i);this._unlockUpgradeOptionsNumber.has(r)?this._unlockUpgradeOptionsNumber.set(r,this._unlockUpgradeOptionsNumber.get(r)+1):this._unlockUpgradeOptionsNumber.set(r,1)}}this.initUpgradeWeaponBuff()},t.initUpgradeWeaponBuff=function(){var a=this,e=d.instance.getGridItemData(),t=d.instance.getGridMapData();this._battleSkillUpgradeData.forEach((function(a){a.damageAddPer=0,a.cdAddPer=0})),this._buffSkillUpgradeData.forEach((function(l){for(var i=l.weaponId,r=[],n=0;n<e.length;n++){var o=e[n].wid;i==u.instance.getWeaponByWid(o).weaponId&&(r=r.concat(e[n].data))}var p=l.aimSkills;if(0!=r.length){for(var g=d.instance.getNearbyGridIndexByTiled(r),h=[],k=0;k<g.length;k++){var S=d.instance.getGridTiledByIndex(g[k]),f=t[S.row][S.col];"0"!=f&&""!=f&&f&&-1==h.indexOf(f)&&h.push(f)}for(var c=0;c<h.length;c++){var U=d.instance.getGridItemWid(h[c]),_=u.instance.getWeaponByWid(U);if(_){if(_&&-1!=p.indexOf(_.skillId)){var v=_.skillId,D=a._battleSkillUpgradeData.has(v)?a._battleSkillUpgradeData.get(v):new s;D.skillId=v,D.cdAddPer+=l.cdAddPer,D.damageAddPer+=l.damageAddPer,a._battleSkillUpgradeData.has(v)||a._battleSkillUpgradeData.set(v,D)}}else console.log("=================== start ================"),console.log("gridIndexes",g),console.log("weaponKeys",h),console.log("wid",U,h[c],c),console.log("=================== end ================")}}}))},t.upgradeBattleSkillObjAtt=function(a){var e=a.aimSkills;if(this.setLearnUpgradeSkillGroup(a),e)for(var t=0;t<e.length;t++){var l=e[t],i=this._battleSkillUpgradeData.has(l)?this._battleSkillUpgradeData.get(l):new s;i.aimSkills&&0!=i.aimSkills.length||(i.aimSkills=e);var r=this._updateSkillUpgradeObj(i,l,a);this._battleSkillUpgradeData.has(l)||this._battleSkillUpgradeData.set(l,r)}},t.upgradeBuffSkillObjAtt=function(a){var e=a.weaponId;this.setLearnUpgradeSkillGroup(a);var t=this._buffSkillUpgradeData.has(a.weaponId)?this._buffSkillUpgradeData.get(a.weaponId):new s;t.aimSkills&&0!=t.aimSkills.length||(t.aimSkills=a.aimSkills);var l=this._updateSkillUpgradeObj(t,a.weaponId,a);this._buffSkillUpgradeData.has(e)||this._buffSkillUpgradeData.set(e,l),this.initUpgradeWeaponBuff()},t.upgradeGoldObjAtt=function(a){this.setLearnUpgradeSkillGroup(a);var e=this._normalSkillUpgradeData.has(S.GOLD)?this._normalSkillUpgradeData.get(S.GOLD):new s;e.aimSkills&&0!=e.aimSkills.length||(e.aimSkills=a.aimSkills);var t=this._updateSkillUpgradeObj(e,S.GOLD,a);this._normalSkillUpgradeData.has(S.GOLD)||this._normalSkillUpgradeData.set(S.GOLD,t);for(var l=a.attrs,i=0,r=0;r<l.length;r++)"gold"==l[r].key&&(i+=Number(l[r].value));return i},t.upgradeHpObjAtt=function(a){this.setLearnUpgradeSkillGroup(a);for(var e=a.attrs,t=0,l=0;l<e.length;l++)"hpPer"==e[l].key&&(t+=Number(e[l].value));g.instance.addHpPer(t)},t.upgradeExpObjAtt=function(a){this.setLearnUpgradeSkillGroup(a);var e=this._normalSkillUpgradeData.has(S.EXP)?this._normalSkillUpgradeData.get(S.EXP):new s,t=this._updateSkillUpgradeObj(e,S.EXP,a);this._normalSkillUpgradeData.has(S.EXP)||this._normalSkillUpgradeData.set(S.EXP,t)},t.upgradeMonsterSpeedObjAtt=function(a){this.setLearnUpgradeSkillGroup(a);var e=this._normalSkillUpgradeData.has(S.MONSTR_MOVE)?this._normalSkillUpgradeData.get(S.MONSTR_MOVE):new s,t=this._updateSkillUpgradeObj(e,S.MONSTR_MOVE,a);this._normalSkillUpgradeData.has(S.MONSTR_MOVE)||this._normalSkillUpgradeData.set(S.MONSTR_MOVE,t)},t.upgradeShopObjAtt=function(a){this.setLearnUpgradeSkillGroup(a)},t.getGoldUpgradeSkill=function(){return this._normalSkillUpgradeData.has(S.GOLD)?this._normalSkillUpgradeData.get(S.GOLD).goldPer:0},t.getExpUpgradeSkill=function(){return this._normalSkillUpgradeData.has(S.EXP)?this._normalSkillUpgradeData.get(S.EXP).expPer:0},t.getMonsterSpeedUpgradeSkill=function(){return this._normalSkillUpgradeData.has(S.MONSTR_MOVE)?this._normalSkillUpgradeData.get(S.MONSTR_MOVE).speedPer:0},t.setLearnUpgradeSkillGroup=function(a){var e=a.Id;this._learnUpgradeSkill.set(e,!0),this._learnUpgradeData.push(a.Id);var t=a.weaponId+"|"+a.type+"|"+a.skillLevel,l=this._unlockUpgradeOptionsNumber.get(t),i=new k,r=a.weaponId+"|"+a.type;if(this._learnUpgradeSkillGroup.has(r)){if((i=this._learnUpgradeSkillGroup.get(r)).id=a.Id,l>i.options_num+1)i.options_num++;else{i.options_num=0;var n=i.skillLevel;i.skillLevel=n+1}this._learnUpgradeSkillGroup.set(r,i)}else{var s=1;1==l&&s++,i.id=a.Id,i.skillLevel=s,i.options_num=1==l?0:1,this._learnUpgradeSkillGroup.set(r,i)}},t.setDoubleSkillGroup=function(a,e){this._doubleSkillGroup.set(a,e)},t.getUpgradeSkillBySkillId=function(a){var e=i.clone(a);if(this._battleSkillUpgradeData.has(e.Id)){var t=this._battleSkillUpgradeData.get(e.Id);for(var l in t)if(!(["weaponId","Id"].indexOf(l)>=0)&&Object.prototype.hasOwnProperty.call(t,l)){var r=t[l];if(e.hasOwnProperty(l))if(Array.isArray(e[l]))for(var n in r)-1==e[l].indexOf(r[n])&&e[l].push(r[n]);else e[l]+=r}}if(this._battleSkillUpgradeData.has(0)){var s=this._battleSkillUpgradeData.get(0);for(var o in s)if(!(["weaponId","Id"].indexOf(o)>=0)&&Object.prototype.hasOwnProperty.call(s,o)){var p=s[o];e.hasOwnProperty(o)&&!Array.isArray(e[o])&&(e[o]+=p)}}return e},t.getLearnSkillUpgrades=function(){return this._learnUpgradeData},t.getSkillUpgradeCfgById=function(a){return l.getDataById(new n,a)},t.getBattleLevelByLevel=function(a){var e=100;return this._battleLevelData.has(a)&&(e=this._battleLevelData.get(a).exp),e},t.hasLearnSkill=function(a){return this._learnUpgradeSkill.has(a)},t.getUnlockUpgradeOptionsData=function(a){var e=this,t=[];return this._unlockUpgradeOptionsPoolData.forEach((function(a){var l=e.getSkillUpgradeCfgById(a.id);if(!e._learnUpgradeSkill.has(a.id)){var i=l.weaponId+"|"+l.type,r=new k;r.skillLevel=1,e._learnUpgradeSkillGroup.get(i)&&(r=e._learnUpgradeSkillGroup.get(i)),r.skillLevel>=l.skillLevel&&(a.premise&&!e._learnUpgradeSkill.has(a.premise)||0!=l.doubleSkill&&l.doubleSkill!=e._doubleSkillGroup.get(l.weaponId)||t.push(a))}})),t},t.getSelectObjByWeight=function(a,e){for(var t=0,l=0,i=0,r=0,n=[],s=0;s<a.length;s++){var o=a[s];if(o.weight){for(var p=!1,d=0;d<e.length;d++){var g=e[d];if(o.id==g.id||0!=g.weaponId&&g.weaponId==o.weaponId){p=!0;break}}if(!p){var u=a[s];r+=u.weight,n.push(u)}}}if(n.length){var h=Math.random()*r;return n.some((function(a,e){if(l=t+a.weight,h>=t&&h<l)return i=e,!0;t=l})),n[i]}return null},t.getSelectSkillListByWeight=function(a){for(var e=[],t=this.getUnlockUpgradeOptionsData(a),l=0;l<3;l++){var i=this.getSelectObjByWeight(t,e);i&&e.push(i)}return e},t.getWeaponBuffSkillIds=function(a){return this._buffSkillUpgradeData.has(a)?this._buffSkillUpgradeData.get(a).aimSkills:[]},t._updateSkillUpgradeObj=function(a,e,t){a.skillId=e,a.skillType=t.skillType,a.weaponId=t.weaponId;for(var l=t.attrs,i=0;i<l.length;i++){var r=l[i];a.hasOwnProperty(r.key)&&(r.type==o.ASSIGN?a[r.key]=r.value:Array.isArray(a[r.key])?-1==a[r.key].indexOf(r.value)&&a[r.key].push(r.value):a[r.key]+=Number(r.value))}return a},t.clearUpgradeData=function(){this._unlockUpgradeOptionsPoolData=[],this._unlockUpgradeOptionsNumber.clear(),this._battleSkillUpgradeData.forEach((function(a){a.damageAddPer=0,a.cdAddPer=0}))},t.clear=function(){this._learnUpgradeData=[],this._doubleSkillGroup.clear(),this._battleLevelData.clear(),this._unlockUpgradeOptionsPoolData=[],this._unlockUpgradeOptionsNumber.clear(),this._battleSkillUpgradeData.clear(),this._buffSkillUpgradeData.clear(),this._learnUpgradeSkill.clear(),this._learnUpgradeSkillGroup.clear()},e(a,null,[{key:"instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}())._instance=null;var h=a("SelectObj",(function(){this.id=void 0,this.premise=void 0,this.weaponId=void 0,this.weight=void 0})),k=(a("LearnSelectObj",(function(){this.id=void 0,this.options_num=0})),a("LearnSkillGroupObj",(function(){this.id=void 0,this.skillLevel=1,this.options_num=0}))),S=(a("WeaponGroupObj",(function(){this.wid=void 0,this.level=0})),a("SkillUpgradeType",function(a){return a[a.SKILL_BATTLE=0]="SKILL_BATTLE",a[a.SKILL_BUFF=1]="SKILL_BUFF",a[a.GOLD=2]="GOLD",a[a.MONSTR_MOVE=3]="MONSTR_MOVE",a[a.EXP=4]="EXP",a[a.HP=5]="HP",a[a.SHOP=6]="SHOP",a[a.BOSS=7]="BOSS",a}({})));a("SkillSelectType",function(a){return a[a.NORMAL=0]="NORMAL",a[a.UPGRADE=1]="UPGRADE",a}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillUpgradeModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"2de5cbLS+hCTpA4HvJpJnJv","SkillUpgradeModel",void 0);i("SkillUpgradeCfg",(function(){this.ClassName="SkillUpgrade",this.Id=void 0,this.name=void 0,this.desc=void 0,this.icon=void 0,this.weaponId=void 0,this.weaponLevel=void 0,this.skillLevel=void 0,this.skillType=void 0,this.type=void 0,this.premise=void 0,this.aimSkills=void 0,this.doubleSkill=void 0,this.weight=void 0,this.quality=void 0,this.waveLimit=void 0,this.attrs=void 0})),i("SkillUpgradeObj",(function(){this.skillId=0,this.skillType=0,this.weaponId=0,this.hp=0,this.exp=0,this.goldPer=0,this.expPer=0,this.speedPer=0,this.cdPer=0,this.cdAddPer=0,this.damageRange=0,this.damageNum=0,this.damage=0,this.damagePer=0,this.damageAddPer=0,this.bossDamagePer=0,this.critPer=0,this.critDamagePer=0,this.critNum=0,this.range=0,this.bulletSpeed=0,this.bulletScale=0,this.salvo=0,this.bulletCount=0,this.bulletSpeedPer=0,this.duringPer=0,this.probability=0,this.hitBack=0,this.bulletMove=[],this.aimSkills=[],this.bulletBuffs=[],this.bulletSkills=[],this.subSkills=[]})),i("SkillUpgradeAttrType",function(i){return i[i.ADD=0]="ADD",i[i.SUB=1]="SUB",i[i.ASSIGN=2]="ASSIGN",i[i.APPEND=3]="APPEND",i}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SlotItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts","./PlayerData.ts"],(function(t){var e,a,n,r,i,c,o,s,l,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,c=t._decorator,o=t.Node,s=t.Label,l=t.Component},function(t){u=t.LanguageManager},function(t){p=t.PlayerData}],execute:function(){var h,d,g,f,m,y,v;i._RF.push({},"add118G6C5IfoC31YQkeguY","SlotItem",void 0);var I=c.ccclass,b=c.property;t("SlotItem",(h=I("SlotItem"),d=b(o),g=b(s),h((y=e((m=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i))||this,n(e,"mask",y,r(e)),n(e,"desc",v,r(e)),e.sid=-1,e.chapterId=0,e}a(e,t);var i=e.prototype;return i.init=function(t,e){var a=p.instance.chapterObj.chapterId;this.sid=e,this.chapterId=t,this.mask.active=!1,t&&(Number(t)>=a?(this.mask.active=!0,this.desc.string=u.instance.getLang("game.unlockchapter",[t.toString()])):this.chapterId=0)},i.updateWeapon=function(){this.chapterId=0,this.mask.active=!1},e}(l)).prototype,"mask",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(m.prototype,"desc",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/SoundModel.ts",["cc"],(function(i){var o;return{setters:[function(i){o=i.cclegacy}],execute:function(){o._RF.push({},"da0b587TatEfYOmhgmfwcge","SoundModel",void 0);i("SoundCfg",(function(){this.ClassName="Sound",this.Id=void 0,this.Name=void 0,this.Desc=void 0,this.Group=void 0,this.Type=void 0,this.Volume=void 0,this.Delay=void 0,this.Mp3=void 0}));o._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteEx.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,p,s,a,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){p=e.cclegacy,s=e._decorator,a=e.Sprite,c=e.SpriteFrame,u=e.CCInteger,l=e.Component}],execute:function(){var d,x,h,y,f,m,g,F;p._RF.push({},"a7351A5vfBG26Vq3Fx4Zzzr","SpriteEx",void 0);var _=s.ccclass,b=s.property,S=s.executeInEditMode,v=s.requireComponent,z=s.menu;e("SpriteEx",(d=v(a),x=z("UI/SpriteEx Index"),h=b({type:[c],tooltip:"SpriteEx Indexes"}),y=b({type:u,tooltip:"The Current Frame"}),_(f=S(f=d(f=x((g=t((m=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),p=0;p<r;p++)o[p]=arguments[p];return t=e.call.apply(e,[this].concat(o))||this,i(t,"spriteFrames",g,n(t)),i(t,"_index",F,n(t)),t}return r(t,e),o(t,[{key:"index",get:function(){return this._index},set:function(e){e<0||(this._index=e%this.spriteFrames.length,this.node.getComponent(a).spriteFrame=this.spriteFrames[this._index])}},{key:"size",get:function(){return this.spriteFrames.length}}]),t}(l)).prototype,"spriteFrames",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null]}}),t(m.prototype,"index",[y],Object.getOwnPropertyDescriptor(m.prototype,"index"),m.prototype),F=t(m.prototype,"_index",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=m))||f)||f)||f)||f));p._RF.pop()}}}));

System.register("chunks:///_virtual/Storage.ts",["cc"],(function(e){var t,o;return{setters:[function(e){t=e.cclegacy,o=e.sys}],execute:function(){t._RF.push({},"aa9e8led8JCu5kY5fi2qjfH","Storage",void 0);e("Storage",function(){function e(){}return e.setItem=function(e,t){o.localStorage.setItem(e,t)},e.getItem=function(e){return o.localStorage.getItem(e)},e.removeItem=function(e){o.localStorage.removeItem(e)},e.clear=function(){o.localStorage.clear()},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SysOpenData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./PlayerData.ts","./SysOpenModel.ts"],(function(n){var t,e,s,a,c;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy},function(n){s=n.CfgMgr},function(n){a=n.PlayerData},function(n){c=n.SysOpenCfg}],execute:function(){e._RF.push({},"63bbcBqI+ZE/66F0uXhki5z","SysOpenData",void 0),n("SysOpenData",function(){function n(){this._sysOpenData=new Map}var e=n.prototype;return e.init=function(){for(var n=s.getCfgDataArray(new c),t=0;t<n.length;t++){var e=n[t];this._sysOpenData.set(e.Id,e)}},e.checkSysOpen=function(n){return!!this._sysOpenData.has(n)&&!(this._sysOpenData.get(n).unlock>=a.instance.chapterObj.chapterId)},e.getSysOpenCfgById=function(n){return s.getDataById(new c,n)},e.unlockSysAction=function(n){},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/SysOpenModel.ts",["cc"],(function(s){var e;return{setters:[function(s){e=s.cclegacy}],execute:function(){e._RF.push({},"630dfslL79EJa1ydFpf86ok","SysOpenModel",void 0);s("SysOpenCfg",(function(){this.ClassName="SysOpen",this.Id=void 0,this.name=void 0,this.type=void 0,this.desc=void 0,this.unlock=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/SystemConstantModel.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"4905eDmeYhEfpQXfWDy9VDm","SystemConstantModel",void 0);t("SystemConstantCfg",(function(){this.ClassName="SystemConstant",this.Id=void 0,this.ConstantName=void 0,this.ConstantValue=void 0,this.ConstantValue2=void 0,this.Explain=void 0}));s._RF.pop()}}}));

System.register("chunks:///_virtual/Toast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(e){var t,n,i,a,r,o,s,c,l,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.Label,c=e.tween,l=e.v3,u=e.Component},function(e){p=e.LanguageManager}],execute:function(){var g,f,d,h,y;r._RF.push({},"ddfe1rgxVxEoZW8/Ku88Xn7","Toast",void 0);var v=o.ccclass,b=o.property;e("Toast",(g=v("Toast"),f=b(s),g((y=t((h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"lbText",y,a(t)),t}n(t,e);var r=t.prototype;return r.init=function(e,t){var n=p.instance.getLang(e,t);n&&""!=n||(n=e),this.lbText.string=n,this.node.setScale(.5,.5),this.setAnim()},r.setAnim=function(){var e=this;c(this.node).to(.2,{scale:l(1.1,1.1,1.1)},{easing:"sineIn"}).to(.2,{scale:l(1,1,1)},{easing:"sineOut"}).delay(.2).by(.5,{position:l(0,100,0)}).call((function(){e.scheduleOnce((function(){e.node.destroy()}),1)})).start()},t}(u)).prototype,"lbText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/TopupData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./GameEvent.ts","./GrowthFundMode.ts","./MonthlyPassModel.ts","./WalletManager.ts","./ShopBillData.ts","./FirstTopupModel.ts"],(function(t){var n,a,s,e,o,i,u,r,c,d,f,p,h,_;return{setters:[function(t){n=t.createClass},function(t){a=t.cclegacy},function(t){s=t.Api},function(t){e=t.CfgMgr},function(t){o=t.EventListener},function(t){i=t.HttpService},function(t){u=t.OpenPopupManager},function(t){r=t.GameEvent},function(t){c=t.GrowthFundCfg,d=t.GrowthFundLevelCfg},function(t){f=t.MonthlyPassCfg},function(t){p=t.WalletManager},function(t){h=t.ShopBillData},function(t){_=t.FirstTopupCfg}],execute:function(){a._RF.push({},"39c81XPdQhKoIg9Dxp/niWB","TopupData",void 0),t("TopupData",function(){function t(){this._monthlyPassData=[],this._fundIdData=new Map,this._fundObjData=new Map,this._firstTopupData=[]}var a=t.prototype;return a.getFirstTopupCfg=function(t){return e.getDataById(new _,t)},a.getFirstTopupItems=function(t){for(var n=e.getCfgDataArray(new _)[t],a=[],s=0;s<n.rewards.length;s++)for(var o=0;o<n.rewards[s].length;o++)a.push(n.rewards[s][o]);return a},a.getFirtTopupFromNetwork=function(){var t=this;i.instance.post(s.TOPUP_FIRST_INFO,{}).then((function(n){0==n.code&&(t._firstTopupData=n.data.firsts,o.emit(r.UPDATE_FIRST_TOPUP_POPUP))}))},a.onBuyFirstTopup=function(t){var n=this;p.instance.isConnected()?this._onBuyFirstTopup(t):p.instance.connectWallet((function(){n._onBuyFirstTopup(t)}))},a._onBuyFirstTopup=function(t){i.instance.post(s.TOPUP_FIRST_PREBUY,{firstId:t}).then((function(t){0==t.code?p.instance.buyWithToken(t.data.amount,t.data.payload,(function(n,a){0==n&&(h.instance.addBill(t.data.billId,"firsttopup",1,r.GET_FIRST_TOPUP_DATA),u.instance.showToast("shop.submitSuccess"))})):u.instance.showToast(t?t.msg:"network.error")}))},a.onClaimFirstTopup=function(t){var n=this;i.instance.post(s.TOPUP_FIRST_CLAIM,{firstId:t,day:1}).then((function(t){0==t.code?(n._firstTopupData=t.data.firsts,o.emit(r.UPDATE_FIRST_TOPUP_POPUP),u.instance.showRewardPopup(t.data.rewards,null)):u.instance.showToast(t.msg)}))},a.getMonthlyPassCfg=function(t){return e.getDataById(new f,t)},a.getMonthlyPassFromNetwork=function(){var t=this;i.instance.post(s.TOPUP_MONTHLY_PASS_INFO,{}).then((function(n){0==n.code&&(t._monthlyPassData=n.data.pass,o.emit(r.UPDATE_MONTHLY_PASS_POPUP))}))},a.onBuyMonthlyPass=function(t,n){var a=this;p.instance.isConnected()?this._onBuyMonthlyPass(t,n):p.instance.connectWallet((function(){a._onBuyMonthlyPass(t,n)}))},a._onBuyMonthlyPass=function(t,n){i.instance.post(s.TOPUP_MONTHLY_PASS_PREBUY,{passId:t}).then((function(t){0==t.code?p.instance.buyWithToken(t.data.amount,t.data.payload,(function(a,s){0==a&&(h.instance.addBill(t.data.billId,n,1,r.GET_MONTHLY_PASS_DATA),u.instance.showToast("shop.submitSuccess"))})):u.instance.showToast(t.msg)}))},a.onClaimMonthlyPass=function(t){var n=this;i.instance.post(s.TOPUP_MONTHLY_PASS_CLAIM,{passId:t}).then((function(t){0==t.code?(n._monthlyPassData=t.data.pass,o.emit(r.UPDATE_MONTHLY_PASS_POPUP),u.instance.showRewardPopup(t.data.rewards,null)):u.instance.showToast(t.msg)}))},a.getGrowthFundCfg=function(t){return e.getDataById(new c,t)},a.getGrowthFundCfgArr=function(){return e.getCfgDataArray(new c)},a.getGrowthFundLevelArrCfg=function(t){for(var n=e.getCfgDataArray(new d),a=[],s=0;s<n.length;s++){var o=n[s];o.fundId==t&&a.push(o)}return a},a.initFundCfg=function(){for(var n=t.instance.getGrowthFundCfgArr(),a=0;a<n.length;a++){var s=n[a];this._fundIdData.set(s.type,s.Id)}},a.getFundFromNetwork=function(){var t=this;i.instance.post(s.TOPUP_FUND_INFO,{}).then((function(n){if(0==n.code){t._fundObjData.clear();for(var a=0;a<n.data.funds.length;a++){var s=n.data.funds[a];t._fundObjData.set(s.fundId,s)}o.emit(r.UPDATE_GROWTH_FUND_POPUP)}}))},a.getFundIdByType=function(t){return this._fundIdData.get(t)},a.getFundObjById=function(t){return this._fundObjData.get(t)},a.onBuyFund=function(t,n,a){var s=this;p.instance.isConnected()?this._onBuyFund(t,n,a):p.instance.connectWallet((function(){s._onBuyFund(t,n,a)}))},a._onBuyFund=function(t,n,a){i.instance.post(s.TOPUP_FUND_PREBUY,{fundId:t,grade:n}).then((function(t){0==t.code?p.instance.buyWithToken(t.data.amount,t.data.payload,(function(n,s){0==n&&(h.instance.addBill(t.data.billId,a,1,r.GET_GROWTH_FUND_DATA),u.instance.showToast("shop.submitSuccess"))})):u.instance.showToast(t?t.msg:"network.error")}))},a.onClaimFund=function(t,n){var a=this;i.instance.post(s.TOPUP_FUND_CLAIM,{rewardId:t,grade:n}).then((function(t){if(0==t.code){a._fundObjData.clear();for(var n=0;n<t.data.funds.length;n++){var s=t.data.funds[n];a._fundObjData.set(s.fundId,s)}o.emit(r.UPDATE_GROWTH_FUND_POPUP),u.instance.showRewardPopup(t.data.rewards,null)}else u.instance.showToast(t.msg)}))},n(t,[{key:"monthlyPassData",get:function(){return this._monthlyPassData}},{key:"firstTopupData",get:function(){return this._firstTopupData}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,a._RF.pop()}}}));

System.register("chunks:///_virtual/TopupModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"2fb00nD215DX52p4ktl1FHP","TopupModel",void 0);i("FirstTopupResult",(function(){this.firsts=void 0,this.rewards=void 0})),i("FirstTopupObj",(function(){this.availableDays=void 0,this.claimedDays=void 0,this.firstId=void 0,this.price=void 0,this.state=void 0,this.token=void 0})),i("MonthlyPassResult",(function(){this.pass=void 0,this.rewards=void 0})),i("TopupPreBuyResult",(function(){this.amount=void 0,this.billId=void 0,this.payload=void 0,this.toAddress=void 0})),i("MonthlyPassObj",(function(){this.countdown=void 0,this.draw=void 0,this.passId=void 0,this.price=void 0,this.token=void 0,this.state=void 0})),i("GrowthFundResult",(function(){this.funds=void 0})),i("GrowthFundClaimResult",(function(){this.funds=void 0,this.rewards=void 0})),i("GrowthFundObj",(function(){this.claimedRewards=void 0,this.currentValue=void 0,this.fundId=void 0,this.states=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/TurntableData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var n,e,i,a,s,r,o;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,i=t._decorator},function(t){a=t.HttpService},function(t){s=t.Api},function(t){r=t.EventListener},function(t){o=t.GameEvent}],execute:function(){var c,u;e._RF.push({},"510573Jy2pOqbHjvV+lZpul","TurntableData",void 0);var d=i.ccclass;i.property,t("TurntableData",d("TurntableData")(((u=function(){function t(){this.rewardList=[],this.todayLimit=0}return t.prototype.getCasualInfo=function(){var t=this;a.instance.post(s.LUCKSPIN_INFO).then((function(n){n&&0==n.code&&(t.rewardList=n.data.rewards,t.todayLimit=n.data.todayLimit,r.emit(o.REFRESH_ROTARY_INFO))}))},n(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,c=u))||c),t("CasualInfo",(function(){this.rewards=void 0,this.todayLimit=void 0})),t("RewardModel",(function(){this.id=void 0,this.reward=void 0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/UnlockItemPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./SpriteEx.ts","./ResourcesUtil.ts","./BagData.ts","./LanguageManager.ts"],(function(e){var t,n,i,o,a,r,c,s,l,u,p,g,m,h,f,b,y,I,d,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.Label,s=e.Sprite,l=e.Node,u=e.Tween,p=e.tween,g=e.UITransform,m=e.Component},function(e){h=e.OpenPopupManager,f=e.LayerType},function(e){b=e.Constants},function(e){y=e.SpriteEx},function(e){I=e.ResourcesUtil},function(e){d=e.BagData},function(e){w=e.LanguageManager}],execute:function(){var P,U,v,k,z,L,_,x,S,B,C,E,F,M,O;a._RF.push({},"574fa4/JmpAkpKzGQUAIacq","UnlockItemPopup",void 0);var T=r.ccclass,D=r.property;e("UnlockItemPopup",(P=T("UnlockItemPopup"),U=D(c),v=D(c),k=D(s),z=D(l),L=D(y),_=D(c),P((B=t((S=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"title",B,o(t)),i(t,"itemName",C,o(t)),i(t,"icon",E,o(t)),i(t,"light",F,o(t)),i(t,"iconEx",M,o(t)),i(t,"desc",O,o(t)),t._items=[],t}n(t,e);var a=t.prototype;return a.show=function(e){this._items=e,this.setOneItem(this._items.shift()),u.stopAllByTarget(this.light),p(this.light).by(5,{angle:360}).repeatForever().start()},a.setOneItem=function(e){var t=this;if(e.type>this.iconEx.size){var n=b.weaponIconPath+d.instance.getWeaponIcon(e.itemId)+"/spriteFrame";I.geSpriteFrame(n).then((function(e){t.icon.spriteFrame=e;var n=t.icon.getComponent(g).contentSize,i=Math.min(190/n.width,190/n.height);t.icon.node.setScale(i,i)}));var i=d.instance.getWeaponCfgById(e.itemId);this.itemName.string=w.instance.getLang(i.name),this.title.string=w.instance.getLang("bag.unlocknewweapon")}else this.iconEx.index=e.type,this.itemName.string=w.instance.getLang("bag.slot"),this.title.string=w.instance.getLang("bag.unlocknewslot")},a.onCloseBtn=function(){var e=this;0==this._items.length?h.instance.hide(b.PopupUI.UnlockItemPopup):h.instance.hide(b.PopupUI.UnlockItemPopup,(function(){e.scheduleOnce((function(){h.instance.show(b.PopupUI.UnlockItemPopup,null,f.TOP,!1,e._items)}),.2)}))},t}(m)).prototype,"title",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(S.prototype,"itemName",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(S.prototype,"icon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(S.prototype,"light",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(S.prototype,"iconEx",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(S.prototype,"desc",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=S))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/UserData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Api.ts","./EventListener.ts","./HttpService.ts","./PlayerData.ts","./GameEvent.ts"],(function(t){var n,e,s,a,i,r,c;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){s=t.Api},function(t){a=t.EventListener},function(t){i=t.HttpService},function(t){r=t.PlayerData},function(t){c=t.GameEvent}],execute:function(){e._RF.push({},"32122Ry1hVOc5x9Sc2ms+7W","UserData",void 0),t("UserData",function(){function t(){this.userInfo=null,this.avatarList=void 0,this.avatarIds=[]}var e=t.prototype;return e.init=function(){this.userInfo=r.instance.userObj,this.getAvatarIds(),this.getUserInfo()},e.getUserInfo=function(){var t=this;i.instance.post(s.USER_PROFILE).then((function(n){0==n.code&&(t.userInfo=n.data.userInfo)}))},e.getAvatarIds=function(){var t=this;this.avatarIds.length>0?a.emit(c.INIT_AVATAR_LIST):i.instance.post(s.USER_AVATARS).then((function(n){0==n.code&&(t.avatarIds=n.data.avatars,a.emit(c.INIT_AVATAR_LIST))}))},n(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/UserItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts"],(function(e){var t,n,i,r,o,c,s,l,a,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,s=e.sp,l=e.tween,a=e.Vec3,u=e.Component},function(e){p=e.Util}],execute:function(){var f,d,h,y,m;o._RF.push({},"17e60QMz3tDp56dqNoLgHlY","UserItem",void 0);var g=c.ccclass,v=c.property;e("UserItem",(f=g("UserItem"),d=v(s.Skeleton),f((m=t((y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,i(t,"icon",m,r(t)),t}return n(t,e),t.prototype.init=function(){var e=this,t="pifu"+p.getRandomInt(1,15);this.node.setScale(0,0,0),l(this.node).delay(.1).call((function(){e.icon.setSkin(t)})).to(.2,{scale:new a(1,1,1)}).start()},t}(u)).prototype,"icon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/UserModel.ts",["cc"],(function(e){var s;return{setters:[function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"ff699Thp2JLMo/vCoEFUesS","UserModel",void 0);e("UserModel",(function(){this.userId=void 0,this.username=void 0,this.name=void 0,this.avatar=0,this.isDebug=!1}));s._RF.pop()}}}));

System.register("chunks:///_virtual/Util.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,n,e,o,a,i,u,f,h,c,l,g,s,M,d;return{setters:[function(t){r=t.inheritsLoose},function(t){n=t.cclegacy,e=t.Vec3,o=t.Quat,a=t.Vec2,i=t.v2,u=t.Color,f=t.Rect,h=t.screen,c=t.v3,l=t.tween,g=t.misc,s=t.view,M=t.Component,d=t.bezier}],execute:function(){n._RF.push({},"2e632+VYKdG5qMiRPU5yd+n","Util",void 0);t("Util",function(t){function n(){return t.apply(this,arguments)||this}return r(n,t),n.isEmptyObject=function(t){var r=!0;if(t&&t.constructor===Object){for(var n in t)if(t.hasOwnProperty(n)){r=!1;break}}else r=!1;return r},n.getStringLength=function(t){for(var r=t,n=0,e=0,o=r.length;e<o;e++){n+=r.charCodeAt(e)<=255?1:2}return Math.ceil(n/2)},n.getRandomNFromM=function(t,r){for(var n=[],e=0,o=0;o<r&&!(o>=t+1);){e=this.getRandomInt(0,t);for(var a=0,i=0;i<o;i++)if(n[i]===e){a=1;break}0===a&&(n[o]=e,o++)}return n},n.getRandomInt=function(t,r){var n=Math.random()*(r-t+1)+t;return Math.floor(n)},n.randomHit=function(t){return Math.random()<t/100},n.arrayToObject=function(t,r){var n={};for(var e in t)t.hasOwnProperty(e)&&t[e][r]&&(n[t[e][r]]=t[e])},n.clone=function(t){if(null===t||"object"!=typeof t)return t;var r={};for(var n in t.constructor===Array&&(r=[]),t)t.hasOwnProperty(n)&&(r[n]=this.clone(t[n]));return r},n.objectToArray=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&r.push(t[n]);return r},n.formatMoney=function(t){for(var r=["","K","M","G","T","P","E","Z","Y","B","N","D"],n="",e=0;e<r.length;e++){if(!(t>=1e4)){n=Math.floor(t)+r[e];break}t/=1e3}return""===n&&(n=Math.floor(t)+"U"),n},n.newFormatMoney=function(t){if(t<1e4)return t.toString();for(var r=["","K","M","G","T","P","E","Z","Y","B","N","D"],n="",e=0;e<r.length;e++){if(!(t>=1e4)){n=t.toFixed(1)+r[e];break}t/=1e3}return""===n&&(n=Math.floor(t)+"U"),n},n.isNewDay=function(t){var r=new Date(t),n=new Date,e=r.getYear(),o=r.getMonth(),a=r.getDate(),i=n.getYear(),u=n.getMonth(),f=n.getDate();return i>e||(u>o||f>a)},n.getPropertyCount=function(t){var r,n=0;for(r in t)t.hasOwnProperty(r)&&n++;return n},n.difference=function(t,r){var n=[];if(t.constructor!==Array||r.constructor!==Array)return n;for(var e=t.length,o=0;o<e;o++)-1===r.indexOf(t[o])&&n.push(t[o]);return n},n.trim=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},n.format=function(t,r){return t=t.replace(new RegExp("\\{0\\}","gm"),r)},n.format1=function(t,r){for(var n=r.length;n--;)t=t.replace(new RegExp("\\{"+n+"\\}","gm"),r[n]);return t},n.isNowValid=function(t,r){var n=new Date(t),e=new Date(r),o=!1;if(n.getDate()+""!="NaN"&&e.getDate()+""!="NaN"){var a=new Date;o=a<e&&a>n}return o},n.getDeltaDays=function(t,r){t=new Date(t),r=new Date(r);var n=t.getFullYear(),e=t.getMonth()+1,o=t.getDate(),a=r.getFullYear(),i=r.getMonth()+1,u=r.getDate();t=new Date(n+"/"+e+"/"+o+" GMT+0800").getTime();var f=(r=new Date(a+"/"+i+"/"+u+" GMT+0800").getTime())-t;return Math.floor(f/864e5)},n.getMin=function(t){var r=null;if(t.constructor===Array)for(var n=t.length,e=0;e<n;e++)r=0===e?Number(t[0]):r>Number(t[e])?Number(t[e]):r;return r},n.formatTwoDigits=function(t){return(Array(2).join(0)+t).slice(-2)},n.getDay=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},n.formatDate=function(t){var r=new Date(t);return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()},n.formatTimeForMillisecond=function(t){var r=Math.floor(t/1e3%60),n=Math.floor(t/1e3/60%60);return{hour:Math.floor(t/1e3/60/60),minute:n,second:r}},n.rand=function(t){for(var r=this.clone(t),n=r.length-1;n>=0;n--){var e=Math.floor(Math.random()*(n+1)),o=r[e];r[e]=r[n],r[n]=o}return r},n.getOffsetMimutes=function(t,r){var n=r-t;return Math.floor(n%36e5/6e4)},n.formatNumToFixed=function(t,r){return void 0===r&&(r=0),Number(t.toFixed(r))},n.dayRemainingTime=function(){var t="",r="",n=(new Date).getTime(),e=new Date((new Date).toLocaleDateString()).getTime()+864e5-n,o=Math.floor(e/1e3%60);r=o>=10?o.toString():"0"+o;var a=Math.floor(e/1e3/60%60);t=a>=10?a.toString():"0"+a;var i=Math.floor(e/1e3/60/60);return[i>=10?i.toString():"0"+i,t,r]},n.lerp=function(t,r,n){void 0===n&&(n=.25);var e=r;return t>r?e=r+(t-r)*n:t<r&&(e=r-(r-t)*n),e},n.base64ToArrayBuffer=function(t){t.split(",");for(var r=atob(t),n=r.length,e=new Uint8Array(n),o=0;o<n;o++)e[o]=r.charCodeAt(o);return e.buffer},n.uint8arrayToBase64=function(t){for(var r,n=0,e=t.length,o="";n<e;)r=t.subarray(n,Math.min(n+32768,e)),o+=String.fromCharCode.apply(null,r),n+=32768;return btoa(o)},n.base64ToUint8Array=function(t){for(var r=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(r),e=new Uint8Array(n.length),o=0;o<n.length;++o)e[o]=n.charCodeAt(o);return e},n.arrayBufferToBase64=function(t){for(var r="",n=new Uint8Array(t),e=n.byteLength,o=0;o<e;o++)r+=String.fromCharCode(n[o]);return window.btoa(r)},n.encrypt=function(t){var r=this._base64encode(t),n=6;if(r.length%2==0&&(n=7),r.length<n)return r;for(var e="",o=0;o<(r.length-n+1)/2;o++)e+=r[2*o+1],e+=r[2*o];return e+=r.slice(r.length-n+1)},n.decrypt=function(t){var r=6;if(t.length%2==0&&(r=7),t.length<r)return this._base64Decode(t);for(var n="",e=0;e<t.length-r;e+=2)n+=t[e+1],n+=t[e];return n+=t.slice(t.length-r+1),n=this._base64Decode(n)},n._base64encode=function(t){var r,n,e,o,a,i,u,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(t=this._utf8Encode(t);c<t.length;)o=(r=t.charCodeAt(c++))>>2,a=(3&r)<<4|(n=t.charCodeAt(c++))>>4,i=(15&n)<<2|(e=t.charCodeAt(c++))>>6,u=63&e,isNaN(n)?i=u=64:isNaN(e)&&(u=64),h=h+f.charAt(o)+f.charAt(a)+f.charAt(i)+f.charAt(u);return h},n._utf8Encode=function(t){t=t.replace(/\r\n/g,"\n");for(var r="",n=0;n<t.length;n++){var e=t.charCodeAt(n);e<128?r+=String.fromCharCode(e):e>127&&e<2048?(r+=String.fromCharCode(e>>6|192),r+=String.fromCharCode(63&e|128)):(r+=String.fromCharCode(e>>12|224),r+=String.fromCharCode(e>>6&63|128),r+=String.fromCharCode(63&e|128))}return r},n._utf8Decode=function(t){for(var r="",n=0,e=0,o=0,a=0;n<t.length;)(e=t.charCodeAt(n))<128?(r+=String.fromCharCode(e),n++):e>191&&e<224?(o=t.charCodeAt(n+1),r+=String.fromCharCode((31&e)<<6|63&o),n+=2):(o=t.charCodeAt(n+1),a=t.charCodeAt(n+2),r+=String.fromCharCode((15&e)<<12|(63&o)<<6|63&a),n+=3);return r},n._base64Decode=function(t){var r,n,e,o,a,i,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)r=u.indexOf(t.charAt(h++))<<2|(o=u.indexOf(t.charAt(h++)))>>4,n=(15&o)<<4|(a=u.indexOf(t.charAt(h++)))>>2,e=(3&a)<<6|(i=u.indexOf(t.charAt(h++))),f+=String.fromCharCode(r),64!=a&&(f+=String.fromCharCode(n)),64!=i&&(f+=String.fromCharCode(e));return f=this._utf8Decode(f)},n.checkTwoPosEulRad=function(t,r,n,e){return Math.atan2(t-n,r-e)},n.getTwoPosXZLength=function(t,r,n,e){var o=t-n,a=r-e;return Math.sqrt(o*o+a*a)},n.setStringToVec3=function(t){var r=t.split(",");return new e(Number(r[0]),Number(r[1]),Number(r[2]))},n.setStringToQuate=function(t){var r=t.split(",");return new o(Number(r[0]),Number(r[1]),Number(r[2]),Number(r[3]))},n.getRandomRange=function(t,r){return r?(Math.random()>.5?1:-1)*Math.random()*t:Math.random()*t},n.getDirectionOfDistanceX=function(t,r){return t*Math.sin(r)},n.getDirectionOfDistanceZ=function(t,r){return t*Math.cos(r)},n.angle_to_radian=function(t){return Math.PI/180*t},n.radian_to_angle=function(t){return 180/Math.PI*t},n.angle_to_vector=function(t){var r=this.angle_to_radian(t),n=Math.cos(r),e=Math.sin(r);return new a(n,e).normalize()},n.vector_to_angle=function(t){if(0==t.x&&0==t.y)return null;var r=i(t.x,t.y).normalize().signAngle(new a(1,0));return-this.radian_to_angle(r)},n.timeToString=function(t){var r=Math.floor(t/86400)<10?"0"+Math.floor(t/86400):Math.floor(t/86400),n=Math.floor(t%86400/3600)<10?"0"+Math.floor(t%86400/3600):Math.floor(t%86400/3600),e=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),o=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60);return"00"!=r?r+"day "+n+"h "+e+"m":"00"!=n?n+":"+e+":"+o:e+":"+o},n.timeToStrings=function(t){return(Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600))+":"+(Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60))+":"+(Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60))},n.getTimeToString=function(t){var r=Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),e=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60);return"00"!=r?r+"h"+n+"m":"00"!=n?n+"m"+e+"s":e+"s"},n.getTodayRemainingtime=function(){var t=(new Date).getTime(),r=(new Date((new Date).toLocaleDateString()).getTime()-t)/1e3/3600/24,n=24*(r-Math.floor(r)),e=Math.floor(n),o=60*(n-e),a=Math.floor(o),i=60*(o-a),u=Math.floor(i);return e>0?(e=e<10?"0"+e:e)+":"+(a=a<10?"0"+a:a)+":"+(u=u<10?"0"+u:u)+":":(a=a<10?"0"+a:a)+":"+(u=u<10?"0"+u:u)+":"},n.getMonthDay=function(){var t=new Date,r=t.getFullYear(),n=t.getMonth()+1;return new Date(r,n,0).getDate()},n.getMonth=function(){return(new Date).getMonth()+1},n.stringToColor=function(t){var r=this.hex2int(t[0],16)+this.hex2int(t[1],1),n=this.hex2int(t[2],16)+this.hex2int(t[3],1),e=this.hex2int(t[4],16)+this.hex2int(t[5],1);return new u(r,n,e,255)},n.hex2int=function(t,r){var n=t.charCodeAt(0);return 48<=n&&n<58?n-=48:n=(223&n)-65+10,n*r},n.getDateDetail=function(t){return new Date(1e3*t).toLocaleString()},n.getCircleRandPoint=function(t,r){var n=r.x+2*(Math.random()-.5)*t,e=r.y+2*(Math.random()-.5)*t;return new a(n,e)},n.getCirclePoints=function(t,r,n,e,o){void 0===e&&(e=60),void 0===o&&(o=1);for(var i=[],u=o*(Math.PI/180)*Math.round(360/n),f=0;f<n;f++){var h=r.x+t*Math.sin(u*f),c=r.y+t*Math.cos(u*f);i.unshift(new a(h+Math.random()*e,c+Math.random()*e))}return i},n.getCircleRandomPoints=function(t,r,n,o){void 0===o&&(o=60);for(var a=[],i=Math.PI/180*Math.round(360/n),u=Math.random()*Math.PI,f=0;f<n;f++){var h=r.x+t*Math.sin(i*f+u),c=r.y+t*Math.cos(i*f+u);a.unshift(new e(h+Math.random()*o,c+Math.random()*o,0))}return a},n.getCirclePos=function(t,r,n){var o=Math.PI/180*n,a=r.y+t*Math.cos(o),i=r.x+t*Math.sin(o);return new e(a,i,0)},n.getUpDownRandomPoints=function(t,r,n,o){void 0===o&&(o=300);for(var a=[],i=0;i<n;i++){var u=Math.floor(100*Math.random())<=50?1:-1,f=2*(Math.random()-.5)*o,h=r.y+(t+60*Math.random())*u;a.unshift(new e(f,h,0))}return a},n.getLeftRightRectRandomPoints1=function(t,r,n,o,i,u){void 0===u&&(u=20);var h=[];t=o>i?i/2-u:o/2-u,t=o/2-u;for(var c=Math.PI/180*Math.round(360/n),l=Math.random()*Math.PI,g=new f(-o/2,-i/2,o,i),s=0,M=0;M<n;M++){var d=r.x+t*Math.sin(c*M+l),m=r.y+t*Math.cos(c*M+l),v=new a(d+Math.random()*u,m+Math.random()*u);if(g.contains(v))h.unshift(new e(v.x,v.y,0));else if(h.length){s=Math.floor(Math.random()*h.length);var y=this.clone(h[s]),w=new e(y.x+2*(Math.random()-.5)*20,y.y+2*(Math.random()-.5)*20,0);h.unshift(w)}else{t=i/2-u;var x=this.getCircleRandomPoints(t,new e(0,0,0),10,20);s=Math.floor(Math.random()*x.length),h.unshift(x[s])}}return h},n.uuid=function(){for(var t=[],r="0123456789abcdef",n=0;n<36;n++)t[n]=r.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=r.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var e=t.join("");return e},n.getUuid=function(t){return Number(Math.random().toString().substr(2,t)+Date.now()).toString(36)},n.getMonthDays=function(t,r){return new Date(t,r,0).getDate()},n.getMonthDayMilliseconds=function(t,r){return new Date(t,r,1).getTime()},n.getDayHour=function(t){var r=new Date(t),n=r.getDate()<10?"0"+r.getDate():r.getDate(),e=r.getHours()<10?"0"+r.getHours():r.getHours();r.getMinutes(),r.getMinutes();return n+"d"+e+"h"},n.getWinSize=function(){return h.windowSize},n.getBezierPoint=function(t,r,n,e,o){var a=t.x*(1-o)*(1-o)*(1-o)+3*r.x*o*(1-o)*(1-o)+3*n.x*o*o*(1-o)+e.x*o*o*o,u=t.y*(1-o)*(1-o)*(1-o)+3*r.y*o*(1-o)*(1-o)+3*n.y*o*o*(1-o)+e.y*o*o*o;return i(a,u)},n.bezierTo=function(t,r,n,e,o,a){a=a||Object.create(null);return a.onUpdate=function(r,a){var i,u,f,h,l,g;t.position=(f=e,h=o,l=(1-(i=a))*(1-i)*(u=n).x+2*i*(1-i)*f.x+i*i*h.x,g=(1-i)*(1-i)*u.y+2*i*(1-i)*f.y+i*i*h.y,c(l,g,0))},l(t).to(r,{},a)},n.playTargetTween=function(t,r,n){return new Promise((function(n,e){var o=t.position,i=t.eulerAngles,u=l(o);new a;u.parallel(l().to(r,{x:-t.position.x},{progress:function(t,r,n,e){return d(t,100,200,r,e)},easing:"smooth",onUpdate:function(){t.setPosition(o)}}),l().to(r,{y:0},{progress:function(t,r,n,e){return d(t,100,200,r,e)},easing:"smooth",onUpdate:function(){t.setPosition(o)}})).start(),l(i).to(r,{z:360},{onUpdate:function(){t.eulerAngles=i}}).call((function(){n(1)})).start()}))},n.targetBezier=function(t,r,n,e,o,u,f,h){return new Promise((function(c,s){var M=new a(r.x,r.y);l({t:0}).to(e,{t:1},{onUpdate:function(e,c){var l=i(0,0),s=i(o,u),d=i(f,h),m=i(1,1),v=l.x*(1-c)*(1-c)*(1-c)+3*s.x*c*(1-c)*(1-c)+3*d.x*c*c*(1-c)+m.x*c*c*c,y=l.y*(1-c)*(1-c)*(1-c)+3*s.y*c*(1-c)*(1-c)+3*d.y*c*c*(1-c)+m.y*c*c*c,w=(n.x-r.x)*v+r.x,x=(n.y-r.y)*y+r.y,D=new a(w,x);t.setPosition(w,x);var p=new a;a.subtract(p,D,M);var C=p.signAngle(i(0,1)),b=g.radiansToDegrees(C);t.angle=-b,M=D.clone()}}).call((function(){c(1)})).start()}))},n.targetScaleBezier=function(t,r,n,e,o,a,u,f,h,c){return new Promise((function(g,s){var M=l(t).to(o,{t:1},{onUpdate:function(t,o){var a=i(0,0),l=i(u,f),g=i(h,c),s=i(1,1),M=a.x*(1-o)*(1-o)*(1-o)+3*l.x*o*(1-o)*(1-o)+3*g.x*o*o*(1-o)+s.x*o*o*o,d=a.y*(1-o)*(1-o)*(1-o)+3*l.y*o*(1-o)*(1-o)+3*g.y*o*o*(1-o)+s.y*o*o*o,m=(e.x-n.x)*M+n.x,v=(e.y-n.y)*d+n.y;r.setPosition(m,v)}}),d=l(t).to(o,{scale:a},{onUpdate:function(t,n){r.setScale(t.scale,t.scale,t.scale)}});l(t).parallel(M,d).call((function(){g(1)})).start()}))},n.PFromC=function(t){for(var r=0,n=0,e=0,o=Math.ceil(1/t),a=1;a<=o;++a)n+=r=Math.min(1,a*t)*(1-n),e+=a*r;return 1/e},n.CFromP=function(t){for(var r=t,n=0,e=t,o=1;;){e=(r+n)/2;var a=this.PFromC(e);if(Math.abs(a-o)<=5e-5)break;a>t?r=e:n=e,o=a}return e},n.segmentsIntr=function(t,r,n,e){var o=(t.x-n.x)*(r.y-n.y)-(t.y-n.y)*(r.x-n.x),a=(t.x-e.x)*(r.y-e.y)-(t.y-e.y)*(r.x-e.x);if(o*a>=0)return!1;var u=(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x);if(u*(u+o-a)>=0)return!1;var f=u/(a-o),h=f*(r.x-t.x),c=f*(r.y-t.y);return i(t.x+h,t.y+c)},n.bezier_length=function(t,r,n,e,o){for(var i=t,u=0,f=.05,h=0;h<20;h++){var c=t.x*(1-f)*(1-f)*(1-f)+3*r.x*f*(1-f)*(1-f)+3*n.x*f*f*(1-f)+e.x*f*f*f,l=t.y*(1-f)*(1-f)*(1-f)+3*r.y*f*(1-f)*(1-f)+3*n.y*f*f*(1-f)+e.y*f*f*f,g=new a(c,l),s=g.subtract(i);i=g,u+=s.length(),f+=.05}return u},n.weightRandomIdx=function(t){if(t.length<=1)return 0;for(var r=0,n=0;n<t.length;n++)r+=t[n];for(var e=Math.random()*r,o=0,a=0,i=0;i<t.length;i++){if(a=o+t[i],o<e&&e<=a)return i;o=a}return 0},n.numMoveZoro=function(t){return t.indexOf(".")<0||"."==(t=t.replace(/0+?$/g,""))[t.length-1]&&(t=t.replace(/[.$]/,"")),t},n.getRectRandPos=function(t){var r=new e,n=Math.random()*t.width,o=Math.random()*t.height;return r.x=t.x+n,r.y=t.y+o,r},n.adapterScale=function(){var t=s.getDesignResolutionSize(),r=s.getVisibleSize();return r.width>t.width?1:r.width/t.width},n.numberAnimation=function(t,r,n){void 0===n&&(n=.2);var e={num:Number(t.string)};l(e).to(n,{num:r},{progress:function(r,n,e,o){return t.string=""+Math.ceil(r+(n-r)*o),r+(n-r)*o}}).start()},n}(M));n._RF.pop()}}}));

System.register("chunks:///_virtual/WalletData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Api.ts","./HttpService.ts","./WalletManager.ts"],(function(t){var n,e,a,i,c;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){a=t.Api},function(t){i=t.HttpService},function(t){c=t.WalletManager}],execute:function(){e._RF.push({},"c226fcIbs9Ip7VfhZXWDvLJ","WalletData",void 0),t("WalletData",function(){function t(){}var e=t.prototype;return e.withdraw=function(t,n){var e=this;c.instance.isConnected()?this._withdraw(t,c.instance.getAddress(),n):c.instance.connectWallet((function(){e._withdraw(t,c.instance.getAddress(),n)}))},e._withdraw=function(t,n,e){i.instance.post(a.WALLET_WITHDRAW,{token:t,address:n,amount:e}).then((function(t){var n=t.data.fee;c.instance.send(t.data.address,n.toString(),t.data.payload,(function(t,n){console.log(t,n)}))})).catch((function(t){}))},n(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/WalletManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./OpenPopupManager.ts","./EventListener.ts","./GameEvent.ts"],(function(n){var t,e,r,a,s,o,c,i,u,l,h,f;return{setters:[function(n){t=n.createClass,e=n.asyncToGenerator,r=n.regeneratorRuntime,a=n.extends},function(n){s=n.cclegacy},function(n){o=n.Address,c=n.toNano,i=n.TonConnectUI,u=n.GameFi},function(n){l=n.OpenPopupManager},function(n){h=n.EventListener},function(n){f=n.GameEvent}],execute:function(){s._RF.push({},"00275kKo0pP94/BPeN1nIz7","WalletManager",void 0),n("WalletManager",function(){function n(){this._gameFi=null,this.connectUI=null,this.walletInfo=null,this.balance=0}var s=n.prototype;return s.init=function(){var n=e(r().mark((function n(t){var e,s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._gameFi){n.next=2;break}return n.abrupt("return");case 2:return e=new i({manifestUrl:t.manifestUrl}),s={network:t.network,contentResolver:{},merchant:{jettonAddress:t.usdtAddress,tonAddress:t.walletAddress}},n.next=6,u.create(a({},s,{connector:e}));case 6:this._gameFi=n.sent,this.connectUI=this._gameFi.walletConnector,this.walletInfo=this.connectUI.wallet,this.connectUI.onModalStateChange((function(n){h.emit(f.UPDATE_WALLET_INFO)}));case 10:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),s.isTonConnectSdkError=function(n){var t,e="TON_CONNECT_SDK";return"string"==typeof n?n.includes(e):null==(t=n.message)?void 0:t.includes(e)},s.isConnected=function(){return this.connectUI?this.connectUI.connected:(console.error("ton ui not inited!"),!1)},s.getAddress=function(){if(this.isConnected()){var n=this.connectUI.account.address;return o.parseRaw(n).toString({testOnly:!0,bounceable:!1})}return""},s.connectWallet=function(n){var t=this;this.isConnected()?this.connectUI.disconnect():(this.connectUI.onStatusChange((function(e){t.walletInfo=e,h.emit(f.UPDATE_WALLET_INFO),n()})),this.connectUI.openModal())},s.disconnect=function(){var n=e(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.connectUI.disconnect(),h.emit(f.UPDATE_WALLET_INFO);case 2:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),s.onTransferTon=function(n){if(this.connectUI.connected){var t={to:n.address,amount:c(.01)};this._gameFi.transferTon(t)}},s.onBuyWithTon=function(n){var t={amount:c(n)};this._gameFi.buyWithTon(t)},s.getTokenBalance=function(){var n=e(r().mark((function n(t){var e,a,s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._gameFi){n.next=2;break}return n.abrupt("return");case 2:return t&&t(this.balance),n.prev=3,e=this._gameFi.openJetton(this._gameFi.merchantJettonAddress),n.next=7,e.getWallet(o.parse(this._gameFi.wallet.account.address));case 7:return a=n.sent,n.next=10,a.getData();case 10:return s=n.sent,this.balance=Number(s.balance),t&&t(this.balance),n.abrupt("return",s.balance);case 16:return n.prev=16,n.t0=n.catch(3),console.error("failed to load balance",n.t0),n.abrupt("return",0);case 20:case"end":return n.stop()}}),n,this,[[3,16]])})));return function(t){return n.apply(this,arguments)}}(),s.send=function(){var n=e(r().mark((function n(t,e,a,s){var o,c,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={validUntil:Math.floor(Date.now()/1e3)+60,messages:[{address:t,amount:e,payload:a}]},n.prev=1,n.next=4,this.connectUI.sendTransaction(o);case 4:c=n.sent,s&&s(0,c),n.next=15;break;case 8:n.prev=8,n.t0=n.catch(1),console.log("sendTransaction error",n.t0),s&&s(1),i="",i=n.t0?"You rejected the transaction. Please confirm it to send to the blockchain":n.t0.toString(),l.instance.showToast(i);case 15:case"end":return n.stop()}}),n,this,[[1,8]])})));return function(t,e,r,a){return n.apply(this,arguments)}}(),s.buyWithToken=function(){var n=e(r().mark((function n(t,e,a){var s,o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getTokenBalance();case 2:if(s=n.sent,!(Number(s)<Number(t))){n.next=6;break}return l.instance.showToast("balance.insufficient"),n.abrupt("return");case 6:o={to:this._gameFi.merchantAddress,amount:c(Number(t)/Math.pow(10,9)),forwardAmount:c(1/Math.pow(10,9)),forwardPayload:e},this._gameFi.transferJetton(o).then((function(){a(0)})).catch((function(n){console.log("transferJetton",n);var t=n.message;if(t.indexOf("TON_CONNECT_SDK_ERROR")){for(var e=["TonConnectUIError","TonConnectError","[TON_CONNECT_SDK_ERROR]",":"],r=0;r<e.length;r++){var a=e[r];t.indexOf(a)>=0&&(t=t.slice(t.indexOf(a)+a.length))}t.indexOf(".")>=0&&(t=t.slice(0,t.indexOf(".")+1)),t=t.replace("\n","")}l.instance.showToast(t)}));case 8:case"end":return n.stop()}}),n,this)})));return function(t,e,r){return n.apply(this,arguments)}}(),t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=null,s._RF.pop()}}}));

System.register("chunks:///_virtual/WalletPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalletManager.ts","./OpenPopupManager.ts","./Constants.ts"],(function(e){var n,t,a,o,i,r,s,l,c,u,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.Label,l=e.Component},function(e){c=e.WalletManager},function(e){u=e.OpenPopupManager},function(e){p=e.Constants}],execute:function(){var d,f,g,b,h,P,y;i._RF.push({},"c1313u8kaNIBIMt4X1M2Sw7","WalletPopup",void 0);var v=r.ccclass,M=r.property;e("WalletPopup",(d=v("WalletPopup"),f=M(s),g=M(s),d((P=n((h=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n=e.call.apply(e,[this].concat(i))||this,a(n,"address",P,o(n)),a(n,"balance",y,o(n)),n}t(n,e);var i=n.prototype;return i.show=function(){var e=this,n=c.instance.getAddress();this.address.string=n.substring(0,4)+"..."+n.substring(n.length-4),c.instance.getTokenBalance((function(n){e.balance.string=Number(Number(n)/Math.pow(10,9)).toFixed(2)}))},i.onDisconnectBtn=function(){c.instance.disconnect(),u.instance.hide(p.PopupUI.WalletPopup)},i.onCloseTouch=function(){u.instance.hide(p.PopupUI.WalletPopup)},n}(l)).prototype,"address",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=n(h.prototype,"balance",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=h))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/WarehouseData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var e,n,s,i,c,a,r;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,s=t._decorator},function(t){i=t.HttpService},function(t){c=t.Api},function(t){a=t.EventListener},function(t){r=t.GameEvent}],execute:function(){var o,u;n._RF.push({},"99866BSbSJN+LRyERv6Y6Vs","WarehouseData",void 0);var p=s.ccclass;s.property,t("WarehouseData",p("WarehouseData")(((u=function(){function t(){this.items=[]}return t.prototype.getItemsFromNetwork=function(){var t=this;i.instance.post(c.ITEM_LIST,{}).then((function(e){0==e.code&&(t.items=e.data.items,a.emit(r.UPDATE_WAREHOUSE_DATA))}))},e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=null,o=u))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/WarehousePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./WarehouseData.ts","./GameEvent.ts","./EventListener.ts","./RewardItem.ts"],(function(e){var n,t,o,i,r,a,u,c,l,s,p,h,f,m,d,g,v;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,u=e.Node,c=e.Prefab,l=e.Label,s=e.instantiate,p=e.Component},function(e){h=e.OpenPopupManager},function(e){f=e.Constants},function(e){m=e.WarehouseData},function(e){d=e.GameEvent},function(e){g=e.EventListener},function(e){v=e.RewardItem}],execute:function(){var b,w,E,I,P,y,A,C,D,W,_,z,R;r._RF.push({},"15f90a1uElPg50YMdxawpfA","WarehousePopup",void 0);var L=a.ccclass,M=a.property;e("WarehousePopup",(b=L("WarehousePopup"),w=M(u),E=M(c),I=M(l),P=M(u),y=M(u),b((D=n((C=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,o(n,"content",D,i(n)),o(n,"propItem",W,i(n)),o(n,"dropdownValue",_,i(n)),o(n,"menu",z,i(n)),o(n,"menuItem",R,i(n)),n.menuValue=["All"],n}t(n,e);var r=n.prototype;return r.show=function(){var e=this;m.instance.getItemsFromNetwork(),0==this.menu.children.length&&this.menuValue.forEach((function(n,t){var o=s(e.menuItem);o.getComponent(l).string=n,o.parent=e.menu,o.on("click",(function(){e.dropdownValue.string=n,e.menu.active=!1}))}))},r.setItemContent=function(){var e=this,n=m.instance.items;n.forEach((function(n,t){if(n.count>0)if(e.content.children[t])e.content.children[t].getComponent(v).init(n),e.content.children[t].active=!0;else{var o=s(e.propItem);o.getComponent(v).init(n),o.parent=e.content}}));for(var t=n.length;t<this.content.children.length;t++)this.content.children[t].active=!1},r.onShowMenu=function(){this.menu.active=!this.menu.active},r.onCloseBtn=function(){h.instance.hide(f.PopupUI.WarehousePopup)},r.onEnable=function(){g.on(d.UPDATE_WAREHOUSE_DATA,this.setItemContent,this)},r.onDisable=function(){g.off(d.UPDATE_WAREHOUSE_DATA,this.setItemContent,this)},n}(p)).prototype,"content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=n(C.prototype,"propItem",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=n(C.prototype,"dropdownValue",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=n(C.prototype,"menu",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=n(C.prototype,"menuItem",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=C))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponAdvancedItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./SkillData.ts","./LanguageManager.ts"],(function(e){var i,t,n,l,r,a,s,o,c,u,f,p,g,b,h,k,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Sprite,o=e.Label,c=e.RichText,u=e.Prefab,f=e.Node,p=e.Component},function(e){g=e.Constants},function(e){b=e.ResourcesUtil},function(e){h=e.SpriteEx},function(e){k=e.SkillData},function(e){d=e.LanguageManager}],execute:function(){var m,y,_,v,I,C,L,z,S,w,A,F,P,x,D,R,B,N,W;r._RF.push({},"84a5eCsruBIzZd80/Ki8p/o","WeaponAdvancedItem",void 0);var M=a.ccclass,E=a.property;e("WeaponAdvancedItem",(m=M("WeaponAdvancedItem"),y=E(s),_=E(o),v=E(s),I=E(h),C=E(s),L=E(c),z=E(u),S=E(f),m((F=i((A=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,n(i,"icon",F,l(i)),n(i,"skillName",P,l(i)),n(i,"typeIcon",x,l(i)),n(i,"skillFrame",D,l(i)),n(i,"skillIon",R,l(i)),n(i,"desc",B,l(i)),n(i,"skillGetPrefab",N,l(i)),n(i,"skillList",W,l(i)),i._call1=null,i._call2=null,i._skillCfg=null,i}t(i,e);var r=i.prototype;return r.init=function(e,i,t){this._call1=e,this._call2=i;var n=k.instance.getSkillCfgById(t);this._skillCfg=n,this.setAdvanceInfo()},r.setAdvanceInfo=function(){var e=g.weaponIconPath+this._skillCfg.res+"/spriteFrame";b.setSpriteFrame(e,this.icon),this.skillFrame.index=this._skillCfg.quality-1,this.desc.string=d.instance.getLang(this._skillCfg.desc),this.skillName.string=d.instance.getLang(this._skillCfg.name),this.setSkillList()},r.setSkillList=function(){this.skillList.removeAllChildren()},r.onSelectBtn=function(){this._call1&&this._call1(this._skillCfg),this._call2&&this._call2()},i}(p)).prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(A.prototype,"skillName",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(A.prototype,"typeIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(A.prototype,"skillFrame",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(A.prototype,"skillIon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(A.prototype,"desc",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(A.prototype,"skillGetPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(A.prototype,"skillList",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=A))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponBgItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./EventListener.ts","./ResourcesUtil.ts","./BaseComponent.ts","./WeaponData.ts","./GridData.ts","./Constants.ts","./OpenPopupManager.ts"],(function(t){var e,n,i,o,s,r,a,h,c,u,p,d,_,l,g,f,C,A,T,E,S,b,m,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,a=t._decorator,h=t.Sprite,c=t.UITransform,u=t.Layout,p=t.instantiate,d=t.UIOpacity,_=t.Size,l=t.Vec3,g=t.v2},function(t){f=t.GameEvent},function(t){C=t.EventListener},function(t){A=t.ResourcesUtil},function(t){T=t.default},function(t){E=t.WeaponData},function(t){S=t.GridData,b=t.GridObj},function(t){m=t.Constants},function(t){v=t.OpenPopupManager}],execute:function(){var y,G,N,O,D,w,M;r._RF.push({},"f96cd2ocN1Av7siZ2Mlbz07","WeaponBgItem",void 0);var P=a.ccclass,R=a.property,L=(t("WeaponBgItem",(y=P("WeaponItem"),G=R(h),N=R(h),y((w=e((D=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"icon",w,o(e)),i(e,"bubble",M,o(e)),e._touchStatus=0,e._weaponKey="",e._gridCfg=null,e._point=null,e._pointGridObj=[],e._placeStatus=!0,e._isTouch=!1,e._needAd=!1,e}n(e,t);var r=e.prototype;return r.init=function(t,e,n,i){this._pointGridObj=[],this._placeStatus=n,this._weaponKey=e,this._gridCfg=t,this._point=this.node.getChildByName("point"),this.initWeaponSize(),this.setPointPosArr(),this.setGridIcon(),this.setNodeAngel(),this._needAd=i||!1,this._needAd&&this.setGridAdBubble()},r.initWeaponSize=function(){var t=this._gridCfg.gridType.split("_"),e=Number(t[1]),n=Number(t[0]),i=S.instance.getGridSizeByRowCol(e,n),o=S.instance.iconScale;this.node.getComponent(c).setContentSize(i),this.point.setPosition(-i.width/2,i.height/2),this.icon.node.setScale(o,o,o)},r.setPointPosArr=function(){this._pointGridObj=[];for(var t=this._gridCfg.points,e=0;e<t.length;e++)for(var n=t[e],i=0;i<n.length;i++){if(n[i]){var o=new b;o.row=e,o.col=i,this._pointGridObj.push(o)}}},r.setGridIcon=function(){var t=this,e=m.weaponIconPath+this._gridCfg.res+"/spriteFrame";A.getSpriteFrame(e).then((function(e){t.icon.spriteFrame=e;var n=t.icon.node.parent,i=t._gridCfg.gridType.split("_"),o=S.instance.getGridSizeByRowCol(Number(i[1]),Number(i[0])),s=t._gridCfg.points;n.getComponent(u).spacingX=S.instance.space,n.getComponent(u).spacingY=S.instance.space,n.getComponent(c).width=o.width,n.getComponent(u).updateLayout(!0);for(var r=0;r<s.length;r++)for(var a=s[r],h=0;h<a.length;h++){var _=a[h],l=p(t.icon.node);l.active=!0,l.parent=n,l.getComponent(d).opacity=_?255:0}}))},r.setNodeAngel=function(){var t=this._placeStatus?0:10;this.node.angle=t},r.setGridAdBubble=function(){for(var t=this,e=[],n=0;n<this._gridCfg.points.length;n++)e.push(this._gridCfg.points[n].join(""));var i=m.gridPath+"bubble_"+e.join("_")+"/spriteFrame";A.geSpriteFrame(i).then((function(e){t.bubble.spriteFrame=e;var n=t.node.getComponent(c).width,i=t.node.getComponent(c).height,o=new _;o.width=1.2*n,o.height=i,t.node.getComponent(c).setContentSize(o),t.point.setPosition(-o.width/2,o.height/2)}))},r.removeGridAdBubble=function(){this.bubble.destroy(),this.initWeaponSize(),this.setNodeAngel(),this._needAd=!1},r.onGridRemove=function(t){this.weaponKey==t&&(C.emit(f.ADD_REMOVE_WEAPON_LIST,this.node),this.placeStatus=!1,this.setNodeAngel())},r.onPlaceFinish=function(){this._touchStatus==L.MOVE&&C.emit(f.PLACE_GRID_END,this)},r.onTouchStart=function(t){var e=this.point.getComponent(c).convertToNodeSpaceAR(new l(t.x,t.y,0));if(S.instance.checkPointinGrid(g(e.x,e.y),this._pointGridObj)&&!E.instance.isSelect){this._isTouch=!0,E.instance.isSelect=!0,this._touchStatus=L.START,this.placeStatus=!0,this.setNodeAngel(),C.emit(f.PLACE_GRID_START,this);var n=this.node.parent.getComponent(c).convertToNodeSpaceAR(new l(t.x,t.y,0));this.node.setPosition(n.x,n.y)}},r.onTouchMove=function(t){if(this._isTouch){this._touchStatus=L.MOVE;var e=this.node.parent.getComponent(c).convertToNodeSpaceAR(new l(t.x,t.y,0));this.node.setPosition(e.x,e.y),C.emit(f.PLACE_GRID_MOVE,this)}},r.onTouchEnd=function(t){var e=this;this._isTouch&&(this._touchStatus==L.START&&this._needAd&&v.instance.showAdTipsPopup(0,this._gridCfg,(function(t){t&&e.removeGridAdBubble(),C.emit(f.PLACE_GRID_END,e)})),this._isTouch=!1,E.instance.isSelect=!1,this.onPlaceFinish(),this._touchStatus=L.END)},r.onTouchCancle=function(t){this._isTouch&&(this._isTouch=!1,E.instance.isSelect=!1,this._touchStatus=L.CANCEL,C.emit(f.ADD_REMOVE_WEAPON_LIST,this.node))},r.onEnable=function(){C.on(f.GAME_TOUCH_START,this.onTouchStart,this),C.on(f.GAME_TOUCH_MOVE,this.onTouchMove,this),C.on(f.GAME_TOUCH_END,this.onTouchEnd,this),C.on(f.GAME_TOUCH_CANCLE,this.onTouchEnd,this)},r.onDisable=function(){C.off(f.GAME_TOUCH_START,this.onTouchStart,this),C.off(f.GAME_TOUCH_MOVE,this.onTouchMove,this),C.off(f.GAME_TOUCH_END,this.onTouchEnd,this),C.off(f.GAME_TOUCH_CANCLE,this.onTouchEnd,this)},s(e,[{key:"point",get:function(){return this._point}},{key:"gridCfg",get:function(){return this._gridCfg}},{key:"weaponKey",get:function(){return this._weaponKey}},{key:"placeStatus",set:function(t){this._placeStatus=t}},{key:"needAd",get:function(){return this._needAd}}]),e}(T)).prototype,"icon",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(D.prototype,"bubble",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=D))||O)),t("TouchStatus",function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.START=1]="START",t[t.MOVE=2]="MOVE",t[t.END=3]="END",t[t.CANCEL=4]="CANCEL",t}({})));r._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponBuffItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,r,u,f,s,a,c,p,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,u=e._decorator,f=e.Sprite,s=e.ParticleSystem2D,a=e.Tween,c=e.tween,p=e.v3,l=e.Component}],execute:function(){var h,m,A,b,d,w,y,v,g;r._RF.push({},"c68dbCvAtdJV5IjAxnaga0t","WeaponBuffItem",void 0);var B=u.ccclass,I=u.property;e("WeaponBuffItem",(h=B("WeaponBuffItem"),m=I(f),A=I(s),b=I(s),h((y=t((w=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return t=e.call.apply(e,[this].concat(r))||this,n(t,"upArrowAnim",y,o(t)),n(t,"buffAnim1",v,o(t)),n(t,"buffAnim2",g,o(t)),t}i(t,e);var r=t.prototype;return r.init=function(e){var t=.75;this.upArrowAnim.node.setPosition(0,0,0),a.stopAllByTarget(this.upArrowAnim.node),c(this.upArrowAnim.node).by(t,{position:p(0,-15,0)}).by(t,{position:p(0,15,0)}).by(t,{position:p(0,15,0)}).by(t,{position:p(0,-15,0)}).union().repeatForever().start(),"arrow"==e?this.showArrow():this.showBuff()},r.showBuff=function(){var e=this;this.buffAnim1.node.active=!0,this.buffAnim2.node.active=!0,this.buffAnim1.getComponent(s).resetSystem(),this.buffAnim2.getComponent(s).resetSystem(),this.scheduleOnce((function(){e.hideBuff()}),1)},r.hideBuff=function(){this.buffAnim1.node.active=!1,this.buffAnim2.node.active=!1},r.showArrow=function(){this.upArrowAnim.node.active=!0},r.hideArrow=function(){this.upArrowAnim.node.active=!1},r.clear=function(){this.node.destroy()},t}(l)).prototype,"upArrowAnim",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(w.prototype,"buffAnim1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(w.prototype,"buffAnim2",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=w))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./WeaponModel.ts","./BagData.ts","./SkillData.ts"],(function(e){var a,t,n,i,l,p,s,o;return{setters:[function(e){a=e.createClass},function(e){t=e.cclegacy},function(e){n=e.CfgMgr},function(e){i=e.WeaponCfg,l=e.WeaponType,p=e.WeaponSkillObj},function(e){s=e.BagData},function(e){o=e.SkillData}],execute:function(){t._RF.push({},"91348VvqW5Bi6q8SBb34d+V","WeaponData",void 0),e("WeaponData",function(){function e(){this._isSelect=!1,this._weaponObjMapData=new Map,this._weaponSkillMapData=new Map}var t=e.prototype;return t.init=function(){var e=this;this._weaponObjMapData.clear(),this._weaponSkillMapData.clear();for(var a=s.instance.getCarryWeaponMap(),t=n.getCfgDataArray(new i),c=0;c<t.length;c++){var r=t[c];r.isShow||a.set(r.Id,1)}a.forEach((function(a,t){var c=n.getDataById(new i,t),r=c.skillIds.length;c.doubleLevel&&a<c.doubleLevel&&(r-=1);for(var d=s.instance.calWeaponLevelCfgByLevel(t,a),u=0;u<r;u++){var g=c.skillIds[u],h=o.instance.getSkillCfgById(g),f=u+1,y=new p;y.id=g,y.weaponId=t,y.skillId=g,y.cd=c.cd,y.desc=c.desc,y.gridType=c.gridType,y.level=f,y.maxLevel=a,y.quality=u,y.type=c.type,y.targetType=c.targetType,y.name=c.name,y.points=c.points,y.res=h.res,y.scale=h.scale,y.range=c.range,y.weight=c.weight,y.hp=Math.ceil(c.hcUp[u]*(c.hp+d.addHp)*10)/10,y.addHp=Math.ceil(c.hcUp[u]*(c.addHp+(c.type==l.ARMOR_HP?d.addBuff:0))*10)/10,y.addShield=Math.ceil(c.hcUp[u]*(c.addShield+(c.type==l.ARMOR_SHIELD?d.addBuff:0))*10)/10,c.type==l.ARMOR_HP?y.damage=y.addHp:c.type==l.ARMOR_SHIELD?y.damage=y.addShield:c.type==l.ECONOMY?y.damage=Math.ceil(c.hcUp[u]*c.damage*10)/10:y.damage=Math.ceil(c.hcUp[u]*(c.damage+d.addDamage)*10)/10;var M=t+"|"+f;e._weaponSkillMapData.set(M,y),e._weaponObjMapData.set(y.id,y)}}))},t.updateWeaponByLevel=function(e,a,t){var n=a+"|"+e,i=this._weaponSkillMapData.get(n);return i.skillId=t.Id,i.res=t.res,this._weaponSkillMapData.set(n,i),i},t.getWeaponByLevel=function(e,a){var t=a+"|"+e;return this._weaponSkillMapData.get(t)},t.checkWeaponByLevel=function(e,a){var t=a+"|"+e;return!!this._weaponSkillMapData.has(t)},t.getWeaponCfgById=function(e){return n.getDataById(new i,e)},t.getWeaponByWid=function(e){return this._weaponObjMapData.get(e)},t.getWeaponPool=function(){return Array.from(this._weaponObjMapData.values())},t.clear=function(){this._isSelect=!1},a(e,[{key:"isSelect",get:function(){return this._isSelect},set:function(e){this._isSelect=e}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./PopupManager.ts","./ResourcesUtil.ts","./SkillData.ts","./SkillUpgradeData.ts","./GameDefine.ts","./WeaponModel.ts","./BagData.ts","./SkillGetItem.ts","./WeaponData.ts","./LanguageManager.ts","./SpriteEx.ts"],(function(e){var t,n,i,a,o,l,r,s,g,p,c,u,d,h,m,f,y,C,N,k,b,v,L,B,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,r=e.Sprite,s=e.Label,g=e.Node,p=e.Prefab,c=e.UITransform,u=e.instantiate,d=e.Component},function(e){h=e.Constants},function(e){m=e.PopupManager},function(e){f=e.ResourcesUtil},function(e){y=e.SkillData},function(e){C=e.SkillUpgradeData},function(e){N=e.GameDefine},function(e){k=e.WeaponType},function(e){b=e.BagData},function(e){v=e.SkillGetItem},function(e){L=e.WeaponData},function(e){B=e.LanguageManager},function(e){P=e.SpriteEx}],execute:function(){var I,S,D,A,w,T,z,M,G,W,x,R,_,E,U,H,O,q,F,K,j,Y,Z,J,Q;o._RF.push({},"53b5dmI111O3KHnPNMMZrj5","WeaponDetailPopup",void 0);var V=l.ccclass,X=l.property;e("WeaponDetailPopup",(I=V("WeaponDetailPopup"),S=X(r),D=X(s),A=X(s),w=X(s),T=X(s),z=X(g),M=X(g),G=X(g),W=X(g),x=X(p),R=X(g),I((U=t((E=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"icon",U,a(t)),i(t,"iconName",H,a(t)),i(t,"level",O,a(t)),i(t,"desc",q,a(t)),i(t,"equipAtkType",F,a(t)),i(t,"targetNode",K,a(t)),i(t,"cdNode",j,a(t)),i(t,"atkNode",Y,a(t)),i(t,"rangeNode",Z,a(t)),i(t,"skillGetPrefab",J,a(t)),i(t,"skillList",Q,a(t)),t}n(t,e);var o=t.prototype;return o.show=function(e){N.gameTouch=!1,this.setWeaponInfo(e)},o.setWeaponInfo=function(e){var t=this,n=(e.skillId,h.weaponIconPath+e.res+"/spriteFrame");this.iconName.string=B.instance.getLang(e.name),this.level.string="Lv."+e.level,this.desc.string=B.instance.getLang(e.desc),this.equipAtkType.string=b.instance.getEquipAtkType(e.type),f.geSpriteFrame(n).then((function(e){t.icon.spriteFrame=e;var n=t.icon.getComponent(c).contentSize,i=Math.min(1e3,Math.min(150/n.width,150/n.height));t.icon.node.setScale(i,i)})),this.setAttInfo(e)},o.setAttInfo=function(e){this.targetNode.getChildByName("value").getComponent(s).string=""+b.instance.getEquipAtkTargetType(e.targetType),this.cdNode.getChildByName("value").getComponent(s).string=e.cd+"s",this.rangeNode.active=!0,e.type==k.ATTACK_PHYSICAL||e.type==k.ATTACK_MAGIC?(this.atkNode.getChildByName("icon").getComponent(P).index=0,this.rangeNode.getChildByName("icon").getComponent(P).index=0,this.atkNode.getChildByName("desc").getComponent(s).string=B.instance.getLang("game.atk"),this.rangeNode.getChildByName("desc").getComponent(s).string=B.instance.getLang("game.range"),this.atkNode.getChildByPath("layout/value").getComponent(s).string=""+e.damage,this.rangeNode.getChildByPath("layout/value").getComponent(s).string=""+e.range):e.type==k.ARMOR_HP?(this.atkNode.getChildByName("icon").getComponent(P).index=1,this.rangeNode.getChildByName("icon").getComponent(P).index=1,this.atkNode.getChildByName("desc").getComponent(s).string=B.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(s).string=B.instance.getLang("game.healing"),this.atkNode.getChildByPath("layout/value").getComponent(s).string=""+e.hp,this.rangeNode.getChildByPath("layout/value").getComponent(s).string=""+e.addHp):e.type==k.ARMOR_SHIELD?(this.atkNode.getChildByName("icon").getComponent(P).index=1,this.rangeNode.getChildByName("icon").getComponent(P).index=2,this.atkNode.getChildByName("desc").getComponent(s).string=B.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(s).string=B.instance.getLang("game.armor"),this.atkNode.getChildByPath("layout/value").getComponent(s).string=""+e.hp,this.rangeNode.getChildByPath("layout/value").getComponent(s).string=""+e.addShield):e.type==k.ECONOMY&&(this.atkNode.getChildByName("icon").getComponent(P).index=2,this.atkNode.getChildByName("desc").getComponent(s).string=B.instance.getLang("game.money"),this.rangeNode.active=!1,this.atkNode.getChildByPath("layout/value").getComponent(s).string=""+e.damage),this.skillGetList(e.weaponId,e.maxLevel)},o.skillGetList=function(e,t){var n=b.instance.getUnlockSkillsEntry(e,t),i=L.instance.getWeaponCfgById(e),a=!(0==i.doubleLevel||t<i.doubleLevel);if(this.skillList.removeAllChildren(),a){for(var o=L.instance.getWeaponByLevel(5,e),l=y.instance.getSkillCfgById(o.skillId),r=0==l.doubleSkills.length,s=0;s<4;s++){var g=n[s],p=u(this.skillGetPrefab);p.parent=this.skillList;var c=C.instance.hasLearnSkill(g.Id);p.getComponent(v).init(g,c)}if(r)for(var d=5;d<n.length;d++){var h=n[d];if(h.aimSkills.indexOf(l.Id)>=0){var m=u(this.skillGetPrefab);m.parent=this.skillList;var f=C.instance.hasLearnSkill(h.Id);m.getComponent(v).init(h,f)}}else{var N=n[4],k=u(this.skillGetPrefab);k.parent=this.skillList;var B=C.instance.hasLearnSkill(N.Id);k.getComponent(v).init(N,B)}}else for(var P=0;P<n.length;P++){var I=n[P],S=u(this.skillGetPrefab);S.parent=this.skillList;var D=C.instance.hasLearnSkill(I.Id);S.getComponent(v).init(I,D)}},o.onCloseBtn=function(){N.gameTouch=!0,m.instance.hide(h.PopupUI.WeaponDetailPopup)},t}(d)).prototype,"icon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(E.prototype,"iconName",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(E.prototype,"level",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(E.prototype,"desc",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(E.prototype,"equipAtkType",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(E.prototype,"targetNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(E.prototype,"cdNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(E.prototype,"atkNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(E.prototype,"rangeNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(E.prototype,"skillGetPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(E.prototype,"skillList",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=E))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponDoubleSkillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts"],(function(e){var n,t,o,p,u,r,l;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,p=e.Component},function(e){u=e.Constants},function(e){r=e.OpenPopupManager,l=e.LayerType}],execute:function(){var i;t._RF.push({},"c4bf6/Sf5xHW6HSzw4xt5XA","WeaponDoubleSkillItem",void 0);var s=o.ccclass;o.property,e("WeaponSkillItem",s("WeaponDoubleSkillItem")(i=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t.prototype.onClicked=function(e,n){var t=n.split(","),o=Number(t[0]),p=Number(t[1]);r.instance.show(u.PopupUI.WeaponStylePopup,null,l.TOP,!1,o,p)},t}(p))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./EventListener.ts","./ResourcesUtil.ts","./BaseComponent.ts","./WeaponData.ts","./WeaponMergeItem.ts","./GridData.ts","./Constants.ts","./AudioManager.ts","./OpenPopupManager.ts","./WeaponBuffItem.ts","./SkillData.ts","./SkillUpgradeData.ts","./HeroData.ts","./GuideData.ts"],(function(t){var e,n,i,o,s,a,h,r,p,u,c,f,_,l,d,E,S,b,A,O,w,P,T,g,I,m,v,W,U,D,N,y,C,R,j,G,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){a=t.cclegacy,h=t._decorator,r=t.Label,p=t.Sprite,u=t.ProgressBar,c=t.UITransform,f=t.v3,_=t.Size,l=t.Color,d=t.Tween,E=t.tween,S=t.instantiate,b=t.Vec3,A=t.v2},function(t){O=t.GameEvent},function(t){w=t.EventListener},function(t){P=t.ResourcesUtil},function(t){T=t.default},function(t){g=t.WeaponData},function(t){I=t.WeaponMergeItem},function(t){m=t.GridData,v=t.GridObj},function(t){W=t.Constants},function(t){U=t.AudioManager},function(t){D=t.OpenPopupManager,N=t.LayerType},function(t){y=t.WeaponBuffItem},function(t){C=t.SkillData},function(t){R=t.SkillUpgradeData},function(t){j=t.HeroData},function(t){G=t.GuideData,M=t.GuideStep}],execute:function(){var H,B,L,k,F,z,K,V,x,Y,X,Z,q;a._RF.push({},"25dfdn2NRZPKLZpIOwY85wi","WeaponItem",void 0);var J=h.ccclass,Q=h.property,$=(t("WeaponItem",(H=J("WeaponItem"),B=Q(r),L=Q(p),k=Q(p),F=Q(p),z=Q(u),H((x=e((V=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,i(e,"level",x,o(e)),i(e,"icon",Y,o(e)),i(e,"bar",X,o(e)),i(e,"bubble",Z,o(e)),i(e,"progressBar",q,o(e)),e._touchStatus=0,e._weaponKey="",e._weaponObj=null,e._point=null,e._pointGridObj=[],e._isShake=!1,e._isUp=!1,e._buffItem=null,e._placeStatus=!0,e._isTouch=!1,e._needAd=!1,e}n(e,t);var a=e.prototype;return a.init=function(t,e,n,i){this._pointGridObj=[],this._placeStatus=n,this._weaponKey=e,this._weaponObj=t,this._isShake=!1,this._isUp=!1,this._point=this.node.getChildByName("point"),this.level.string="Lv"+t.level,this.progressBar.progress=0,this.initWeaponSize(),this.setPointPosArr(),this.setWeaponIcon(),this.setNodeAngel(),this._needAd=i||!1,this._needAd&&this.setWeaponAdBubble()},a.initWeaponSize=function(){var t=this._weaponObj.gridType.split("_"),e=Number(t[1]),n=Number(t[0]),i=m.instance.getGridSizeByRowCol(e,n);m.instance.iconScale;this.node.getComponent(c).setContentSize(i),this.point.setPosition(-i.width/2,i.height/2),this.icon.node.setScale(this.weaponObj.scale,this.weaponObj.scale)},a.setPointPosArr=function(){this._pointGridObj=[];for(var t=this._weaponObj.points,e=0;e<t.length;e++)for(var n=t[e],i=0;i<n.length;i++){if(n[i]){var o=new v;o.row=e,o.col=i,this._pointGridObj.push(o)}}},a.setWeaponIcon=function(){var t=this,e=W.weaponIconPath+this.weaponObj.res+"/spriteFrame";P.geSpriteFrame(e).then((function(e){t.icon.spriteFrame=e,t.bar.spriteFrame=e;var n=t.icon.getComponent(c).contentSize;t.bar.node.setPosition(f(0,-n.height/2,0));t.icon.getComponent(c).contentSize;t.icon.node.setScale(t.weaponObj.scale,t.weaponObj.scale)}))},a.setWeaponAdBubble=function(){for(var t=this,e=[],n=0;n<this.weaponObj.points.length;n++)e.push(this.weaponObj.points[n].join(""));var i=W.gridPath+"bubble_"+e.join("_")+"/spriteFrame";P.geSpriteFrame(i).then((function(e){t.bubble.spriteFrame=e;var n=t.node.getComponent(c).width,i=t.node.getComponent(c).height,o=new _;o.width=1.2*n,o.height=i,t.node.getComponent(c).setContentSize(o),t.point.setPosition(-o.width/2,o.height/2)}))},a.removeWeaponAdBubble=function(){this.bubble.destroy(),this.initWeaponSize(),this._needAd=!1},a.setBuildWeaponPos=function(t,e){this._weaponKey==t&&this.node.setPosition(e)},a.setIconYellow=function(){this.icon.getComponent(p).color=(new l).fromHEX("dbc464")},a.setIconDefault=function(){this.icon.getComponent(p).color=(new l).fromHEX("ffffff")},a.onSetIconStatus=function(t,e){this.weaponKey==t&&(e?this.setIconYellow():this.setIconDefault())},a.setNodeAngel=function(){var t=this._placeStatus?0:10;this.node.angle=t},a.onUpdateProgressBar=function(t,e){this.weaponKey==e&&(this.progressBar.progress=t)},a.onSetStatusInit=function(){this.setIconDefault(),this._isShake=!1,this._isUp=!1,this.onHideUpArrow(),d.stopAllByTarget(this.icon.node)},a.onSetIconShake=function(t){if(this.weaponKey==t&&!this._isShake){this._isShake=!0;var e=.1;this.icon.node.setPosition(0,0,0),d.stopAllByTarget(this.icon.node),E(this.icon.node).by(e,{position:f(-5,0,0)}).by(e,{position:f(5,0,0)}).by(e,{position:f(5,0,0)}).by(e,{position:f(-5,0,0)}).union().repeatForever().start()}},a.onSetIconUpArrow=function(t){var e=this;if(this.weaponKey==t&&!this._isUp)if(this._isUp=!0,this._buffItem)this._buffItem.showArrow();else{var n=W.weaponBuffPath;P.getPrefab(n).then((function(t){var n=S(t);e._buffItem||(n.parent=e.node,e._buffItem=n.getComponent(y),e._buffItem.init("arrow"))}))}},a.onSetIconBuff=function(t){var e=this;if(this.weaponKey==t)if(this._buffItem)this._buffItem.showBuff();else{var n=W.weaponBuffPath;P.getPrefab(n).then((function(t){var n=S(t);e._buffItem||(n.parent=e.node,e._buffItem=n.getComponent(y),e._buffItem.init("buff"))}))}},a.onHideUpArrow=function(){this._buffItem&&this._buffItem.hideArrow()},a.onPenWeaponPopup=function(){if(this._touchStatus==$.START)W.itemsPath,this.weaponObj.res},a.onWeaponRemove=function(t){this.weaponKey==t&&(this._weaponObj.hp>0&&(j.instance.subHp(this._weaponObj.hp,this.weaponKey),w.emit(O.UPDATE_HERO_HP)),w.emit(O.ADD_REMOVE_WEAPON_LIST,this.node),this.placeStatus=!1,this.setNodeAngel())},a.onWeapoPreRemove=function(){this._touchStatus==$.START&&(w.emit(O.ADD_PRE_WEAPON_LIST,this.node),this.placeStatus=!0,this.setNodeAngel())},a.onPlaceFinish=function(){this._touchStatus==$.MOVE&&w.emit(O.WEAPON_PlACE,this)},a.onWeaponUpgrade=function(t,e){var n=this;if(this._weaponKey==t){var i=this._weaponObj.level+1,o=this._weaponObj.weaponId,s=g.instance.getWeaponByLevel(i,o),a=C.instance.getSkillCfgById(s.skillId);a.doubleSkills.length>0?D.instance.show(W.PopupUI.WeaponSelectPopup,null,N.TOP,!1,(function(s){e&&n._weaponObj.hp>0&&(j.instance.subHp(n._weaponObj.hp,t),w.emit(O.UPDATE_HERO_HP)),n._weaponObj=g.instance.updateWeaponByLevel(i,o,s),n.level.string="Lv"+n._weaponObj.level,m.instance.updateGridItemData(t,n._weaponObj.id),n.setMergeEffect(),n.setWeaponIcon(),R.instance.setDoubleSkillGroup(n._weaponObj.weaponId,s.Id),e&&n._weaponObj.hp>0&&(j.instance.addHp(n._weaponObj.hp,t),w.emit(O.UPDATE_HERO_HP))}),a.doubleSkills):(e&&this._weaponObj.hp>0&&(j.instance.subHp(this._weaponObj.hp,t),w.emit(O.UPDATE_HERO_HP)),this.setWeaponUpgrade(t,i,o),e&&this._weaponObj.hp>0&&(j.instance.addHp(this._weaponObj.hp,t),w.emit(O.UPDATE_HERO_HP))),G.instance.guideMode&&w.emit(O.GUIDE_BATTLE_ACTION)}},a.setWeaponUpgrade=function(t,e,n){this._weaponObj=g.instance.getWeaponByLevel(e,n),this.level.string="Lv"+this._weaponObj.level,m.instance.updateGridItemData(t,this._weaponObj.id),this.setMergeEffect(),this.setWeaponIcon()},a.setMergeEffect=function(){var t=this,e=W.weaponMergePath;P.getPrefab(e).then((function(e){U.instance.playSound(4);var n=S(e);n.parent=t.node,n.getComponent(I).init()}))},a.onTouchStart=function(t){if(G.instance.guideMode&&(G.instance.curStep==M.GUIDE_STEP4_MERGE_WEAPON||G.instance.curStep==M.GUIDE_STEP11_PLACE_GRID)){var e=G.instance.getCurGuideData();if(this._weaponObj.weaponId!=e[0])return}var n=this.point.getComponent(c).convertToNodeSpaceAR(new b(t.x,t.y,0));!m.instance.checkPointinGrid(A(n.x,n.y),this._pointGridObj)||g.instance.isSelect||m.instance.gridEditMode||(this._isTouch=!0,g.instance.isSelect=!0,this._touchStatus=$.START)},a.onTouchMove=function(t){if(this._isTouch){this.onWeapoPreRemove(),this._touchStatus=$.MOVE;var e=this.node.parent.getComponent(c).convertToNodeSpaceAR(new b(t.x,t.y,0));this.node.setPosition(e),w.emit(O.WEAPON_MOVE,this),G.instance.guideMode&&w.emit(O.GUIDE_HIDE_FINGER)}},a.onTouchEnd=function(t){var e=this;if(this._isTouch){if(this._touchStatus==$.START)if(this._needAd)D.instance.showAdTipsPopup(1,this._weaponObj,(function(t){t&&e.removeWeaponAdBubble()}));else{if(G.instance.guideMode&&(G.instance.curStep==M.GUIDE_STEP2_DRAG_WEAPON||G.instance.curStep==M.GUIDE_STEP3_REFRESH_WEAPON||G.instance.curStep==M.GUIDE_STEP4_MERGE_WEAPON||G.instance.curStep==M.GUIDE_STEP5_DRAG_WEAPON||G.instance.curStep==M.GUIDE_STEP6_PURSE||G.instance.curStep==M.GUIDE_STEP3_REFRESH_WEAPON))return;D.instance.showWeaponDetailPopup(this._weaponObj)}this._isTouch=!1,g.instance.isSelect=!1,this.onPenWeaponPopup(),this.onPlaceFinish(),this.onHideUpArrow(),this._touchStatus=$.END}},a.onTouchCancle=function(t){this._isTouch&&(this._isTouch=!1,g.instance.isSelect=!1,this._touchStatus=$.CANCEL,w.emit(O.ADD_REMOVE_WEAPON_LIST,this.node),w.emit(O.SET_BATTLE_BTN_STATUS))},a.onEnable=function(){w.on(O.GAME_TOUCH_START,this.onTouchStart,this),w.on(O.GAME_TOUCH_MOVE,this.onTouchMove,this),w.on(O.GAME_TOUCH_END,this.onTouchEnd,this),w.on(O.GAME_TOUCH_CANCLE,this.onTouchEnd,this),w.on(O.WEAPON_REMOVE,this.onWeaponRemove,this),w.on(O.WEAPON_ICON_STATUS,this.onSetIconStatus,this),w.on(O.WEAPON_ICON_STATUS_INIT,this.onSetStatusInit,this),w.on(O.WEAPON_SHAKE,this.onSetIconShake,this),w.on(O.WEAPON_UPARROW,this.onSetIconUpArrow,this),w.on(O.WEAPON_BUFF,this.onSetIconBuff,this),w.on(O.WEAPON_UPGRADE,this.onWeaponUpgrade,this)},a.onDisable=function(){w.off(O.GAME_TOUCH_START,this.onTouchStart,this),w.off(O.GAME_TOUCH_MOVE,this.onTouchMove,this),w.off(O.GAME_TOUCH_END,this.onTouchEnd,this),w.off(O.GAME_TOUCH_CANCLE,this.onTouchEnd,this),w.off(O.WEAPON_REMOVE,this.onWeaponRemove,this),w.off(O.WEAPON_ICON_STATUS,this.onSetIconStatus,this),w.off(O.WEAPON_ICON_STATUS_INIT,this.onSetStatusInit,this),w.off(O.WEAPON_SHAKE,this.onSetIconShake,this),w.off(O.WEAPON_UPGRADE,this.onWeaponUpgrade,this),w.off(O.WEAPON_UPARROW,this.onSetIconUpArrow,this),w.off(O.WEAPON_BUFF,this.onSetIconBuff,this)},s(e,[{key:"point",get:function(){return this._point}},{key:"weaponObj",get:function(){return this._weaponObj}},{key:"weaponKey",get:function(){return this._weaponKey}},{key:"needAd",get:function(){return this._needAd}},{key:"placeStatus",set:function(t){this._placeStatus=t}}]),e}(T)).prototype,"level",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(V.prototype,"icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(V.prototype,"bar",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(V.prototype,"bubble",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(V.prototype,"progressBar",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=V))||K)),t("TouchStatus",function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.START=1]="START",t[t.MOVE=2]="MOVE",t[t.END=3]="END",t[t.CANCEL=4]="CANCEL",t}({})));a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponLevelModel.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"00201rzndxJprcJJQjlCRpH","WeaponLevelModel",void 0);e("WeaponLevelCfg",(function(){this.ClassName="WeaponLevel",this.Id=void 0,this.weaponId=void 0,this.level=void 0,this.fragment=void 0,this.blueprint=void 0,this.addDamage=void 0,this.addHp=void 0,this.addBuff=void 0,this.gold=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridData.ts","./ResourcesUtil.ts","./WeaponData.ts","./WeaponShopData.ts","./EventListener.ts","./GameEvent.ts","./Util.ts","./WeaponModel.ts","./Constants.ts","./WeaponItem.ts","./WeaponBgItem.ts","./SkillUpgradeData.ts","./CoinMode.ts","./HeroData.ts","./OpenPopupManager.ts","./GridModel.ts","./CfgMgr.ts","./GuideData.ts"],(function(e){var n,t,i,o,a,s,r,p,c,d,l,u,h,f,W,v,m,P,g,_,E,A,O,I,L,T,w,S,D,N,y,R,b;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.Node,p=e.instantiate,c=e.UITransform,d=e.v3,l=e.Layout,u=e.Intersection2D,h=e.v2,f=e.Component},function(e){W=e.GridData},function(e){v=e.ResourcesUtil},function(e){m=e.WeaponData},function(e){P=e.WeaponShopData},function(e){g=e.EventListener},function(e){_=e.GameEvent},function(e){E=e.Util},function(e){A=e.WeaponType},function(e){O=e.Constants},function(e){I=e.WeaponItem},function(e){L=e.WeaponBgItem},function(e){T=e.SkillUpgradeData},function(e){w=e.CoinObj},function(e){S=e.HeroData},function(e){D=e.OpenPopupManager},function(e){N=e.GridCfg},function(e){y=e.CfgMgr},function(e){R=e.GuideData,b=e.GuideStep}],execute:function(){var G,C,B,U,M,j,H,F,x;a._RF.push({},"89793GPOqNFqIh+e1RC7vod","WeaponManager",void 0);var k=s.ccclass,z=s.property;e("WeaponManager",(G=k("WeaponManager"),C=z(r),B=z(r),U=z(r),G((H=n((j=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n=e.call.apply(e,[this].concat(a))||this,i(n,"weaponList",H,o(n)),i(n,"preWeaponList",F,o(n)),i(n,"removeWeaponList",x,o(n)),n}t(n,e);var a=n.prototype;return a.init=function(){m.instance.init(),this.initWeaponListPos(),this.initWeaponList(),this.initRemoveWeaponList(!0)},a.initWeaponListPos=function(){var e=W.instance.getGridMapSize();this.weaponList.setPosition(-e.width/2,e.height/2),this.preWeaponList.setPosition(-e.width/2,e.height/2)},a.initWeaponList=function(){var e=this;W.instance.getGridItemMapData().forEach((function(n,t){var i=n.data,o=m.instance.getWeaponByWid(n.wid),a=O.weaponPath,s=W.instance.getItemPosByTiledObj(i);v.getPrefab(a).then((function(n){var i=p(n);i.parent=e.weaponList,i.setPosition(s),i.getComponent(I).init(o,t,!0)}))}))},a.initRemoveWeaponList=function(e,n){var t=this,i=P.instance.getWeaponPool(e,n);this.removeWeaponList.removeAllChildren();for(var o=function(){var e=i[a].id,n=i[a].type,o=i[a].needAd,s=E.getUuid(10),r=n?O.weaponPath:O.weaponBgPath;v.getPrefab(r).then((function(i){var a=p(i);if(a.setPosition(1e4,1e4),a.parent=t.removeWeaponList,n){var r=m.instance.getWeaponByWid(e);a.getComponent(I).init(r,s,!1,o)}else{var c=y.getDataById(new N,e);a.getComponent(L).init(c,s,!1,o)}t.updateRemoveLayOut()}))},a=0;a<i.length;a++)o()},a.onRebuildWeaponPos=function(){var e=this;W.instance.getGridItemMapData().forEach((function(n,t){for(var i=n.data,o=W.instance.getItemPosByTiledObj(i),a=e.weaponList.children,s=0;s<a.length;s++){a[s].getComponent(I).setBuildWeaponPos(t,o)}}))},a.showPurseFlyGoldAnim=function(){if(this.weaponList.children.length)for(var e=this.weaponList.children,n=0;n<e.length;n++){var t=e[n],i=t.getComponent(I).weaponObj;if(i.type==A.ECONOMY){var o=new w;o.pos=t.getComponent(c).convertToWorldSpaceAR(d(0,0,0)),o.num=i.damage,g.emit(_.GAME_CHANGE_COIN,o)}}},a.showHideRemoveList=function(e){this.removeWeaponList.active=e},a.updateRemoveLayOut=function(){var e=this.removeWeaponList.children.length,n=0-10*(e-3>0?e-3:0);this.removeWeaponList.getComponent(l).spacingX=n,this.removeWeaponList.getComponent(l).updateLayout(!0)},a.onAddRemoveWeaponList=function(e){e.parent=this.removeWeaponList,this.updateRemoveLayOut()},a.onAddPreWeaponList=function(e){e.parent=this.preWeaponList},a.onWeaponPlace=function(e){var n=this,t=W.instance.curWeaponTildeIndex;t.includes(-1)?(g.emit(_.WEAPON_PlACE_FINISH,e),this.removeSynAction(e),g.emit(_.SET_BATTLE_BTN_STATUS),g.emit(_.WEAPON_ICON_STATUS_INIT)):e.needAd?D.instance.showAdTipsPopup(1,e.weaponObj,(function(i){i?(e.removeWeaponAdBubble(),n._weaponPlace(e,t)):(g.emit(_.WEAPON_PlACE_FINISH,e),n.removeSynAction(e),g.emit(_.SET_BATTLE_BTN_STATUS),g.emit(_.WEAPON_ICON_STATUS_INIT))})):this._weaponPlace(e,t);R.instance.guideMode&&(R.instance.curStep!=b.GUIDE_STEP2_DRAG_WEAPON&&R.instance.curStep!=b.GUIDE_STEP5_DRAG_WEAPON&&R.instance.curStep!=b.GUIDE_STEP6_PURSE&&R.instance.curStep!=b.GUIDE_STEP7_DRAG_WEAPON&&R.instance.curStep!=b.GUIDE_STEP13_DRAG_WEAPON||0!=this.removeWeaponList.children.length||g.emit(_.GUIDE_BATTLE_ACTION))},a._weaponPlace=function(e,n){g.emit(_.WEAPON_PlACE_FINISH,e);for(var t=!1,i="",o=0,a=[],s=[],r=0;r<n.length;r++){var p=n[r],c=W.instance.getGridTiledByIndex(p),d=W.instance.getGridMapData();if(s.push(c),d[c.row][c.col]&&"0"!=d[c.row][c.col]){t||(t=!0);var l=d[c.row][c.col];a.push(l),W.instance.checkSameWeapoIdByKey(l,e.weaponObj.id)&&(o++,i=l)}}if(t){var u=e.weaponObj.level,h=e.weaponObj.weaponId;o==n.length&&m.instance.checkWeaponByLevel(u+1,h)?(e.node.removeFromParent(),g.emit(_.WEAPON_UPGRADE,i,!0)):(this.weaponRemove(a),this.weaponPlace(e,s),this.addHp(e.weaponObj,e.weaponKey))}else this.weaponPlace(e,s),this.addHp(e.weaponObj,e.weaponKey);var f=T.instance.getWeaponBuffSkillIds(e.weaponObj.weaponId);if(f.length>0){for(var v=W.instance.getGridMapData(),P=[],E=[],A=0;A<n.length;A++)E.push(W.instance.getGridTiledByIndex(n[A]));for(var O=W.instance.getNearbyGridIndexByTiled(E),I="",L=0;L<O.length;L++){var w=W.instance.getGridTiledByIndex(O[L]);I=v[w.row][w.col];var S=W.instance.getGridItemWid(I);if(0!=S){var D=m.instance.getWeaponByWid(S);D&&f.indexOf(D.skillId)>=0&&(P.includes(I)||P.push(I))}}for(var N=0;N<P.length;N++){var y=P[N];g.emit(_.WEAPON_BUFF,y)}}g.emit(_.SET_BATTLE_BTN_STATUS),g.emit(_.WEAPON_ICON_STATUS_INIT)},a.addHp=function(e,n){e.hp>0&&(S.instance.addHp(e.hp,n),g.emit(_.UPDATE_HERO_HP))},a.weaponRemove=function(e){for(var n=0;n<e.length;n++){var t=e[n];W.instance.deletGridDataByWeaponId(t),g.emit(_.WEAPON_REMOVE,t)}},a.removeSynAction=function(e){for(var n=e.node.getPosition(),t=!1,i="",o=this.removeWeaponList.children,a=[],s=0,r=0;r<o.length;r++){var p=o[r];if(p.getComponent(I)){var f=p.getChildByName("icon").getComponent(c).convertToWorldSpaceAR(d(0,0,0)),W=this.preWeaponList.getComponent(c).convertToNodeSpaceAR(f);if(u.circleCircle(h(n.x,n.y),100,h(W.x,W.y),100)){var v=p.getComponent(I),P=e.weaponObj.level,E=e.weaponObj.weaponId;!v.needAd&&e.weaponObj.id==v.weaponObj.id&&m.instance.checkWeaponByLevel(P+1,E)&&(t=!0,i=v.weaponKey)}0==s&&n.x<W.x&&(s=r+1),a.push(s+r)}}if(a.push(0==s?o.length+1:s-1),t)e.node.removeFromParent(),g.emit(_.WEAPON_UPGRADE,i,!1);else{e.node.parent=this.removeWeaponList,e.placeStatus=!1;var A=a.length-1;this.removeWeaponList.getComponent(l).enabled=!1,this.removeWeaponList.children[A].setSiblingIndex(a[A]),this.removeWeaponList.getComponent(l).enabled=!0,e.setNodeAngel(),this.updateRemoveLayOut()}},a.weaponPlace=function(e,n){e.node.parent=this.weaponList,W.instance.addGridDataByWeaponId(n,e.weaponObj.id,e.weaponObj.level,e.weaponKey);var t=W.instance.getItemPosByTiledObj(n);if(e.node.setPosition(t),e.placeStatus=!0,e.setNodeAngel(),R.instance.curStep==b.GUIDE_STEP5_DRAG_WEAPON){var i=R.instance.getCurGuideData();e.weaponObj.weaponId==i[0]&&g.emit(_.GUIDE_BATTLE_ACTION,e)}},a.onEnable=function(){g.on(_.ADD_REMOVE_WEAPON_LIST,this.onAddRemoveWeaponList,this),g.on(_.ADD_PRE_WEAPON_LIST,this.onAddPreWeaponList,this),g.on(_.WEAPON_PlACE,this.onWeaponPlace,this),g.on(_.WEAPON_REMOVE_REFRESH,this.initRemoveWeaponList,this),g.on(_.INIT_BUILD_WEAPON_POS,this.onRebuildWeaponPos,this)},a.onDisable=function(){g.off(_.ADD_REMOVE_WEAPON_LIST,this.onAddRemoveWeaponList,this),g.off(_.ADD_PRE_WEAPON_LIST,this.onAddPreWeaponList,this),g.off(_.WEAPON_PlACE,this.onWeaponPlace,this),g.off(_.WEAPON_REMOVE_REFRESH,this.initRemoveWeaponList,this),g.off(_.INIT_BUILD_WEAPON_POS,this.onRebuildWeaponPos,this)},a.clear=function(){m.instance.clear(),P.instance.clear()},n}(f)).prototype,"weaponList",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=n(j.prototype,"preWeaponList",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(j.prototype,"removeWeaponList",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=j))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponMergeItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.dragonBones,i=e.Component}],execute:function(){var s;n._RF.push({},"6f664azpR1P674rPvf42GZp","WeaponMergeItem",void 0);var c=o.ccclass;o.property,e("WeaponMergeItem",c("WeaponMergeItem")(s=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.init=function(){var e=this,t=this.node.getComponent(r.ArmatureDisplay);t.addEventListener(r.EventObject.COMPLETE,(function(){e.node.destroy()}),t)},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponModel.ts",["cc"],(function(i){var d;return{setters:[function(i){d=i.cclegacy}],execute:function(){d._RF.push({},"cef42/LHrdNd5rGXORftRTM","WeaponModel",void 0);i("WeaponCfg",(function(){this.ClassName="Weapon",this.Id=void 0,this.name=void 0,this.desc=void 0,this.type=void 0,this.gridType=void 0,this.grid=void 0,this.points=void 0,this.level=void 0,this.quality=void 0,this.damage=void 0,this.range=void 0,this.weight=void 0,this.cd=void 0,this.hp=void 0,this.addShield=void 0,this.addHp=void 0,this.targetType=void 0,this.sid=void 0,this.hcUp=void 0,this.skillIds=void 0,this.doubleLevel=void 0,this.upgradeSkillIds=void 0,this.isShow=void 0})),i("WeaponType",function(i){return i[i.ATTACK_PHYSICAL=1]="ATTACK_PHYSICAL",i[i.ATTACK_MAGIC=2]="ATTACK_MAGIC",i[i.ARMOR_SHIELD=3]="ARMOR_SHIELD",i[i.ARMOR_HP=4]="ARMOR_HP",i[i.ECONOMY=5]="ECONOMY",i}({})),i("WeaponSkillObj",(function(){this.id=void 0,this.weaponId=void 0,this.name=void 0,this.desc=void 0,this.res=void 0,this.scale=void 0,this.type=void 0,this.gridType=void 0,this.points=void 0,this.level=void 0,this.maxLevel=void 0,this.quality=void 0,this.targetType=void 0,this.cd=void 0,this.damage=void 0,this.range=void 0,this.skillId=void 0,this.hp=void 0,this.addHp=void 0,this.addShield=void 0,this.weight=void 0}));d._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponSelectPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./WeaponAdvancedItem.ts"],(function(e){var n,t,o,i,a,r,p,c,s,l,u,f,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,p=e.Node,c=e.Prefab,s=e.instantiate,l=e.Component},function(e){u=e.Constants},function(e){f=e.OpenPopupManager},function(e){d=e.WeaponAdvancedItem}],execute:function(){var h,v,P,b,y,A,g;a._RF.push({},"96107yYH2pJhb8rYAxG++Ai","WeaponSelectPopup",void 0);var m=r.ccclass,w=r.property;e("WeaponSelectPopup",(h=m("WeaponSelectPopup"),v=w(p),P=w(c),h((A=n((y=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,o(n,"list",A,i(n)),o(n,"weaponAdvancedPrefab",g,i(n)),n}t(n,e);var a=n.prototype;return a.show=function(e,n){this.setAdvanceList(e,n)},a.setAdvanceList=function(e,n){this.list.removeAllChildren();for(var t=0;t<n.length;t++){var o=n[t],i=s(this.weaponAdvancedPrefab);i.parent=this.list,i.getComponent(d).init(e,this.onCloseBtn,o)}},a.onCloseBtn=function(){f.instance.hide(u.PopupUI.WeaponSelectPopup)},n}(l)).prototype,"list",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=n(y.prototype,"weaponAdvancedPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponShopData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CfgMgr.ts","./Util.ts","./GridModel.ts","./WeaponShopModel.ts","./WeaponModel.ts","./GridData.ts","./WeaponData.ts","./GuideData.ts"],(function(e){var t,n,i,r,a,o,s,h,f,u,p;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy},function(e){i=e.CfgMgr},function(e){r=e.Util},function(e){a=e.GridCfg},function(e){o=e.WeaponShopCfg},function(e){s=e.WeaponType},function(e){h=e.GridData},function(e){f=e.WeaponData},function(e){u=e.GuideData,p=e.GuideStep}],execute:function(){n._RF.push({},"263acliHdNKY46x3YQSf7Pp","WeaponShopData",void 0),e("WeaponShopData",function(){function e(){this._curShop=1,this._shopCfg=void 0,this._weapon2Number=void 0,this._weaponGridData=new Map,this._coin=0,this._freeRefreshNumber=0,this._curRefreshNumber=0}var n=e.prototype;return n.init=function(){this._shopCfg=r.clone(i.getDataById(new o,this._curShop)),this._freeRefreshNumber=this._shopCfg.freeRefreshNumber,this._weapon2Number=this._shopCfg.weapon2Number,this._coin=0;for(var e=i.getCfgDataArray(new a),t=0;t<e.length;t++){var n=e[t];this._weaponGridData.set(n.Id,n)}},n.getGridCfgById=function(e){return this._weaponGridData.get(e)},n.upgradeSkill=function(e){for(var t=0;t<e.length;t++){var n=e[t];this._shopCfg[n.key]+=n.value}},n.getWeaponPool=function(e,t){t&&this._weapon2Number--;var n=this._shopCfg.weaponNumber;e&&(n+=this._shopCfg.freeWeapnNumber);var i=[];if(u.instance.guideMode&&(u.instance.curStep==p.GUIDE_STEP1_BATTLE_FIRST||u.instance.curStep==p.GUIDE_STEP4_MERGE_WEAPON||u.instance.curStep==p.GUIDE_STEP11_PLACE_GRID)){for(var a=u.instance.getCurGuideData(),o=0;o<a.length;o++)if(Number(a[o])<1e3){var h=new c;h.id=a[o],h.needAd=!1,h.type=0,h.level=0,i.push(h)}else{var f=this.getRandomWeapon(1,[],a[o]);i.push(f)}return i}for(var g=0;g<n;g++){var d=[this._shopCfg.gridWeight,this._shopCfg.weapon1Weight,Math.ceil(this._shopCfg.weapon2Weight*(100+this._shopCfg.weapon2WeightPer)/100),this._shopCfg.weapon3Weight,this._shopCfg.coinWeight],_=r.weightRandomIdx(d),l=new c;if(0==_){var v=this.getRandomPlaceGrid();l=v.id?v:this.getRandomWeapon(1,[])}else if(1==_||2==_||3==_){var C=_;l=this.getRandomWeapon(C,[s.ATTACK_PHYSICAL,s.ATTACK_MAGIC,s.ARMOR_HP,s.ARMOR_SHIELD])}else if(4==_){l=this.getRandomWeapon(1,[s.ECONOMY])}i.push(l)}if(1==this._freeRefreshNumber){var m=!1;for(var w in i)i[w].needAd||i[w].type!=s.ATTACK_PHYSICAL&&i[w].type!=s.ATTACK_MAGIC||(m=!0);if(!m){var R=this.getRandomWeapon(1,[s.ATTACK_PHYSICAL,s.ATTACK_MAGIC]);i[0]=R}}if(t){var W=!1;for(var A in i)2==i[A].level&&(W=!0);if(!W){var G=this.getRandomWeapon(2,[]);i[0]=G}}return i},n.getRandomWeapon=function(e,t,n){for(var i=f.instance.getWeaponPool(),a=[],o=[],s=0;s<i.length;s++){var h=i[s];h.level!=e||!(0==t.length||t.indexOf(h.type)>=0)||n&&n!=h.weaponId||(a.push(i[s].weight),o.push(s))}var u=new c;if(0==o.length)return u;var p=o[r.weightRandomIdx(a)];return u.id=i[p].id,u.type=i[p].type,u.needAd=3==e,u.level=e,u},n.getRandomPlaceGrid=function(){for(var e=h.instance.bagCfg.max_gridLen.split("_"),t=Number(e[0]),n=Number(e[1]),i=[],a=0;a<t;a++){for(var o=[],s=0;s<n;s++)o.push(1);i.push(o)}for(var f=h.instance.getGridMapData(),u=0;u<f.length;u++)for(var p=f[u],g=0;g<p.length;g++){p[g]&&(i[u][g]=0)}var d=this.getPlaceGridByWeight(i),_=new c;if(d.Id>0){var l=0!=r.weightRandomIdx(d.ad);_.id=d.Id,_.needAd=l,_.type=0,_.level=0}return _},n.getPlaceGridByWeight=function(e){var t=this,n=[];this._weaponGridData.size&&this._weaponGridData.forEach((function(i,r){t.countRegionOccurrences(e,i.points)&&n.push(i)}));var i=new a;if(n.length){for(var r=0,o=0,s=0,h=0;h<n.length;h++){s+=n[h].weight}var f=Math.floor(Math.random()*s),u=0;n.some((function(e,t){if(o=r+e.weight,f>=r&&f<o)return u=t,!0;r=o})),i=n[u]}return i},n.countRegionOccurrences=function(e,t){for(var n=0,i=t.length,r=t[0].length,a=0;a<=e.length-i;a++)for(var o=0;o<=e[0].length-r;o++){for(var s=!0,h=0;h<i;h++){for(var f=0;f<r;f++)if(e[a+h][o+f]!==t[h][f]){s=!1;break}if(!s)break}s&&n++}return n},n.clear=function(){this._shopCfg=null,this._coin=0,this._freeRefreshNumber=0,this._weaponGridData.clear()},t(e,[{key:"coin",get:function(){return this._coin},set:function(e){this._coin+=e}},{key:"price",get:function(){return Math.ceil(this._shopCfg.price*(100-this._shopCfg.discountPer)/100)}},{key:"freeRefreshNumber",get:function(){return this._freeRefreshNumber},set:function(e){this._freeRefreshNumber-=e}},{key:"weapon2Number",get:function(){return this._weapon2Number}},{key:"totalWeapon2Number",get:function(){return this._shopCfg.weapon2Number}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0;var c=e("WeaponShopObj",(function(){this.id=void 0,this.type=void 0,this.needAd=void 0,this.level=void 0}));n._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponShopModel.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"46fe46eWbxHUokIj306NYjr","WeaponShopModel",void 0);e("WeaponShopCfg",(function(){this.ClassName="WeaponShop",this.Id=void 0,this.weaponNumber=void 0,this.freeWeapnNumber=void 0,this.freeRefreshNumber=void 0,this.price=void 0,this.discountPer=void 0,this.coinWeight=void 0,this.gridWeight=void 0,this.weapon1Weight=void 0,this.weapon2Weight=void 0,this.weapon3Weight=void 0,this.weapon2WeightPer=void 0,this.weapon2Number=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponSkillInfoPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,e,t,p;return{setters:[function(o){n=o.inheritsLoose},function(o){e=o.cclegacy,t=o._decorator,p=o.Component}],execute:function(){var r;e._RF.push({},"736f5AFeelFm7qO9RP/zJ3Y","WeaponSkillInfoPopup",void 0);var u=t.ccclass;t.property,o("WeaponSkillInfoPopup",u("WeaponSkillInfoPopup")(r=function(o){function e(){return o.apply(this,arguments)||this}return n(e,o),e.prototype.show=function(){},e}(p))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponSkillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./ResourcesUtil.ts","./SpriteEx.ts","./GameEvent.ts","./BagData.ts","./LanguageManager.ts"],(function(e){var n,t,i,r,a,o,l,s,c,u,p,f,g,d,h,m;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Sprite,s=e.RichText,c=e.Component},function(e){u=e.Constants},function(e){p=e.EventListener},function(e){f=e.ResourcesUtil},function(e){g=e.SpriteEx},function(e){d=e.GameEvent},function(e){h=e.BagData},function(e){m=e.LanguageManager}],execute:function(){var b,v,I,y,E,F,P,_,L,k,D;a._RF.push({},"85fdaNs7RBNF6/zCQmWNvsT","WeaponSkillItem",void 0);var S=o.ccclass,w=o.property;e("WeaponSkillItem",(b=S("WeaponSkillItem"),v=w(g),I=w(g),y=w(l),E=w(s),b((_=n((P=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return n=e.call.apply(e,[this].concat(a))||this,i(n,"bgFrame",_,r(n)),i(n,"iconFrame",L,r(n)),i(n,"icon",k,r(n)),i(n,"desc",D,r(n)),n._skillId=0,n}t(n,e);var a=n.prototype;return a.init=function(e){this._skillId=e;var n=h.instance.getWeaponUpgradeSkillCfgById(e),t=h.instance.getWeaponObjById(n.weaponId),i=u.skillIconPath+n.icon+"/spriteFrame",r=m.instance.getLang(n.desc);if(r="<b>"+(r=r.replace(/ffffff/g,"071e3e").replace(/59c535/g,"ea35c1"))+"</b>",this.desc.string=!t||t.level>=n.weaponLevel?r:"<color=#b5fdff>Lv."+n.weaponLevel+": </color>"+r,this.bgFrame.index=!t||t.level>=n.weaponLevel?0:1,this.iconFrame.index=n.quality-1,f.setSpriteFrame(i,this.icon),this.bgFrame.index)for(var a=this.node.getComponentsInChildren(l),o=0;o<a.length;o++){a[o].grayscale=!0}},a.updateEquipInfo=function(){for(var e=this.node.getComponentsInChildren(l),n=0;n<e.length;n++){e[n].grayscale=!1}this.init(this._skillId)},a.onEnable=function(){p.on(d.UPDATE_POPUP_UPGRADE_INFO,this.updateEquipInfo,this)},a.onDisable=function(){p.off(d.UPDATE_POPUP_UPGRADE_INFO,this.updateEquipInfo,this)},n}(c)).prototype,"bgFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(P.prototype,"iconFrame",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(P.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(P.prototype,"desc",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=P))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponStylePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagData.ts","./Constants.ts","./ResourcesUtil.ts","./OpenPopupManager.ts","./LanguageManager.ts","./SkillData.ts","./WeaponSkillItem.ts"],(function(e){var t,i,n,l,a,o,s,r,p,c,u,h,g,f,d,k,S,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Label,r=e.Sprite,p=e.Node,c=e.UITransform,u=e.Component},function(e){h=e.BagData},function(e){g=e.Constants},function(e){f=e.ResourcesUtil},function(e){d=e.OpenPopupManager},function(e){k=e.LanguageManager},function(e){S=e.SkillData},function(e){b=e.WeaponSkillItem}],execute:function(){var m,v,y,_,I,w,B,x,W,P,z,C,L,D,F,M,T;a._RF.push({},"3e0b9TneVNF66IV6NFveBks","WeaponStylePopup",void 0);var R=o.ccclass,U=o.property;e("WeaponStylePopup",(m=R("WeaponStylePopup"),v=U(s),y=U(s),_=U(r),I=U(r),w=U(p),B=U(p),x=U(p),m((z=t((P=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"title",z,l(t)),n(t,"level",C,l(t)),n(t,"icon",L,l(t)),n(t,"element",D,l(t)),n(t,"weaponSkillItem",F,l(t)),n(t,"leftBtn",M,l(t)),n(t,"rightBtn",T,l(t)),t._index=0,t._skills=[],t}i(t,e);var a=t.prototype;return a.show=function(e,t){this._index=0;var i=h.instance.getWeaponCfgById(e);this._skills=[];for(var n=0;n<i.skillIds.length;n++){var l=i.skillIds[n],a=S.instance.getSkillCfgById(l);if(l==t&&(this._index=n),0==a.doubleSkills.length)a.name=i.name,this._skills.push(a);else for(var o=0;o<a.doubleSkills.length;o++){var s=S.instance.getSkillCfgById(a.doubleSkills[o]);a.doubleSkills[o]==t&&(this._index=n),this._skills.push(s)}}this.setWeaponSkill()},a.setWeaponSkill=function(){var e=this;0==this._index?this.leftBtn.active=!1:this.leftBtn.active=!0,this._index==this._skills.length-1?this.rightBtn.active=!1:this.rightBtn.active=!0;var t=this._index+1>=5?5:this._index+1;this.level.string=k.instance.getLang("bag.craftt",[t]);var i=this._skills[this._index];if(this.title.string=k.instance.getLang(i.name),i.desc){this.weaponSkillItem.active=!0;var n=h.instance.getWeaponSkillArrByWeaponId(i.Id);this.weaponSkillItem.getComponent(b).init(n[0])}else this.weaponSkillItem.active=!1;var l=g.weaponIconPath+i.res+"/spriteFrame";f.geSpriteFrame(l).then((function(t){e.icon.spriteFrame=t;var i=e.icon.getComponent(c).contentSize,n=Math.min(190/i.width,190/i.height);e.icon.node.setScale(n,n)}))},a.onLeftTouch=function(){this._index>0&&(this._index--,this.setWeaponSkill())},a.onRightTouch=function(){this._index<this._skills.length-1&&(this._index++,this.setWeaponSkill())},a.onCloseTouch=function(){d.instance.hide(g.PopupUI.WeaponStylePopup)},t}(u)).prototype,"title",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(P.prototype,"level",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(P.prototype,"icon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(P.prototype,"element",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(P.prototype,"weaponSkillItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(P.prototype,"leftBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(P.prototype,"rightBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=P))||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/WeeklyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./DailySubItem.ts","./ChestModel.ts","./RewardChestItem.ts","./GameEvent.ts","./EventListener.ts"],(function(e){var t,i,n,r,o,s,a,l,c,u,p,f,b,m,d,h,y,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Node,l=e.Label,c=e.ProgressBar,u=e.Prefab,p=e.instantiate,f=e.Component},function(e){b=e.QuestData},function(e){m=e.DailySubItem},function(e){d=e.ChestAnim},function(e){h=e.RewardChestItem},function(e){y=e.GameEvent},function(e){w=e.EventListener}],execute:function(){var g,v,k,I,L,P,C,D,E,_,z,A,x,R,S;o._RF.push({},"a3c4e4lbHdIS4ESfMF/s5Ta","WeeklyItem",void 0);var U=s.ccclass,T=s.property;e("WeeklyItem",(g=U("WeeklyItem"),v=T(a),k=T(a),I=T(l),L=T(c),P=T(u),C=T(u),g((_=t((E=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"taskList",_,r(t)),n(t,"boxList",z,r(t)),n(t,"credits",A,r(t)),n(t,"progress",x,r(t)),n(t,"taskItem",R,r(t)),n(t,"rewardItem",S,r(t)),t}i(t,e);var o=t.prototype;return o.init=function(){this.setContent()},o.setContent=function(){var e=this,t=b.instance.dailyQuest;null!=t&&(this.credits.string=t.weeklyPoint+"",this.progress.progress=t.weeklyPoint/100,t.weekly.forEach((function(t,i){if(e.taskList.children[i])e.taskList.children[i].getComponent(m).init(t);else{var n=p(e.taskItem);n.getComponent(m).init(t),n.parent=e.taskList}})),this.boxList.removeAllChildren(),t.weeklyPointsRewards.forEach((function(i,n){var r=d.Received;if(i.draw||(r=t.weeklyPoint<i.points?d.Unavailable:d.Available),e.boxList.children[n])e.boxList.children[n].getComponent(h).init(i.rewards,i.points,r,"quest",i.id);else{var o=p(e.rewardItem);o.getComponent(h).init(i.rewards,i.points,r,"quest",i.id),o.parent=e.boxList}})))},o.claimReward=function(e){},o.onEnable=function(){w.on(y.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)},o.onDisable=function(){w.off(y.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)},t}(f)).prototype,"taskList",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(E.prototype,"boxList",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(E.prototype,"credits",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(E.prototype,"progress",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(E.prototype,"taskItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(E.prototype,"rewardItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=E))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/WithdrawPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./WalletData.ts","./InviteData.ts","./WalletManager.ts","./LanguageManager.ts","./GameEvent.ts","./EventListener.ts"],(function(n){var t,e,i,a,o,r,l,c,u,s,p,d,h,b,f,w,g,L;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){o=n.cclegacy,r=n._decorator,l=n.EditBox,c=n.Label,u=n.Node,s=n.Component},function(n){p=n.OpenPopupManager},function(n){d=n.Constants},function(n){h=n.WalletData},function(n){b=n.InviteData},function(n){f=n.WalletManager},function(n){w=n.LanguageManager},function(n){g=n.GameEvent},function(n){L=n.EventListener}],execute:function(){var m,v,_,y,B,W,M,E,P,D,x,z,C,T,k,U,A;o._RF.push({},"4028cv4/uBMn75KBycwPxXo","WithdrawPopup",void 0);var F=r.ccclass,I=r.property;n("WithdrawPopup",(m=F("WithdrawPopup"),v=I(l),_=I(c),y=I(c),B=I(u),W=I(c),M=I(u),E=I(c),m((x=t((D=function(n){function t(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return t=n.call.apply(n,[this].concat(o))||this,i(t,"amountEditBox",x,a(t)),i(t,"balanceLabel",z,a(t)),i(t,"feeLabel",C,a(t)),i(t,"dropdownMenu",T,a(t)),i(t,"tokenLabel",k,a(t)),i(t,"disconnectBtn",U,a(t)),i(t,"withdrawLabel",A,a(t)),t._address="",t._amount="0.0",t._curToken="usdt",t}e(t,n);var o=t.prototype;return o.show=function(){this.balanceLabel.string=Number(b.instance.usdtBalance.current).toFixed(2),this.onUpdateWallet()},o.onAddressChange=function(n){this._address=n},o.onAmountChange=function(n){this._amount=n},o.onMaxBtn=function(){this._amount=Number(b.instance.usdtBalance.current).toFixed(2),this.amountEditBox.string=this._amount},o.onSwitchDropdown=function(){this.dropdownMenu.active=!this.dropdownMenu.active},o.onTokenChange=function(n,t){this._curToken=t,this.tokenLabel.string=t.toLocaleUpperCase(),this.dropdownMenu.active=!1},o.onWithdrawBtn=function(){h.instance.withdraw(this._curToken,this._amount)},o.onDisconnect=function(){f.instance.disconnect()},o.onUpdateWallet=function(){f.instance.isConnected()?(this.disconnectBtn.active=!0,this.withdrawLabel.string=w.instance.getLang("wallet.withdraw")):(this.disconnectBtn.active=!1,this.withdrawLabel.string=w.instance.getLang("wallet.connect"))},o.onCloseBtn=function(){p.instance.hide(d.PopupUI.WithdrawPopup)},o.onEnable=function(){L.on(g.UPDATE_WALLET_INFO,this.onUpdateWallet,this)},o.onDisable=function(){L.on(g.UPDATE_WALLET_INFO,this.onUpdateWallet,this)},t}(s)).prototype,"amountEditBox",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(D.prototype,"balanceLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(D.prototype,"feeLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(D.prototype,"dropdownMenu",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(D.prototype,"tokenLabel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(D.prototype,"disconnectBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(D.prototype,"withdrawLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=D))||P));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});